(()=>{var e={9853:e=>{var t=.1,n="function"==typeof Float32Array;function s(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function o(e){return 3*e}function r(e,t,n){return((s(t,n)*e+i(t,n))*e+o(t))*e}function a(e,t,n){return 3*s(t,n)*e*e+2*i(t,n)*e+o(t)}function l(e){return e}e.exports=function(e,s,i,o){if(!(0<=e&&e<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===s&&i===o)return l;for(var c=n?new Float32Array(11):new Array(11),h=0;h<11;++h)c[h]=r(h*t,e,i);return function(n){return 0===n?0:1===n?1:r(function(n){for(var s=0,o=1;10!==o&&c[o]<=n;++o)s+=t;--o;var l=s+(n-c[o])/(c[o+1]-c[o])*t,h=a(l,e,i);return h>=.001?function(e,t,n,s){for(var i=0;i<4;++i){var o=a(t,n,s);if(0===o)return t;t-=(r(t,n,s)-e)/o}return t}(n,l,e,i):0===h?l:function(e,t,n,s,i){var o,a,l=0;do{(o=r(a=t+(n-t)/2,s,i)-e)>0?n=a:t=a}while(Math.abs(o)>1e-7&&++l<10);return a}(n,s,s+t,e,i)}(n),s,o)}}},164:(e,t,n)=>{"use strict";n.d(t,{Custom:()=>u.S,Fragment:()=>a.F,MapPool:()=>i.F,Reaction:()=>s.q,c:()=>o.c,createElement:()=>l,createRef:()=>c,init$:()=>r.F,renderRoot:()=>h.f});var s=n(7477),i=n(5229),o=n(8290),r=n(9092),a=n(7918);function l(e,t){const n=t??{children:void 0};if(arguments.length>2)if(Array.isArray(arguments[2]))n.children=arguments[2];else{const e=[];for(let t=2;t<arguments.length;t++)e.push(arguments[t]);n.children=e}return"string"==typeof e?{kind:"dom",name:e,props:n}:e===a.F?{kind:"fragment",name:e,props:n}:{kind:"custom",name:e,props:n}}function c(){return{current:null}}var h=n(1907),u=n(5183)},5183:(e,t,n)=>{"use strict";n.d(t,{S:()=>u,T:()=>d});var s=n(8280),i=n(8290),o=n(9322),r=n(4731),a=n(9092),l=n(7354),c=Object.defineProperty,h=(e,t,n)=>(((e,t,n)=>{t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class u{constructor(e,t,n,i,o){this.props=e,this.directParent=t,this.domParent=n,this.index=i,this.skipInit$=o,h(this,"kind","custom"),h(this,"subComponent",null),h(this,"order"),h(this,"key"),h(this,"__ref",new WeakRef(this)),h(this,"__removed",!1),this.order=s.p.key(t.order,i),this.key=this.props?.key??t.key+i}updateWithNewProps(e){(0,i.rK)(this.props,e)||(this.props=e,this.update())}mount(){this.skipInit$||(0,a.F)(this),this.runRender(),r.S.didMountStack.add(this.__ref)}runRender(){if(this.__removed)return;r.S.renderedList.add(this),r.S.push(this.__ref);const e=this.render();r.S.pop(),null!==e?this.subComponent=o.d.component(e,this.subComponent,this,this.domParent,0):null!==this.subComponent&&(l.n.component(this.subComponent),this.subComponent=null)}update(){this.runRender(),r.S.didUpdateStack.add(this.__ref)}forceUpdate(){r.S.markDirty(this.__ref)}componentDidMount(){}componentDidUpdate(){}componentWillUnmount(){}}const m=new Map;function d(e,t,n,s){if(u.isPrototypeOf(e.name)){const{name:i,props:o}=e,r=new i(o,t,n,s,!1);return r.mount(),r}const{name:i,props:o}=e,r=m.get(i);if(r){const e=new r(o,t,n,s,!0);return e.mount(),e}const a=class extends u{render(){return i(this.props)}};m.set(i,a);const l=new a(o,t,n,s,!0);return l.mount(),l}},2230:(e,t,n)=>{"use strict";n.d(t,{J:()=>h,g:()=>c});var s=n(4113),i=n(9322),o=n(8280),r=n(5229),a=Object.defineProperty,l=(e,t,n)=>(((e,t,n)=>{t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const c=new r.F,h=new class{constructor(){l(this,"pool",[]),l(this,"emptyProps",{})}returnComponent(e){e.props=this.emptyProps,e.inserted.length>0&&(e.inserted.length=0),e.subComponents.size>0&&(e.subComponents=c.newMap()),e.siblings=new WeakMap,this.pool.push(e)}newComponent(e,t,n,r){const a=this.pool.pop();if(a){const{name:l,props:c}=e,h="svg"===l?"svg":n.namespace;return a.name=l,a.props=c,a.element="dom"===h?document.createElement(l):document.createElementNS("http://www.w3.org/2000/svg",l),a.key=c?.key??t.key+r,a.order=o.p.key(t.order,r),a.directParent=t,a.domParent=n,a.index=r,a.namespace=h,(0,s.ek)(a.element,a.namespace,c),a.subComponents=i.d.subComponents(a,a,c.children,a.subComponents),o.p.insert(n,a),a}return function(e,t,n,r){const{name:a,props:l}=e,h="svg"===a?"svg":n.namespace,u={kind:"dom",name:a,props:l,element:"dom"===h?document.createElement(a):document.createElementNS("http://www.w3.org/2000/svg",a),order:o.p.key(t.order,r),key:l?.key??t.key+r,inserted:[],subComponents:c.newMap(),siblings:new WeakMap,directParent:t,domParent:n,index:r,namespace:h};return(0,s.ek)(u.element,u.namespace,l),u.subComponents=i.d.subComponents(u,u,l.children,u.subComponents),o.p.insert(n,u),u}(e,t,n,r)}}},7918:(e,t,n)=>{"use strict";n.d(t,{F:()=>l});var s=n(2230),i=n(8280),o=n(9322),r=Object.defineProperty,a=(e,t,n)=>(((e,t,n)=>{t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class l{constructor(e,t,n,r){this.meta=e,this.directParent=t,this.domParent=n,this.index=r,a(this,"kind","fragment"),a(this,"order"),a(this,"key"),a(this,"subComponents",s.g.newMap()),this.order=i.p.key(t.order,r),this.key=e.props?.key??t.key+r,this.subComponents=o.d.subComponents(this,n,e.props.children,this.subComponents)}}},6635:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});var s,i=n(8280),o=Object.defineProperty;class r{static makeTextComponent(e,t,n,s){const o=this.components.pop();return o?(function(e,t,n,s,o){e.meta=t,e.key=n.key+o,e.order=i.p.key(n.order,o),e.element.data=t,e.domParent=s,e.index=o,i.p.insert(s,e)}(o,e,t,n,s),o):function(e,t,n,s){const o={kind:"text",element:document.createTextNode(e),order:i.p.key(t.order,s),key:t.key+s,meta:e,index:s,domParent:n};return i.p.insert(n,o),o}(e,t,n,s)}static add(e){this.components.push(e)}}((e,t,n)=>{t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(r,"symbol"!=typeof(s="components")?s+"":s,[])},1907:(e,t,n)=>{"use strict";n.d(t,{f:()=>l});var s=Object.defineProperty,i=(e,t,n)=>(((e,t,n)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class o{constructor(e){this.element=e,i(this,"order","1"),i(this,"key","root"),i(this,"inserted",[]),i(this,"siblings",new WeakMap),i(this,"namespace"),this.namespace="svg"===e.nodeName?"svg":"dom"}}var r=n(9322),a=n(4731);function l(e,t){if(null===t)throw new Error("Cottontail render: Root element is null");if(null==e)throw new Error("Cottontail render: Meta is null");"number"==typeof e&&(e=e.toString());const n=new o(t);r.d.component(e,null,n,n,0),a.S.drawFrame()}Object.defineProperty},4731:(e,t,n)=>{"use strict";n.d(t,{S:()=>l});var s=n(8280),i=n(8290),o=Object.defineProperty,r=(e,t,n)=>(((e,t,n)=>{t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const a=class{static push(e){this.currentComponentOrReaction.push(e)}static pop(){this.currentComponentOrReaction.pop()}static getCurrent(){return this.currentComponentOrReaction[this.currentComponentOrReaction.length-1]??null}static markDirty(e){const t=e.deref();t&&("custom"===t.kind?this.dirtyComponents.add(e):this.dirtyReactions.add(e)),this.queueRender()}static queueRender(){this.queued||(this.queued=!0,requestAnimationFrame(this.drawFrame))}};r(a,"currentComponentOrReaction",[]),r(a,"dirtyReactions",new Set),r(a,"dirtyComponents",new Set),r(a,"insertsStack",new Set),r(a,"didMountStack",new Set),r(a,"didUpdateStack",new Set),r(a,"queued",!1),r(a,"renderedList",new Set),r(a,"renderList",[]),r(a,"drawFrame",(()=>{const{renderList:e,renderedList:t}=a;for((0,i.kB)("🐇Reactions");a.dirtyReactions.size>0;){const e=a.dirtyReactions.values().next();if(!e.done){const t=e.value;a.dirtyReactions.delete(t),t.deref()?.run()}}(0,i.PZ)("🐇Reactions");for(const t of a.dirtyComponents.values()){const n=t.deref();n&&e.push(n)}a.dirtyComponents.clear(),e.sort(((e,t)=>e.order.localeCompare(t.order)));for(const n of e)t.has(n)||n.update();e.length=0,t.clear(),(0,i.kB)("🐇Inserts");for(const e of a.insertsStack)(0,s.h)(e);a.insertsStack.clear(),(0,i.PZ)("🐇Inserts"),(0,i.kB)("🐇Mount/Update");for(const e of a.didMountStack.values()){const t=e.deref();t&&t.componentDidMount()}a.didMountStack.clear();for(const e of a.didUpdateStack.values()){const t=e.deref();t&&t.componentDidUpdate()}a.didUpdateStack.clear(),(0,i.PZ)("🐇Mount/Update"),a.queued=!1}));let l=a},9092:(e,t,n)=>{"use strict";n.d(t,{F:()=>o});var s=n(4731);const i=!1;function o(e){for(const t in e)if(t.startsWith("$")){const n=e[t];if(!(n instanceof Function)){const o=`__${t}`,r=new Set;Object.defineProperties(e,{[o]:{value:n,writable:!0},[t]:{get(){const e=s.S.getCurrent();return e&&r.add(e),this[o]},set(e){if(this[o]===e)return;i&&console.log(`${o} <-`,e),this[o]=e;const t=s.S.getCurrent();t&&r.delete(t);for(const e of r.values())e.deref()?s.S.markDirty(e):r.delete(e);r.clear()}}})}}}},7477:(e,t,n)=>{"use strict";n.d(t,{q:()=>s});var s,i,o=n(4731),r=n(8290),a=Object.defineProperty,l=(e,t,n)=>(((e,t,n)=>{t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);(i=s||(s={})).auto=function(e,t,n){const s=new c(e,n);t[Symbol()]=s,s.run()},i.value=function(e,t,n,s){const i=new u(e,t,s);n[Symbol()]=i,i.run()},i.object=function(e,t,n,s){const i=new h(e,t,s);n[Symbol()]=i,i.run()};class c{constructor(e,t){this.fn=e,this.name=t,l(this,"kind","reaction"),l(this,"__ref",new WeakRef(this))}run(){o.S.push(this.__ref),this.fn(),o.S.pop()}}class h{constructor(e,t,n){this.calc=e,this.result=t,this.name=n,l(this,"kind","reaction"),l(this,"__ref",new WeakRef(this)),l(this,"value"),o.S.push(this.__ref),this.value=this.calc(),o.S.pop()}run(){o.S.push(this.__ref);const e=this.calc();o.S.pop(),(0,r.b9)(this.value,e)||(this.value=e,this.result(e))}}class u{constructor(e,t,n){this.calc=e,this.result=t,this.name=n,l(this,"kind","reaction"),l(this,"__ref",new WeakRef(this)),l(this,"value"),o.S.push(this.__ref),this.value=this.calc(),o.S.pop()}run(){o.S.push(this.__ref);const e=this.calc();o.S.pop(),this.value!==e&&(this.value=e,this.result(e))}}},5229:(e,t,n)=>{"use strict";n.d(t,{F:()=>i});var s=Object.defineProperty;class i{constructor(){var e;((e,t,n)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="maps")?e+"":e,[])}returnMap(e){e.clear(),this.maps.push(e)}newMap(){return this.maps.pop()||new Map}}},8280:(e,t,n)=>{"use strict";n.d(t,{h:()=>i,p:()=>o});var s=n(4731);function i(e){const{inserted:t,siblings:n,element:s}=e;let i=null;for(let e=t.length-1;e>=0;e--){const o=t[e];if(null===i)n.has(o.element)||(s.insertBefore(o.element,null),n.set(o.element,null));else{const e=n.get(i.element);void 0!==e&&e!==o.element&&(s.insertBefore(o.element,i.element),n.set(i.element,o.element),n.has(o.element)||n.set(o.element,null))}i=o}}class o{static key(e,t){return e+String.fromCharCode(t+48)}static insert(e,t){const{inserted:n}=e,{order:i,key:o}=t;for(let r=n.length-1;r>=0;r--){const a=n[r],l=n[r+1];if(i>=a.order)return void(o!==a.key&&(l?(n.splice(r+1,0,t),s.S.insertsStack.add(e)):(n.push(t),s.S.insertsStack.add(e))))}n.unshift(t),s.S.insertsStack.add(e)}static move(e,t){const{inserted:n}=e,{key:s}=t,i=n.findIndex((e=>e.key===s));i>=0&&n.splice(i,1),this.insert(e,t)}static remove(e,t){const{inserted:n,siblings:s}=e,{key:i}=t,o=n.findIndex((e=>e.key===i));if(o>=0){const[e]=n.splice(o,1);s.delete(e.element),e.element.remove()}}}},7354:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var s=n(2230),i=n(6635),o=n(8280);class r{static component(e){switch(e.kind){case"text":return r.textComponent(e);case"dom":return r.domComponent(e);case"custom":return r.customComponent(e)}}static textComponent(e){o.p.remove(e.domParent,e),i.x.add(e)}static domComponent(e){o.p.remove(e.domParent,e);for(const t of e.subComponents.values())r.component(t);s.J.returnComponent(e)}static customComponent(e){e.__removed=!0,e.componentWillUnmount(),null!==e.subComponent&&(r.component(e.subComponent),e.subComponent=null)}}},9322:(e,t,n)=>{"use strict";n.d(t,{d:()=>h});var s=n(4113),i=n(2230),o=n(6635),r=n(7354),a=n(8280),l=n(5183),c=n(7918);class h{static component(e,t,n,s,i){return null===e?(null!==t&&r.n.component(t),null):"number"==typeof e?h.text(e.toString(),t,n,s,i):"string"==typeof e?h.text(e,t,n,s,i):"dom"===e.kind?h.dom(e,t,n,s,i):"fragment"===e.kind?h.fragment(e,t,n,s,i):h.custom(e,t,n,s,i)}static fragment(e,t,n,s,i){if(null===t)return new c.F(e,n,s,i);if("fragment"===t.kind){const o=t.order,r=a.p.key(n.order,i);if(o!==r){t.index=i,t.order=r;const{subComponents:e}=t;for(const n of e.values()){const e=a.p.key(t.order,n.index);if(n.order!==e)switch(n.order=e,n.kind){case"dom":case"text":a.p.move(s,n);break;case"custom":n.update()}}}return t.meta.props.children=e.props.children,t.subComponents=h.subComponents(t,s,e.props.children,t.subComponents),t}return r.n.component(t),new c.F(e,n,s,i)}static dom(e,t,n,o,l){if(null===t)return i.J.newComponent(e,n,o,l);if(e.kind===t.kind&&e.name===t.name){const i=t.order,r=a.p.key(n.order,l);return i!==r&&(t.index=l,t.order=r,a.p.move(o,t)),(0,s.FO)(t.element,t.namespace,e.props,t.props),t.name=e.name,t.props=e.props,t.subComponents=h.subComponents(t,t,e.props.children,t.subComponents),t}return r.n.component(t),i.J.newComponent(e,n,o,l)}static text(e,t,n,s,i){if(!t)return o.x.makeTextComponent(e,n,s,i);if("text"===t?.kind){const o=t.order,r=a.p.key(n.order,i);return o!==r&&(t.index=i,t.order=r,a.p.move(s,t)),t.meta===e||(t.element.nodeValue=e,t.meta=e),t}return r.n.component(t),o.x.makeTextComponent(e,n,s,i)}static custom(e,t,n,s,i){if(!t)return(0,l.T)(e,n,s,i);if("custom"===t.kind&&t.constructor===e.name){const o=t.order,r=a.p.key(n.order,i);if(r!==o){t.index=i,t.order=r;const{subComponent:e}=t;if(null!==e){const n=a.p.key(t.order,e.index);if(e.order!==n)switch(e.order=n,e.kind){case"dom":case"text":a.p.move(s,e);break;case"custom":e.update()}}}return t.updateWithNewProps(e.props),t}return r.n.component(t),(0,l.T)(e,n,s,i)}static subComponents(e,t,n,s){if(!n){for(const e of s.values())r.n.component(e);return s.clear(),s}const o=i.g.newMap();for(let i=n.length-1;i>=0;i--){const r=n[i];null!=r&&h.subComponent(r,e,t,s,o,i)}for(const e of s.values())r.n.component(e);return i.g.returnMap(s),o}static subComponent(e,t,n,s,i,o){const r="string"==typeof e||"number"==typeof e?o.toString():e.props?.key??o.toString(),a=h.component(e,s.get(r)??null,t,n,o);return s.delete(r),a&&i.set(r,a),a}}},4113:(e,t,n)=>{"use strict";function s(e,t,n){for(const s in n){const o=t[s],r=n[s];void 0!==r&&(void 0===o||o!==r)&&i(e,s,r)}for(const s in t){const i=t[s];void 0===n[s]&&void 0!==i&&(e.style[s]="")}}function i(e,t,n){"number"==typeof n&&function(e){switch(e){case"width":case"minWidth":case"height":case"minHeight":case"top":case"left":case"right":case"bottom":case"fontSize":case"borderWidth":case"borderRadius":case"padding":case"paddingTop":case"paddingLeft":case"paddingRight":case"paddingBottom":case"gap":case"margin":case"marginTop":case"marginLeft":case"marginRight":case"marginBottom":case"lineHeight":case"letterSpacing":case"strokeWidth":case"outlineWidth":case"outlineOffset":case"strokeDashoffset":case"strokeDasharray":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"borderTopLeftRadius":case"borderTopRightRadius":case"borderBottomLeftRadius":case"borderBottomRightRadius":return!0;default:return!1}}(t)?e.style[t]=n+"px":e.style[t]=n}function o(e,t,n){for(const s in n)void 0!==n[s]&&a(e,t,s,n[s])}function r(e,t,n,i){for(const o in n){const r=i[o],c=n[o];void 0!==c?void 0===r?a(e,t,o,c):r!==c&&(o.startsWith("on")?(l(e,o,r),a(e,t,o,c)):"style"===o?s(e,r,c):a(e,t,o,c)):l(e,o,r)}for(const t in i){const s=i[t];void 0===n[t]&&void 0!==s&&l(e,t,s)}}function a(e,t,n,s){switch(n){case"key":case"children":break;case"className":e.setAttribute("class",s);break;case"value":e[n]=s;break;case"style":!function(e,t){for(const n in t)i(e,n,t[n])}(e,s);break;case"ref":s.current=e;break;default:if("svg"===t&&function(e,t,n){switch(t){case"strokeWidth":return e.setAttribute("stroke-width",n),!0;case"strokeLinejoin":return e.setAttribute("stroke-linejoin",n),!0}return!1}(e,n,s))break;n.startsWith("on")?e.addEventListener(n.slice(2).toLowerCase(),s):"boolean"==typeof s?s?e.setAttribute(n,""):e.removeAttribute(n):e.setAttribute(n,s)}}function l(e,t,n){t.startsWith("on")?e.removeEventListener(t.slice(2).toLowerCase(),n):"className"===t?e.removeAttribute("class"):"ref"===t?n.current=null:e.removeAttribute(t)}n.d(t,{ek:()=>o,FO:()=>r})},8290:(e,t,n)=>{"use strict";function s(e,t){for(const n in e)if(e[n]!==t[n])return!1;return!0}function i(e,t){if(t.children!==e.children)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function o(e,...t){if(1===e.length)return e[0];let n="";for(let s=0;s<e.length;s++)t[s]&&(n+=e[s]);return n.trim()}function r(e){}function a(e){}n.d(t,{PZ:()=>a,b9:()=>s,c:()=>o,kB:()=>r,rK:()=>i}),n(1907)},829:(e,t,n)=>{"use strict";function s(e){return e.id.slice(0,7)}n.d(t,{vX:()=>s})},320:(e,t,n)=>{"use strict";n.d(t,{u:()=>i,v:()=>s});const s="EMPTY_MERGE",i={oldFile:"Uncommitted merge",newFile:"Uncommitted merge",patchType:" ",stagedType:" ",unStagedType:" ",conflicted:!1,id:s,isImage:!1}},6815:(e,t,n)=>{"use strict";function s(){let e;return{promise:new Promise((t=>{e=t})),resolver:e}}n.d(t,{T:()=>s})},9817:(e,t,n)=>{"use strict";function s(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}function i(e,t,n){return n<e?e:n>t?t:n}function o(e,t=!0){const n=e.split("/"),s=n[n.length-1];if(t)return s;const i=s.split(".");return i.slice(0,i.length-1).join("")}n.d(t,{S4:()=>i,WP:()=>o,yy:()=>s})},5131:(e,t,n)=>{"use strict";n.d(t,{U:()=>Lo,e:()=>Mo});var s=n(6093),i=n(7865),o=n(6882),r=n(2042);class a{constructor(e,t,n){this.major=e,this.minor=t,this.patch=n}compare(e){return this.major>e.major?"greater":this.major<e.major?"less":this.minor>e.minor?"greater":this.minor<e.minor?"less":this.patch>e.patch?"greater":this.patch<e.patch?"less":"equal"}toString(){return`${this.major}.${this.minor}.${this.patch}`}}function l(e){const t=e.split(".");return 3!==t.length?null:new a(parseInt(t[0]),parseInt(t[1]),parseInt(t[2]))}var c=n(8848),h=n(6588),u=n(5524),m=n(164);const d=h.$w+"/download",p=h.$w+"/releases";var g=n(9817);var f=n(9039);const w="https://us-central1-gitfiend-pulse.cloudfunctions.net/onRequest2";async function b(){await async function(e,t){try{return await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch(e){}return null}(w,function(){let e=(0,f.uo)();return{type:"pulse",body:{lang:navigator.language,time:Date.now(),platform:e,version:"0.44.3"}}}()),setTimeout(b,864e5)}function y(e,t){if(t?.preventDefault(),"keydown"===t?.type){const e=document.activeElement;if(null!==e&&e!==document.body){const t=e;return void t.blur?.()}}const{$repo:n,dialogs:s}=e;if(s.showingDialog())s.removeTopMostDialog();else if(null!==n){const{nav:e}=n;if(""!==e.$hoveredRefCardId)return void e.setHoveredRefCard("");if(e.$showingRefView)return void e.setShowingRefView(!1);if(e.$viewingPatch)return void e.setSelectedPatchId(null);if(e.hasSelectedCommit())return void e.setSelectedCommit(null)}}var $=n(1197),v=n(719),k=n(7521),C=n(5737),_=n(2650),S=n(7273),x=n(7728);class P extends m.Custom{render(){const{store:e}=this.props;return(0,m.createElement)("div",{className:"WelcomeScreen"},(0,m.createElement)("div",{className:"WelcomeScreen-header"},(0,m.createElement)("img",{className:"WelcomeScreen-header-icon",src:(0,$.yn)(["other","icon.svg"]),alt:""})),(0,m.createElement)("div",{className:"WelcomeScreen-controls"},(0,m.createElement)(S.R,{className:"WelcomeScreen-controls-button",onClick:()=>(0,x.G)(e)},"Create"),(0,m.createElement)("span",{style:{width:24}}),(0,m.createElement)(S.R,{className:"WelcomeScreen-controls-button",onClick:()=>(0,_.NV)(e)},"Open"),(0,m.createElement)("span",{style:{width:24}}),(0,m.createElement)(S.R,{className:"WelcomeScreen-controls-button",onClick:()=>(0,_.iO)(e)},"Clone")))}}class E extends m.Custom{render(){const{store:e}=this.props,{dialogs:t}=e;return(0,m.createElement)("div",{className:"DialogRoot"},(0,m.createElement)(m.Fragment,null,t.drawDialogs()),null)}}var R=n(4188),I=n(4071);const T=(0,m.createElement)("span",{className:"HeadBranchTick"},"✓");var N=n(1998),M=n(1640);async function L(e,t){const{repo:n,global:{consoleSt:s},refs:i,repoPath:o}=t;await s.showLoading(`Checking out ${e.shortName}`,(async()=>{await(0,M.nX)(o,e,i.getSibling(e)),await n.loadOrReloadRepoData()}))}async function F(e,t){const{repo:n,refs:{$repoStatus:s},global:{consoleSt:i},repoPath:o}=e;s&&await i.showLoading(`Merging ${t.shortName} into ${s.branchName}`,(async()=>{await N.En.command({repoPath:o,args:["merge",t.fullName]}),await n.loadOrReloadRepoData()}))}var O=n(5185),D=n(9634),j=n(4747),z=Object.defineProperty,W=(e,t,n)=>(((e,t,n)=>{t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class V extends m.Custom{constructor(){super(...arguments),W(this,"ref",(0,m.createRef)()),W(this,"$selectedIndex",0),W(this,"onKey",(e=>{switch(e.key){case"Escape":this.props.ins.closeMenu();break;case"ArrowDown":e.preventDefault(),this.goToNextItem();break;case"ArrowUp":e.preventDefault(),this.goToPrevItem();break;case"Tab":case"Enter":e.preventDefault(),this.props.ins.selectWordByIndex(this.$selectedIndex);break;case"n":e.ctrlKey&&(e.preventDefault(),this.goToNextItem());break;case"p":e.ctrlKey&&(e.preventDefault(),this.goToPrevItem())}}))}render(){const{$position:e,$completionList:t,$containerRect:n,$textAreaScrollTop:s}=this.props.ins;if(!e||!n)return null;const{left:i,top:o,height:r}=e,{$selectedIndex:a,$availableHeight:l}=this;let c={};return l>90?(c.left=i-5,c.top=o+r+4-s):(c.left=i-5,c.bottom=1+n.height-e.bottom+e.height+s),(0,m.createElement)("div",{className:"CompletionMenu",ref:this.ref,style:c},t.map(((e,t)=>(0,m.createElement)("div",{role:"button",className:m.c`CompletionMenu-selectedItem ${t===a}`,onClick:()=>{this.props.ins.selectWord(e)},onMouseEnter:()=>{this.$selectedIndex=t},key:e},e))))}goToNextItem(){this.$selectedIndex=(this.$selectedIndex+1)%this.props.ins.$completionList.length,this.showSelectedItem()}goToPrevItem(){const e=this.props.ins.$completionList.length;this.$selectedIndex=(this.$selectedIndex-1+e)%e,this.showSelectedItem()}showSelectedItem(){const{current:e}=this.ref;if(!e)return;const t=e.children.item(this.$selectedIndex);t?.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}get $availableHeight(){const{$containerRect:e,$position:t,$textAreaScrollTop:n}=this.props.ins;return t&&e?innerHeight-(e.top+(t.top-n)+t.height):0}componentDidMount(){addEventListener("keydown",this.onKey),addEventListener("click",this.props.ins.closeMenu)}componentWillUnmount(){removeEventListener("keydown",this.onKey),removeEventListener("click",this.props.ins.closeMenu)}}var A=n(9010),H=Object.defineProperty,B=(e,t,n)=>(((e,t,n)=>{t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class U{constructor(e,t){this.focusInput=t,B(this,"$text"),B(this,"$position",null),B(this,"$completionList",[]),B(this,"selection",[0,0]),B(this,"$containerRect",null),B(this,"$textAreaScrollTop",0),B(this,"selectWord",(e=>{const{$text:t,selection:[n,s]}=this;this.$text=t.slice(0,n)+e+t.slice(s),this.$completionList=[],this.$position=null,this.focusInput()})),B(this,"closeMenu",(()=>{this.$position=null,this.focusInput()})),this.$text=e,(0,m.init$)(this)}selectWordByIndex(e){this.selectWord(this.$completionList[e])}get $showMenu(){return A.YG&&!!this.$position&&this.$completionList.length>0&&this.$text.length>0}}var K=Object.defineProperty,q=(e,t,n)=>(((e,t,n)=>{t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Y extends m.Custom{constructor(){super(...arguments),q(this,"divRef",(0,m.createRef)()),q(this,"inputRef",(0,m.createRef)()),q(this,"externalValue",this.props.value??""),q(this,"ins",new U(this.props.value??"",(()=>{this.inputRef.current?.focus()}))),q(this,"onInput",(e=>{const{currentTarget:t}=e;if(!(t instanceof HTMLTextAreaElement||t instanceof HTMLInputElement))return;const{value:n,selectionStart:s,selectionEnd:i}=t;this.ins.$text=n,null!==s&&null!==i&&requestAnimationFrame((()=>{this.updateDiv(s,i,n)}))})),q(this,"onScroll",(e=>{const{currentTarget:t}=e;t instanceof HTMLTextAreaElement&&(this.ins.$textAreaScrollTop=t.scrollTop,this.ins.$position=null)}))}render(){const{style:e,ref:t,className:n="",rows:s}=this.props;t&&(this.inputRef=t);const{$text:i}=this.ins;return(0,m.createElement)("div",{className:`TextInput-container ${n}`,style:e},1===s?this.drawInput(i):this.drawArea(i),(0,m.createElement)("div",{className:"TextInput-hiddenDiv",ref:this.divRef,key:"TextInput-hiddenDiv"},i),this.ins.$showMenu?(0,m.createElement)(V,{ins:this.ins,key:"TextInput-indicator"}):null)}drawInput(e){const{placeholder:t,id:n,onKeyDown:s,required:i}=this.props;return(0,m.createElement)("input",{className:"TextInput-input",ref:this.inputRef,key:"TextInput-input",value:e,required:i,onInput:this.onInput,placeholder:t,id:n,onKeyDown:s})}drawArea(e){const{placeholder:t,id:n,onKeyDown:s,rows:i,required:o}=this.props;return(0,m.createElement)("textarea",{className:"TextInput-input",ref:this.inputRef,key:"TextInput-input",value:e,required:o,onInput:this.onInput,placeholder:t,rows:i,id:n,onKeyDown:s,onScroll:this.onScroll})}updateDiv(e,t,n){const{current:s}=this.divRef;if(!s)return;const i=s.firstChild;if(!i)return;const o=new Range,r=function(e,t){let n=[];for(let s=t;s>=0;s--){const t=e[s];if(" "===t||"\n"===t||"\r"===t)break;n.push(t)}return n.reverse().join("")}(n,e-1);this.getCompletionList(r).catch(console.log),o.setStart(i,e-r.length),o.setEnd(i,e),this.ins.selection=[e-r.length,e];const a=s.getBoundingClientRect(),l=o.getBoundingClientRect();l.y-=a.y,l.x-=a.x,this.ins.$position=l??null}async getCompletionList(e){const{autoComplete:t}=this.props;if(!t)return;const{list:n,currentWord:s}=await t(e);s===e&&(this.ins.$completionList=n)}componentDidMount(){!0===this.props.autoFocus&&setTimeout((()=>{this.ins.focusInput()}),1),m.Reaction.auto((()=>{this.props.onText(this.ins.$text)}),this),this.ins.$containerRect=this.divRef.current?.getBoundingClientRect()??null}componentDidUpdate(){const{errorMessage:e,value:t=""}=this.props;t!==this.externalValue&&(this.externalValue=t,this.ins.$text=t),this.inputRef.current?.setCustomValidity(e??""),this.inputRef.current?.reportValidity()}}function G(e,t){return async n=>{if(!e)return{list:[],currentWord:n};const s=await N.RT.auto_complete({kind:t,repoPath:e,currentWord:n,maxNum:20});return"Ok"in s?{list:s.Ok,currentWord:n}:{list:[],currentWord:n}}}var J=n(8774),X=Object.defineProperty,Z=(e,t,n)=>(((e,t,n)=>{t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const Q="CommitMessageDialog-input";async function ee(e,t,n){return(0,O.$)({dialogId:ee.name,focusElementId:Q,dismissible:!1,contentCallback:(s,i,o)=>(0,m.createElement)(te,{repoPath:e,dialogMessage:t,commitMessage:n,descriptionId:o,resolve:s})})}class te extends m.Custom{constructor(){super(...arguments),Z(this,"inputText",this.props.commitMessage),Z(this,"onTextChange",(e=>{this.inputText=e})),Z(this,"onTextAreaKeyPress",(async e=>{(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&this.props.resolve(this.inputText)})),Z(this,"getAutoCompleteList",(async e=>{const t=await N.RT.auto_complete({kind:"CommitMessage",repoPath:this.props.repoPath,currentWord:e,maxNum:20});return"Ok"in t?{list:t.Ok,currentWord:e}:{list:[],currentWord:e}}))}render(){const{dialogMessage:e,commitMessage:t,resolve:n,descriptionId:s}=this.props;return(0,m.createElement)("form",{className:"CommitMessageDialog",onSubmit:e=>{e.preventDefault(),n(this.inputText)}},(0,m.createElement)(D.A,{messageId:s},e),(0,m.createElement)("div",{className:"CommitMessageDialog-inputContainer"},(0,m.createElement)(Y,{className:"CommitMessageDialog-textInput",style:{flexGrow:1},rows:6,onText:this.onTextChange,value:t,onKeyDown:this.onTextAreaKeyPress,id:J.w1,autoComplete:this.getAutoCompleteList,autoFocus:!0})),(0,m.createElement)(j.D,{rightButtons:[(0,m.createElement)(S.R,{type:"submit"},"OK"),(0,m.createElement)(S.R,{onClick:()=>{n(void 0)}},"Cancel")]}))}}async function ne(e,t){const{refs:n,repo:s,repoPath:i}=e,{$commits:o}=s,{$repoStatus:r}=n;if(t.isMerge&&null!==r){const{remoteCommitId:e}=r,n=o.get(t.parentIds[0]),s=o.get(t.parentIds[1]);if(void 0!==n&&void 0!==s&&null!==e){if(n.id===e||await N.RT.commit_is_ancestor({repoPath:i,commitId:n.id,ancestorCandidateId:e}))return n.id;if(s.id===e||await N.RT.commit_is_ancestor({repoPath:i,commitId:s.id,ancestorCandidateId:e}))return s.id}}return t.parentIds[0]??null}function se(e,t,n,s){if(!A.EE||s<2)return;const{wip:{$haveWIP:i}}=t;e.push({label:`Extract changes from branch ${n.shortName}${i?"...":""}`,toolTip:i?"This options isn't available while you have uncommitted changes.":`This will extract the changes on branch ${n.shortName} and allow you to make a single commit.`,async click(){i?await(0,c.K$)("You cannot extract changes while you have uncommitted work"):await async function(e,t){const{repo:n,refs:{$repoStatus:s},global:{consoleSt:i},repoPath:o}=e;s&&await i.showLoading(`Merging ${t.shortName} into ${s.branchName}`,(async()=>{await N.En.command({repoPath:o,args:["merge","--squash",t.fullName]}),await n.loadOrReloadRepoData()}))}(t,n)}})}var ie=Object.defineProperty;const oe="inputDialogInputId";class re extends m.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="inputText")?e+"":e,"")}render(){const{message:e,confirmButtonText:t="OK",resolve:n,descriptionId:s,autoComplete:i}=this.props;return(0,m.createElement)("form",{className:"InputDialog",onSubmit:e=>{e.preventDefault(),n(this.inputText)}},(0,m.createElement)(D.A,{messageId:s},e),(0,m.createElement)("div",{className:"InputDialog-input"},(0,m.createElement)(Y,{id:oe,autoFocus:!0,required:!0,rows:1,onText:e=>{this.inputText=e},autoComplete:i})),(0,m.createElement)(j.D,{rightButtons:[(0,m.createElement)(S.R,{type:"submit"},t),(0,m.createElement)(S.R,{autoFocus:!0,onClick:()=>{n(void 0)}},"Cancel")]}))}}const ae=n(9066);function le(e){try{return ae.emojify(e)}catch(t){return e}}var ce=Object.defineProperty,he=(e,t,n)=>(((e,t,n)=>{t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class ue extends m.Custom{constructor(){super(...arguments),he(this,"messageRef",(0,m.createRef)()),he(this,"onClick",(()=>{this.$messageScrollable&&this.props.setMessageExpanded?.(!0)})),he(this,"updateMessageScrollable",(()=>{const{vm:e}=this.props;if(null!==e.$messageHeight)return;const t=this.messageRef.current;null!==t&&(e.$messageHeight=t.scrollHeight)}))}render(){const{vm:{store:{global:{windowSt:e}}},commit:t,fullScreen:n,messageExpanded:s}=this.props;return e.$animatingCommits?null:(0,m.createElement)("div",{className:"CommitCardMessage-container",onClick:this.onClick},(0,m.createElement)("div",{className:m.c`CommitCardMessage ${!0} text ${!0} CommitCardMessage-scrollable ${this.$messageScrollable&&!n&&!s}`,ref:this.messageRef},le(t.message)),s?this.drawCloseMessageButton():this.drawMoreButton())}get $messageScrollable(){const{$messageHeight:e}=this.props.vm;return null!==e&&e>100}drawCloseMessageButton(){return(0,m.createElement)("div",{className:"CommitCardMessage-backButtonRow"},(0,m.createElement)(S.R,{colour:"text",onClick:e=>{e.stopPropagation(),this.props.setMessageExpanded?.(!1)}},"back"))}drawMoreButton(){return this.$messageScrollable&&!this.props.fullScreen?(0,m.createElement)("div",{className:"CommitCardMessage-moreButton"},(0,m.createElement)("div",{className:"CommitCardMessage-moreButton-text"},"more")):null}componentDidMount(){this.updateMessageScrollable()}componentDidUpdate(){this.updateMessageScrollable()}}var me=n(5499),de=n(829),pe=n(4907),ge=Object.defineProperty,fe=(e,t,n)=>(((e,t,n)=>{t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class we extends m.Custom{constructor(){super(...arguments),fe(this,"onClickUsername",(()=>{const{store:e,commit:{author:t,email:n}}=this.props;e.nav.setSelectedPatchId(null),e.repo.commitFilters.setUsernameFilter({author:t,email:n})})),fe(this,"onClickCommitId",(async()=>{try{await navigator.clipboard.writeText(this.props.commit.id)}catch(e){console.log(e)}}))}render(){const{commit:e,toolbar:t=null}=this.props;return(0,m.createElement)("div",{className:"CommitHeader"},(0,m.createElement)("div",{className:"CommitHeader-avatar"},(0,me.sY)(e,32,pe.zj.$theme.name)),this.drawCommitInfo(),t)}drawCommitInfo(){const{commit:e}=this.props,{date:{ms:t},id:n,author:s}=e,i=(0,$.MJ)(t),o=(0,$.lF)(t);return(0,m.createElement)("div",{className:"CommitHeader-metadata text"},(0,m.createElement)("div",{className:"CommitHeader-author",title:i},o," by"," ",(0,m.createElement)("button",{className:"InlineButton",onClick:this.onClickUsername},s)),(0,m.createElement)("div",{title:n,onClick:this.onClickCommitId,className:"CommitHeader-commitId"},"(",(0,de.vX)(e),")"))}}class be extends m.Custom{render(){const{path:e,...t}=this.props,{dir:n,fileName:s}=function(e){const t=e.split("/");return{fileName:t.pop()??"",dir:t.join("/")}}(e);return(0,m.createElement)("div",{...t,className:"TruncatePath",title:e,id:e},(0,m.createElement)("div",{className:"TruncatePath-left"},""!==n?n:s),""!==n?(0,m.createElement)("div",{className:"TruncatePath-right"},"/",s):null)}}var ye=n(7627),$e=Object.defineProperty,ve=(e,t,n)=>(((e,t,n)=>{t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class ke extends m.Custom{constructor(){super(...arguments),ve(this,"onKeyUp",(e=>{if("Enter"===e.key||" "===e.key){e.stopPropagation();const t=e.currentTarget,{nav:n}=this.props.data.store;n.setSelectedPatchId(t.id)}})),ve(this,"onClickPatch",(e=>{e.stopPropagation();const t=e.currentTarget,{nav:n}=this.props.data.store;n.setSelectedPatchId(t.id)})),ve(this,"onContextMenu",(async e=>{const{data:{store:t}}=this.props,{repo:n,nav:s}=t,{$patches:{patches:i}}=n,o=e.currentTarget.id,r=i.find((e=>e.id===o));if(void 0===r)return;const a=(0,g.WP)(r.newFile);await(0,k.O0)([{label:`Show commits containing ${a}`,click:()=>{n.commitFilters.setFileFilter({file_name:r.newFile}),s.setSelectedPatchId(null)}}],e,{usePoint:!0})}))}render(){const{data:{patches:e,selectedPatchId:t},style:n,index:s}=this.props,i=e[s],{id:o}=i;return(0,m.createElement)("div",{className:m.c`PatchListItem ${!0} focusableItemInset ${!0} selected ${t===o}`,style:n,tabIndex:0,key:o,id:o,onClick:this.onClickPatch,onKeyUp:this.onKeyUp,onContextMenu:this.onContextMenu},(0,m.createElement)(be,{path:i.newFile,style:{marginRight:7}}),(0,m.createElement)(ye.q,{patchType:i.patchType}))}}var Ce=Object.defineProperty,_e=(e,t,n)=>(((e,t,n)=>{t in e?Ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const Se=f.cX?12:13;class xe extends m.Custom{constructor(){super(...arguments),_e(this,"ref",(0,m.createRef)()),_e(this,"frames",[]),_e(this,"onScroll",(()=>{const{current:e}=this.ref;e instanceof HTMLDivElement&&(e.scrollTop=0)})),_e(this,"onWheel",(e=>{const{contentHeight:t,height:n,scrollTop:s,enabled:i}=this.props;if(!i||t<=n)return;e.stopPropagation();let{deltaY:o}=e;const r=s+o,a=t-n;if(!f.cX&&Math.abs(o)>150){o/=2;const e=100/15,t=[],n=o/e;for(let i=1;i<e+1;i++)t.push(Math.min(Math.max(0,s+i*n),a));return this.frames=t,this.animate(),void this.disablePointerEventsWhileScrolling()}this.disablePointerEventsWhileScrolling(),this.props.setScroll(Math.min(Math.max(0,r),a))})),_e(this,"animate",(()=>{const e=this.frames.shift();void 0!==e&&(this.props.setScroll(e),this.frames.length>0&&setTimeout(this.animate,15))})),_e(this,"thumbTopStart",0),_e(this,"mouseStart",0),_e(this,"onMouseDown",(e=>{this.props.enabled&&(this.mouseStart=e.y,this.thumbTopStart=this.calcThumbPosition(),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp,{once:!0}))})),_e(this,"onMouseMove",(e=>{const{contentHeight:t,height:n}=this.props,s=e.y-this.mouseStart,i=this.calcThumbPercent(this.thumbTopStart+s),o=t-n;this.disablePointerEventsWhileScrolling(),this.props.setScroll(o*i)})),_e(this,"onMouseUp",(()=>{window.removeEventListener("mousemove",this.onMouseMove)})),_e(this,"timer",0),_e(this,"scrolling",!1)}render(){const{children:e,width:t,height:n,contentHeight:s,className:i="",style:o={},enabled:r,scrollTop:a}=this.props;return(0,m.createElement)("div",{ref:this.ref,className:m.c`ScrollArea `+i,style:{width:t,height:n,...o},onWheel:this.onWheel,onScroll:this.onScroll},(0,m.createElement)("div",{className:"ScrollArea-content",style:{pointerEvents:this.scrolling?"none":"unset",transform:`translateY(${-a}px)`,height:s,width:s>n?t-Se:t}},e),(0,m.createElement)("div",{className:"ScrollArea-track",hidden:!r||s<=n},(0,m.createElement)("div",{className:"ScrollArea-thumb",style:{height:this.calcThumbHeight(s,n),transform:`translateY(${this.calcThumbPosition()}px)`},onMouseDown:this.onMouseDown})))}calcScrollPercent(){const{height:e,contentHeight:t,scrollTop:n}=this.props;return n/(t-e)}calcThumbPosition(){const{height:e,contentHeight:t}=this.props;return(e-this.calcThumbHeight(t,e))*this.calcScrollPercent()}calcThumbPercent(e){const{height:t,contentHeight:n}=this.props,s=t-this.calcThumbHeight(n,t);return Math.min(Math.max(0,e/s),1)}calcThumbHeight(e,t){return Math.max(t*(t/e),40)}disablePointerEventsWhileScrolling(){const{enabled:e,contentHeight:t,height:n}=this.props;!e||t<=n||(this.scrolling||(this.scrolling=!0),clearTimeout(this.timer),this.timer=setTimeout((()=>{this.scrolling=!1,this.forceUpdate()}),140))}}var Pe=Object.defineProperty,Ee=(e,t,n)=>(((e,t,n)=>{t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Re extends m.Custom{constructor(){super(...arguments),Ee(this,"$scrollTop",0),Ee(this,"onScroll",(e=>{this.$scrollTop=e}))}render(){let{$scrollTop:e}=this;const{width:t,height:n,item:s,itemData:i,itemKey:o,itemHeight:r,itemCount:a}=this.props,l=a*r;e+n>l&&(this.$scrollTop=l>n?l-n:0);const c=[];for(let t=0;t<a;t++){const a=t*r;a+r>e&&a<e+n&&c.push((0,m.createElement)(s,{key:o(t,i),data:i,style:{position:"absolute",transform:`translateY(${t*r}px)`,width:"100%",height:r},index:t}))}return(0,m.createElement)(xe,{width:t,height:n,contentHeight:l,scrollTop:e,setScroll:this.onScroll,enabled:!0},c)}}const Ie=215;var Te=n(3789),Ne=Object.defineProperty;class Me extends m.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="itemKey")?e+"":e,((e,t)=>t.patches[e].id))}render(){const{store:e,vm:t}=this.props,{layout:{$commitWidth:n},nav:s}=e,{$visiblePatches:i,$patchListHeight:o}=t,r=s.$viewingPatch?t.$listWidth:n+2*Te.Kr;return(0,m.createElement)(Re,{width:r,height:o,itemCount:i.length,itemHeight:28,itemKey:this.itemKey,itemData:this.$itemData,item:ke})}get $itemData(){const{store:e,store:{nav:{$selectedPatchId:t}},vm:{$visiblePatches:n}}=this.props;return{store:e,patches:n,selectedPatchId:t}}}var Le=Object.defineProperty,Fe=(e,t,n)=>(((e,t,n)=>{t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Oe{constructor(e){this.store=e,Fe(this,"$headerHeight",0),Fe(this,"$messageHeight",null),Fe(this,"$listWidth",this.getInitialListWidth()),Fe(this,"$userFilterText",""),Fe(this,"$cleared",!1),Fe(this,"setHeaderHeight",(e=>{this.$headerHeight=e})),Fe(this,"setListWidth",(e=>{const t=this.store.global.windowSt.$commitViewSize.width-Ie-100;this.$listWidth=Math.round(Math.min(Math.max(e,Ie),t)),r.o.set("commitCardFullscreenListWidth",this.$listWidth)})),(0,m.init$)(this)}get $visiblePatches(){const{$filterText:e}=this,{$patches:{patches:t}}=this.store.repo;return t.filter((t=>t.newFile.toLocaleLowerCase().includes(e.toLocaleLowerCase())))}get $filterText(){const{$userFilterText:e,$cleared:t,store:{repo:{commitFilters:{$file:n}}}}=this;return t?"":""===e&&n?n.file_name:e}setFilterText(e){this.$cleared=""===e,this.$userFilterText=e}get $width(){return this.store.global.windowSt.$commitViewSize.width}get $height(){const{global:e}=this.store;return e.windowSt.$commitViewSize.height}get $codeViewerWidth(){return this.$width-this.$listWidth}get $patchListHeight(){const{store:{nav:{$viewingPatch:e}}}=this;return e?this.$bodyHeight-34:Te.J9-Math.min(this.$messageHeight??0,100)-42}get $bodyHeight(){return this.$height-this.$headerHeight}getInitialListWidth(){const e=r.o.get("commitCardFullscreenListWidth"),{global:{windowSt:{$commitViewSize:t}}}=this.store;if(null!==e){const n=t.width-Ie-100;return Math.min(Math.max(e,Ie),n)}return Math.max(365,.3*t.width)}}var De=n(3331),je=Object.defineProperty,ze=(e,t,n)=>(((e,t,n)=>{t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class We extends m.Custom{constructor(){super(...arguments),ze(this,"$messageExpanded",!1),ze(this,"ref",(0,m.createRef)()),ze(this,"vm",new Oe(this.props.store)),ze(this,"setMessageExpanded",(e=>{this.$messageExpanded=e}))}render(){const{commit:e,store:t}=this.props;return(0,m.createElement)("div",{className:m.c`CommitCardExpanded ${!0} CommitCardExpanded-messageExpanded ${this.$messageExpanded}`},(0,m.createElement)(we,{store:t,commit:e}),(0,m.createElement)("div",{className:"CommitCardExpanded-content",onWheel:e=>{const t=this.ref.current;null!==t&&t.scrollHeight>t.clientHeight&&e.stopPropagation()},ref:this.ref},(0,m.createElement)(ue,{vm:this.vm,commit:e,fullScreen:!1,messageExpanded:this.$messageExpanded,setMessageExpanded:this.setMessageExpanded}),this.drawFileList()))}drawFileList(){const{store:e,commit:{id:t}}=this.props,{global:{windowSt:n},repo:{$patches:{commitId:s,patches:i}}}=e;return n.$animatingCommits||this.$messageExpanded?null:s!==t?(0,m.createElement)(De.y,{size:14,style:{marginLeft:"auto",marginRight:"auto",marginTop:60},invertColour:!0}):0===i.length?null:(0,m.createElement)(Me,{store:e,vm:this.vm})}}async function Ve(e,t,n){const{nav:s,wip:i,repo:o,global:{consoleSt:r},repoPath:a}=e,{stashId:l}=t;null!==l&&await r.showLoading("Unstashing changes",(async()=>{(await N.En.command({repoPath:a,args:["stash",n,l]})).error||(await N.En.command({repoPath:a,args:["reset",...i.pinnedFiles.getArray(a)]})).error||s.goHome(),await o.loadOrReloadRepoData()}))}var Ae=n(6403),He=Object.defineProperty,Be=(e,t,n)=>(((e,t,n)=>{t in e?He(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const Ue="createBranchDialogInputId";function Ke(e,t){return(0,O.$)({dialogId:Ke.name,focusElementId:Ue,dismissible:!1,contentCallback:(n,s,i)=>(0,m.createElement)(qe,{repoPath:e,descriptionId:i,resolve:n,autoSwitchAvailable:t})})}class qe extends m.Custom{constructor(){super(...arguments),Be(this,"inputText",""),Be(this,"$checkoutBranch",this.props.autoSwitchAvailable),Be(this,"getAutoCompleteList",G(this.props.repoPath,"CreateBranch"))}render(){const{resolve:e,descriptionId:t,autoSwitchAvailable:n}=this.props;return(0,m.createElement)("form",{className:"CreateBranchDialog",onSubmit:t=>{t.preventDefault(),e({branchName:this.inputText,checkoutBranch:this.$checkoutBranch})}},(0,m.createElement)(D.A,{messageId:t},"Enter new branch name"),(0,m.createElement)("div",{className:"CreateBranchDialog-inputs"},(0,m.createElement)(Y,{id:Ue,autoFocus:!0,required:!0,onText:e=>{this.inputText=e},rows:1,autoComplete:this.getAutoCompleteList}),(0,m.createElement)(Ae._P,{checked:this.$checkoutBranch,disabled:!n,onClick:()=>{this.$checkoutBranch=!this.$checkoutBranch},labelText:"Checkout new branch"})),(0,m.createElement)(j.D,{rightButtons:[(0,m.createElement)(S.R,{type:"submit"},"OK"),(0,m.createElement)(S.R,{autoFocus:!0,onClick:()=>{e(void 0)}},"Cancel")]}))}}var Ye=n(7005),Ge=Object.defineProperty,Je=(e,t,n)=>(((e,t,n)=>{t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Xe extends m.Custom{constructor(){super(...arguments),Je(this,"$mode",this.props.defaultMode),Je(this,"$commitInfo",null)}render(){const{descriptionId:e,resolve:t,commit:n,headInfo:s}=this.props,{$mode:i,$commitInfo:o}=this;return(0,m.createElement)("div",{className:"ResetDialog"},(0,m.createElement)(D.A,{messageId:e},"Reset branch ",s.branchName," to ",n.id.slice(0,6)),(0,m.createElement)("div",{className:"ResetDialog-content"},0===o?.unPushed.length?null:(0,m.createElement)("div",{className:"ResetDialog-content-selector"},(0,m.createElement)("span",null,"Mode:"),(0,m.createElement)(Ye.l,{options:[{label:"Soft",click:()=>{this.$mode="soft"},type:"checkbox",checked:"soft"===i},{label:"Hard",click:()=>{this.$mode="hard"},type:"checkbox",checked:"hard"===i}],theme:pe.zj.$theme.name})),(0,m.createElement)("div",null,this.$message)),(0,m.createElement)(j.D,{rightButtons:[(0,m.createElement)(S.R,{children:"OK",onClick:()=>{t(this.$mode)}}),(0,m.createElement)(S.R,{autoFocus:!0,onClick:()=>{t(void 0)}},"Cancel")]}))}get $message(){const{$commitInfo:e,$mode:t}=this;if(!e)return null;const{pushed:n,unPushed:s}=e;switch(t){case"soft":return s.length>0&&n.length>0?`This will undo ${s.length} commit${1===s.length?"":"s"} and move your local branch back ${n.length} commit${1===n.length?"":"s"}.`:s.length>0?`This will undo ${s.length} commit${1===s.length?"":"s"}.`:n.length>0?`This will move your local branch back ${n.length} commit${1===n.length?"":"s"}.`:null;case"hard":return s.length>0&&n.length>0?`This will discard ${s.length} commit${1===s.length?"":"s"} and move your local branch back ${n.length} commit${1===n.length?"":"s"}.`:s.length>0?`This will discard ${s.length} commit${1===s.length?"":"s"}.`:n.length>0?`This will move your local branch back ${n.length} commit${1===n.length?"":"s"}.`:null}}async getSelectedCommits(){const{commit:e,store:{repo:{$commitIds:t},refs:{$commitsToPush:n},repoPath:s}}=this.props;e.index;const i=await N.RT.get_all_commits_on_current_branch({repoPath:s,includeDescendants:!1}),o="Ok"in i?i.Ok:[],r=new Set(o),a=[],l=[];for(let s=e.index-1;s>=0;s--){const e=t[s];r.has(e)&&(n.thisBranch.has(e)?l.push(e):a.push(e))}return{pushed:a,unPushed:l}}async componentDidMount(){this.$commitInfo=await this.getSelectedCommits()}}async function Ze(e,t){const n=[];if(null!==t.stashId)n.push({label:"Unstash Changes",click:()=>Ve(e,t,"pop")},{label:"Unstash Changes and Keep Stash",click:()=>Ve(e,t,"apply")},{label:"Discard Stash",click:()=>async function(e,t){const{nav:n,repo:s,global:{consoleSt:i},repoPath:o}=e,r=await(0,c.M5)(`Are you sure you want to discard the stash "${t.message}"?`),{stashId:a}=t;r&&null!==a&&await i.showLoading("Discarding stash",(async()=>{await N.En.command({repoPath:o,args:["stash","drop",a]}),n.goHome(),await s.loadOrReloadRepoData()}))}(e,t)});else{!function(e,t,{id:n,message:s}){const{refs:{$commitsToPush:i,$repoStatus:o},wip:{$haveWIP:r},repoPath:a}=t;o?.localCommitId===n&&i.allBranches.has(n)&&e.push({label:"Edit Commit Message...",async click(){const e=s.trim(),n=(await ee(a,"Edit commit message",s.trim()))?.trim();n&&n!==e&&(r&&await N.En.stash_changes({repoPath:a}),await N.En.command({repoPath:a,args:["commit","--amend","-m",n]}),r&&await N.En.command({repoPath:a,args:["stash","pop"]}),await t.repo.loadOrReloadRepoData())}})}(n,e,t),function(e,t,n){const{refs:{$commitsToPush:s},wip:{$haveWIP:i},repoPath:o}=t;if(s.allBranches.has(n.id)){const s=function(e){const{refs:{$commitsToPush:t},repo:{$commits:n}}=e,s=Array.from(t.allBranches.keys()).map((e=>n.get(e)));s.sort(((e,t)=>e.index-t.index));const i=[];for(const e of s){if(e.isMerge||0===e.parentIds.length)break;i.push(e)}return i}(t);let r=s.findIndex((e=>e.id===n.id));0===r&&s.length>1&&(n=s[s.length-1]);const a=0===r?s.length:r+1;A.EE&&a>1&&e.push({label:`Squash ${a} commits into 1...`,click:async()=>{if(i)return void await(0,c.K$)("You cannot squash commits while you have uncommitted changes");const e=(await ee(o,`Squash ${a} commits into 1\n\nCommit message:`,n.message.trim()))?.trim();if(e){const{global:{consoleSt:s},repoPath:i}=t;await s.showLoading("Squashing commits",(async()=>{const s=await ne(t,n);null!==s&&(await N.En.command({repoPath:i,args:["reset","--soft",s]}),await(0,M.g9)(i),await(0,M.PT)(i,e),await t.repo.loadOrReloadRepoData())}))}}})}}(n,e,t),function(e,t,n){if(0===n.parentIds.length)return;const{refs:{$commitsToPush:{allBranches:s}},repo:i}=t;if(s.has(n.id)){const o=[];for(const e of s.keys()){const t=i.$commits.get(e);t&&t.parentIds.length>0&&o.push(t)}o.sort(((e,t)=>e.index-t.index));const r=o.findIndex((e=>e.id===n.id))+1;let a;a=r>1?`Undo ${r} commits...`:"Undo commit...",e.push({label:a,click:async()=>{await async function(e,t,n){const s="commit"+(n>1?"s":""),i=`This will undo ${n} ${s}. The changes in these commits will be kept.`;if(await(0,c.M5)(i)){const{global:{consoleSt:n},repo:i,wip:o,repoPath:r}=e;o.setCommitMessage(t.message),await n.showLoading(`Undoing ${s}`,(async()=>{const n=await ne(e,t);null!==n&&(console.log(`Choosing ${n} of ${JSON.stringify(t.parentIds)}`),await N.En.command({repoPath:r,args:["reset","--soft",n]}),await i.loadOrReloadRepoData())}))}}(t,n,r)}}),e.push(C.me)}}(n,e,t),n.push({label:"Create Branch Here...",click:()=>et(e,t.id)},{label:"Create Tag Here...",click:()=>tt(e,t.id)});const{refs:s,repoPath:i}=e,{$repoStatus:o}=s,r=!(!o?.localCommitId||!await N.RT.commit_is_ancestor({repoPath:i,commitId:o.localCommitId,ancestorCandidateId:t.id})),a=null!==o&&await async function(e,t,n){if(e.isMerge||null!==e.stashId||e.id===t.localCommitId)return!1;const s=await N.RT.commit_is_on_branch({repoPath:n,commitId:e.id,includeDescendants:!1});return"Ok"in s&&!s.Ok}(t,o,i),l=null!==o&&r||o?.localCommitId===t.id;n.push(C.me),n.push({label:`Show all Commits by ${t.author}`,click(){e.nav.setShowingRefView(!1),e.nav.setSelectedPatchId(null),e.repo.commitFilters.setUsernameFilter(t)}}),(a||l)&&n.push(C.me),n.push({label:"Cherry-pick Changes in this Commit",click:async()=>{await async function(e,t){await async function(e,t,n){const{repo:s,nav:i,global:{consoleSt:o},wip:r,repoPath:a}=e;await o.showLoading(`Cherry picking commit ${t.id.slice(0,6)}`,(async()=>{const e=["cherry-pick"];e.push("-x"),e.push(t.id),await N.En.command({repoPath:a,args:e}),await s.loadOrReloadRepoData()}))}(e,t)}(e,t)},visible:a,enabled:!e.wip.$haveConflicts},{label:"Revert Changes in this Commit...",click:()=>async function(e,t){const{global:{consoleSt:n},repo:s,repoPath:i,wip:{$haveWIP:o}}=e;if(o)return void await(0,c.K$)("You cannot revert a commit while you have uncommitted changes");const r=await(0,c.P6)({message:"Do you want to immediately commit the changes?",button1Text:"Yes",button2Text:"No",button3Text:"Cancel",autoFocus:2});void 0!==r&&3!==r&&await n.showLoading("Reverting commit",(async()=>{await(0,M.An)(i,t,1===r),await s.loadOrReloadRepoData()}))}(e,t.id),visible:l,enabled:!e.wip.$haveConflicts&&!t.isMerge}),function(e,t,n,s){const{refs:i,wip:o}=t,{$repoStatus:r}=i;if(r&&s){let s="soft";r.localCommitId!==r.remoteCommitId||o.$haveWIP||(s="hard"),e.push({label:`Reset branch ${r.branchName} to this commit...`,click:async()=>{const{global:{consoleSt:e},repo:i,repoPath:o}=t,a=await(l={defaultMode:s,store:t,commit:n,headInfo:r},(0,O.$)({dialogId:Xe.name,dismissible:!1,contentCallback:(e,t,n)=>(0,m.createElement)(Xe,{...l,descriptionId:n,resolve:e})}));var l;a&&await e.showLoading(`Resetting ${r.branchName} to commit ${n.id.slice(0,6)}`,(async()=>{await N.En.command({repoPath:o,args:["reset",`--${a}`,n.id]}),await i.loadOrReloadRepoData()}))},enabled:!t.wip.$haveConflicts})}}(n,e,t,r)}return Qe(n,e),n}function Qe(e,t){const{repo:n,wip:s,nav:i,global:{settings:o}}=t;i.$viewingPatch&&e.push(C.me,{label:o.$splitCodeViewer?"Inline code viewer":"Split code viewer",async click(){const e=!o.$splitCodeViewer;r.o.set("splitView",e),o.$splitCodeViewer=e,i.$viewingWip?await s.validateAndLoadHunks():await n.reloadHunks()}})}async function et(e,t){const{repo:n,wip:{$haveWIP:s},refs:{$repoStatus:i},refs:o,repoPath:r}=e,a=await Ke(r,function(e,t,n){return e===t||!n}(t,i?.localCommitId??null,s));if(void 0!==a){const{branchName:s,checkoutBranch:i}=a;if(await(0,M.HU)(r,s,t),await n.loadOrReloadRepoData(),i){const t=o.findRefByShortName(s);null!==t&&await L(t,e)}}}async function tt(e,t){const{repo:n,repoPath:s}=e,i=await async function(e){return(0,O.$)({dialogId:JSON.stringify(e.message),focusElementId:oe,dismissible:!1,contentCallback:(t,n,s)=>(0,m.createElement)(re,{...e,descriptionId:s,resolve:t})})}({message:"Enter new tag name",autoComplete:G(s,"CreateBranch")});void 0!==i&&(await N.En.command({repoPath:s,args:["tag",i,t]}),await n.loadOrReloadRepoData())}var nt=n(6950);async function st(e,t,n,s,i,o){const{nav:r}=t;r.$refCardMenuId!==n.id&&(r.setRefCardMenuId(n.id),await(0,k.O0)(function(e,t,n,s,i){const{nav:o}=e;let r;return r="Tag"===t.refType?function(e,t){const{refs:n,global:{consoleSt:s},repo:i,repoPath:o}=e,{$currentRemoteName:r}=n,a=r??"origin";return[{label:`Push to ${a}`,click:async()=>{await s.showLoading(`Pushing ${t.shortName} to ${a}`,(async()=>{await N.En.command({repoPath:o,args:["push",a,t.shortName]})}))}},{label:`Delete local ${t.shortName}`,click:async()=>{await s.showLoading(`Deleting ${t.shortName}`,(async()=>{await N.En.command({repoPath:o,args:["tag","--delete",t.shortName]}),await i.loadOrReloadRepoData()}))}},{label:`Delete ${a}/${t.shortName}...`,click:async()=>{await(0,c.M5)(`Are you sure you want to delete ${a}/${t.shortName}?`)&&await s.showLoading(`Deleting ${a}/${t.shortName}`,(async()=>{await N.En.command({repoPath:o,args:["push","--delete",a,t.shortName]}),await i.loadOrReloadRepoData()}))}}]}(e,t):"Remote"===t.location?function(e,t,n,s){const{refs:{$repoStatus:i}}=e,o=[];return n||o.push({label:"Checkout",click:()=>L(t,e)}),s>0&&t.siblingId!==i?.headRefId&&o.push({label:`Merge ${t.remoteName}/${t.shortName} into ${i?.branchName}`,click:()=>F(e,t)}),se(o,e,t,s),null!==t.remoteName&&o.push({label:`Delete ${t.remoteName}/${t.shortName}...`,click:()=>async function(e,t){const{repo:n,global:{consoleSt:s},refs:i,repoPath:o}=e,r=t.remoteName;await(0,c.M5)(`Are you sure you want to delete ${r}/${t.shortName}?`)&&await s.showLoading(`Deleting ${r}/${t.shortName}`,(async()=>{await(0,M.KF)(o,t,i.getSibling(t)),await n.loadOrReloadRepoData()}))}(e,t)}),o}(e,t,n,s):null!==t.siblingId?function(e,t,n,s,i){const{refs:o}=e,r=[];return i||(s||r.push({label:"Checkout",click:()=>L(t,e)}),o.$repoStatus&&n>0&&(r.push({label:`Merge ${t.shortName} into ${o.$repoStatus.branchName}`,click:()=>F(e,t)}),se(r,e,t,n)),s||r.push({label:"Delete Local Checkout...",click:()=>async function(e,t){const{repo:n,global:{consoleSt:s},repoPath:i}=e,o=function(e,t){const n=t.refs.$localRefDiffs.get(e.id);return void 0===n?0:n.aheadOfRemote}(t,e);let r;r=o>0?`You have ${o} unpushed commits. Are you sure you want to delete ${t.shortName}?`:`Are you sure you want to delete your local checkout of ${t.shortName}?`,await(0,c.M5)(r)&&await s.showLoading(`Deleting ${t.remoteName}/${t.shortName}`,(async()=>{await(0,M.$I)(i,t),await n.loadOrReloadRepoData()}))}(e,t)})),r}(e,t,s,n,i):function(e,t,n,s){const{refs:i}=e,o=[];return s||o.push({label:"Checkout",click:()=>L(t,e)}),n>0&&o.push({label:`Merge ${t.shortName} into ${i.$repoStatus?.branchName}`,click:()=>F(e,t)}),s||o.push({label:"Delete unpublished branch...",click:()=>async function(e,t){const{repo:n,refs:s,global:{consoleSt:i},repoPath:o}=e;let r;const a=s.$localRefDiffs.get(t.id);r=void 0!==a&&a.aheadOfHead>0?`${t.shortName} has ${a.aheadOfHead} unpublished commits. Are you sure you want to delete it?`:`Are you sure you want to delete ${t.shortName}?`,await(0,c.M5)(r)&&await i.showLoading(`Deleting ${t.shortName}`,(async()=>{await(0,M.$I)(o,t),await n.loadOrReloadRepoData()}))}(e,t)}),o}(e,t,s,n),r.length>0&&r.push(C.me),r.push({label:"Create branch here...",click:()=>et(e,t.commitId)}),r.push({label:"Create tag here...",click:()=>tt(e,t.commitId)}),"Branch"===t.refType&&(r.push(C.me),r.push({label:"Hide other branches",click:()=>{e.repo.commitFilters.setBranchFilter({id:t.id,short_name:t.shortName})}})),"Local"===t.location&&(r.push(C.me),r.push((0,nt.Vk)(e.global))),o.$showingRefView||(r.push(C.me),r.push(it(o))),r}(t,n,s,i,o),e),r.setRefCardMenuId(""))}function it(e){return{label:"Show All Branches",click:()=>{e.setShowingRefView(!0)},enabled:!e.$showingRefView}}var ot=Object.defineProperty,rt=(e,t,n)=>(((e,t,n)=>{t in e?ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class at extends m.Custom{constructor(){super(...arguments),rt(this,"_endX",1/0),rt(this,"_endY",1/0),rt(this,"_endScale",1/0),rt(this,"_inProgress",0)}componentDidMount(){lt(this)}componentDidUpdate(){lt(this)}onFinish(){}}function lt(e){const t=e.ref.current;if(null===t)return;const{fromX:n,fromY:s,toX:i,toY:o,duration:r,fromScale:a=1,toScale:l=1}=e.props,c=e._inProgress>0,h=n===i&&s===o&&a===l;if(i===e._endX&&o===e._endY&&l===e._endScale)return;let u;if(c){for(const e of t.getAnimations())e.cancel();u=r}else u=h?0:r;t.animate([{transform:`translate(${n}px, ${s}px) scale(${a})`},{transform:`translate(${i}px, ${o}px) scale(${l})`}],{easing:"ease",duration:u,fill:"forwards"}).onfinish=()=>{e._inProgress--,0===e._inProgress&&e.onFinish()},e._endX=i,e._endY=o,e._endScale=l,e._inProgress++}var ct=Object.defineProperty,ht=(e,t,n)=>(((e,t,n)=>{t in e?ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class ut extends at{constructor(){super(...arguments),ht(this,"ref",(0,m.createRef)()),ht(this,"onClickStack",(()=>{const{refId:e,store:t}=this.props;t.nav.setHoveredRefCard(e)})),ht(this,"onClickRef",(async e=>{const{refInfo:t,props:n}=this;if(!t)return;const{showingContextMenu:s,store:i,headId:o,refId:r,aheadOfHead:a}=n,l=r===o,c=l||null!==o&&t.siblingId===o;s||await st(e,i,t,c,a,l)}))}render(){const{refInfo:e}=this;if(null===e)return null;const{refId:t,orderInStack:n,stackSize:s,showingRefView:i,hoveringStack:o,headId:r,width:a,searchText:l}=this.props,c=(0,I.Jh)(e.shortName),h=t===r,u=function(e,t,n){const{showingRefView:s,orderInStack:i,hoveringStack:o,showingContextMenu:r}=e,a={width:t};if(!s){let e=i;(o||r)&&(e+=300),n&&(e+=20),a.zIndex=e}return a}(this.props,a,h);return(0,m.createElement)("div",{ref:this.ref,className:"RefCard",style:u},(0,m.createElement)("button",{className:m.c`RefCard-content ${!0} RefCard-local ${"Local"===e.location}`,style:{background:c},onContextMenu:this.onClickRef,onClick:this.onClickRef},h?T:null,(0,R.m)(e,l)),!i&&s>1&&n+1===s?function(e,t,n,s){const i={background:t,opacity:n?0:1};return(0,m.createElement)("button",{className:"StackIndicator",style:i,onClick:s},"+",e-1)}(n+1,c,o,this.onClickStack):null)}get refInfo(){const{refId:e,store:{refs:t}}=this.props;return t.$allRefs.map.get(e)??null}}function mt(e,t,n,s,i,o,r,a,l,c,h,u,d,p,g,f){const{id:w}=t,b=p===w,y=("Remote"===t.location?h:u).get(w),{left:$,top:v,stackSize:k,orderInStack:C,width:_}=s,{left:S,top:x}=i;return(0,m.createElement)(ut,{store:e,showingRefView:o,refId:w,key:w,index:n,toX:$,toY:v,fromX:0===S?$:S,fromY:0===x?v:x,duration:pe.zj.animationTime.medium,width:_,commitWidth:r,marginWidth:a,hoveringCard:d===w||b,hoveringStack:t.commitId===l,isOnSelectedCommit:c===t.commitId,headId:g,showingContextMenu:b,stackSize:k,orderInStack:C,aheadOfHead:y?.aheadOfHead??0,searchText:f})}class dt extends m.Custom{render(){const{positions:e,pairs:t,diffsToHead:n,commitWidth:s,commitLeft:i,timeInfo:o}=this.props,r=[];for(const a of t.values()){const{local:t,remote:l}=a;let c=t?.head??!1;if(t&&0===l.length){const a=pt(t,e,n,o,i,s,c);a&&r.push(a),c&&(c=!1)}for(const t of l){const a=pt(t,e,n,o,i,s,c);a&&r.push(a),c&&(c=!1)}}return(0,m.createElement)("div",{className:"RefScaleInfo"},r)}}function pt({shortName:e,id:t},n,s,i,o,r,a){const l=n.get(t),c=s.get(t);return l?.visible&&c?(0,m.createElement)("div",{key:t,className:"RefScaleInfo-row",style:{top:l.top+2,height:26,gridTemplateColumns:`${o}px ${r}px ${o}px`}},function(e,t){const{aheadOfHead:n,behindHead:s}=e;if(t)return(0,m.createElement)("span",{className:"RefScaleInfo-diff",style:{fontWeight:600}},"Current Branch");if(0===s&&0===n)return(0,m.createElement)("span",null);const i=`${n} commit${1!==n?"s":""} ahead, ${s} behind your current branch`;return(0,m.createElement)("span",{className:"RefScaleInfo-diff",title:i},(0,m.createElement)("b",null,n)," Ahead, ",(0,m.createElement)("b",null,s)," Behind")}(c,a),(0,m.createElement)("span",{className:"RefScaleInfo-background",style:{background:(0,I.p5)(e,.15)}}),(0,m.createElement)("span",{className:"RefScaleInfo-time"},i.get(t)?.timeString??"")):null}class gt extends m.Custom{render(){const{store:e}=this.props,{nav:t,layout:n}=e,{$showingRefView:s,$viewingPatch:i}=t;let o={};i&&(o.opacity=0);const{$scrollChange:r}=n;return s&&(o.top=-r,o.transform=`translateY(${r}px)`),(0,m.createElement)("div",{className:"RefScale",inert:i,style:o},(0,m.createElement)(ft,{store:e}))}}class ft extends m.Custom{render(){const{refs:e,layout:t,nav:n}=this.props.store,{$commitWidth:s,$commitLeft:i,$timeInfo:o}=t,{$current:r,prev:a}=t.refPositions,{$filteredRefs:l,$diffsToHead:c,$localRefDiffs:h,$repoStatus:u,$refSearch:d}=e,{$showingRefView:p,$selectedCommitId:g,$hoveredRefCardId:f,$refCardMenuId:w}=n;if(0===l.array.length)return null;const b=e.$filteredRefs.map.get(f)?.commitId??null,y=[],$=p?d:"";for(let e=0;e<l.array.length;e++){const t=l.array[e],{id:n}=t,o=r.get(n);if(void 0===o)continue;const m=a.get(n)??o;(o.visible||m.visible)&&y.push(mt(this.props.store,l.array[e],e,o,m,p,s,i,b,g,c,h,f,w,u?.headRefId??null,$))}return p&&y.push((0,m.createElement)(dt,{key:"RefScaleInfo",positions:r,pairs:l.pairs,diffsToHead:c,localRefDiffs:h,commitWidth:s,commitLeft:i,timeInfo:o})),(0,m.createElement)(m.Fragment,null,y)}}var wt=Object.defineProperty,bt=(e,t,n)=>(((e,t,n)=>{t in e?wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class yt extends m.Custom{constructor(){super(...arguments),bt(this,"ref",(0,m.createRef)()),bt(this,"resizeObserver",null)}render(){return(0,m.createElement)("div",{className:"SizeObserver",ref:this.ref},this.props.children)}componentDidMount(){const e=this.ref.current;e&&(this.resizeObserver=new ResizeObserver((e=>{const{width:t,height:n}=e[0].contentRect;this.props.onResize(t,n)})),this.resizeObserver.observe(e))}componentWillUnmount(){this.resizeObserver?.disconnect()}}var $t=Object.defineProperty,vt=(e,t,n)=>(((e,t,n)=>{t in e?$t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class kt extends m.Custom{constructor(){super(...arguments),vt(this,"initialMouseX",0),vt(this,"initialListWidth",0),vt(this,"onMouseDown",(e=>{this.initialMouseX=e.clientX,this.initialListWidth=this.props.vm.$listWidth,window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",(()=>{window.removeEventListener("mousemove",this.onMouseMove)}),{once:!0})})),vt(this,"onMouseMove",(e=>{const t=e.clientX-this.initialMouseX;this.props.vm.setListWidth(this.initialListWidth+t)}))}render(){return(0,m.createElement)("div",{className:"ListResizer",style:{height:this.props.vm.$bodyHeight}},(0,m.createElement)("div",{className:"ListResizer-grabber",onMouseDown:this.onMouseDown}))}}var Ct=Object.defineProperty,_t=(e,t,n)=>(((e,t,n)=>{t in e?Ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class St extends m.Custom{constructor(){super(...arguments),_t(this,"ref",(0,m.createRef)()),_t(this,"$dimensions",null),_t(this,"$fileSize",null)}render(){const{imagePath:e,type:t,style:n,maxHeight:s,message:i}=this.props,o=`ImageInfo ImageInfo-${t}`;return(0,m.createElement)("div",{className:o,style:n},(0,m.createElement)("div",{className:"ImageInfo-title"},i),(0,m.createElement)("img",{className:"ImageInfo-image",style:{maxHeight:s},ref:this.ref,src:e,alt:"",onLoad:async()=>{const t=this.ref.current;if(t){const n=await N.RT.file_size(e.split("?")[0]),s="Ok"in n?n.Ok:0;this.setInfo(t.naturalWidth,t.naturalHeight,s)}}}),(0,m.createElement)("div",{className:"ImageInfo-info"},this.drawDimensions(),this.drawFileSize()))}drawDimensions(){const{$dimensions:e}=this;return e?(0,m.createElement)(m.Fragment,null,(0,m.createElement)("div",null,"Width:"),(0,m.createElement)("div",null,e.width,"px"),(0,m.createElement)("div",null,"Height:"),(0,m.createElement)("div",null,e.height,"px")):null}drawFileSize(){const{$fileSize:e}=this;return null===e?null:(0,m.createElement)(m.Fragment,null,(0,m.createElement)("div",null,"File Size:"),(0,m.createElement)("div",null,xt(e)))}setInfo(e,t,n){this.$dimensions={width:e,height:t},this.$fileSize=n}}function xt(e){if(0===e)return"0 kB";const t=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB","GB","TB"][t]}const Pt={showAdded:!1,showDeleted:!1,addedName:"Added",deletedName:"Deleted"};async function Et(e,t,n,s){const i=await async function(e,t,n){const s=(0,$.tS)(e+t+n)+(0,$.QC)(t),i=await N.RT.temp_dir("");return"Ok"in i?(0,$.uJ)(i.Ok,s):null}(t,n,s);return i&&await N.RT.load_commit_image({repoPath:e,commitId:t,originalImagePath:n,tempImagePath:i})&&await N.RT.path_exists(i)?i:null}var Rt=Object.defineProperty,It=(e,t,n)=>(((e,t,n)=>{t in e?Rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Tt extends m.Custom{constructor(){super(...arguments),It(this,"$readyToShow",!1),It(this,"$oldImagePath",null),It(this,"$newImagePath",null),It(this,"setOldImagePath",(async e=>{null!==e&&await N.RT.path_exists(e)&&(this.$oldImagePath=e)}))}render(){return this.$readyToShow?(0,m.createElement)("div",{className:"ImageDiffView"},(0,m.createElement)("div",{className:"ImageDiffView-row"},this.drawOld(),this.drawAddedImage())):null}async componentDidMount(){const e=this.$imageDiffFlags;e.showAdded&&await this.loadAddedImage(),e.showDeleted&&await this.loadDeletedImage(),this.setReady(!0)}get $imageDiffFlags(){const e=this.$selectedPatch;return e?function(e){switch(e.patchType){case" ":case"?":case"C":case"A":return{showAdded:!0,showDeleted:!1,addedName:"Added",deletedName:"Deleted"};case"D":return{showAdded:!1,showDeleted:!0,addedName:"Added",deletedName:"Deleted"};case"T":case"M":return{showAdded:!0,showDeleted:!0,addedName:"Added",deletedName:"Deleted"};case"R":return function(e){return{showAdded:!0,showDeleted:!1,addedName:`Renamed "${(0,g.WP)(e.oldFile)}" to "${(0,g.WP)(e.newFile)}"`,deletedName:"",rename:!0}}(e);case"U":case"X":case"!":case"B":return Pt}}(e):Pt}get $selectedPatch(){const{repo:e,wip:t}=this.props.store;return e.$selectedPatch?e.$selectedPatch:t.$selectedPatch?t.$selectedPatch:null}async loadAddedImage(){const{store:{repoPath:e,repo:{$selectedPatch:t}},newFile:n,mode:s}=this.props;"wip"===s?await this.setNewImagePath((0,$.uJ)(e,n)):t&&await this.setNewImagePath(await this.checkoutImageFromHistory(e,t.commitId,n,"added"))}async loadDeletedImage(){const{store:{repoPath:e},oldFile:t}=this.props,n=this.getOldImageCommitId();n&&await this.setOldImagePath(await this.checkoutImageFromHistory(e,n,t,"deleted"))}getOldImageCommitId(){const{store:{repo:{$commits:e,$selectedCommit:t},refs:n},mode:s}=this.props;if("wip"===s)return n.$repoStatus?.localCommitId??null;if(("commit"===s||"stash"===s)&&t){const[n]=t.parentIds;return e.get(n)?.id??null}return null}drawOld(){return null!==this.$oldImagePath?(0,m.createElement)(St,{imagePath:this.$oldImagePath,maxHeight:.7*this.props.columnSize.$bodyHeight,message:this.$imageDiffFlags.deletedName,type:"deleted"}):null}async checkoutImageFromHistory(e,t,n,s){return Et(e,t,n,s)}async setNewImagePath(e){null!==e&&await N.RT.path_exists(e)&&(this.$newImagePath=`${e}?${Date.now()}`)}drawAddedImage(){return null!==this.$newImagePath?(0,m.createElement)(St,{imagePath:this.$newImagePath,maxHeight:.7*this.props.columnSize.$bodyHeight,style:{maxWidth:this.$oldImagePath?"45%":void 0},message:this.$imageDiffFlags.addedName,type:!0===this.$imageDiffFlags.rename?"renamed":"added"}):null}setReady(e){this.$readyToShow=e}}var Nt=n(3212),Mt=n(5675),Lt=n(6386),Ft=n(4444),Ot=n(7999),Dt=n(2910),jt=n(6046),zt=n(6755),Wt=n(6947),Vt=n(4222),At=Object.defineProperty,Ht=(e,t,n)=>(((e,t,n)=>{t in e?At(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Bt{constructor(e,t,n){this.store=e,this.hunkLineStore=t,this.cardVm=n,Ht(this,"$scrollTop",0),Ht(this,"$scrollLeft",0),Ht(this,"$hoveredLineIndex",null),Ht(this,"$hoveredLineSide",null),Ht(this,"$focussedPane",Vt.M3),Ht(this,"setScroll",(e=>{const t=e.current;null!==t&&(this.$scrollTop=t.scrollTop,this.$scrollLeft=t.scrollLeft)})),Ht(this,"showContextMenu",(async e=>{const t=[];if("wip"===this.mode){const{$hoveredLineIndex:e,$hoveredLineSide:n}=this;if(e&&n){const s=n===Vt.M3?this.hunkLinesLeft[e]:this.hunkLinesRight[e];t.push(...(0,zt.C)(s,this))}}await(0,k.O0)(t,e,{usePoint:!0})})),(0,m.init$)(this)}resetScroll(){this.$scrollLeft=0,this.$scrollTop=0}get hunkLinesLeft(){return this.hunkLineStore.$splitHunkLines[0]}get hunkLinesRight(){return this.hunkLineStore.$splitHunkLines[1]}get mode(){return this.hunkLineStore.$mode}get $width(){const{hunkLinesLeft:e,hunkLinesRight:t}=this;return 0===e.length||0===t.length?this.cardVm.$codeViewerWidth:this.cardVm.$codeViewerWidth/2}get $height(){return Math.round(this.cardVm.$bodyHeight)}setHoveredLine(e,t){"wip"===this.mode&&(this.$hoveredLineIndex=e,this.$hoveredLineSide=t)}get $firstLine(){return Math.floor(this.$scrollTop/Nt.K_)}get $numLines(){return 1+Math.ceil(this.$height/Nt.K_)}get $marginWidth(){const{hunkLinesLeft:e,mode:t}=this;let n=e[e.length-2];if(n||(n=this.hunkLinesRight[this.hunkLinesRight.length-2]),n){const e=Math.max(n.newNum??0,n.oldNum??0).toString().length;return Wt._3*e+2*Nt.j4+("wip"===t?Nt.Sq:0)}return 0}get $runwayWidth(){return this.$marginWidth+this.$textWidth}get $textWidth(){return Math.max(15+this.$longestLine*Wt._3,this.$width-this.$marginWidth)}get $runwayHeight(){const e=Math.max(this.hunkLinesLeft.length,this.hunkLinesRight.length);return Math.max(e*Nt.K_,this.$height)}get $longestLine(){let e=0;for(const t of this.hunkLinesLeft){const n=t.text.length;n>e&&(e=n)}for(const t of this.hunkLinesRight){const n=t.text.length;n>e&&(e=n)}return e}}var Ut=Object.defineProperty,Kt=(e,t,n)=>(((e,t,n)=>{t in e?Ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class qt extends m.Custom{constructor(){super(...arguments),Kt(this,"vm",new Bt(this.props.store,this.props.hunkLineStore,this.props.cardVm)),Kt(this,"runwayRefLeft",(0,m.createRef)()),Kt(this,"contentRefLeft",(0,m.createRef)()),Kt(this,"textRefLeft",(0,m.createRef)()),Kt(this,"runwayRefRight",(0,m.createRef)()),Kt(this,"contentRefRight",(0,m.createRef)()),Kt(this,"textRefRight",(0,m.createRef)()),Kt(this,"onMouseEnterLeft",(()=>{this.vm.$focussedPane=Vt.M3})),Kt(this,"onMouseEnterRight",(()=>{this.vm.$focussedPane=Vt.NS})),Kt(this,"onLeftPaneScroll",(()=>{this.vm.$focussedPane===Vt.M3&&this.vm.setScroll(this.runwayRefLeft)})),Kt(this,"onRightPaneScroll",(()=>{this.vm.$focussedPane===Vt.NS&&this.vm.setScroll(this.runwayRefRight)}))}render(){const{$runwayWidth:e,$runwayHeight:t,$marginWidth:n,$textWidth:s,$width:i,$height:o}=this.vm,r=this.drawContentLeft(),a=this.drawContentRight();return(0,m.createElement)("div",{className:"CodeViewerSplit"},r?(0,m.createElement)(Lt.B,{className:"CodeViewerSplit-pane",width:i,height:o,contentWidth:e,contentHeight:t,onNativeScroll:this.onLeftPaneScroll,onMouseEnter:this.onMouseEnterLeft,outerRef:this.runwayRefLeft,contentRef:this.contentRefLeft},(0,m.createElement)("div",{className:"CodeViewer-margin",style:{width:n,height:t}},r.nums),(0,m.createElement)("div",{className:"CodeViewer-text",ref:this.textRefLeft,style:{left:n,width:s,height:t}},r.lines),(0,m.createElement)("div",{className:"CodeViewer-overlay"},r.headers)):null,a?(0,m.createElement)(Lt.B,{className:"CodeViewerSplit-pane",width:i,height:o,contentWidth:e,contentHeight:t,onNativeScroll:this.onRightPaneScroll,onMouseEnter:this.onMouseEnterRight,outerRef:this.runwayRefRight,contentRef:this.contentRefRight},(0,m.createElement)("div",{className:"CodeViewer-margin",style:{width:n,height:t}},a.nums),(0,m.createElement)("div",{className:"CodeViewer-text",ref:this.textRefRight,style:{left:n,width:s,height:t}},a.lines),(0,m.createElement)("div",{className:"CodeViewer-overlay"},a.headers)):null)}drawContentLeft(){const{store:e,hunkLineStore:{$mode:t,$hunks:n},filePath:s}=this.props,{hunkLinesLeft:i,$firstLine:o,$numLines:r,$textWidth:a,$marginWidth:l,$width:c}=this.vm,{wip:{stagingSt:h}}=e,u=Math.min(o+r,i.length),d=[],p=[],g=[];for(let r=o;r<u;r++){const o=i[r];if(void 0===o)continue;const u=r.toString();if("HeaderEnd"===o.status){const{hunkIndex:i}=o,a=n[i];if(void 0!==a){const n="wip"===t?h.hunkStagedState(a):null;g.push((0,m.createElement)(Dt.f,{store:e,hunkLine:o,hunk:a,mode:t,key:`${u}headerEnd`,top:r*Nt.K_-Nt.K_/2+1,width:c,marginWidth:l,side:Vt.M3})),p.push((0,m.createElement)(jt.b,{vm:this.vm,index:r,hunk:a,key:u,top:r*Nt.K_,width:l,filePath:s,hunkStage:n,side:Vt.M3}))}}else p.push((0,m.createElement)(Ot.b,{vm:this.vm,index:r,hunkLine:o,key:u,top:r*Nt.K_,width:l,first:0===r,filePath:s,side:Vt.M3}));d.push((0,m.createElement)(Ft.S,{vm:this.vm,mode:t,index:r,hunkLine:o,key:u,top:r*Nt.K_,width:a,first:0===r,side:Vt.M3}))}return 0===p.length?null:{nums:p,lines:d,headers:g}}drawContentRight(){const{store:e,hunkLineStore:{$mode:t,$hunks:n},filePath:s}=this.props,{hunkLinesRight:i,$firstLine:o,$numLines:r,$textWidth:a,$marginWidth:l,$width:c}=this.vm,{wip:{stagingSt:h}}=e,u=Math.min(o+r,i.length),d=[],p=[],g=[];for(let r=o;r<u;r++){const o=i[r];if(void 0===o)continue;const u=r.toString();if("HeaderEnd"===o.status){const{hunkIndex:i}=o,a=n[i];if(void 0!==a){const n="wip"===t?h.hunkStagedState(a):null;g.push((0,m.createElement)(Dt.f,{store:e,hunkLine:o,hunk:a,mode:t,key:`${u}headerEnd`,top:r*Nt.K_-Nt.K_/2+1,width:c,marginWidth:l,side:Vt.NS})),p.push((0,m.createElement)(jt.b,{vm:this.vm,index:r,hunk:a,key:u,top:r*Nt.K_,width:l,filePath:s,hunkStage:n,side:Vt.NS}))}}else p.push((0,m.createElement)(Ot.b,{vm:this.vm,index:r,hunkLine:o,key:u,top:r*Nt.K_,width:l,first:0===r,filePath:s,side:Vt.NS}));d.push((0,m.createElement)(Ft.S,{vm:this.vm,mode:t,index:r,hunkLine:o,key:u,top:r*Nt.K_,width:a,first:0===r,side:Vt.NS}))}return 0===p.length?null:{nums:p,lines:d,headers:g}}componentDidMount(){m.Reaction.value((()=>this.vm.store.nav.$selectedPatchId),(()=>{this.vm.resetScroll()}),this),m.Reaction.value((()=>this.vm.$scrollLeft),(e=>{const{textRefLeft:{current:t},textRefRight:{current:n}}=this;if(t&&n&&(t.style.transform=`translateX(${-e}px)`,n.style.transform=`translateX(${-e}px)`),this.vm.$focussedPane===Vt.M3){const{current:t}=this.runwayRefRight;t&&(t.scrollLeft=e)}else{const{current:t}=this.runwayRefLeft;t&&(t.scrollLeft=e)}}),this),m.Reaction.value((()=>this.vm.$scrollTop),(e=>{const{current:t}=this.runwayRefLeft,{current:n}=this.runwayRefRight;t&&n&&(this.vm.$focussedPane===Vt.M3?n.scrollTop=e:t.scrollTop=e)}),this)}}var Yt=Object.defineProperty,Gt=(e,t,n)=>(((e,t,n)=>{t in e?Yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Jt{constructor(e,t,n){this.parent=e,this.left=t,this.right=n,Gt(this,"x",0),Gt(this,"y",0),Gt(this,"side",0),Gt(this,"wheel",!1),Gt(this,"onLeftScroll",(()=>{if(0!==this.side)return;if(this.wheel)return void(this.wheel=!1);const{left:e,right:t}=this;t.scrollLeft=e.scrollLeft,t.scrollTop=e.scrollTop})),Gt(this,"onRightScroll",(()=>{if(1!==this.side)return;if(this.wheel)return void(this.wheel=!1);const{left:e,right:t}=this;e.scrollLeft=t.scrollLeft,e.scrollTop=t.scrollTop})),Gt(this,"onWheel",(e=>{const{deltaX:t,deltaY:n}=e;if(Math.abs(t)<40&&Math.abs(n)<40){e.preventDefault(),this.wheel=!0;const{left:s,right:i}=this;s.scrollLeft+=t,s.scrollTop+=n,i.scrollLeft+=t,i.scrollTop+=n}})),t.addEventListener("mouseenter",(()=>{this.side=0})),n.addEventListener("mouseenter",(()=>{this.side=1})),t.addEventListener("scroll",this.onLeftScroll),n.addEventListener("scroll",this.onRightScroll),e.addEventListener("wheel",this.onWheel)}dispose(){this.parent.removeEventListener("wheel",this.onWheel)}}var Xt=Object.defineProperty,Zt=(e,t,n)=>(((e,t,n)=>{t in e?Xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Qt extends m.Custom{constructor(){super(...arguments),Zt(this,"ref",(0,m.createRef)()),Zt(this,"syncScroll",null),Zt(this,"loadHtml",(async()=>{const{current:e}=this.ref;if(!e)return;this.syncScroll&&this.syncScroll.dispose();const{repo:{$selectedCommit:t,$selectedPatch:n},global:{settings:{$splitCodeViewer:s}},repoPath:i}=this.props.store;if(t&&n){const o=await N.RT.get_patch_as_html({repoPath:i,commit:t,patch:n,theme:pe.zj.$theme.name,split:s});"Ok"in o?(e.innerHTML=o.Ok,this.setupScrollSync()):e.innerHTML=""}}))}render(){const{cardVm:e,store:{global:{settings:{$splitCodeViewer:t}}}}=this.props,{$codeViewerWidth:n,$bodyHeight:s}=e;return(0,m.createElement)("div",{className:m.c`CodeViewerSsr ${!0} CodeViewerSsr-split ${t}`,style:{width:n,height:s},ref:this.ref})}async componentDidMount(){m.Reaction.value((()=>this.props.store.repo.$selectedPatch),this.loadHtml,this),m.Reaction.value((()=>pe.zj.$theme),this.loadHtml,this),await this.loadHtml()}setupScrollSync(){if(!this.props.store.global.settings.$splitCodeViewer)return;const e=document.getElementsByClassName("CodeViewerSsr-split").item(0),t=e?.children,n=t?.item(0),s=t?.item(1);e instanceof HTMLElement&&n instanceof HTMLElement&&s instanceof HTMLElement&&(this.syncScroll=new Jt(e,n,s))}}var en=Object.defineProperty;class tn extends m.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?en(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="onText")?e+"":e,(e=>{this.props.vm.setFilterText(e)}))}render(){const{store:{global:{windowSt:e},repo:t},vm:n}=this.props;if(e.$animatingCommits)return null;const{$patches:{patches:s}}=t;return 0===s.length?null:(0,m.createElement)("div",{className:"CommitCardFullscreenBody"},(0,m.createElement)("div",{className:"CommitCardFullscreenBody-sidebar"},this.drawFilter(),(0,m.createElement)(Me,{store:this.props.store,vm:n})),(0,m.createElement)(kt,{vm:n}),this.drawContent())}drawFilter(){return(0,m.createElement)("div",{className:"CommitCardFullscreenBody-sidebar-filter"},(0,m.createElement)(Mt.L,{value:this.props.vm.$filterText,placeholder:"Filter",onText:this.onText,clearButton:!0}))}drawContent(){const{store:e,vm:t}=this.props,{repo:n,repo:{$selectedPatch:s,$selectedCommit:i},global:{settings:{$ssrCodeViewer:o,$splitCodeViewer:r}}}=e;if(null!==s&&null!==i){if(s.isImage){const{oldFile:n,newFile:o}=s;return(0,m.createElement)(Tt,{store:e,key:n,mode:null===i.stashId?"commit":"stash",columnSize:t,oldFile:n,newFile:o})}return o?(0,m.createElement)(Qt,{store:e,cardVm:t,commit:i,patch:s}):r?(0,m.createElement)(qt,{store:e,hunkLineStore:n,cardVm:t,filePath:s.newFile}):(0,m.createElement)(Nt.Cv,{store:e,hunkLineStore:n,cardVm:t,filePath:s.newFile})}return null}componentDidMount(){const{store:{repo:{commitFilters:{$file:e},$patches:{patches:t}},nav:n}}=this.props;if(e){const s=t.find((t=>t.newFile.includes(e.file_name)));s&&n.setSelectedPatchId(s.id)}}}function nn(e){return(0,m.createElement)("div",{className:"CardToolbar"},e)}var sn=Object.defineProperty,on=(e,t,n)=>(((e,t,n)=>{t in e?sn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class rn extends m.Custom{constructor(){super(...arguments),on(this,"vm",new Oe(this.props.store)),on(this,"popStash",(async()=>{const{commit:e,store:t}=this.props;await Ve(t,e,"pop")})),on(this,"onHeaderResize",((e,t)=>{this.vm.setHeaderHeight(t)}))}render(){const{commit:e,store:t}=this.props;return(0,m.createElement)("div",{className:`CommitCardFullscreen ${hn()}`},(0,m.createElement)(yt,{onResize:this.onHeaderResize},(0,m.createElement)(we,{store:t,commit:e,toolbar:this.drawToolbar()}),",",(0,m.createElement)(ue,{vm:this.vm,commit:e,fullScreen:!0,messageExpanded:!1})),this.drawBody())}drawBody(){const{store:e,commit:t}=this.props,{global:{windowSt:n},repo:s}=e;if(n.$animatingCommits)return null;const{$patches:{patches:i}}=s;return 0===i.length?null:(0,m.createElement)(tn,{store:e,commit:t,vm:this.vm})}drawToolbar(){const{commit:e}=this.props;if(null!==e.stashId)return nn([this.drawPopStashButton()])}drawPopStashButton(){return(0,m.createElement)(S.R,{onClick:this.popStash,key:"pop"},"Unstash Changes")}}var an=(e=>(e[e.forward=0]="forward",e[e.backwards=1]="backwards",e[e.none=2]="none",e))(an||{});let ln=2;function cn(e){ln=e}function hn(){let e;switch(ln){case 0:e=m.c` CommitCardFullscreenForward`;break;case 1:e=m.c` CommitCardFullscreenBack`;break;case 2:e=""}return ln=2,e}var un=Object.defineProperty;class mn extends m.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="onClick")?e+"":e,(async e=>{const{store:t,commit:n}=this.props;await(0,k.O0)(Ze(t,n),e)}))}render(){const{editable:e,showMenu:t}=this.props,n=Te.iw;let s;return s=e&&!t?(0,m.createElement)("svg",{viewBox:`0 0 ${n} ${n}`},(0,m.createElement)("circle",{style:{fill:"var(--blueText)"},cx:n/2,cy:n/2,r:.1*n})):(0,m.createElement)("span",{className:"icon-menu",style:{fontSize:.44*n}}),(0,m.createElement)(S.R,{className:m.c`CommitCardMenuButton ${!0} CommitCardMenuButton-editable ${e}`,colour:"subtle",style:{width:n,height:n},onClick:this.onClick,title:e?"This commit can be edited as it hasn't been pushed":"show commit menu"},s)}}var dn=n(6343),pn=n(8290),gn=Object.defineProperty,fn=(e,t,n)=>(((e,t,n)=>{t in e?gn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class wn extends m.Custom{constructor(){super(...arguments),fn(this,"lastTransform",this.props.transform),fn(this,"lastCompleted",null),fn(this,"inProgress",null),fn(this,"visible",this.props.visible)}animate(){const e=this.ref.current;if(null===e||!this.visible)return;const{lastTransform:t,props:{transform:n,duration:s}}=this;if(this.lastCompleted===n||this.inProgress===n)return;let i=s;if((this.inProgress||this.lastCompleted||t)&&t!==n||(i=0),this.inProgress)for(const t of e.getAnimations())t.cancel();e.animate([{transform:this.lastCompleted??t??n},{transform:n}],{easing:"ease",duration:i,fill:"forwards"}).onfinish=()=>{this.inProgress=null,this.lastCompleted=n},this.inProgress=n}componentDidMount(){this.animate()}componentDidUpdate(){this.animate()}updateWithNewProps(e){(0,pn.rK)(this.props,e)||(this.lastTransform=this.props.transform,this.visible=this.props.visible||e.visible,this.visible||(this.lastCompleted=null,this.inProgress=null),this.props=e,this.update(),this.componentDidUpdate())}}var bn=Object.defineProperty,yn=(e,t,n)=>(((e,t,n)=>{t in e?bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class $n extends wn{constructor(){super(...arguments),yn(this,"ref",(0,m.createRef)())}render(){return this.props.visible?(0,m.createElement)("div",{className:"CommitCardBackground",style:{width:dn.rM,height:dn.rM},ref:this.ref}):null}}class vn extends m.Custom{constructor(){super(...arguments),yn(this,"ref",(0,m.createRef)()),yn(this,"animateCardBackground",(()=>{const e=this.ref.current;if(e){const{width:t,height:n,prevWidth:s,prevHeight:i,animationDuration:o}=this.props;e.animate([{transform:`scale(${s/dn.rM}, ${i/dn.rM})`},{transform:`scale(${t/dn.rM}, ${n/dn.rM})`}],{easing:"ease",duration:o,fill:"forwards"})}}))}render(){return(0,m.createElement)("div",{className:"CommitCardBackground",style:{width:dn.rM,height:dn.rM},ref:this.ref,key:"CommitCardBackground"})}componentDidMount(){this.animateCardBackground()}componentDidUpdate(){this.animateCardBackground()}}function kn(e,t,n,s=!0){const i=t.length,o=32*i;let r={transform:`translateX(${e-o}px)`,width:o,gridTemplateColumns:`repeat(${i}, 32px)`};return s||(r.animationDuration="0s"),(0,m.createElement)("div",{className:"CardControls",style:r,key:`CardControls${n}`},t)}var Cn=n(7027),_n=Object.defineProperty,Sn=(e,t,n)=>(((e,t,n)=>{t in e?_n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class xn extends m.Custom{constructor(){super(...arguments),Sn(this,"onClick",(async()=>{this.$fullScreen?await this.closeCard():await this.onClickExpand()})),Sn(this,"onClickExpand",(async()=>{this.$fullScreen||(this.props.commitId===Cn.z?this.props.store.wip.selectFirstPatch():this.props.store.repo.selectFirstPatch())}))}render(){const{$fullScreen:e}=this;return(0,m.createElement)(S.R,{colour:"subtle",className:J.YZ,onClick:this.onClick,title:e?"Minimise this commit":"Expand this commit"},this.drawExpandIcon(e))}drawExpandIcon(e){const t=!e,n=t?"0":"180deg",s=t?"180deg":"0";return(0,m.createElement)("div",{className:m.c`ExpandIcon ${!0} ExpandIcon-min ${!t}`},Pn({transform:`rotate(${s})`}),Pn({transform:`rotate(${n})`}))}get $fullScreen(){const{store:e}=this.props,{nav:t,global:{windowSt:n}}=e;return t.$viewingPatch&&!n.$animatingCommits}async closeCard(){const{nav:e}=this.props.store;e.$viewingPatch?e.setSelectedPatchId(null):e.setSelectedCommit(null)}}function Pn(e){return(0,m.createElement)("div",{className:"ExpandIcon-arrow",style:e})}var En=Object.defineProperty,Rn=(e,t,n)=>(((e,t,n)=>{t in e?En(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class In extends at{constructor(){super(...arguments),Rn(this,"ref",(0,m.createRef)()),Rn(this,"onClick",(async()=>{const{nav:e}=this.props.store;await this.onMouseLeave(),e.setSelectedCommit(this.props.commitId)})),Rn(this,"showContextMenu",(async e=>{const{store:t,commitId:n,commits:s}=this.props,i=s.get(n);await(0,k.O0)(Ze(t,i),e,{usePoint:!0})})),Rn(this,"onMouseEnter",(()=>{this.props.store.nav.setHoveredCommit(this.props.commitId)})),Rn(this,"onMouseLeave",(async()=>{(0,k.hz)()&&await(0,k.ce)(),this.props.store.nav.setHoveredCommit("")})),Rn(this,"onClickNextCommit",(async()=>{cn(an.forward);const{repo:e}=this.props.store,t=e.getNextCommitId();null!==t&&await e.switchToCommit(t)})),Rn(this,"onClickPrevCommit",(async()=>{cn(an.backwards);const{repo:e}=this.props.store,t=e.getPrevCommitId();null!==t&&await e.switchToCommit(t)}))}render(){const{width:e,height:t,prevWidth:n,prevHeight:s,isSelected:i,viewingPatch:o,commitId:r,commits:a}=this.props,l=a.get(r);if(void 0===l)return null;const c=o&&!i;return(0,m.createElement)("div",{ref:this.ref,className:m.c`CommitCard ${!0} selected ${i} CommitCard-hidden ${c}`,tabIndex:c?-1:0,style:{width:e,height:t}},i?(0,m.createElement)(vn,{key:"background",width:e,height:t,prevWidth:n,prevHeight:s,animationDuration:pe.zj.animationTime.medium}):null,this.drawBody(i,o,l),i?this.drawCardControls(l):null)}drawBody(e,t,n){return e?t?(0,m.createElement)(rn,{store:this.props.store,commit:n}):(0,m.createElement)(We,{store:this.props.store,commit:n}):this.drawCommitCardClosed(n)}drawCommitCardClosed(e){return(0,m.createElement)("div",{className:J.BA,onClick:this.onClick,onContextMenu:this.showContextMenu,onMouseOver:this.onMouseEnter,onMouseLeave:this.onMouseLeave},(0,me.sY)(e,24,this.props.theme.name),(0,m.createElement)("div",{className:"CommitCard-message"},le(e.message)),this.drawMenuButton(e))}drawMenuButton(e){const{editable:t,hoveringOnClosedCard:n}=this.props;return n||t?(0,m.createElement)(mn,{store:this.props.store,commit:e,editable:t,showMenu:n}):null}drawCardControls(e){const{store:t,width:n,editable:s}=this.props,{nav:i}=t,{$selectedCommitId:o}=i;if(null!==o){const{$selectedPatchId:r}=i;if(null!==r){const i=0===e.index&&!t.wip.$haveWIP,r=e.index===t.repo.$commits.size-1;return kn(n,[(0,m.createElement)(S.R,{colour:"subtle",onClick:this.onClickPrevCommit,disabled:i,title:"Go to previous commit",style:{transform:"rotate(0deg)",paddingTop:1}},Tn(14,i)),(0,m.createElement)(S.R,{colour:"subtle",onClick:this.onClickNextCommit,disabled:r,title:"Go to next commit",style:{transform:"rotate(180deg)",paddingTop:2}},Tn(14,r)),(0,m.createElement)(mn,{store:t,showMenu:!0,editable:s,commit:e}),(0,m.createElement)(xn,{store:t,commitId:o})],o,!1)}return kn(n,[(0,m.createElement)(mn,{store:t,showMenu:!0,editable:s,commit:e}),(0,m.createElement)(xn,{store:t,commitId:o})],o)}return null}}function Tn(e,t){const n=e/2,s=e-2,i=.73*s,o=.27*s;return(0,m.createElement)("svg",{width:e,height:e,style:{opacity:t?.5:1}},(0,m.createElement)("line",{x1:2,y1:i,x2:n,y2:o,style:{stroke:"var(--primaryTextColour)",strokeWidth:2,strokeLinecap:"round"}}),(0,m.createElement)("line",{x1:n,y1:o,x2:s,y2:i,style:{stroke:"var(--primaryTextColour)",strokeWidth:2,strokeLinecap:"round"}}))}function Nn(e,t,n,s,i,o,r,a,l,c){const{left:h,top:u,width:d,height:p}=s,g=n===o,f=l===n;return(0,m.createElement)(In,{key:n,store:e,commits:t,commitId:n,isSelected:g,width:d,height:p,prevWidth:i.width,prevHeight:i.height,toX:h,toY:u,fromX:i.left,fromY:i.top,duration:pe.zj.animationTime.medium,viewingPatch:r,editable:a,hoveringOnClosedCard:f,theme:c})}function Mn(e,t){return(0,m.createElement)("div",{className:"WipCardHeader"},(0,me.ZR)(32,{marginRight:5}),(0,m.createElement)("div",{className:"WipCardHeader-message"},e),(0,m.createElement)(m.Fragment,null,t??(0,m.createElement)("div",{style:{flexGrow:3}})))}var Ln=Object.defineProperty,Fn=(e,t,n)=>(((e,t,n)=>{t in e?Ln(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class On extends m.Custom{constructor(){super(...arguments),Fn(this,"onClickSave",(async()=>{this.props.conflictViewSt.file?.saveFile()})),Fn(this,"abortMerge",(async()=>{const{wip:e,global:{consoleSt:t},repoPath:n}=this.props.conflictViewSt.store;await t.showLoading("Aborting merge",(async()=>{await N.En.command({repoPath:n,args:["merge","--abort"]}),await N.En.command({repoPath:n,args:["rebase","--abort"]}),await N.En.command({repoPath:n,args:["reset","--merge","HEAD"]}),await e.loadWip()}),{hideError:!0})}))}render(){return Mn(this.getMessageText(),[this.drawToolbar()])}getMessageText(){const{store:e}=this.props.conflictViewSt,{nav:t}=e;return t.$viewingPatch?function(e){const{wip:t}=e,n=t.$selectedPatch,s=t.$numChanges;return null!==n?`Conflict${s>1?"s":""} in ${n.newFile}`:""}(e):Dn(e)}get $fullScreen(){const{nav:e,global:{windowSt:t}}=this.props.conflictViewSt.store;return e.$viewingPatch&&!t.$animatingCommits}drawToolbar(){return this.$fullScreen?nn([this.drawSaveButton(),this.drawAbortMergeButton()]):null}drawAbortMergeButton(){return(0,m.createElement)(S.R,{colour:"red",onClick:this.abortMerge,key:"abort"},"Abort Merge")}drawSaveButton(){const{file:e}=this.props.conflictViewSt;return null!==e&&e.conflictedDelete()?null:(0,m.createElement)(S.R,{colour:"green",disabled:e?.$saveButtonDisabled,onClick:this.onClickSave,key:"save"},"Save File")}}function Dn(e){const{wip:t,refs:n}=e,{$repoStatus:s}=n;if(!s)return"";const i=t.$numChanges;return 1===i?`1 file conflict found when merging into ${s.branchName}`:i>1?`${i} conflicting files found when merging into ${s.branchName}`:""}var jn=Object.defineProperty;class zn extends m.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?jn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="onClickWip")?e+"":e,(()=>{const{nav:e}=this.props.store;e.setSelectedCommit(Cn.z)}))}render(){return(0,m.createElement)("div",{className:"WipCardClosed",onClick:this.onClickWip,onKeyUp:this.onClickWip},(0,me.ZR)(24),this.renderMessageRow())}renderMessageRow(){const e=this.countPatchTypes(),t=Array.from(e.entries()).map((([e,t])=>(0,m.createElement)("div",{className:"WipCardClosed-iconGroup",key:e},(0,m.createElement)("div",{className:"WipCardClosed-iconGroup-count"},t),(0,m.createElement)(ye.q,{patchType:e}))));return(0,m.createElement)("div",{className:"WipCardClosed-message"},(0,m.createElement)("div",{className:"WipCardClosed-message-label"},this.getMessageText()),(0,m.createElement)(m.Fragment,null,t))}getMessageText(){const{wip:e}=this.props.store;return e.$haveConflicts?Dn(this.props.store):Pi(e.$numChanges)}countPatchTypes(){const{wip:{$patches:e}}=this.props.store,t=new Map;for(const n of e)Wn(t,n.patchType);return t}}function Wn(e,t){const n=e.get(t);void 0===n?e.set(t,1):e.set(t,n+1)}var Vn=n(320),An=Object.defineProperty,Hn=(e,t,n)=>(((e,t,n)=>{t in e?An(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Bn extends m.Custom{constructor(){super(...arguments),Hn(this,"patch",this.props.data.patches[this.props.index]),Hn(this,"onClickPatch",(e=>{e.stopPropagation();const{nav:t}=this.props.data.store;t.setSelectedPatchId(this.patch.id)})),Hn(this,"onContextMenu",(async e=>{const{data:{store:t}}=this.props,{repo:n,nav:s,repoPath:i}=t,{patch:o}=this;if(null===o)return;const r=[];"A"!==o.patchType&&r.push({label:`Show commits containing ${(0,g.WP)(o.newFile)}`,click:async()=>{n.commitFilters.setFileFilter({file_name:o.newFile}),s.setSelectedPatchId(null)}}),"D"!==o.patchType&&r.push({label:`Show in ${(0,v.dx)()}`,click:this.showFileInFolder}),r.push({label:"Copy path",click(){navigator.clipboard.writeText((0,$.uJ)(i,o.newFile))}}),await(0,k.O0)(r,e,{usePoint:!0})})),Hn(this,"showFileInFolder",(async()=>{const{patch:e}=this,{repoPath:t}=this.props.data.store;if(null!==t&&null!==e){const n=(0,$.uJ)(t,e.newFile);await u.g.showItemInFolder(n)}})),Hn(this,"onKeyUp",(e=>{if("Enter"===e.key||" "===e.key){const{nav:e}=this.props.data.store;e.setSelectedPatchId(this.patch.id)}}))}render(){const{style:e}=this.props;return(0,m.createElement)("div",{className:"WipListItem focusableItemInset",tabIndex:0,style:e,onClick:this.onClickPatch,onKeyUp:this.onKeyUp,onContextMenu:this.onContextMenu},(0,m.createElement)(be,{path:this.patch.newFile,style:{marginRight:7}}),(0,m.createElement)(ye.q,{patchType:this.patch.patchType}))}}var Un=Object.defineProperty;class Kn extends m.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?Un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="itemKey")?e+"":e,((e,t)=>t.patches[e].id))}render(){const{store:e,height:t}=this.props,{wip:n,layout:s,global:{windowSt:i}}=e;return i.$animatingCommits?null:n.$emptyMerge?this.drawEmptyMergeMessage():(0,m.createElement)(Re,{height:t,width:s.$wipPosition.width,itemCount:n.$patches.length,itemHeight:28,itemKey:this.itemKey,itemData:this.$itemData,item:Bn})}get $itemData(){const{store:e}=this.props;return{store:e,patches:e.wip.$patches}}drawEmptyMergeMessage(){return(0,m.createElement)("div",{className:"WipPatchList"},(0,m.createElement)("div",{className:"WipListItem",key:Vn.v,onClick:e=>this.onClickPatch(Vn.u,e)},qn))}async onClickPatch(e,t){t.stopPropagation();const{nav:n}=this.props.store;n.setSelectedPatchId(e.id)}}const qn="All conflicts have been resolved. Commit to complete the merge.";class Yn extends m.Custom{render(){const{store:e}=this.props;return(0,m.createElement)("div",{className:"WipCardExpanded"},Mn(this.getMessageText()),(0,m.createElement)(Kn,{store:e,height:Te.J9-48}))}getMessageText(){const{wip:e}=this.props.store;return Pi(e.$numChanges)}}var Gn=n(7406),Jn=Object.defineProperty;class Xn extends m.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?Jn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="showDropdown")?e+"":e,(async e=>{const{wip:{$patches:t,stagingSt:n,pinnedFiles:s},repoPath:i}=this.props.store,o=t.filter((e=>{const t=n.fileStagedState(e.newFile);return!s.has(i,e.newFile)&&("staged"===t||"mixed"===t)})).length,r=t.filter((e=>s.has(i,e.newFile))).length,a=[{label:"Stash All Changes",click:this.props.wipStore.stashAllChanges,enabled:r<t.length},{label:"Stash Selected Changes",click:this.props.wipStore.stashStagedChanges,enabled:o>0}];await(0,k.O0)(a,e)}))}render(){return(0,m.createElement)(S.R,{className:"StashButton",onClick:this.showDropdown},(0,m.createElement)("span",{className:"icon-stash"}),"Stash",Gn.D)}}var Zn=n(3992),Qn=n(8901),es=Object.defineProperty,ts=(e,t,n)=>(((e,t,n)=>{t in e?es(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class ns{constructor(e){this.store=e,ts(this,"discardAllChanges",(async()=>{if(!await(0,c.M5)("This will discard all staged, unstaged and any untracked files. Do you want to continue?"))return;const{store:e}=this,{wip:t,wip:{$patches:n},global:{consoleSt:s},repoPath:i,repo:o,nav:r}=e;await s.showLoading("Discarding changes",(async()=>{n.filter((e=>t.pinnedFiles.has(i,e.newFile))).length>0?(await ss(n.filter((e=>!t.pinnedFiles.has(i,e.newFile))),i),await o.loadOrReloadRepoData(),t.setCommitMessage("")):(await(0,M.n9)(i),r.goHome(),await o.loadOrReloadRepoData(),t.setCommitMessage(""))}))})),ts(this,"stashAllChanges",(async()=>{const{repo:e,global:{consoleSt:t},wip:{$patches:n,pinnedFiles:s,workingFilesSt:i},repoPath:o}=this.store;n.filter((e=>s.has(o,e.newFile))).length>0?(i.stageAll(),await this.stashStagedChanges()):await t.showLoading("Stashing all changes",(async()=>{await N.En.stash_changes({repoPath:o}),await e.loadOrReloadRepoData()}))})),ts(this,"stashStagedChanges",(async()=>{const{store:e}=this,{wip:t,wip:{workingFilesSt:n,pinnedFiles:s},repo:i,global:{consoleSt:o},refs:r,repoPath:a}=e;await o.showLoading("Stashing selected changes",(async()=>{if(0===t.$patches.filter((e=>{const n=t.stagingSt.fileStagedState(e.newFile),i=s.has(a,e.newFile);return"unStaged"===n||"mixed"===n||i})).length&&t.workingFilesSt.$visiblePatches.length===t.$patches.length)await N.En.stash_changes({repoPath:a});else{const{$repoStatus:t}=r;t?.localCommitId&&(await(0,Qn.pC)(e,n),await N.En.stash_staged({repoPath:a,headCommitId:t.localCommitId}))}await i.loadOrReloadRepoData()}))}))}}async function ss(e,t){for(const n of e)(await(0,M.E0)(t,n.newFile)).error||("A"===n.patchType?await N.En.command({repoPath:t,args:["clean","-f","--",n.newFile]}):await N.En.command({repoPath:t,args:["checkout","--",n.newFile]}))}var is=Object.defineProperty,os=(e,t,n)=>(((e,t,n)=>{t in e?is(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class rs extends m.Custom{constructor(){super(...arguments),os(this,"onClickDiscard",(async e=>{const{wip:{$patches:t,stagingSt:n,pinnedFiles:s},repoPath:i}=this.props.store,o=t.filter((e=>{const t=n.fileStagedState(e.newFile);return!s.has(i,e.newFile)&&("staged"===t||"mixed"===t)})).length,r=t.filter((e=>s.has(i,e.newFile))).length,a=[{label:"Discard All Changes",click:this.props.wipStore.discardAllChanges,enabled:r<t.length},{label:"Discard Selected Changes",click:this.discardSelectedChanged,enabled:o>0}];await(0,k.O0)(a,e)})),os(this,"discardSelectedChanged",(async()=>{const{store:e}=this.props,{wip:t,wip:{workingFilesSt:{$visiblePatches:n},$patches:s},global:{consoleSt:i},repoPath:o,repo:r}=e,a=new Set(n),l=s.filter((e=>{const n=t.stagingSt.fileStagedState(e.newFile);return!t.pinnedFiles.has(o,e.newFile)&&("staged"===n||"mixed"===n)&&a.has(e)}));if(l.length===s.length&&l.length>1)await this.props.wipStore.discardAllChanges();else{if(l.length>1&&!await(0,c.M5)(`This will discard changes to ${l.length} files. Do you want to continue?`))return;await i.showLoading("Discarding selected changes",(async()=>{await ss(l,o),await r.loadOrReloadRepoData()}))}}))}render(){return Mn(this.getMessageText(),[this.drawToolbar()])}getMessageText(){const{wip:e}=this.props.store;return Pi(e.$numChanges)}drawToolbar(){const{global:{windowSt:e}}=this.props.store;return e.$animatingCommits?null:nn([(0,m.createElement)(Xn,{store:this.props.store,wipStore:this.props.wipStore,key:"stash-button"}),this.drawDiscardAllButton()])}drawDiscardAllButton(){return(0,m.createElement)(S.R,{onClick:this.onClickDiscard},(0,m.createElement)(Zn.u,null),"Discard",Gn.D)}}var as=Object.defineProperty,ls=(e,t,n)=>(((e,t,n)=>{t in e?as(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class cs extends m.Custom{constructor(){super(...arguments),ls(this,"$username",""),ls(this,"$email",""),ls(this,"onSubmit",(async e=>{e.preventDefault();const{store:{repoPath:t},resolve:n}=this.props,s=await N.En.command({repoPath:t,args:["config","--global","user.name",this.$username]}),i=await N.En.command({repoPath:t,args:["config","--global","user.email",this.$email]});s.error||i.error||n(!0)})),ls(this,"setUsername",(e=>{this.$username=e})),ls(this,"setEmail",(e=>{this.$email=e}))}render(){const{resolve:e,descriptionId:t}=this.props;return(0,m.createElement)("form",{className:"UsernameDialog",id:J.kf,onSubmit:this.onSubmit},(0,m.createElement)(D.A,{messageId:t},"Git needs some information before you can commit"),(0,m.createElement)("div",{className:"FInputDialogColumn"},(0,m.createElement)("label",{htmlFor:J.ZR},"Username"),(0,m.createElement)(Mt.L,{id:J.ZR,value:this.$username,onText:this.setUsername,required:!0}),(0,m.createElement)("label",{htmlFor:J.Gr},"Email"),(0,m.createElement)(Mt.L,{id:J.Gr,value:this.$email,onText:this.setEmail,type:"email",required:!0})),(0,m.createElement)(j.D,{rightButtons:[(0,m.createElement)(S.R,{id:J.qC,type:"submit"},"Save"),(0,m.createElement)(S.R,{onClick:()=>e(void 0)},"Cancel")]}))}async componentDidMount(){}}function hs(e){return(0,O.$)({dialogId:hs.name,dismissible:!1,focusElementId:J.ZR,contentCallback:(t,n,s)=>(0,m.createElement)(cs,{descriptionId:s,resolve:t,store:e})})}var us=Object.defineProperty,ms=(e,t,n)=>(((e,t,n)=>{t in e?us(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class ds extends m.Custom{constructor(){super(...arguments),ms(this,"$username",""),ms(this,"$email",""),ms(this,"$mounted",!1),ms(this,"getAutoCompleteList",(async e=>{const t=await N.RT.auto_complete({kind:"CommitMessage",repoPath:this.props.store.repoPath,currentWord:e,maxNum:20});return"Ok"in t?{list:t.Ok,currentWord:e}:{list:[],currentWord:e}})),ms(this,"onTextChange",(e=>{this.props.store.wip.setCommitMessage(e)})),ms(this,"onTextAreaKeyPress",(async e=>{this.$commitDisabled||!e.ctrlKey&&!e.metaKey||"Enter"!==e.key||await this.commit()})),ms(this,"onClickCommit",(async()=>{this.usernameOk?await this.commit():void 0!==await hs(this.props.store)&&(this.$username=await this.loadUsername(),this.$email=await this.loadEmail())})),ms(this,"commit",(async()=>{const{store:e}=this.props,{repo:t,wip:n,global:{consoleSt:s},wip:{workingFilesSt:i},repoPath:o}=e;await s.showLoading("Committing",(async()=>{let s;const{$filterText:r,$checkboxState:a}=i;if(s=n.$emptyMerge||""===r&&"true"===a?!(await(0,M.g9)(o)).error:await(0,Qn.pC)(e,i),s&&!(await(0,M.PT)(o,n.$commitMessage)).error)return n.clearCommitMessage(),await t.loadOrReloadRepoData(),n.stagingSt.cleanupAfterCommit(i.$visiblePatches.map((e=>e.newFile))),void await n.validateAndLoadHunks();await t.loadOrReloadRepoData()}))}))}render(){const{wip:e}=this.props.store;return(0,m.createElement)("div",{className:"CommitPane",style:{height:180}},(0,m.createElement)(Y,{className:"CommitPane-message",onText:this.onTextChange,value:e.$commitMessage,placeholder:this.placeholder(),onKeyDown:this.onTextAreaKeyPress,id:J.w1,autoComplete:this.getAutoCompleteList}),this.drawCommitButton())}async componentDidMount(){this.$username=await this.loadUsername(),this.$email=await this.loadEmail(),this.usernameOk||void 0!==await hs(this.props.store)&&(this.$username=await this.loadUsername(),this.$email=await this.loadEmail()),this.$mounted=!0,document.getElementById(J.w1)?.focus()}async loadUsername(){const e=await N.RT.run({repoPath:this.props.store.repoPath,args:["config","user.name"]});return"Ok"in e?e.Ok:""}async loadEmail(){const e=await N.RT.run({repoPath:this.props.store.repoPath,args:["config","user.email"]});return"Ok"in e?e.Ok:""}placeholder(){return`Message (${f.cX?"Cmd":"Ctrl"} + Enter to commit)`}drawCommitButton(){let e;return e=this.$mounted?this.usernameOk?`Commit as ${this.$username}`:"Configure Git...":"Commit",(0,m.createElement)(S.R,{className:"CommitPane-submitButton",id:J.MO,onClick:this.onClickCommit,disabled:this.$commitDisabled},e)}get $commitDisabled(){const{wip:e,repoPath:t}=this.props.store;return!this.$mounted||!!this.usernameOk&&(0===e.$patches.filter((n=>"unStaged"!==e.stagingSt.fileStagedState(n.newFile)&&!e.pinnedFiles.has(t,n.newFile))).length||""===e.$commitMessage)}get usernameOk(){return""!==this.$username&&""!==this.$email}}function ps(e){const{store:t,fileName:n,invert:s=!1,themeName:i,style:o={},...r}=e;let a=s;"dark"===i&&(a=!a);let l=o;return a&&(l.filter="invert(1)"),(0,m.createElement)("img",{alt:"",...r,style:l,src:(0,$.yn)(["other",`${n}.svg`])})}var gs=Object.defineProperty,fs=(e,t,n)=>(((e,t,n)=>{t in e?gs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class ws extends m.Custom{constructor(){super(...arguments),fs(this,"ref",(0,m.createRef)()),fs(this,"prevSelected",this.selected),fs(this,"onClick",(()=>{const{patch:e,props:{data:{store:t}}}=this;null!==e&&t.nav.setSelectedPatchId(e.id)})),fs(this,"onKeyUp",(async e=>{"Enter"!==e.key&&" "!==e.key||(this.selected?await this.onClickCheckbox():this.onClick())})),fs(this,"onClickCheckbox",(async()=>{const{patch:e,props:t}=this,{wip:{stagingSt:n}}=t.data.store;if(null===e)return;const{$patchStage:s}=this,{newFile:i}=e;switch(s){case"staged":n.unStageFile(i);break;case"unStaged":case"mixed":n.stageFile(i)}})),fs(this,"showContentMenu",(async e=>{const{data:{store:t}}=this.props,{wip:n,repo:s,nav:i,repoPath:o}=t,{patch:r}=this;if(null===r)return;const{$patchStage:a}=this,l=[this.stageFileMenuItem(),{label:"Lock file",type:"checkbox",checked:this.$pinned,click:async()=>{this.$pinned?n.pinnedFiles.unPinFile(o,r.newFile):("staged"===a&&(await(0,M.E0)(o,r.newFile),await n.loadWip()),n.pinnedFiles.pinFile(o,r.newFile))}}];l.push(C.me),"A"===r.patchType?l.push({label:"Delete file",click:async()=>{(await(0,M.E0)(o,r.newFile)).error||await N.En.command({repoPath:o,args:["clean","-f","--",r.newFile]}),await n.loadWip()},enabled:!this.$pinned}):l.push({label:"Discard changes",click:async()=>{(await(0,M.E0)(o,r.newFile)).error||await N.En.command({repoPath:o,args:["checkout","--",r.newFile]}),await n.loadWip()},enabled:!this.$pinned}),"M"===r.patchType&&l.push({label:"Remove file from Git tracking",click:async()=>{await N.En.command({repoPath:o,args:["rm",r.newFile,"--cached"]}),await n.loadWip()}}),l.push(C.me),"A"!==r.patchType&&l.push({label:`Show commits containing ${(0,g.WP)(r.newFile)}`,click:async()=>{s.commitFilters.setFileFilter({file_name:r.newFile}),i.setSelectedPatchId(null)}}),"D"!==r.patchType&&l.push({label:`Show in ${(0,v.dx)()}`,click:this.showFileInFolder}),l.push({label:"Copy path",click(){navigator.clipboard.writeText((0,$.uJ)(o,r.newFile))}}),await(0,k.O0)(l,e,{usePoint:!0})})),fs(this,"showFileInFolder",(async()=>{const{patch:e}=this,{repoPath:t}=this.props.data.store;if(null!==t&&null!==e){const n=(0,$.uJ)(t,e.newFile);await u.g.showItemInFolder(n)}}))}render(){const{patch:e,props:t,$pinned:n}=this,{style:s}=t;if(null===e)return null;const{newFile:i,patchType:o}=e;return(0,m.createElement)("div",{className:m.c`WorkingFileListElement ${!0} selected ${this.selected} pinned ${n} focusableItemInset ${!0}`,ref:this.ref,id:i,tabIndex:0,style:s,onClick:this.onClick,onDoubleClick:this.onClickCheckbox,onKeyUp:this.onKeyUp,onContextMenu:this.showContentMenu},this.drawCheckbox(i),(0,m.createElement)(be,{path:i}),(0,m.createElement)(ye.q,{patchType:o}))}componentDidUpdate(){this.selected&&!this.prevSelected&&this.ref.current?.focus(),this.prevSelected=this.selected}drawCheckbox(e){return this.$pinned?(0,m.createElement)("div",{className:"WorkingFileListElement-pinIcon"},(0,m.createElement)(ps,{fileName:"LockIcon",style:{filter:"brightness(1.5)",height:"12px"},store:this.props.data.store.global,themeName:this.props.data.themeName})):(0,m.createElement)(Ae.mT,{style:{marginRight:7,marginTop:2},tabIndex:-1,checked:this.checked(),onClick:this.onClickCheckbox,labelId:e})}get selected(){const{patch:e,props:t}=this,{data:{selectedPatchId:n}}=t;return n===e?.id}get patch(){const{index:e,data:{patches:t}}=this.props;return t[e]??null}get $patchStage(){const{patch:e}=this;if(null===e)return"unStaged";const{newFile:t}=e,{data:{store:{wip:{stagingSt:n}}}}=this.props;return n.fileStagedState(t)}checked(){const{$patchStage:e}=this;switch(e){case"staged":return"true";case"unStaged":return"false";case"mixed":return"mixed"}}stageFileMenuItem(){const{patch:e}=this;if(null===e)return C.eh;const{$patchStage:t}=this;return{label:"staged"===t?"Unselect file":"Select file",click:this.onClickCheckbox,enabled:!this.$pinned}}get $pinned(){const{data:{store:{wip:e,repoPath:t}}}=this.props,{patch:n}=this;return null!==n&&e.pinnedFiles.has(t,n.newFile)}}var bs=Object.defineProperty,ys=(e,t,n)=>(((e,t,n)=>{t in e?bs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class $s extends m.Custom{constructor(){super(...arguments),ys(this,"$inputFocused",!1),ys(this,"onText",(e=>{this.props.vm.$filterText=e})),ys(this,"onFocus",(()=>{this.$inputFocused=!0})),ys(this,"onBlur",(()=>{this.$inputFocused=!1}))}render(){return(0,m.createElement)(Mt.L,{className:"WorkingFileListFilter",value:this.props.vm.$filterText,placeholder:"Filter",style:{width:this.$width},onText:this.onText,onFocus:this.onFocus,onBlur:this.onBlur,clearButton:!0})}get $width(){return this.$inputFocused||this.props.vm.$filterText.length>0?"60%":"100px"}}class vs extends m.Custom{render(){const{props:{vm:{$bodyHeight:e,$listWidth:t},store:{wip:{workingFilesSt:n}}}}=this;return(0,m.createElement)(m.Fragment,null,(0,m.createElement)("div",{className:"WipFileLists-TitleRow",style:{height:33}},(0,m.createElement)(Ae.mT,{id:J.aT,checked:n.$checkboxState,onClick:n.onClickCheckbox}),this.drawStagedRatio(),(0,m.createElement)($s,{vm:n})),(0,m.createElement)(Re,{width:t,height:e-180-33,itemCount:n.$visiblePatches.length,itemHeight:28,itemKey:ks,itemData:this.$itemData,item:ws}))}drawStagedRatio(){const{$selectedInfo:{staged:e,mixed:t,total:n,pinned:s}}=this.props.store.wip.workingFilesSt;return(0,m.createElement)("div",{className:"WorkingFileList-ratio"},e+t," / ",n-s)}get $itemData(){const{store:e,vm:t}=this.props,{nav:{$selectedPatchId:n},wip:{workingFilesSt:s}}=e,{$theme:{name:i}}=pe.zj;return{store:e,patches:s.$visiblePatches,workingFilesSt:s,vm:t,selectedPatchId:n,themeName:i}}}function ks(e,t){return t.patches[e].id}class Cs extends m.Custom{render(){const{store:e,vm:t}=this.props,{global:{windowSt:n}}=e;if(n.$animatingCommits)return null;const{$listWidth:s}=t;return(0,m.createElement)("div",{className:"WipFileLists",style:{width:s}},(0,m.createElement)(vs,{store:e,vm:t}),(0,m.createElement)(ds,{store:e}))}}class _s extends m.Custom{render(){const{message:e}=this.props;return(0,m.createElement)("div",{className:"CodeViewerMessage"},e)}}class Ss extends m.Custom{render(){const{store:e,vm:t}=this.props,{global:{windowSt:n}}=e;return n.$animatingCommits?null:(0,m.createElement)("div",{className:"WipCardExpanded-content"},(0,m.createElement)(Cs,{store:e,vm:t}),(0,m.createElement)(kt,{vm:t}),this.drawFileContent())}drawFileContent(){const{store:e,vm:t}=this.props,{wip:n}=e,{$selectedPatch:s,$loadingHunks:i,$hunks:o}=n;if(null===s)return null;if(i&&0===o.length)return(0,m.createElement)(De.y,{size:20,delay:!0,style:{margin:"26px auto auto"},invertColour:"light"===pe.zj.$theme.name});const{oldFile:r,newFile:a}=s;return n.$emptyMerge?(0,m.createElement)(_s,{message:qn}):s.isImage?(0,m.createElement)(Tt,{store:e,oldFile:r,newFile:a,mode:"wip",columnSize:t,key:r}):i||0!==n.$hunkLines.length?e.global.settings.$splitCodeViewer?(0,m.createElement)(qt,{store:e,hunkLineStore:n,cardVm:t,filePath:a}):(0,m.createElement)(Nt.Cv,{store:e,hunkLineStore:n,cardVm:t,filePath:a}):(0,m.createElement)(_s,{message:""})}}var xs=Object.defineProperty,Ps=(e,t,n)=>(((e,t,n)=>{t in e?xs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Es extends m.Custom{constructor(){super(...arguments),Ps(this,"vm",new Oe(this.props.store)),Ps(this,"drawBody",(()=>(0,m.createElement)(Ss,{store:this.props.store,vm:this.vm}))),Ps(this,"onHeaderResize",((e,t)=>{this.vm.setHeaderHeight(t)}))}render(){return(0,m.createElement)("div",{className:hn()},(0,m.createElement)(yt,{onResize:this.onHeaderResize},(0,m.createElement)(rs,{store:this.props.store,wipStore:this.props.wipStore})),this.drawBody())}}var Rs=Object.defineProperty,Is=(e,t,n)=>(((e,t,n)=>{t in e?Rs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Ts{constructor(e){this.conflictViewSt=e,Is(this,"$clientWidth",0),Is(this,"$clientHeight",0),Is(this,"$scrollTop",0),(0,m.init$)(this)}get file(){return this.conflictViewSt.store.wip.conflictedFile}get $codeWidth(){const{$marginWidth:e}=this.conflictViewSt;if(null===this.file)return 0;const t=15+e+this.file.$info.maxLineLength*Wt._3;return Math.max(t,this.$clientWidth-(e+15))}get $firstLine(){return Math.floor(this.$scrollTop/Nt.K_)}get $numLines(){return 1+Math.ceil(this.$clientHeight/Nt.K_)}setClientHeight(e){this.$clientHeight=e}setClientWidth(e){this.$clientWidth=e}setScrollTop(e){this.$scrollTop=e}}class Ns extends Ts{get $codeHeight(){if(null===this.file)return 0;const e=Os+this.file.lines.length*Nt.K_;return Math.max(e,this.$clientHeight)}}class Ms extends Ts{get $codeHeight(){if(null===this.file)return 0;const e=Os+this.file.chosenLines.$chosenLines.length*Nt.K_;return Math.max(e,this.$clientHeight)}}var Ls=Object.defineProperty,Fs=(e,t,n)=>(((e,t,n)=>{t in e?Ls(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const Os=30;class Ds{constructor(e){this.store=e,Fs(this,"$hoveredLine",-1),Fs(this,"panes",{[Vt.M3]:new Ns(this),[Vt.NS]:new Ns(this),[Vt._N]:new Ms(this)}),Fs(this,"$hoveredPane",Vt.M3),Fs(this,"$leftRatio",0),Fs(this,"$topRatio",0),(0,m.init$)(this)}get file(){return this.store.wip.conflictedFile}setHoveredLine(e){this.$hoveredLine=e}setScrollRatios(e,t){this.$leftRatio=e,this.$topRatio=t}get $marginWidth(){if(null===this.file)return 0;const e=this.file.lines.length.toString().length;return 22+Wt._3*e+2*Nt.j4}setHoveredPane(e){this.$hoveredPane=e}}function js(e,t,n){switch(e){case Vt.M3:return n?(0,pe.Vg)("conflictLeftChosen"):t?(0,pe.Vg)("conflictLeftHover"):(0,pe.Vg)("conflictLeft");case Vt.NS:return n?(0,pe.Vg)("conflictRightChosen"):t?(0,pe.Vg)("conflictRightHover"):(0,pe.Vg)("conflictRight");default:return(0,pe.Vg)("conflictLeft")}}class zs extends m.Custom{render(){const{index:e,lineNumber:t}=this.props;return(0,m.createElement)("div",{className:"ConflictCodeMargin-line",style:{transform:`translateY(${Nt.K_*e}px)`}},t.toString())}}function Ws(e,t,n,s,i,o){const r=e.panes[s];return(0,m.createElement)(m.Fragment,null,(0,m.createElement)("div",{className:"ViewHunk-lineContainer",style:{width:r.$codeWidth,height:r.$codeHeight,left:e.$marginWidth},ref:n},o),(0,m.createElement)("div",{className:"ConflictCodeMargin",style:{width:e.$marginWidth,height:r.$codeHeight}},i))}class Vs extends m.Custom{render(){const{side:e,conflictViewSt:t,index:n}=this.props;return(0,m.createElement)("div",{className:"ConflictedLineBlank ViewHunk-line",style:{width:t.panes[e].$codeWidth,top:n*Nt.K_}})}}class As extends m.Custom{render(){const{line:e,side:t,conflictViewSt:n,index:s,vm:i}=this.props,o={width:n.panes[t].$codeWidth,background:i.$colour,top:s*Nt.K_};return(0,m.createElement)("div",{className:"ConflictedLine ViewHunk-line",style:o,onMouseEnter:i.onMouseEnter,onMouseLeave:i.onMouseLeave,onClick:i.onClick},e.conflict.text)}}class Hs extends m.Custom{render(){const{lineNumber:e,index:t,vm:n}=this.props,s={background:n.$colour,top:t*Nt.K_};return(0,m.createElement)("div",{className:"ConflictedLineMargin",onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,style:s,onClick:n.onClick},this.drawCheckbox(),e)}drawCheckbox(){const{line:e,file:t}=this.props,n=t.chosenLines.has(e);return(0,m.createElement)(Ae.Sc,{checked:n})}}var Bs=Object.defineProperty,Us=(e,t,n)=>(((e,t,n)=>{t in e?Bs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Ks{constructor(e,t,n,s,i){this.conflictViewSt=e,this.side=t,this.line=n,this.index=s,this.file=i,Us(this,"onClick",(()=>{const{line:e,file:{chosenLines:t}}=this;"conflict"in e&&t.toggleLine(e)})),Us(this,"onMouseEnter",(()=>{const{index:e,conflictViewSt:t}=this;t.setHoveredLine(e)})),Us(this,"onMouseLeave",(()=>{const{conflictViewSt:e}=this;e.setHoveredLine(-1)})),(0,m.init$)(this)}get $mouseHovering(){const{conflictViewSt:e,index:t,side:n}=this;return e.$hoveredPane===n&&e.$hoveredLine===t}get $chosen(){const{file:e,line:t}=this;return"conflict"in t&&e.chosenLines.has(t)}get $colour(){const{side:e}=this;return js(e,this.$mouseHovering,this.$chosen)}}var qs=Object.defineProperty,Ys=(e,t,n)=>(((e,t,n)=>{t in e?qs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Gs extends m.Custom{constructor(){super(...arguments),Ys(this,"blanks",0),Ys(this,"lineVms",new WeakMap)}render(){const{conflictViewSt:e,pane:t,file:n,forwardRef:s}=this.props,i=this.drawLines(e,n,t);return Ws(e,0,s,t,i.marginLines,i.textLines)}drawLines(e,t,n){const s=e.panes[n],i=s.$firstLine,o=s.$numLines,r=Math.min(i+o,t.lines.length),a=[],l=[];this.blanks=0;for(let s=i;s<r;s++){const i=t.lines[s];if(void 0===i)continue;let o=null;if("slot"in i){const r=t.getConflictedLine(i.slot.section,n,i.slot.index);if("conflict"in r){const i=this.lineVms.get(r);void 0!==i?o=i:(o=new Ks(e,n,r,s,t),this.lineVms.set(r,o))}}a.push(this.drawTextLine(e,t,i,s,s,o)),l.push(this.drawMarginLine(e,t,i,s,s,o))}return{textLines:a,marginLines:l}}drawTextLine(e,t,n,s,i,o){const{pane:r}=this.props;if("ok"in n)return(0,m.createElement)(Js,{key:s.toString(),line:n,width:e.panes[r].$codeWidth,index:i});{const a=t.getConflictedLine(n.slot.section,r,n.slot.index);return"blank"in a?(0,m.createElement)(Vs,{conflictViewSt:e,side:r,file:t,index:i,key:s.toString()}):(0,m.createElement)(As,{key:s.toString(),file:t,side:r,conflictViewSt:e,line:a,index:i,vm:o})}}drawMarginLine(e,t,n,s,i,o){const{pane:r}=this.props;if("slot"in n){const a=t.getConflictedLine(n.slot.section,r,n.slot.index);return"blank"in a?(this.blanks++,function(e,t){return(0,m.createElement)("div",{className:"ConflictedLineMarginBlank",style:{top:e*Nt.K_},key:t})}(i,s.toString())):(0,m.createElement)(Hs,{file:t,side:r,key:s.toString(),conflictViewSt:e,line:a,lineNumber:1+i-this.blanks,index:i,vm:o})}return(0,m.createElement)(zs,{index:i,key:s.toString(),lineNumber:1+i-this.blanks})}}class Js extends m.Custom{render(){const{line:e,width:t,index:n}=this.props;return(0,m.createElement)("div",{className:"ViewHunk-line",style:{width:t,top:Nt.K_*n}},e.ok.text)}}class Xs extends m.Custom{render(){const{line:e,width:t,vm:n}=this.props,{text:s}=e.conflict;return(0,m.createElement)("div",{className:"ViewHunk-line",style:{position:"absolute",width:t,top:n.$top,backgroundColor:n.$colour,zIndex:n.$dragging?100:"unset",transform:n.dragSt.$dragInProgress&&!n.$dragging?"top 150ms":"none",cursor:"move"},onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,onMouseDown:n.onMouseDown},s)}}class Zs extends m.Custom{render(){const{vm:e}=this.props,t={background:e.$colour,top:e.$top,zIndex:e.$dragging?100:"unset",transition:e.dragSt.$dragInProgress&&!e.$dragging?"top 150ms":"none",cursor:"move"};return(0,m.createElement)("div",{className:"ConflictCodeMargin",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onMouseDown:e.onMouseDown,style:t},this.drawGrabIcon(),e.$index+1)}drawGrabIcon(){const e=`url("${["other","GrabIcon.svg"].join("/")}") no-repeat 50% 50%`;return(0,m.createElement)("div",{style:{height:Nt.K_,width:13,backgroundColor:"var(--disabledTextColour)",mask:e}})}}var Qs=Object.defineProperty,ei=(e,t,n)=>(((e,t,n)=>{t in e?Qs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class ti{constructor(e,t,n){this.conflictViewSt=e,this.file=t,this.line=n,ei(this,"onMouseDown",(e=>{const{line:t}=this;this.dragSt.setDragging(e,t,this.$top)})),ei(this,"onMouseEnter",(()=>{null===this.dragSt.$draggedLine&&this.conflictViewSt.setHoveredLine(this.$index)})),ei(this,"onMouseLeave",(()=>{null===this.dragSt.$draggedLine&&this.conflictViewSt.setHoveredLine(-1)})),(0,m.init$)(this)}get dragSt(){return this.file.chosenLines.dragSt}get $index(){return this.file.chosenLines.$lineIndices.get(this.line.conflict.key)??0}get $top(){return this.$dragging?this.dragSt.$draggedElementTop:Nt.K_*this.$index}get $dragging(){const{key:e}=this.line.conflict;return this.dragSt.$draggedLine?.conflict.key===e}get $mouseHovering(){const{conflictViewSt:e}=this;return this.$dragging||null===this.dragSt.$draggedLine&&e.$hoveredPane===Vt._N&&e.$hoveredLine===this.$index}get $colour(){return js(this.line.conflict.side,this.$mouseHovering,!1)}}var ni=Object.defineProperty;class si extends m.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?ni(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="lineVms")?e+"":e,new WeakMap)}componentDidMount(){const{conflictViewSt:e,file:t}=this.props;m.Reaction.auto((()=>{e.panes[Vt._N].$firstLine,this.forceUpdate()}),this),m.Reaction.auto((()=>{const{$draggedLine:e,$currentIndex:n,$newIndex:s}=t.chosenLines.dragSt;null!==e&&-1!==n&&n!==s&&t.chosenLines.reorder(e,n,s)}),this)}render(){const{conflictViewSt:e,file:t,forwardRef:n}=this.props,s=this.drawLines(e,t);return Ws(e,0,n,Vt._N,s.marginLines,s.textLines)}drawLines(e,t){const n=e.panes[Vt._N],s=n.$firstLine,i=n.$numLines,o=Math.min(s+i,t.chosenLines.$chosenLines.length),r=[],a=[];for(let n=s;n<o;n++){const s=t.chosenLines.$chosenLines[n];if(void 0===s)continue;let i=null;if("conflict"in s){const n=this.lineVms.get(s);void 0!==n?i=n:(i=new ti(e,t,s),this.lineVms.set(s,i))}r.push(this.drawTextLine(e,t,s,n,n,i)),a.push(this.drawMarginLine(e,t,s,n,n,i))}return{textLines:r,marginLines:a}}drawTextLine(e,t,n,s,i,o){return"conflict"in n?(0,m.createElement)(Xs,{conflictViewSt:e,file:t,line:n,key:n.conflict.key,width:e.panes[Vt._N].$codeWidth,vm:o}):(0,m.createElement)(ii,{line:n,key:s.toString(),width:e.panes[Vt._N].$codeWidth,index:i})}drawMarginLine(e,t,n,s,i,o){return"conflict"in n?(0,m.createElement)(Zs,{conflictViewSt:e,file:t,key:s,vm:o}):(0,m.createElement)(zs,{index:i,key:s.toString(),lineNumber:i+1})}}class ii extends m.Custom{render(){const{line:e,width:t,index:n}=this.props,{text:s}=e.ok;return(0,m.createElement)("div",{className:"ViewHunk-line",style:{position:"absolute",width:t,top:Nt.K_*n}},s)}}var oi=Object.defineProperty,ri=(e,t,n)=>(((e,t,n)=>{t in e?oi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class ai extends m.Custom{constructor(){super(...arguments),ri(this,"runWay",(0,m.createRef)()),ri(this,"paneRef",(0,m.createRef)()),ri(this,"textRef",(0,m.createRef)()),ri(this,"toggleAllLines",(()=>{const{pane:e,conflictViewSt:{store:{wip:{conflictedFile:t}}}}=this.props;e!==Vt._N&&null!==t&&t.chosenLines.toggleSide(e)})),ri(this,"onScroll",(()=>{this.updateScrollPositions()})),ri(this,"onMouseEnter",(()=>{this.props.conflictViewSt.setHoveredPane(this.props.pane)}))}render(){const{conflictViewSt:e,conflictViewSt:{store:{global:{windowSt:t},wip:n}},pane:s,width:i,height:o}=this.props;if(t.$animatingCommits||null===n.conflictedFile)return null;const{$runwayStyle:r}=this;return(0,m.createElement)(Lt.B,{className:`ConflictCodeViewer ConflictView-pane-${s}`,id:s,width:i,height:o,contentWidth:r.minWidth,contentHeight:r.height,onNativeScroll:this.onScroll,onMouseEnter:this.onMouseEnter,outerRef:this.runWay,contentRef:this.paneRef,stickyElements:this.drawTitle(n.conflictedFile)},this.drawPane(s,n.conflictedFile,e))}drawPane(e,t,n){return e===Vt._N?(0,m.createElement)(si,{conflictViewSt:n,file:t,forwardRef:this.textRef}):(0,m.createElement)(Gs,{conflictViewSt:n,pane:e,file:t,forwardRef:this.textRef})}get $runwayStyle(){const{conflictViewSt:e,pane:t}=this.props,n=e.panes[t];return{minWidth:n.$codeWidth+e.$marginWidth,height:n.$codeHeight}}drawTitle(e){return(0,m.createElement)("div",{className:"ConflictCodeViewer-title"},this.drawTitleCheckbox(e),this.$title,this.drawIncludedLines(e))}get $title(){const{pane:e,conflictViewSt:t}=this.props,{file:n}=t;return null===n?null:e===Vt.M3?n.refNameTop:e===Vt.NS?n.refNameBottom:(0,m.createElement)("div",{style:{marginLeft:10}},"Output")}drawIncludedLines(e){const{pane:t}=this.props;if(t===Vt._N)return null;const{chosen:n,total:s}=e.chosenLines.$lineStats[t],i=`Selected ${n}/${s} lines from ${this.$title}`;return(0,m.createElement)("div",{className:"ConflictCodeViewer-title-includedLines",title:i},n,"/",s)}drawTitleCheckbox(e){return this.props.pane===Vt._N?null:(0,m.createElement)(Ae.Sc,{classes:"ConflictCodeViewer-title-checkbox",checked:e.chosenLines.allInSideChosen(this.props.pane),onClick:this.toggleAllLines})}updateScrollPositions(){const{conflictViewSt:e,pane:t}=this.props,n=this.runWay.current;null!==n&&e.$hoveredPane===t&&e.setScrollRatios(n.scrollLeft/(n.scrollWidth-n.clientWidth),n.scrollTop/(n.scrollHeight-n.clientHeight))}updateDimensions(){const{conflictViewSt:e,pane:t,width:n,height:s}=this.props,i=e.panes[t];i.setClientWidth(n),i.setClientHeight(s),this.updateScrollPositions()}componentDidMount(){const{conflictViewSt:e,pane:t}=this.props;m.Reaction.value((()=>e.$leftRatio),(n=>{const s=this.runWay.current,i=this.textRef.current;if(null!==s&&null!==i){const{scrollWidth:o,clientWidth:r}=s,a=Math.round(n*(o-r));e.$hoveredPane!==t&&(s.scrollLeft=a),i.style.transform=`translateX(-${a}px)`}}),this),m.Reaction.value((()=>e.$topRatio),(n=>{const s=this.runWay.current,i=this.paneRef.current;if(null!==s&&null!==i){const{scrollHeight:o,clientHeight:r}=s,a=Math.round(n*(o-r));e.$hoveredPane!==t&&(s.scrollTop=a),e.panes[t].setScrollTop(a),i.style.transform=`translateY(${-a}px)`}}),this),this.updateDimensions()}componentDidUpdate(){this.updateDimensions()}}var li=Object.defineProperty,ci=(e,t,n)=>(((e,t,n)=>{t in e?li(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class hi extends m.Custom{constructor(){super(...arguments),ci(this,"onClickKeep",(async()=>{const{file:e}=this.props.conflictViewSt;null!==e&&await e.keepDeletedFile()})),ci(this,"onClickDelete",(async()=>{const{file:e}=this.props.conflictViewSt;null!==e&&await e.removedDeletedFile()}))}render(){const{global:{windowSt:e}}=this.props.conflictViewSt.store;return e.$animatingCommits?null:(0,m.createElement)("div",{className:"DeleteConflict"},(0,m.createElement)("div",{className:"DeleteConflict-dialog"},(0,m.createElement)("div",{className:"DeleteConflict-message"},this.messageText()),(0,m.createElement)("div",{className:"DeleteConflict-buttons"},(0,m.createElement)(S.R,{colour:"orange",onClick:this.onClickKeep},"Keep"),(0,m.createElement)(S.R,{colour:"red",onClick:this.onClickDelete},"Delete"))))}messageText(){const{store:{refs:e},file:t}=this.props.conflictViewSt;if(null===t)return null;const{patch:{stagedType:n,oldFile:s}}=t;return"D"===n?(0,m.createElement)(m.Fragment,null,(0,m.createElement)("b",null,s)," has been deleted on ",e.$repoStatus?.branchName," and modified on the other branch.",(0,m.createElement)("br",null),(0,m.createElement)("br",null),"Do you want to keep the modified version of delete it?"):(0,m.createElement)(m.Fragment,null,(0,m.createElement)("b",null,s)," has been deleted on the other branch and modified on"," ",e.$repoStatus?.branchName,(0,m.createElement)("br",null),(0,m.createElement)("br",null),"Do you want to keep the modified version or delete it?")}}var ui=Object.defineProperty,mi=(e,t,n)=>(((e,t,n)=>{t in e?ui(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class di extends m.Custom{constructor(){super(...arguments),mi(this,"$readyToShow",!1),mi(this,"$leftImagePath",null),mi(this,"$rightImagePath",null)}render(){if(!this.$readyToShow||this.props.store.global.windowSt.$animatingCommits)return null;const{$leftImagePath:e,$rightImagePath:t,props:{vm:{$bodyHeight:n},file:{$chosenFile:s}}}=this;return(0,m.createElement)("div",{className:"ImageConflict"},(0,m.createElement)("h2",null,"Choose which image to keep"),(0,m.createElement)("div",{className:"ImageConflict-images"},e?(0,m.createElement)("button",{className:m.c`ImageConflict-optionButton ${!0} ImageConflict-chosen ${"left"===s}`,onClick:()=>{const{file:e}=this.props;"left"!==e.$chosenFile?e.$chosenFile="left":e.$chosenFile=null}},(0,m.createElement)(St,{imagePath:e,maxHeight:n,message:this.$nameOfCurrent,type:"conflicted"})):null,t?(0,m.createElement)("button",{className:m.c`ImageConflict-optionButton ${!0} ImageConflict-chosen ${"right"===s}`,onClick:()=>{const{file:e}=this.props;"right"!==e.$chosenFile?e.$chosenFile="right":e.$chosenFile=null}},(0,m.createElement)(St,{imagePath:t,maxHeight:n,message:this.$nameOfOther,type:"conflicted"})):null))}get $nameOfCurrent(){return"Current branch"}get $nameOfOther(){const{props:{store:{wip:{$mergeInProgress:e}}}}=this;return e?`Other branch (commit id ${e.slice(0,8)})`:""}async componentDidMount(){const{file:{patch:e},store:{repoPath:t,wip:{$mergeInProgress:n}}}=this.props;if(!n)return;const s=(0,$.uJ)(t,e.newFile);await N.RT.path_exists(s)&&(this.$leftImagePath=s);const i=await Et(t,n,e.newFile,"conflicted");i&&await N.RT.path_exists(i)&&(this.$rightImagePath=i),this.$readyToShow=!0}}var pi=Object.defineProperty;class gi extends m.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?pi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="$fileSize")?e+"":e,null)}render(){const{type:e,style:t,message:n}=this.props,s=`BinaryInfo BinaryInfo-${e}`;return(0,m.createElement)("div",{className:s,style:t},(0,m.createElement)("div",{className:"BinaryInfo-title"},n),(0,m.createElement)("div",{className:"BinaryInfo-info"},this.drawFileSize()))}async componentDidMount(){const e=await N.RT.file_size(this.props.filePath);this.$fileSize="Ok"in e?e.Ok:null}drawFileSize(){const{$fileSize:e}=this;return null===e?null:(0,m.createElement)(m.Fragment,null,(0,m.createElement)("div",null,"File Size:"),(0,m.createElement)("div",null,xt(e)))}}var fi=Object.defineProperty,wi=(e,t,n)=>(((e,t,n)=>{t in e?fi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class bi extends m.Custom{constructor(){super(...arguments),wi(this,"$readyToShow",!1),wi(this,"$leftFilePath",null),wi(this,"$rightFilePath",null)}render(){if(!this.$readyToShow||this.props.store.global.windowSt.$animatingCommits)return null;const{$leftFilePath:e,$rightFilePath:t,props:{file:{$chosenFile:n}}}=this;return(0,m.createElement)("div",{className:"BinaryConflict"},(0,m.createElement)("h2",null,"Choose which version to keep:"),(0,m.createElement)("div",{className:"BinaryConflict-images"},e?(0,m.createElement)("button",{className:m.c`BinaryConflict-optionButton ${!0} BinaryConflict-chosen ${"left"===n}`,onClick:()=>{const{file:e}=this.props;"left"!==e.$chosenFile?e.$chosenFile="left":e.$chosenFile=null}},(0,m.createElement)(gi,{filePath:e,message:this.$nameOfCurrent,type:"conflicted"})):null,t?(0,m.createElement)("button",{className:m.c`BinaryConflict-optionButton ${!0} BinaryConflict-chosen ${"right"===n}`,onClick:()=>{const{file:e}=this.props;"right"!==e.$chosenFile?e.$chosenFile="right":e.$chosenFile=null}},(0,m.createElement)(gi,{filePath:t,message:this.$nameOfOther,type:"conflicted"})):null))}get $nameOfCurrent(){return"Current branch"}get $nameOfOther(){const{props:{store:{wip:{$mergeInProgress:e}}}}=this;return e?`Other branch (commit id ${e.slice(0,8)})`:""}async componentDidMount(){const{file:{patch:e},store:{repoPath:t,wip:{$mergeInProgress:n}}}=this.props;if(!n)return;const s=(0,$.uJ)(t,e.newFile);await N.RT.path_exists(s)&&(this.$leftFilePath=s);const i=await Et(t,n,e.newFile,"conflicted");i&&await N.RT.path_exists(i)&&(this.$rightFilePath=i),this.$readyToShow=!0}}var yi=Object.defineProperty,$i=(e,t,n)=>(((e,t,n)=>{t in e?yi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class vi extends m.Custom{constructor(){super(...arguments),$i(this,"conflictViewSt",new Ds(this.props.store)),$i(this,"vm",new Oe(this.props.store)),$i(this,"onHeaderResize",((e,t)=>{this.vm.setHeaderHeight(t)}))}render(){return(0,m.createElement)(m.Fragment,null,(0,m.createElement)(yt,{onResize:this.onHeaderResize},(0,m.createElement)(On,{conflictViewSt:this.conflictViewSt})),this.drawBody())}drawBody(){const{conflictViewSt:e,props:{store:t}}=this,{file:n}=e;if(!n)return null;if(n.conflictedDelete())return(0,m.createElement)(hi,{conflictViewSt:e});if(n.imageConflict)return(0,m.createElement)(di,{store:t,file:n,vm:this.vm});if(n.$binaryConflict)return(0,m.createElement)(bi,{store:t,file:n,vm:this.vm});const{global:{windowSt:s}}=t,i=s.$commitViewSize.width,o=this.vm.$bodyHeight/2;return(0,m.createElement)("div",{className:"ConflictView-body",style:{height:o}},(0,m.createElement)(ai,{conflictViewSt:e,width:i/2,height:o,pane:Vt.M3}),(0,m.createElement)(ai,{conflictViewSt:e,width:i/2,height:o,pane:Vt.NS}),(0,m.createElement)(ai,{conflictViewSt:e,width:i,height:o,pane:Vt._N}))}}var ki=Object.defineProperty;class Ci extends m.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?ki(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="onClick")?e+"":e,(async e=>{const{wipStore:t}=this.props,n=[{label:"Stash All Changes",click:t.stashAllChanges},{label:"Discard All Changes",click:t.discardAllChanges}];Qe(n,t.store),await(0,k.O0)(n,e)}))}render(){const{showMenu:e,disabled:t=!1}=this.props,n=Te.iw;let s;return s=e?(0,m.createElement)("span",{className:"icon-menu",style:{fontSize:.44*n}}):(0,m.createElement)("svg",{viewBox:`0, 0, ${n}, ${n}`},(0,m.createElement)("circle",{style:{fill:"var(--blueText)"},cx:n/2,cy:n/2,r:.1*n})),(0,m.createElement)(S.R,{className:"WipCardMenuButton",colour:"subtle",style:{width:n,height:n},onClick:this.onClick,title:"show changes menu",disabled:t},s)}}var _i=Object.defineProperty,Si=(e,t,n)=>(((e,t,n)=>{t in e?_i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class xi extends wn{constructor(){super(...arguments),Si(this,"wipStore",new ns(this.props.store)),Si(this,"ref",(0,m.createRef)()),Si(this,"onClickNextCommit",(async()=>{cn(an.forward);const{repo:e}=this.props.store,t=e.getNextCommitId();null!==t&&await e.switchToCommit(t)}))}render(){const{props:{store:{layout:{$wipPosition:e}}},$isSelected:t}=this,{width:n,height:s}=e;return(0,m.createElement)("div",{ref:this.ref,className:m.c`WipCard ${!0} selected ${t}`,style:{width:n,height:s}},this.drawBackground(e,t),this.drawBody(t),this.drawCardControls(t))}drawBackground(e,t){return(0,m.createElement)($n,{visible:t,transform:`scale(${e.width/dn.rM}, ${e.height/dn.rM})`,duration:pe.zj.animationTime.medium,key:"CommitBackground"})}drawCardControls(e){if(!e)return null;const{repo:t,layout:n,nav:{$viewingPatch:s},wip:{$haveConflicts:i}}=this.props.store,o=0===t.$commitIds.length,r=[(0,m.createElement)(Ci,{store:this.props.store,wipStore:this.wipStore,showMenu:!0,disabled:i}),(0,m.createElement)(xn,{store:this.props.store,commitId:Cn.z,key:Cn.z})];return s&&!i&&r.unshift((0,m.createElement)(S.R,{colour:"subtle",disabled:!0,title:"Go to previous commit",style:{transform:"rotate(0deg)",paddingTop:1},tabIndex:-1},Tn(14,!0)),(0,m.createElement)(S.R,{colour:"subtle",onClick:this.onClickNextCommit,disabled:o,title:"Go to next commit",style:{transform:"rotate(180deg)",paddingTop:2}},Tn(14,o))),kn(n.$wipPosition.width,r,Cn.z,!s)}get $isSelected(){return this.props.store.nav.$selectedCommitId===Cn.z}drawBody(e){const{store:t}=this.props,{nav:n,wip:s}=t;return e?n.$viewingPatch?s.$haveConflicts?(0,m.createElement)(vi,{store:t,key:null===n.$selectedPatchId?"0":n.$selectedPatchId}):(0,m.createElement)(Es,{store:t,wipStore:this.wipStore}):(0,m.createElement)(Yn,{store:t}):(0,m.createElement)(zn,{store:t})}}function Pi(e){return 1===e?`${e} changed file`:`${e} changed files`}var Ei=Object.defineProperty;class Ri extends at{constructor(){var e,t,n;super(...arguments),e=this,t="ref",n=(0,m.createRef)(),((e,t,n)=>{t in e?Ei(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n)}render(){const{width:e,numSkipped:t}=this.props;return(0,m.createElement)("div",{className:"FilterMessage",style:{width:e,height:Te.iw},ref:this.ref},Ii(e/6),t," commit",t>1?"s":""," hidden",Ii(e/6))}}function Ii(e){return(0,m.createElement)("div",{className:"FilterMessage-line",style:{width:e}},(0,m.createElement)("div",{className:"FilterMessage-linePart FilterMessage-linePart-a"}),(0,m.createElement)("div",{className:"FilterMessage-linePart FilterMessage-linePart-b"}))}class Ti extends m.Custom{render(){return(0,m.createElement)("div",{className:"Filter",style:{background:this.props.info.colour}},this.message(),this.drawRemoveButton())}message(){const{type:e,name:t}=this.props.info;switch(e){case"commit":return(0,m.createElement)(m.Fragment,null,"Commit: ",(0,m.createElement)("b",null,t));case"branch":return(0,m.createElement)(m.Fragment,null,"Branch: ",(0,m.createElement)("b",null,t));case"username":return(0,m.createElement)(m.Fragment,null,"Username: ",(0,m.createElement)("b",null,t));case"file":return(0,m.createElement)(m.Fragment,null,"File: ",(0,m.createElement)("b",null,t))}}drawRemoveButton(){return(0,m.createElement)("button",{className:"Filter-removeButton",title:"Remove filter",onClick:this.props.info.removeFunction},(0,m.createElement)("svg",{width:9,height:9},(0,m.createElement)("line",{x1:0,y1:0,x2:9,y2:9,stroke:"black"}),(0,m.createElement)("line",{x1:0,y1:9,x2:9,y2:0,stroke:"black"})))}}const Ni=m.c`Filters`;class Mi extends m.Custom{render(){const{repo:{commitFilters:{$haveFilter:e}}}=this.props.store;if(!e)return null;const{layout:{$commitLeft:t,$commitWidth:n},nav:{$viewingPatch:s}}=this.props.store;return(0,m.createElement)("div",{className:Ni,style:{left:t,minWidth:n,opacity:s?0:1,pointerEvents:s?"none":"auto"}},(0,m.createElement)("span",{className:"Filters-label"},"Filters: "),(0,m.createElement)(m.Fragment,null,this.drawFilters()))}drawFilters(){const{repo:{commitFilters:e}}=this.props.store;return e.getFilters().map((e=>(0,m.createElement)(Ti,{info:e})))}}var Li=Object.defineProperty,Fi=(e,t,n)=>(((e,t,n)=>{t in e?Li(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Oi extends at{constructor(){super(...arguments),Fi(this,"ref",(0,m.createRef)()),Fi(this,"onClick",(async e=>{await No(this.props.store.global,e)}))}render(){const{fullDate:e,timeString:t}=this.props;return(0,m.createElement)("div",{className:"TimeMarker",ref:this.ref,title:e,onClick:this.onClick,onContextMenu:this.onClick},t)}}class Di extends m.Custom{render(){const{store:e}=this.props;return(0,m.createElement)("div",{className:"CommitCardList",inert:e.nav.$showingRefView,style:this.$style},(0,m.createElement)(Mi,{store:e}),(0,m.createElement)(ji,{store:e,key:"CommitCardListInner"}),this.drawWipCard())}drawWipCard(){const{store:e}=this.props,{layout:{$wipPosition:t},wip:n}=e;if(!n.$haveWIP)return null;const{left:s,top:i,visible:o}=t;return(0,m.createElement)(xi,{store:e,key:"WipCard",transform:`translate(${s}px, ${i}px)`,visible:o,duration:pe.zj.animationTime.medium})}get $style(){const{store:e}=this.props,{nav:t,global:{windowSt:n},layout:s}=e;return t.$showingRefView?{position:"fixed",top:-s.$scrollTop+s.$refViewScrollTop+"px",transform:`translateX(${n.$commitViewSize.width/2}px)`,opacity:0}:{}}}class ji extends m.Custom{render(){const{store:e}=this.props,{layout:t,repo:n,nav:s,refs:i}=e,{$commits:o}=n,{commitPositions:r,$timeInfo:a,$commitLeft:l,$commitWidth:c}=t,{$selectedCommitId:h,$viewingPatch:u,$hoveredCommitId:d}=s,{$theme:p,animationTime:g}=pe.zj,{$commitsToPush:f}=i,w=f.size>0,{$current:b,prev:y}=r,$=[];for(const{id:t,numSkipped:n}of o.values()){const s=b.get(t);if(!s)continue;const i=y.get(t)??s;if(s.visible||i.visible){if(n>0){const e=t===h?Te.ch:0;$.push((0,m.createElement)(Ri,{key:t+n,fromX:l,fromY:i.top-Te.iw-e,toX:l,toY:s.top-Te.iw-e,duration:g.medium,width:c,numSkipped:n}))}$.push(Nn(e,o,t,s,i,h,u,w&&f.allBranches.has(t),d,p));const r=a.get(t);if(r){const n=(r.sameAsPrevious?null:r.timeString)??null;if(n){const o=r.fullDate,a=u&&h===t,l=Math.min(innerWidth-5,Te.R+Te.H8+(innerWidth-Te.H8)/2);$.push((0,m.createElement)(Oi,{key:`${t}-time`,store:e,timeString:n,fullDate:o,fromX:l,toX:l,fromY:i.top,toY:a?i.top:s.top,duration:pe.zj.animationTime.medium}))}}}}return(0,m.createElement)(m.Fragment,null,$)}}var zi=Object.defineProperty;const Wi=m.c`Repo`;class Vi extends m.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?zi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="onScroll")?e+"":e,(e=>{const{layout:t,nav:n}=this.props.store;n.$showingRefView?t.setRefViewScrollTop(e):t.setScrollTop(e)}))}render(){const{store:e}=this.props,{layout:t,nav:n,global:{windowSt:{$commitViewSize:{width:s,height:i}}}}=e,{$contentHeight:o,$scrollTop:r,$refViewScrollTop:a,$scrollingEnabled:l}=t,{$showingRefView:c,$selected:h}=n;return(0,m.createElement)(xe,{width:s,height:i,style:{top:Te.xl},contentHeight:o,scrollTop:c?a:r,setScroll:this.onScroll,enabled:l&&h},(0,m.createElement)("div",{className:Wi,style:{height:o},key:e.repoPath},(0,m.createElement)(gt,{store:e}),(0,m.createElement)(Di,{store:e})))}}var Ai=n(1795);class Hi extends m.Custom{render(){const{size:e,colour:t,value:n,bottom:s,left:i}=this.props,o=.6875*e;return(0,m.createElement)("div",{className:"NumberBadge",style:{background:t,minWidth:e,height:e,bottom:s,left:i,borderRadius:e,fontFamily:"sans-serif",fontSize:o,paddingLeft:n>9?2:0,paddingRight:n>9?2:0}},n.toString())}}class Bi extends m.Custom{render(){const{toolbarStore:e,animationClass:t}=this.props,{$changesData:n,$branchName:s,$refreshing:i,store:{name:o}}=e;return(0,m.createElement)("div",{className:m.c`RepoStrip ${!0} RepoStrip-refreshing ${i}`+" "+t,onClick:e.onClickStrip},(0,m.createElement)("button",{className:"RepoStrip-repoButton"},o),i?(0,m.createElement)(De.H,{fontSize:20}):(0,m.createElement)("div",{className:"RepoStrip-branch"},s),(0,m.createElement)("button",{className:"RepoStrip-button icon-changes-view",style:{fontSize:21},onClick:e.onClickChanges},n.badgeNumber>0?(0,m.createElement)(Hi,{value:n.badgeNumber,size:16,colour:n.badgeColour,bottom:9,left:27}):null),function(e){const{disabled:t,badgeNumber:n,pulling:s}=e.$pullData;return s?(0,m.createElement)(De.y,{size:18,invertColour:"light"===pe.zj.$theme.name,container:!0}):(0,m.createElement)("button",{className:"RepoStrip-button icon-pull",disabled:t,onClick:e.onClickPull,onContextMenu:e.onPullContextMenu},n>0?(0,m.createElement)(Hi,{value:n,size:16,colour:(0,pe.Vg)("pullColour"),bottom:9,left:27}):null)}(e),function(e){const{disabled:t,badgeNumber:n,pushing:s}=e.$pushData;return s?(0,m.createElement)(De.y,{size:18,invertColour:"light"===pe.zj.$theme.name,container:!0}):(0,m.createElement)("button",{className:"RepoStrip-button icon-push",disabled:t,onClick:e.onClickPush,onContextMenu:e.onPushContextMenu},n>0?(0,m.createElement)(Hi,{value:n,size:16,colour:(0,pe.Vg)("pullColour"),bottom:9,left:27}):null)}(e),function(e){const{disabled:t,fetching:n}=e.$fetchData;return n?(0,m.createElement)(De.y,{size:18,invertColour:"light"===pe.zj.$theme.name,container:!0}):(0,m.createElement)("button",{className:"RepoStrip-button icon-fetch",disabled:t,onClick:e.onClickFetch,onContextMenu:e.onFetchContextMenu})}(e))}}var Ui=Object.defineProperty;class Ki extends m.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?Ui(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="render")?e+"":e,(()=>{const{store:e,hidden:t}=this.props;return(0,m.createElement)("button",{title:"Main menu",className:"AppMenu ToolbarButton-style",disabled:t,onClick:async t=>{await(0,k.O0)((0,C.XJ)(e),t,{classNames:[m.c`darkenBackground`]})}},(0,m.createElement)("div",{className:"icon-menu",style:{fontSize:17}}))}))}}function qi(e){if(e.length>22){const t=e.split("/");return t[t.length-1]}return e}var Yi=n(886),Gi=Object.defineProperty;class Ji extends m.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?Gi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="onClick")?e+"":e,(async e=>{await(0,k.O0)(this.buildBranchMenu(),e,{classNames:["ToolbarDropdown-open","darkenBackground"]})}))}render(){const{toolbarStore:e}=this.props,{$branchName:t,$branchesData:n}=e;return(0,m.createElement)("button",{title:"Show all branches",className:m.c`ToolbarButton ${!0} ToolbarButton-style ${!0} BranchDropdown ${!0} ToolbarButton-selected ${n.selected}`,onClick:e.onClickBranches},(0,m.createElement)("div",{className:"ToolbarDropdown-value"},t??" "),(0,Yi.K)("Branch"))}buildBranchMenu(){const{$branchName:e,store:t}=this.props.toolbarStore,n=this.buildRefList(t).map((n=>({label:n.shortName,type:"checkbox",click:async()=>{await L(n,t)},checked:qi(n.shortName)===e})));return n.push(C.me),n.push((0,nt.Vk)(t.global)),n.push(C.me),n.push(it(t.nav)),n}buildRefList(e){const{refs:t}=e,n=Array.from(t.$refInfoLocal.values()).filter((e=>"Tag"!==e.refType)).slice(0,10);for(const e of t.$allRefs.array){if(n.length>=10)break;"Tag"===e.refType||n.some((t=>t.shortName===e.shortName))||n.push(e)}return n}}var Xi=n(3005),Zi=n(1521),Qi=Object.defineProperty;class eo extends m.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?Qi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="onClick")?e+"":e,(async e=>{const{toolbarStore:t,workspace:n}=this.props;let s;var i;n?s=function(e){const{$workspaceRepos:t,$repo:n}=e;return[...Array.from(t.values()).map((t=>({label:t.name,type:"checkbox",checked:t.name===n?.name,async click(){pe.zj.disableAnimations(),e.selectWorkspaceRepo(t.repoPath),pe.zj.restoreAnimationsDebounced()}}))),C.me,{label:"Show All Repos",click(){e.selectWorkspaceRepo(null)}}]}(t.store.global):(i=t.store.global,s=[...(0,Xi.n2)(i),C.me,Xi.gC.open(i),Xi.gC.close(i),C.me,Xi.gC.clone(i),Xi.gC.create(i)]),await(0,k.O0)(s,e,{classNames:[m.c`ToolbarDropdown-open`,m.c`darkenBackground`]})}))}render(){const{toolbarStore:e}=this.props,{store:{name:t},$dropdownLabelWidths:n}=e;return(0,Zi.v)({onClick:this.onClick,title:t,subtitle:"Repo",width:n.repoName})}}const to=(0,m.createElement)("span",{className:"Toolbar-noDrag"}),no=f.cX?to:(0,m.createElement)("span",null);class so extends m.Custom{render(){const{store:e,toolbarStore:t,animationClass:n,workspace:s}=this.props,{global:i}=e,{$theme:{name:o}}=pe.zj,{$pullData:r,$pushData:a,$fetchData:l,$commitsData:c,$changesData:h}=t;return(0,m.createElement)("div",{className:m.c`RepoToolbar `+n,style:{gridTemplateColumns:"50px minmax(0, 1fr) 60px 60px 60px 1fr 50px",transitionDuration:"300ms",borderTop:s?"1px solid var(--extraLightBorder)":""}},f.cX?(0,m.createElement)("span",null):(0,m.createElement)(Ki,{store:i,hidden:!1}),(0,m.createElement)("div",{className:"RepoToolbar-side"},(0,m.createElement)(eo,{toolbarStore:t,workspace:s}),(0,m.createElement)(Ji,{toolbarStore:t,repoSelected:!0})),(0,m.createElement)(Yi.I,{text:h.text,id:J.Y5,onClick:t.onClickChanges,disabled:h.disabled,themeName:o,selected:h.selected,role:"tab"},(0,m.createElement)("div",{className:"Toolbar-icon icon-changes-view",style:{fontSize:21}}),h.badgeNumber>0?(0,m.createElement)(Hi,{value:h.badgeNumber,size:16,colour:h.badgeColour,bottom:16,left:27}):null),(0,m.createElement)(Yi.I,{text:"Commits",themeName:o,onClick:t.onClickCommits,selected:c.selected,role:"tab"},(0,m.createElement)("div",{className:"Toolbar-icon icon-commits-view",style:{fontSize:21}})),(0,m.createElement)(Yi.I,{text:"Search",themeName:o,onClick:t.onClickSearchButton},(0,m.createElement)("div",{className:"Toolbar-icon icon-SearchIcon",style:{fontSize:19,marginTop:-1}})),(0,m.createElement)("div",{className:"RepoToolbar-side"},(0,m.createElement)(Yi.I,{text:"Pull",loading:r.pulling,classes:["mw50"],disabled:r.disabled,themeName:o,onClick:t.onClickPull,onContextMenu:t.onPullContextMenu},(0,m.createElement)("div",{className:"Toolbar-icon icon-pull",style:{fontSize:18}}),r.badgeNumber>0?(0,m.createElement)(Hi,{value:r.badgeNumber,size:16,colour:(0,pe.Vg)("pullColour"),bottom:16,left:27}):null),(0,m.createElement)(Yi.I,{text:a.text,disabled:a.disabled,loading:a.pushing,classes:["mw50"],themeName:o,onClick:t.onClickPush,onContextMenu:t.onPushContextMenu,title:a.title},(0,m.createElement)("div",{className:"Toolbar-icon icon-push",style:{fontSize:18}}),a.badgeNumber>0?(0,m.createElement)(Hi,{value:a.badgeNumber,size:16,colour:(0,pe.Vg)("pullColour"),bottom:16,left:27}):null),(0,m.createElement)(Yi.I,{text:l.text,disabled:l.disabled,themeName:o,onClick:t.onClickFetch,onContextMenu:t.onFetchContextMenu,loading:l.fetching,classes:["mw50"]},(0,m.createElement)("div",{className:"Toolbar-icon icon-fetch",style:{fontSize:18}}))),no)}}var io=n(8153),oo=n(7495),ro=Object.defineProperty,ao=(e,t,n)=>(((e,t,n)=>{t in e?ro(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class lo{constructor(e){this.store=e,ao(this,"onClickPull",(async e=>{e.stopPropagation(),await this.store.repo.pull()})),ao(this,"onPullContextMenu",(async e=>{await(0,k.O0)((0,v.E4)(this.store),e)})),ao(this,"onClickPush",(async e=>{e.stopPropagation(),await(0,io.VC)(this.store)})),ao(this,"onPushContextMenu",(async e=>{const t=[(0,nt.Vk)(this.store.global)];await(0,k.O0)(t,e)})),ao(this,"onClickFetch",(async e=>{e.stopPropagation(),await this.store.repo.fetch()})),ao(this,"onFetchContextMenu",(async e=>{const t=[(0,v.KH)(),C.me,(0,nt.Vk)(this.store.global)];await(0,k.O0)(t,e)})),ao(this,"onClickBranches",(()=>{const{nav:e}=this.store;this.store.nav.setShowingRefView(!e.$showingRefView)})),ao(this,"onClickCommits",(()=>{this.store.nav.goToCommitsView()})),ao(this,"onClickChanges",(()=>{this.store.nav.goToWipView()})),ao(this,"onClickSearchButton",(async()=>{await(0,oo.i)(this.store)})),ao(this,"onClickStrip",(()=>{const{repoPath:e,global:t}=this.store;null!==t.$repo||t.selectWorkspaceRepo(e)})),(0,m.init$)(this)}get $branchName(){const{store:e}=this,t=e.refs.$repoStatus?.branchName??null;return t?qi(t):null}get $remoteName(){const{$branchName:e,store:{config:t}}=this;return e?t.getPushRemoteForBranch(e):null}get $dropdownLabelWidths(){const{$branchName:e,store:{global:{windowSt:{$windowSize:{width:t}}},name:n}}=this,s=(0,Wt.V0)(n,dn.V)+29,i=null!==e?(0,Wt.V0)(e,dn.V)+29:0,o=(t-280)/2;return 0===i?{repoName:Math.min(o,s),branchName:0}:{repoName:Math.min(s/(s+i)*o,s),branchName:Math.min(i/(s+i)*o,i)}}get $pullData(){const{refs:e,global:{windowSt:{$pullInProgress:t}},repoPath:n}=this.store;return{disabled:e.$currentBranchIsUnpublished,badgeNumber:e.$numCommitsToPushPull.pull,pulling:t.has(n)}}get $pushData(){const{refs:e,global:{windowSt:{$pushInProgress:t},$repo:n},repo:s,repoPath:i}=this.store,{$currentBranchIsUnpublished:o,$numCommitsToPushPull:r,$repoStatus:a}=e;let l;l=o||null===e.$currentRemoteName?"Publish":"Push";let c=r.push;const h=0===s.$commitIds.length&&null!==n||null===n&&"Local"===a?.state;a&&a.remoteBehind>0&&(c=a.remoteBehind);let u="Run git push in this repo";if(o){const{$remoteName:e,$branchName:t}=this;u=e&&t?`Publish branch ${t} to ${e}`:"Publish branch",c=1}else c>0&&(u=`Push ${c} commit${c>1?"s":""}`);return{disabled:h,text:l,badgeNumber:c,pushing:t.has(i),title:u}}get $fetchData(){const{global:{windowSt:{$fetchInProgress:e}},repoPath:t,refs:n}=this.store,s=e.has(t);return{text:s?"Fetching":"Fetch",disabled:null===n.$currentRemoteName,fetching:s}}get $branchesData(){return{selected:this.store.nav.$showingRefView}}get $commitsData(){const{$selectedPatchId:e,$showingRefView:t}=this.store.nav;return{selected:null===e&&!t}}get $changesData(){const{wip:{$haveConflicts:e,$haveWIP:t,$numChanges:n},nav:s}=this.store;return{text:e?"Conflicts":"Changes",disabled:!t,selected:s.$selectedCommitId===Cn.z&&null!==s.$selectedPatchId,badgeNumber:n,badgeColour:e?"#ffae45":(0,pe.Vg)("pullColour")}}get $refreshing(){const{store:{repoPath:e,global:{windowSt:{$refreshingRepo:t}}}}=this;return t.has(e)}}var co=n(1578),ho=Object.defineProperty,uo=(e,t,n)=>(((e,t,n)=>{t in e?ho(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class mo extends wn{constructor(){super(...arguments),uo(this,"toolbarStore",new lo(this.props.store)),uo(this,"ref",(0,m.createRef)())}render(){if(!this.visible)return null;const{store:e}=this.props,{nav:{$selected:t,lastSelected:n},global:{$workspaceRepos:s,$repo:i,windowSt:{$animatingWorkspace:o}}}=e,{toolbarStore:r}=this,a=this.animationClasses(o&&n,t),l=s.size>1,c=o||l&&!t,h=o&&n||t,u=t&&!o,d=u&&e.nav.$showingRefView;return(0,m.createElement)("div",{ref:this.ref,key:e.repoPath,className:"RepoContainer",inert:null!==i&&!t},h?(0,m.createElement)(so,{store:e,toolbarStore:r,animationClass:a.toolbar,workspace:l}):null,c?(0,m.createElement)(Bi,{toolbarStore:r,animationClass:a.strip}):null,d?(0,m.createElement)(co.f,{store:e}):null,u?(0,m.createElement)(Ai.Mh,{store:e}):null,u?(0,m.createElement)(Vi,{store:e}):null)}animationClasses(e,t){return e?t?{strip:m.c`RepoStrip-animateOut`,toolbar:m.c`RepoStrip-animateIn`}:{strip:m.c`RepoStrip-animateIn`,toolbar:m.c`RepoStrip-animateOut`}:{strip:"",toolbar:""}}}var po=Object.defineProperty,go=(e,t,n)=>(((e,t,n)=>{t in e?po(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const fo=.95;class wo{constructor(e){this.gs=e,go(this,"$current",new Map),go(this,"$scrollTop",0),go(this,"calcPositions",(()=>{const{$scrollTop:e,gs:t}=this,{$workspaceRepos:n,$repo:s,windowSt:i}=t,{height:o,windowHeight:r}=i.$commitViewSize,a=new Map;if(n.size>0)if(null===s){let t=0;for(const s of n.values()){const n=Te.pe+(Te.xl+Te.pe)*t;a.set(s.repoPath,{left:0,top:n,height:Te.xl,opacity:1,scale:fo,selected:!1,visible:bo(n,o,e)}),t++}}else{const t=Array.from(n.values()),i=t.indexOf(s);for(let n=0;n<t.length;n++){const s=t[n];if(i===n)a.set(s.repoPath,{left:0,top:e,height:r,opacity:1,scale:1,selected:!0,visible:!0});else if(n<i){let t=-3*Te.iw*(i-n)+e;a.set(s.repoPath,{left:0,top:t,height:Te.xl,opacity:0,scale:fo,selected:!1,visible:bo(t,o,e)})}else{let t=o+3*Te.iw*(n-i)+e;a.set(s.repoPath,{left:0,top:t,height:Te.xl,opacity:0,scale:fo,selected:!1,visible:bo(t,o,e)})}}}this.$current=a})),go(this,"setScrollTop",(e=>{this.$scrollTop=e})),(0,m.init$)(this)}get $contentHeight(){const{$repo:e,$workspaceRepos:t,windowSt:{$commitViewSize:{height:n}}}=this.gs;return null===e?Math.max(Te.pe+t.size*(Te.xl+Te.pe),n):n}}function bo(e,t,n){return e+Te.xl>n&&e-Te.xl<n+t}var yo=Object.defineProperty;class $o extends m.Custom{constructor(){var e,t,n;super(...arguments),e=this,t="layout",n=new wo(this.props.gs),((e,t,n)=>{t in e?yo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n)}render(){const{$repo:e,$workspaceRepos:t,windowSt:{$commitViewSize:{width:n,windowHeight:s}},$workspaceShift:i}=this.props.gs,o=[],{$current:r}=this.layout;for(const e of t.values()){const{repoPath:t}=e,n=r.get(t);n&&o.push((0,m.createElement)(mo,{transform:`translate(${n.left}px, ${n.top}px) scale(${n.scale})`,visible:n.visible,duration:pe.zj.animationTime.long,store:e,workspaceLayout:this.layout,key:t}))}const{$contentHeight:a,$scrollTop:l}=this.layout;return(0,m.createElement)(xe,{className:"Workspace",style:{transform:`translateY(${i}px)`},width:n,height:s-i,contentHeight:a,scrollTop:l,setScroll:this.layout.setScrollTop,enabled:null===e},o)}componentDidMount(){m.Reaction.auto(this.layout.calcPositions,this)}}var vo=n(2210),ko=n(6081),Co=Object.defineProperty,_o=Object.defineProperty,So=(e,t,n)=>(((e,t,n)=>{t in e?_o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class xo extends m.Custom{constructor(){super(...arguments),So(this,"onClick",(async e=>{await(0,k.O0)(this.buildBranchMenu(),e,{classNames:[m.c`ToolbarDropdown-open`,m.c`darkenBackground`]})})),So(this,"createBranch",(async()=>{const{gs:{$workspaceRepos:e,consoleSt:t,windowSt:n}}=this.props;n.centreLastClick();const s=await Ke(null,!0);if(!s)return;const{branchName:i,checkoutBranch:o}=s;await t.showLoading(`Creating branch ${i}`,(async()=>{for(const t of e.values()){const{repoPath:e}=t;await(0,M.HU)(e,i),o&&await N.En.command({repoPath:e,args:["checkout",i]}),await t.repo.loadOrReloadRepoData()}}),{show:ko.w.errorOnly})}))}render(){const{$branchName:e}=this;return(0,Zi.v)({onClick:this.onClick,title:e??"...",subtitle:"Branch",disabled:this.props.repoSelected,width:100})}get $branchName(){const{gs:{$workspaceRepos:e}}=this.props;let t=null;for(const n of e.values()){const{$repoStatus:e}=n.refs;if(!e)return null;if(null===t)t=e.branchName;else if(t!==e.branchName)return null}return t?qi(t):null}buildBranchMenu(){const{$branchName:e}=this,t=this.getCommonBranches(),n=[];return n.push({label:"Create Branch...",click:this.createBranch}),e&&n.push({label:"Merge Branch...",enabled:!1,click:()=>{const{gs:{$workspaceRepos:n}}=this.props;return Array.from(n.values()).some((e=>e.wip.$haveWIP))?(0,c.K$)("You have uncommitted changes. Commit or stash these changes before merging"):function(e,t,n){return t.sort(((e,t)=>e.localeCompare(t))),(0,O.$)({contentCallback:(s,i,o)=>{const r=class extends m.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?Co(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="$selectedBranch")?e+"":e,"")}render(){return(0,m.createElement)(m.Fragment,null,(0,m.createElement)(D.A,{messageId:o},"Choose a branch to merge into ",n),(0,m.createElement)("div",{className:"MergeWsBranch"},(0,m.createElement)(Ye.l,{options:this.options(),theme:pe.zj.$theme.name})),(0,m.createElement)(j.D,{rightButtons:[(0,m.createElement)(S.R,{onClick:()=>{const{$workspaceRepos:t}=e;for(const e of t.values());}},"Merge"),(0,m.createElement)(S.R,{autoFocus:!0,onClick:()=>{s(O.K)}},"Cancel")]}))}options(){const{$selectedBranch:e}=this;return t.map((t=>({label:t,checked:e===t,click:()=>{this.$selectedBranch=t}})))}};return(0,m.createElement)(r,null)},dialogId:"showMakeBranchDialog",dismissible:!0})}(this.props.gs,t,e)}}),n.push(C.me),n.push(...t.map((t=>({label:t,type:"checkbox",click:async()=>{await this.checkout(t)},checked:qi(t)===e})))),n}async checkout(e){const{gs:{$workspaceRepos:t,consoleSt:n},gs:s}=this.props,i=[];for(const n of t.values()){const{refs:{$repoStatus:t}}=n;if(!t)return;const s=t.branches.find((t=>t===e));s&&s!==t.branchName&&i.push((0,M.vU)(n.repoPath,s))}await n.showLoading(`Checking out ${e}`,(async()=>{await Promise.all(i),await s.loadReposIfNeeded()}),{show:ko.w.errorOnly})}getCommonBranches(){const{gs:{$workspaceRepos:e}}=this.props,t=new Map;for(const n of e.values()){const{$repoStatus:e}=n.refs;if(!e)return[];for(const s of e.branches){let e=t.get(s);e||(e=new Set,t.set(s,e)),e.add(n.repoPath)}}const n=e.size,s=[];for(const[e,i]of t)i.size===n&&s.push(e);return s}}var Po=Object.defineProperty;class Eo extends m.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?Po(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="onClick")?e+"":e,(()=>{const{gs:e}=this.props;e.selectWorkspaceRepo(null),(0,C.GA)(e)}))}render(){const{gs:e}=this.props,{$repo:t,$workspaceRepos:n}=e,s=null!==t;return(0,m.createElement)("div",{className:m.c`WsToolbar ${!0} WsToolbar-hidden ${s}`,style:{gridTemplateColumns:"50px 1fr 1fr 50px"},onClick:this.onClick},f.cX?(0,m.createElement)("span",null):(0,m.createElement)(Ki,{store:e,hidden:s}),(0,m.createElement)("div",{className:"WsToolbar-side"},(0,m.createElement)(vo.Eg,{gs:e}),n.size>1?(0,m.createElement)(xo,{gs:e,repoSelected:null!==t}):null),(0,m.createElement)("div",{className:"WsToolbar-side"},this.drawRightSideElements(s)),(0,m.createElement)("span",null))}drawRightSideElements(e){const{gs:t}=this.props,{$theme:{name:n}}=pe.zj,{$workspaceRepos:s,wsActions:i}=t;return 0===s.size?null:(0,m.createElement)(m.Fragment,null,(0,m.createElement)(Yi.I,{text:"Pull",loading:!e&&t.windowSt.$pullInProgress.size>0,classes:["mw50"],disabled:e,themeName:n,onClick:i.pull},(0,m.createElement)("div",{className:"Toolbar-icon icon-pull",style:{fontSize:18}})),(0,m.createElement)(Yi.I,{text:"Push",loading:!e&&t.windowSt.$pushInProgress.size>0,classes:["mw50"],disabled:e,themeName:n,onClick:i.push},(0,m.createElement)("div",{className:"Toolbar-icon icon-push",style:{fontSize:18}})),(0,m.createElement)(Yi.I,{text:"Fetch",loading:!e&&t.windowSt.$fetchInProgress.size>0,classes:["mw50"],disabled:e,themeName:n,onClick:i.fetch},(0,m.createElement)("div",{className:"Toolbar-icon icon-fetch",style:{fontSize:18}})))}}var Ro=Object.defineProperty,Io=(e,t,n)=>(((e,t,n)=>{t in e?Ro(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class To extends m.Custom{constructor(){super(...arguments),Io(this,"onContextMenu",(e=>{e.preventDefault()})),Io(this,"onClickBody",(async e=>{const{store:t}=this.props;t.windowSt.lastClickPosition={x:e.clientX,y:e.clientY};const{target:n}=e;if(null!==n){const s=n;s.className!==Wi&&s.className!==Ni||(0,k.hz)()||await No(t,e)}})),Io(this,"handleWindowKeyShortcuts",(e=>{null!==document.activeElement&&"TEXTAREA"===document.activeElement.tagName&&"Escape"!==e.key||function(e,t){switch(e.key){case"ArrowUp":return void function(e,{$repo:t}){if(e.preventDefault(),null!==t){const{repo:e,nav:n}=t;n.$viewingPatch?n.goToPreviousPatch():n.hasSelectedCommit()&&e.goToPreviousCommit()}}(e,t);case"ArrowDown":return void function(e,{$repo:t}){if(e.preventDefault(),null!==t){const{repo:e,nav:n}=t;n.$viewingPatch?n.goToNextPatch():n.hasSelectedCommit()&&e.goToNextCommit()}}(e,t);case"Escape":y(t,e)}}(e,this.props.store)}))}render(){const{store:e,store:{$workspaceRepos:{size:t}}}=this.props;return(0,m.createElement)(m.Fragment,null,1!==t?(0,m.createElement)(Eo,{gs:e}):null,t>0?(0,m.createElement)($o,{gs:e}):(0,m.createElement)(P,{store:e}),(0,m.createElement)(E,{store:e}))}componentDidMount(){document.body.addEventListener("mousedown",this.onClickBody,!0),window.addEventListener("resize",this.props.store.windowSt.updateDimensions),document.addEventListener("keydown",this.handleWindowKeyShortcuts),document.body.addEventListener("contextmenu",this.onContextMenu),requestAnimationFrame(this.props.store.windowSt.updateDimensions),m.Reaction.value((()=>this.props.store.windowSt.$animating.size>0),(e=>{e?document.documentElement.classList.add("animating"):document.documentElement.classList.remove("animating")}),this)}componentWillUnmount(){document.body.removeEventListener("mousedown",this.onClickBody,!0),window.removeEventListener("resize",this.props.store.windowSt.updateDimensions),document.removeEventListener("keydown",this.handleWindowKeyShortcuts),document.body.removeEventListener("contextmenu",this.onContextMenu)}}async function No(e,t){switch(t.button){case $.w3.left:y(e,t);break;case $.w3.right:const{$repo:n,windowSt:s}=e;s.lastClickPosition={x:t.clientX,y:t.clientY},null!==n&&await async function(e,t){const{repoPath:n}=e,s=[(0,v.NU)(n)],i=(0,v.Wr)(e);i.length>0&&(s.push(C.me),s.push(...i)),await(0,k.O0)(s,t,{usePoint:!0})}(n,t)}}async function Mo(e){(0,o.M7)(e).catch(console.log);const t=await(0,s.BA)(),{repoPath:n}=await async function(){return await u.g.getAppArgv()??{repoPath:null}}();return null!==n&&(t.repoPath=n),(0,i.R)(e),Lo(e),await e.restoreStartupState(t),(0,C.GA)(e),async function(){await(0,g.yy)(5e3),await b()}().catch((e=>console.log(e))),f.Zm||async function(e){await(0,g.yy)(1800);const t=await async function(){const e=await fetch(`${h.$w}/app-info`);return l((await e.json()).version)}(),n=l("0.44.3");if(t&&n){const i=t.compare(n);if("greater"===i){const n=function(){const e=r.o.get("lastUpdatePromptVersion");return null!==e?l(e):null}();null!==n&&"greater"!==t.compare(n)||(await async function(e){e.windowSt.centreLastClick();const t=(0,m.createElement)("div",{className:"NewVersionDialog"},(0,m.createElement)("div",{key:"1"},"You can download it at:"),(0,m.createElement)("a",{key:"2",href:d,onClick:async e=>{e.preventDefault(),await u.g.openExternalUrl(d)}},d),(0,m.createElement)("div",{key:"3"},"See what's new here:"),(0,m.createElement)("a",{key:"4",href:p,onClick:async e=>{e.preventDefault(),await u.g.openExternalUrl(p)}},p));return(0,c.P6)({message:"There is a new version of GitFiend",subMessage:t,button1Text:"OK",autoFocus:1})}(e),null!==(s=t)?r.o.set("lastUpdatePromptVersion",s.toString()):r.o.reset("lastUpdatePromptVersion"))}return i}var s;return null}(e).catch((e=>{console.log(e)})),e}function Lo(e,t=!1){t&&(document.body.innerHTML=""),(0,m.renderRoot)((0,m.createElement)(To,{store:e}),document.body)}},1998:(e,t,n)=>{"use strict";n.d(t,{En:()=>y,iJ:()=>$,RT:()=>v});var s=n(5185),i=n(4747),o=n(7273),r=n(5675),a=n(9634),l=n(164),c=Object.defineProperty,h=(e,t,n)=>(((e,t,n)=>{t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const u="username";class m extends l.Custom{constructor(){super(...arguments),h(this,"username",""),h(this,"password",""),h(this,"onUsernameChange",(e=>{this.username=e})),h(this,"onPasswordChange",(e=>{this.password=e})),h(this,"onCancel",(()=>{this.props.resolve(s.K)})),h(this,"onSubmit",(e=>{e.preventDefault(),this.props.resolve({username:this.username,password:this.password})}))}render(){const{url:e,descriptionId:t}=this.props;let n="Authentication Required";return null!==e&&(n=`Authentication required for "${new URL(e).origin}"`),(0,l.createElement)("form",{className:"CredentialsDialog",onSubmit:this.onSubmit},(0,l.createElement)(a.A,{messageId:t},n),(0,l.createElement)("div",{className:"FInputDialogColumn"},(0,l.createElement)("label",{htmlFor:u},"Username:"),(0,l.createElement)(r.L,{id:u,onText:this.onUsernameChange,autoFocus:!0,required:!0}),(0,l.createElement)("label",{className:"CredentialsDialog-passwordLabel",htmlFor:"password"},"Password or Personal Access Token:"),(0,l.createElement)(r.L,{id:"password",type:"password",onText:this.onPasswordChange,required:!0})),(0,l.createElement)(i.D,{rightButtons:[(0,l.createElement)(o.R,{type:"submit"},"OK"),(0,l.createElement)(o.R,{autoFocus:!0,onClick:this.onCancel},"Cancel")]}))}}async function d(e){const{$repo:t,windowSt:n}=e;n.centreLastClick();let i=null;if(null!==t){const{repoPath:e,refs:n}=t,{$currentRemoteName:s}=n;if(null!==s){const t=await y.command({repoPath:e,args:["remote","get-url",s]});t.error||(i=t.stdout.join("").trim())}}return(0,s.$)({dismissible:!1,contentCallback:(e,t,n)=>(0,l.createElement)(m,{resolve:e,url:i,descriptionId:n}),dialogId:d.name,focusElementId:u})}var p=n(9817),g=n(9378),f=n(9039);const w=`http://${f.Hc}:${f.JL}`;async function b(e){const t=await $.poll_action2({actionId:e});if(!("Ok"in t))throw new Error("poll_action2 returned nothing. The action doesn't exist?");return g.M.consoleSt.setActionState(e,t.Ok),t.Ok}const y=new Proxy({},{get:(e,t)=>async e=>{let n=await k(t,e),s=await b(n);for(;!s.done;)await(0,p.yy)(100),s=await b(n);if(s.error&&"credential"===s.error){const i=await d(g.M);if(i)for(await $.set_credentials(i),n=await k(t,e),s=await b(n);!s.done;)s=await b(n)}return s}}),$=new Proxy({},{get:(e,t)=>e=>k(t,e)}),v=new Proxy({},{get:(e,t)=>e=>k(t,e)});async function k(e,t){try{const n=await fetch(`${w}/f/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await n.json()}catch(e){console.log(e)}return null}},9039:(e,t,n)=>{"use strict";n.d(t,{Hc:()=>o,JL:()=>s,MZ:()=>l,Zm:()=>a,cX:()=>r,uo:()=>c});let s=29997,i="win32";const o="127.0.0.1";let r=!1,a=!1,l=!1;function c(){return i}!function(){const e=new URLSearchParams(window.location.search),t=e.get("port");t&&(s=+t),i=e.get("platform"),"darwin"===i?r=!0:"win32"===i?a=!0:l=!0}()},1640:(e,t,n)=>{"use strict";n.d(t,{$I:()=>m,An:()=>g,E0:()=>r,HU:()=>a,HW:()=>o,KF:()=>d,PT:()=>l,a$:()=>u,g9:()=>i,n9:()=>p,nX:()=>c,vU:()=>h});var s=n(1998);const i=e=>s.En.command({repoPath:e,args:["add","-A"]}),o=(e,t)=>s.En.command({repoPath:e,args:["add",t]}),r=(e,t)=>s.En.command({repoPath:e,args:["reset","--",t]}),a=(e,t,n)=>{const i=["branch",t];return void 0!==n&&i.push(n),s.En.command({repoPath:e,args:i})},l=(e,t)=>s.En.command({repoPath:e,args:["commit","-m",t]}),c=(e,t,n)=>"Local"===t.location?s.En.command({repoPath:e,args:["checkout",t.shortName]}):null!==n?s.En.command({repoPath:e,args:["checkout",n.shortName]}):s.En.command({repoPath:e,args:["checkout","-b",t.shortName,t.fullName]});function h(e,t){return s.En.command({repoPath:e,args:["checkout",t]})}const u=(e,t,n)=>s.En.command({repoPath:e,args:["pull",t?"--ff":"--no-ff",n?"--rebase":"--no-rebase"]}),m=(e,t)=>s.En.command({repoPath:e,args:["branch","-D",t.shortName]}),d=async(e,t,n)=>{const i="Remote"===t.location?t:n,o=i?.remoteName??t.remoteName;null!==i&&null!==o&&await s.En.command({repoPath:e,args:["push","-d",o,i.shortName]})},p=async e=>{(await s.En.command({repoPath:e,args:["reset","--hard"]})).error||await s.En.command({repoPath:e,args:["clean","-fd"]})},g=(e,t,n=!1)=>{const i=["revert","--no-edit",t];return n||i.push("--no-commit"),s.En.command({repoPath:e,args:i})}},3005:(e,t,n)=>{"use strict";n.d(t,{_R:()=>m,gC:()=>u,n2:()=>d});var s=n(2650),i=n(5737),o=n(7728),r=n(9039);function a(e){return{label:"Create Repo...",click:()=>(0,o.G)(e),accelerator:"CmdOrCtrl+Shift+N"}}function l(e){return{label:"Clone Repo...",click:()=>(0,s.iO)(e),accelerator:"CmdOrCtrl+N"}}function c(e){return{label:"Open Local Repo...",click:()=>{setTimeout((()=>(0,s.NV)(e)),10)},accelerator:"CmdOrCtrl+O"}}function h(e){const{$repo:t}=e;return null===t?i.eh:{label:`Close ${t.repoPath}`,click:()=>(0,s.AT)(e)}}const u={create:a,clone:l,open:c,close:h};function m(e){const t=[a(e),l(e),c(e)],{$repo:n}=e;return null!==n&&(t.push(i.me),t.push(h(e))),t.push(i.me,...d(e)),r.cX||(t.push(i.me),t.push({role:"quit"})),{label:"File",submenu:t}}function d(e){const t=e.settings.recentRepos.filter((e=>e.path.length>0));return t.length>0?[...t.map((t=>function(e,t){const n=e.getPath();return{label:t,type:"checkbox",click:async()=>{await e.setRepoPath(t)},checked:t===n}}(e,t.path)))]:[]}},5737:(e,t,n)=>{"use strict";n.d(t,{XJ:()=>v,eh:()=>y,GA:()=>$,me:()=>b});var s=n(3005),i=n(2042),o=n(4907),r=n(9010),a=n(1998);function l(e){const t=o.zj.$theme.setting,{$repo:n}=e,s=[{label:"Theme",submenu:[{label:"System",type:"radio",checked:"system"===t,click:()=>o.zj.changeTheme("system")},{label:"Light",type:"radio",checked:"light"===t,click:()=>o.zj.changeTheme("light")},{label:"Dark",type:"radio",checked:"dark"===t,click:()=>o.zj.changeTheme("dark")}]},null!==n?b:y,{label:"Show Changes",click:()=>{const{$repo:t}=e;t?.nav.goToWipView()},visible:null!==n,accelerator:"CommandOrControl+1"},{label:"Show Commits",click:()=>{const{$repo:t}=e;t?.nav.goToCommitsView()},visible:null!==n,accelerator:"CommandOrControl+2"},{label:"Show Branches",click:()=>{const{$repo:t}=e;t?.nav.setShowingRefView(!0)},visible:null!==n,accelerator:"CommandOrControl+3"}];return s.push(b),s.push({role:"resetZoom"},{role:"zoomIn",accelerator:"CommandOrControl+="},{role:"zoomOut"}),s.push(b),s.push({role:"reload"},{label:"Clear Cache and Reload",async click(){await a.iJ.clear_all_caches({repoPath:""}),location.reload()}},{role:"toggleDevTools"},b,{label:"Preview Features",submenu:[{label:"Workspaces",type:"checkbox",checked:r._C,click(){i.o.set("workspacesEnabled",!r._C),location.reload()}},{label:"New Functions (Squash, Extract changes)",type:"checkbox",checked:r.EE,click(){i.o.set("previewGitFunctions",!r.EE),location.reload()}},{label:"Auto-complete in input fields",type:"checkbox",checked:r.YG,click(){i.o.set("autoComplete",!r.YG),location.reload()}},{label:"Split Code Viewer",type:"checkbox",checked:i.o.get("splitView"),click(){i.o.set("splitView",!i.o.get("splitView")),location.reload()}},{label:"New Code Viewer",type:"checkbox",checked:i.o.get("newCodeViewer"),click(){i.o.set("newCodeViewer",!i.o.get("newCodeViewer")),location.reload()}}]}),{label:"View",submenu:s}}var c=n(9039);function h(){const e=[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"delete"},{role:"selectAll"}];return c.cX&&e.push({type:"separator"},{label:"Speech",submenu:[{role:"startSpeaking"},{role:"stopSpeaking"}]}),{label:"Edit",submenu:e}}var u=n(2650),m=n(6588),d=n(5524);function p(){const e={label:"Support",async click(){await d.g.openExternalUrl(m.bV)}};return c.cX?{role:"help",submenu:[e,b,{label:"Learn More",async click(){await d.g.openExternalUrl(m.$w)}}]}:{label:"Help",submenu:[e,b,{label:"About",click:()=>{setTimeout((async()=>{await(0,u.x8)()}),1)}}]}}var g=n(719),f=n(9412),w=n(4330);const b={type:"separator"},y={label:"none",visible:!1},$=(0,w.pk)((async e=>{const t=v(e);(0,f.xC)(),await d.g.setApplicationMenu((0,f.Nr)(t,"main"))}),100);function v(e){return[(0,s._R)(e),h(),l(e),(0,g.cJ)(e),p()]}},2650:(e,t,n)=>{"use strict";n.d(t,{AT:()=>c,NV:()=>l,iO:()=>a,x8:()=>h});var s=n(8338),i=n(5131),o=n(5524),r=n(6093);async function a(e){e.windowSt.centreLastClick(),await(0,s.j)(e)}async function l(e){const t=await o.g.show_open_folder_window();null!==t&&await e.setRepoPath(t)}function c(e){e.closeRepoOrWorkspace(),(0,r.$z)(e),(0,i.U)(e,!0)}async function h(){await o.g.showAboutDialog()}},719:(e,t,n)=>{"use strict";n.d(t,{E4:()=>f,KH:()=>p,NU:()=>u,Wr:()=>d,cJ:()=>h,dx:()=>m});var s=n(5737),i=n(8153),o=n(6950),r=n(7495),a=n(5524),l=n(2042),c=n(9039);function h(e){const{$repo:t}=e;if(null===t)return s.eh;const{repo:n}=t;return{label:"Repo",submenu:[{label:"Find",accelerator:"CommandOrControl+f",click:async()=>{await(0,r.i)(t)}},{type:"separator"},{label:"Pull",accelerator:"CommandOrControl+Shift+P",click:async()=>{await n.pull()}},{label:"Push",accelerator:"CommandOrControl+Shift+U",click:async()=>{await(0,i.VC)(t)}},{label:"Fetch",accelerator:"CommandOrControl+Shift+F",click:async()=>{await n.fetch()}},s.me,g(e),p(),(0,o.Vk)(e),s.me,u(t.repoPath),s.me,...d(t)]}}function u(e){return{label:`Open ${null===e?"Repo":e} in ${m()}`,async click(){null!==e&&await a.g.showItemInFolder(e)},enabled:null!==e}}function m(){return c.cX?"Finder":c.MZ?"File Manager":"File Explorer"}function d(e){const{config:t}=e,n=[];return t.$remotes.forEach(((e,t)=>{e=e.replace(".git",""),n.push({label:`Open ${e} (${t})`,async click(){await a.g.openExternalUrl(e)}})})),n}const p=()=>({label:"Auto fetch",type:"checkbox",click:()=>{l.o.set("autoFetch",!l.o.get("autoFetch"))},checked:l.o.get("autoFetch")});function g(e){return{label:"Pull options",submenu:w(e)}}function f(e){return[...w(e.global),s.me,(0,o.Vk)(e.global)]}function w(e){return[{label:"Fast Forward When Possible",type:"checkbox",checked:l.o.get("pullFastForward"),async click(){l.o.set("pullFastForward",!l.o.get("pullFastForward")),(0,s.GA)(e)}},{label:"Rebase",type:"checkbox",checked:l.o.get("pullRebase"),async click(){l.o.set("pullRebase",!l.o.get("pullRebase")),(0,s.GA)(e)}}]}},7865:(e,t,n)=>{"use strict";n.d(t,{R:()=>a,S:()=>u});var s=n(4907),i=n(9817),o=n(1998),r=n(2042);function a(e){window.addEventListener("focus",(async()=>{await async function(e){if(!l)try{l=!0,await Promise.all([c(e),u(e),s.zj.askMainForAccentColour()])}finally{l=!1}}(e)})),window.addEventListener("blur",(async()=>{await o.iJ.clear_cache({repoPath:""})}))}let l=!1;async function c(e){const{$repo:t,$workspaceRepos:n}=e;if(null!==t){const{wip:e,repo:n}=t;await n.loadOrReloadRepoData(),await(0,i.yy)(1e3),await e.loadWip()}else n.size>0&&await e.loadReposIfNeeded()}const h=6e4;async function u({$repo:e,windowSt:t}){if(null!==e){const{repo:n}=e;if(r.o.get("autoFetch")){const e=+new Date;t.getTimeOfLastFetch()+h<e&&await n.fetch()}}}},6081:(e,t,n)=>{"use strict";n.d(t,{h:()=>h,w:()=>l});var s=n(9817),i=n(1257),o=n(164),r=Object.defineProperty,a=(e,t,n)=>(((e,t,n)=>{t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),l=(e=>(e[e.message=0]="message",e[e.outputOnly=1]="outputOnly",e[e.errorOnly=2]="errorOnly",e))(l||{});const c={show:0,ignoreLogNum:0,hideError:!1};class h{constructor(){a(this,"$functionsInProgress",0),a(this,"$loadingModalMessage",""),a(this,"$displayOptions",c),a(this,"$actions",new Map),a(this,"$dialogNumber",0),a(this,"$userClickedShow",!1),a(this,"onClickShow",(()=>{this.$userClickedShow=!0})),a(this,"onClickOk",(()=>{this.clear()})),(0,o.init$)(this)}async showLoading(e,t,n=c){0===this.$functionsInProgress&&(this.$dialogNumber=(0,i.f)(),this.$actions=new Map),this.$loadingModalMessage=e,this.$displayOptions={...c,...n},this.$functionsInProgress++;const o=Date.now(),r=await t(),a=Date.now()-o;return a<500&&await(0,s.yy)(500-a),this.$functionsInProgress--,0!==this.$functionsInProgress||this.$userClickedShow||this.$hasError||this.clear(),r}get $showConsole(){return this.$userClickedShow||this.$hasError}get $hasError(){return!this.$displayOptions.hideError&&Array.from(this.$actions.values()).some((e=>e.error))}get $showLoadModal(){const{$displayOptions:{show:e,ignoreLogNum:t},$hasError:n}=this;if(n)return!0;switch(e){case 1:return this.$numLogs>t;case 2:return this.$showConsole;case 0:return""!==this.$loadingModalMessage}}get $numLogs(){return Array.from(this.$actions.values()).reduce(((e,t)=>e+t.stdout.length+t.stderr.length),0)}get $disableShowConsoleButton(){return this.$showConsole||0===this.$numLogs}clear(){this.$loadingModalMessage="",this.$userClickedShow=!1,this.$actions=new Map,this.$functionsInProgress=0,this.$displayOptions=c}setActionState(e,t){this.$actions=new Map([...this.$actions.entries(),[e,t]]),function(e){if(e){const{stdout:t,stderr:n,error:s}=e;let i="white-space: pre; font-family: monospace; background: #eee; padding: 3px; border-radius: 4px;";t.length>0&&console.log(`%c${t}`,i+"color: black;"),n.length>0&&console.log(`%c${n}`,i+"color: #333;")}}(t)}}},9378:(e,t,n)=>{"use strict";n.d(t,{M:()=>ut});var s=n(2042),i=n(164),o=Object.defineProperty,r=(e,t,n)=>(((e,t,n)=>{t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class a{constructor(){r(this,"recentRepos",[]),r(this,"$splitCodeViewer",s.o.get("splitView")),r(this,"$ssrCodeViewer",s.o.get("newCodeViewer")),(0,i.init$)(this)}addToRecentRepos(e){const t=this.recentRepos.find((t=>t.path===e));void 0!==t?t.date=Date.now():this.recentRepos.push({path:e,date:Date.now()}),this.recentRepos.sort(((e,t)=>t.date-e.date)),this.recentRepos=this.recentRepos.slice(0,15)}removeFromRecentRepos(e){this.recentRepos=this.recentRepos.filter((t=>t.path!==e))}setRecentRepos(e){this.recentRepos=e}}var l=n(5185),c=n(3331),h=Object.defineProperty;class u extends i.Custom{constructor(){var e,t,n;super(...arguments),e=this,t="ref",n=(0,i.createRef)(),((e,t,n)=>{t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n)}render(){return(0,i.createElement)("div",{className:"GitConsole text",ref:this.ref},this.drawLogs())}drawLogs(){const{$actions:e}=this.props.consoleSt,t=[];for(const[n,{stdout:s,stderr:o}]of e.entries())o.forEach(((e,s)=>{t.push((0,i.createElement)("span",{className:"GitConsole-stderr",key:`${n}-stderr-${s}`},e))})),s.forEach(((e,s)=>{t.push((0,i.createElement)("span",{className:"GitConsole-stdout",key:`${n}-stdout-${s}`},e))}));return t}componentDidUpdate(){const{current:e}=this.ref;null!==e&&(e.scrollTop=e.scrollHeight)}}var m=n(7273),d=n(4907);class p extends i.Custom{render(){const{consoleSt:e}=this.props,{$showConsole:t,$disableShowConsoleButton:n,$loadingModalMessage:s}=e;return(0,i.createElement)("div",{className:"LoadingModal-screen"},(0,i.createElement)("div",{className:"LoadingModal-messageContainer"},(0,i.createElement)("div",{className:"LoadingModal-message"},t?null:(0,i.createElement)(c.y,{size:16,invertColour:"light"===d.zj.$theme.name,style:{marginRight:10}}),""!==s?(0,i.createElement)("div",{className:"LoadingModal-messageText"},s,"..."):null),t?this.drawConsole():null,t?null:(0,i.createElement)(m.R,{className:"LoadingModal-showConsoleButton",colour:"text",disabled:n,onClick:e.onClickShow},"Show Console")))}drawConsole(){const{consoleSt:e}=this.props,{$functionsInProgress:t}=e;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(u,{consoleSt:e,key:"git-console"}),",",(0,i.createElement)(m.R,{onClick:e.onClickOk,disabled:t>0,style:{marginLeft:"auto",marginRight:12}},t?(0,i.createElement)(c.y,{size:14,invertColour:"light"===d.zj.$theme.name}):"OK"),",")}}var g=Object.defineProperty,f=(e,t,n)=>(((e,t,n)=>{t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class w{constructor(e){this.consoleSt=e,f(this,"$dialogData",new Map),f(this,"$contextMenu",[]),(0,i.init$)(this)}showContextMenu(e){this.$contextMenu=[...this.$contextMenu,e]}removeTopSubmenu(){this.$contextMenu.length>0&&(this.$contextMenu=this.$contextMenu.slice(0,-1))}clearAllContextMenus(){if(0!==this.$contextMenu.length){for(const e of this.$contextMenu)e.resolver();this.$contextMenu=[]}}showDialog(e){const t=new Map(this.$dialogData);t.set(e.dialogId,e),this.$dialogData=t}removeDialog(e){const t=new Map(this.$dialogData);t.delete(e),this.$dialogData=t}showingDialog(){return this.$dialogData.size>0}removeTopMostDialog(){let e=null;for(const[,t]of this.$dialogData)(null===e||t.dialogOrder>e.dialogOrder)&&(e=t);null!==e&&e.dismissible&&(this.$dialogData.delete(e.dialogId),e.resolveDialog(l.K),this.$dialogData=new Map(this.$dialogData))}reuseExistingDialog(e,t){const n=this.$dialogData.get(e)??null;return null===n?null:(n.dialogOrder=t,this.$dialogData=new Map(this.$dialogData),n.promise)}drawDialogs(){const{$dialogData:e,consoleSt:t}=this,n=[];for(const[t,s]of e)n.push({order:s.dialogOrder,element:(0,i.createElement)("div",{key:t},s.dialogComponent)});return t.$showLoadModal&&n.push({order:t.$dialogNumber,element:(0,i.createElement)(p,{consoleSt:t,key:"loading-modal"})}),n.sort(((e,t)=>e.order-t.order)),n.map((e=>e.element))}}var b=n(7027),y=Object.defineProperty,$=(e,t,n)=>(((e,t,n)=>{t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class v{constructor(){$(this,"config",{}),$(this,"$pushDefault",null),$(this,"$remotes",new Map),$(this,"$fetchOptions",s.o.get("fetchOptions")),(0,i.init$)(this)}setConfig(e){this.$remotes=new Map(Object.entries(e.remotes)),this.config=e.entries,this.loadKnownKeys(e.entries)}setFetchOptions(e){s.o.set("fetchOptions",e),this.$fetchOptions=e}loadKnownKeys(e){this.$pushDefault=e["remote.pushdefault"]??null}getPushRemoteForBranch(e){return function(e,t){const n=t[`branch.${e}.pushremote`];if(void 0!==n)return n;const s=t["remote.pushdefault"]??null;if(null!==s)return s;const i=t[`branch.${e}.remote`];return void 0!==i?i:"origin"}(e,this.config)}}var k=n(4188),C=n(6947),_=n(6343),S=n(1998),x=Object.defineProperty,P=(e,t,n)=>(((e,t,n)=>{t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class E{constructor(e){this.store=e,P(this,"$refArray",[]),P(this,"$refTextLengths",new Map),P(this,"$localRefDiffs",new Map),P(this,"$diffsToHead",new Map),P(this,"$commitsToPull",new Set),P(this,"$repoStatus",null),P(this,"$refSearch",""),P(this,"$commitsToPush",{thisBranch:new Set,allBranches:new Set,size:0}),P(this,"loadCommitsToPushPull",(()=>Promise.all([this.loadCommitsToPull(),this.loadCommitsToPush()]))),P(this,"measureRefText",(e=>{if(0===e.length)return;const{lengths:t,max:n}=(0,C.sj)(e.map((e=>({text:(0,k.z)(e),id:e.id}))),_.gx);this.store.layout.setMaxRefTextWidth(n),this.$refTextLengths=t})),(0,i.init$)(this)}get $numCommitsToPushPull(){if(null===this.store.global.$repo){const{$repoStatus:e}=this;return e?{push:e.remoteBehind,pull:e.remoteAhead}:{push:0,pull:0}}return{push:this.$commitsToPush.size,pull:this.$commitsToPull.size}}async loadRefDiffs(){const{repoPath:e}=this.store,{$repoStatus:t}=this;if(t?.localCommitId){const n=await S.RT.calc_ref_diffs({repoPath:e,headCommitId:t.localCommitId});if(null!==n){let[e,t]=n;this.$localRefDiffs=new Map(Object.entries(e)),this.$diffsToHead=new Map(Object.entries(t))}}}get $allRefs(){const{$refArray:e}=this;e.sort(((e,t)=>{if(e.time===t.time){if(e.head)return 1;if(t.head)return-1}return t.time-e.time}));const t=new Map;for(const n of e)t.set(n.id,n);return{map:t,array:e}}get $filteredRefs(){const{$allRefs:e,$refSearch:t}=this,n=new Map;for(const s of e.array)t.length>1?s.fullName.toLowerCase().includes(t.toLowerCase())&&R(n,s):R(n,s);return{map:e.map,array:e.array,pairs:n}}setRefArray(e){this.measureRefText(e),this.$refArray=e}findRefByShortName(e){for(const t of this.$allRefs.array)if(t.shortName===e)return t;return null}getSibling({siblingId:e,shortName:t}){const{config:n}=this.store;if(null!==e){const s=this.$allRefs.map.get(e),i=n.getPushRemoteForBranch(t);if(void 0!==s&&s.remoteName===i)return s}return null}get $refInfoLocal(){return this.$allRefs.array.filter((e=>"Local"===e.location))}get $remotes(){const e=new Set;for(const t of this.$filteredRefs.array)null!==t.remoteName&&e.add(t.remoteName);return Array.from(e)}async loadCommitsToPush(){const{thisBranch:e,allBranches:t}=await S.RT.get_un_pushed_commits({repoPath:this.store.repoPath});this.$commitsToPush={thisBranch:new Set(e),allBranches:new Set(t),size:Math.max(e.length,t.length)}}get $currentBranchIsUnpublished(){return"Local"===this.$repoStatus?.state}async loadCommitsToPull(){const{repoPath:e}=this.store,{$repoStatus:t}=this;if(null===t)return;const{localCommitId:n,remoteCommitId:s}=t;if(n&&s){const t=await S.RT.commit_ids_between_commits({repoPath:e,commitId1:n,commitId2:s}),i="Ok"in t?t.Ok:[];this.$commitsToPull=new Set(i)}}get $currentRemoteName(){const{$repoStatus:e}=this;return e?this.store.config.getPushRemoteForBranch(e.branchName):null}}function R(e,t){if("Branch"===t.refType){const n=e.get(t.shortName);if(n)"Local"===t.location?n.local=t:n.remote.push(t);else{const n={local:null,remote:[]};"Local"===t.location?n.local=t:n.remote.push(t),e.set(t.shortName,n)}}}var I=n(6081),T=n(2994),N=n(4071),M=n(9817),L=Object.defineProperty;class F{constructor(e,t,n,s){this.name=e,this.colour=t,this.removeFunction=n,this.type=s}}class O{constructor(e,t){var n;this.repoSt=e,this.store=t,((e,t,n)=>{t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(n="$filters")?n+"":n,[]),(0,i.init$)(this),this.loadFilters(),i.Reaction.value((()=>JSON.stringify(this.$filters)),(()=>(this.persistFilters(),this.repoSt.loadCommits({useCache:!0}))),this)}setBranchFilter(e){this.$filters=this.$filters.filter((e=>!("branch"in e))),null!==e&&this.$filters.push({branch:{id:e.id,short_name:e.short_name}}),this.store.nav.setShowingRefView(!1)}setUsernameFilter(e){this.$filters=this.$filters.filter((e=>!("user"in e))),null!==e&&this.$filters.push({user:e})}setFileFilter(e){this.$filters=this.$filters.filter((e=>!("file"in e))),null!==e&&this.$filters.push({file:e})}get $haveFilter(){return this.$filters.length>0}get $file(){const e=this.$filters.find((e=>"file"in e));return e&&"file"in e?e.file:null}getFilters(){const e=[];for(const t of this.$filters)if("branch"in t){const{short_name:n}=t.branch;e.push(new F(n,(0,N.Jh)(n),(()=>{this.setBranchFilter(null)}),"branch"))}else if("user"in t){const{author:n,email:s}=t.user;e.push(new F(n,(0,N.Jh)(s),(()=>{this.setUsernameFilter(null)}),"username"))}else if("file"in t){const{file_name:n}=t.file;e.push(new F((0,M.WP)(n),(0,N.Jh)(n),(()=>{this.setFileFilter(null)}),"file"))}return e}persistFilters(){const{repoPath:e}=this.store,t=s.o.get("filters2");t[e]=this.$filters,s.o.set("filters2",t)}loadFilters(){const{repoPath:e}=this.store,t=s.o.get("filters2")[e];void 0!==t&&(this.$filters=t)}}var D=n(1640),j=Object.defineProperty,z=(e,t,n)=>(((e,t,n)=>{t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class W{constructor(e,t,n){this.store=e,this.quickRefresh=t,this.fullRefresh=n,z(this,"lastRefreshType",0),z(this,"run",(async()=>{await this.refresh()}))}async refresh(){const{refreshType:e}=this;this.setLoading(!0),0===e?(this.lastRefreshType=0,await this.quickRefresh()):(this.lastRefreshType=1,await this.fullRefresh()),this.setLoading(!1)}async hasChanged(){const{store:{repoPath:e},lastRefreshType:t,refreshType:n}=this;if(t!==n)return!0;const s=await S.RT.repo_has_changed({repoPath:e});return null===s&&console.error(`${e} wasn't found in our watch dirs.`),s??!1}get refreshType(){const{store:e,store:{global:{$repo:t}}}=this;return t===e?1:0}setLoading(e){const{store:{global:{windowSt:t},repoPath:n}}=this;e?(t.$refreshingRepo.add(n),t.$refreshingRepo=new Set(t.$refreshingRepo)):(t.$refreshingRepo.delete(n),t.$refreshingRepo=new Set(t.$refreshingRepo))}}var V=Object.defineProperty,A=(e,t,n)=>(((e,t,n)=>{t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class H{constructor(e){this.store=e,A(this,"$commits",new Map),A(this,"$commitIds",[]),A(this,"$patches",{commitId:"",patches:[]}),A(this,"$hunks",[]),A(this,"$hunkLines",[]),A(this,"$splitHunkLines",[[],[]]),A(this,"$mode","commits"),A(this,"commitFilters"),A(this,"fullRefresh",(async()=>{const{wip:e,refs:t,nav:n,config:s,repoPath:i}=this.store,o=await S.RT.load_repo_status({repoPath:i});if("Err"in o)return void console.error(`Failed to load repo status for ${i}: `,o.Err);const{patches:r,config:a}=o.Ok;s.setConfig(a),e.setPatchesFromQuery(r),t.$repoStatus=o.Ok,await this.loadCommits(),n.validateSelectedCommit(),await e.validateAndLoadHunks(),await Promise.all([t.loadCommitsToPushPull(),t.loadRefDiffs()])})),A(this,"refresh"),A(this,"pull",(async()=>{const{global:e,repo:t}=this.store,{consoleSt:n,windowSt:i}=e;await n.showLoading("Pulling",(async()=>{const{repoPath:e}=this.store;i.$pullInProgress.add(e),i.$pullInProgress=new Set(i.$pullInProgress),await(0,D.a$)(e,s.o.get("pullFastForward"),s.o.get("pullRebase")),i.$pullInProgress.delete(e),i.$pullInProgress=new Set(i.$pullInProgress),await t.loadOrReloadRepoData()}),{show:I.w.errorOnly})})),(0,i.init$)(this),this.commitFilters=new O(this,e),this.refresh=new W(e,(async()=>{const{wip:e,refs:t,config:n,repoPath:s}=this.store,i=await S.RT.load_repo_status({repoPath:s});if("Ok"in i){const{Ok:s}=i;n.setConfig(s.config),e.setPatchesFromQuery(s.patches),t.$repoStatus=s}else console.log("failed to load ws repo",s,i.Err),e.setPatchesFromQuery(null)}),this.fullRefresh);const{nav:t}=e;i.Reaction.value((()=>t.$selectedCommitId),(async t=>{const{repoPath:n}=e,{$patches:{patches:s}}=this;if(s.at(0)?.commitId!==t)if(null===t||t===b.z)this.$patches={commitId:"",patches:[]};else{const e=await S.RT.load_patches_for_commit({repoPath:n,commitId:t});this.$patches={commitId:t,patches:"Ok"in e?e.Ok:[]}}}),this),i.Reaction.value((()=>{const{$selectedPatchId:e}=t;if(null===e)return null;const{$patches:{patches:n},$selectedCommit:s}=this;return 0===n.length?null:s?.id+e}),(async()=>{if(t.$viewingWip)return;this.clearHunks();const{$selectedPatchId:e}=t;null!==e&&await this.loadHunksForId(e)}),this)}async loadOrReloadRepoData(){await this.refresh.hasChanged()?await this.refresh.run():(await(0,M.yy)(1e3),await this.refresh.hasChanged()&&await this.refresh.run())}async loadCommits(e){const{nav:t,refs:n,repoPath:s}=this.store,i=await S.RT.load_commits_and_refs({repoPath:s,numCommits:e?.num??_.fZ,filters:this.commitFilters.$filters,fast:e?.useCache??!1,skipStashes:e?.skipStashes??!1}),[o,r]="Ok"in i?i.Ok:[[],[]],a=new Map;for(const e of o)a.set(e.id,e);this.setCommits(a),n.setRefArray(r),t.validateSelectedCommit()}setCommits(e){this.$commits=e,this.$commitIds=Array.from(this.$commits.keys())}async fetch(e){const{store:t}=this,{repo:n,global:i,config:o}=t,{consoleSt:r,windowSt:a}=i;async function l(){const{repoPath:e}=t;a.setFetchInProgress(e);const n=s.o.get("fetchOptions");n.type!==T.N.all&&o.$remotes.has(n.remoteName)?await S.En.command({repoPath:e,args:["fetch","--prune",n.remoteName]}):await S.En.fetch_all({repoPath:e}),a.setFetchDone(e)}e?await r.showLoading("Fetching",l,{show:I.w.errorOnly}):await l(),await n.loadOrReloadRepoData()}async reloadHunks(){const{store:{nav:{$viewingWip:e,$selectedPatchId:t}}}=this;!e&&t&&await this.loadHunksForId(t)}async loadHunksForId(e){if(this.store.global.settings.$ssrCodeViewer)return;const{repo:t,nav:n}=this.store,{$selectedCommit:s,$patches:{patches:i}}=t,o=i.find((t=>t.id===e));if(s&&o)if(this.store.global.settings.$splitCodeViewer){const[t,i,r]=await this.loadHunksSplit(s,o);n.$selectedPatchId===e&&(this.$hunks=t,this.$hunkLines=[],this.$splitHunkLines=[i,r])}else{const[t,i]=await this.loadHunks(s,o);n.$selectedPatchId===e&&(this.$hunks=t,this.$hunkLines=i,this.$splitHunkLines=[[],[]])}}async loadHunks(e,t){if(null!==t&&!t.isImage){const n=await S.RT.load_hunks({repoPath:this.store.repoPath,commit:e,patch:t});if("Ok"in n)return n.Ok}return[[],[]]}async loadHunksSplit(e,t){if(null!==t&&!t.isImage){const n=await S.RT.load_hunks_split({repoPath:this.store.repoPath,commit:e,patch:t});if("Ok"in n)return n.Ok}return[[],[],[]]}selectFirstPatch(){const{$patches:{patches:e}}=this;e.length>0&&this.store.nav.setSelectedPatchId(e[0].id)}getCommitIndex(e){const t=this.$commits.get(e);return void 0!==t?t.index:-1}get $selectedPatch(){const{$patches:{patches:e}}=this,{$selectedPatchId:t}=this.store.nav;return e.find((e=>e.id===t))??null}get $selectedCommit(){const{store:{nav:{$selectedCommitId:e}}}=this;return null!==e&&e!==b.z?this.$commits.get(e)??null:null}goToNextCommit(){this.store.nav.setSelectedCommit(this.getNextCommitId())}getNextCommitId(){const{$commitIds:e,store:{nav:t,nav:{$selectedCommitId:n}}}=this;if(n===b.z&&e.length>0)return e[0];if(null!==n){const{$selectedIndex:n}=t;if(null!==n&&n<e.length-1)return e[n+1]}return null}goToPreviousCommit(){this.store.nav.setSelectedCommit(this.getPrevCommitId())}getPrevCommitId(){const{nav:e,wip:t}=this.store;if(e.hasSelectedCommit()){const{$selectedIndex:n}=e;if(0===n&&t.$haveWIP)return b.z;if(null!==n)return this.$commitIds[n-1]}return null}async switchToCommit(e){const{repoPath:t,nav:n}=this.store;if(d.zj.disableAnimations(),d.zj.restoreAnimationsDebounced(),e===b.z)return void n.goToWipView();if(void 0===this.$commits.get(e))return;const s=await S.RT.load_patches_for_commit({repoPath:t,commitId:e}),i="Ok"in s?s.Ok:[],o=i.at(0)??null;n.$selectedCommitId=e,n.$selectedPatchId=o?.id??null,this.$patches={commitId:e,patches:i}}clearHunks(){this.$hunks=[],this.$hunkLines=[],this.$splitHunkLines=[[],[]]}}function B(e,t){return{status:e,oldNum:null,newNum:null,hunkIndex:t,text:"",index:0,lineEnding:"\n"}}var U=n(320),K=n(4222),q=n(3212),Y=Object.defineProperty,G=(e,t,n)=>(((e,t,n)=>{t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class J{constructor(e){this.chosenLines=e,G(this,"$draggedLine",null),G(this,"$initialTop",0),G(this,"$initialClientY",0),G(this,"$deltaY",0),G(this,"$sectionStartIndex",0),G(this,"onMouseMove",(e=>{this.$deltaY=e.clientY-this.$initialClientY})),G(this,"onMouseUp",(()=>{window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),this.endDragging()})),(0,i.init$)(this)}setDragging(e,t,n){this.$draggedLine=t,this.$initialTop=n,this.$initialClientY=e.clientY,this.$deltaY=0,this.$sectionStartIndex=n/q.K_-this.$currentIndex,window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)}endDragging(){this.$draggedLine=null}get $draggedElementTop(){return this.$initialTop+this.$deltaY}get $newIndex(){const{$draggedLine:e}=this;return null===e?-1:Math.round((this.$initialTop+this.$deltaY)/q.K_)-this.$sectionStartIndex}get $dragInProgress(){return null!==this.$draggedLine}get $currentIndex(){const{$draggedLine:e}=this;if(null!==e){const t=this.chosenLines.$sections.get(e.conflict.section);if(void 0!==t){const n=t.array.findIndex((t=>e.conflict.key===t.conflict.key));if(-1!==n)return n}}return-1}}var X=n(4330),Z=Object.defineProperty,Q=(e,t,n)=>(((e,t,n)=>{t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class ee{constructor(e){this.conflictedFile=e,Q(this,"$sections",new Map),Q(this,"dragSt",new J(this)),(0,i.init$)(this)}clear(){this.$sections=new Map}has({conflict:{section:e,key:t}}){return this.$sections.get(e)?.set.has(t)??!1}add(e){const{section:t}=e.conflict,{$sections:n}=this;if(!this.has(e)){n.has(t)||n.set(t,{array:[],set:new Set});const s=n.get(t);s?.array.push(e),s?.set.add(e.conflict.key)}this.$sections=new Map(n)}remove(e){const{$sections:t}=this,{section:n,key:s}=e.conflict,i=t.get(n);if(void 0!==i){i.set.delete(s);const e=i.array.findIndex((e=>e.conflict.key===s));-1!==e&&i.array.splice(e,1),this.$sections=new Map(t)}}toggleLine(e){this.has(e)?this.remove(e):this.add(e)}get $chosenLines(){const e=[],t=new Map;for(const n of this.conflictedFile.lines)if("ok"in n)e.push(n);else{const s=this.$sections.get(n.slot.section);if(!t.has(n.slot.section)&&void 0!==s){for(const t of s.array)e.push(t);t.set(n.slot.section,!0)}}return e}get $lineIndices(){const e=new Map,t=new Map;let n=0;for(const s of this.conflictedFile.lines)if("slot"in s){const i=this.$sections.get(s.slot.section);if(!t.has(s.slot.section)&&void 0!==i){for(const t of i.array)e.set(t.conflict.key,n),n++;t.set(s.slot.section,!0)}}else n++;return e}get $lineStats(){const{sections:e}=this.conflictedFile.$info;let t=0,n=0;for(const s of e)t+=te(s[K.M3]),n+=te(s[K.NS]);let s=0,i=0;return this.$sections.forEach((e=>{for(const t of e.array)t.conflict.side===K.M3?s++:i++})),{[K.M3]:{chosen:s,total:t,allChosen:s===t},[K.NS]:{chosen:i,total:n,allChosen:i===n}}}allInSideChosen(e){return this.$lineStats[e].allChosen}toggleSide(e,t=null){const n=!0===t||!this.allInSideChosen(e);for(const t of this.conflictedFile.$info.sections)for(const s of t[e])"conflict"in s&&(n?this.add(s):this.remove(s))}selectAll(){this.toggleSide(K.M3,!0),this.toggleSide(K.NS,!0)}reorder(e,t,n){const s=this.$sections.get(e.conflict.section);void 0===s||n>=s.array.length||t===n||t<0||n<0||((0,X.Iz)(s.array,t,n),this.$sections=new Map(this.$sections))}}function te(e){const t=e.findIndex((e=>"blank"in e));return-1!==t?t:e.length}function ne(e,t){if(e.lines.length!==t.lines.length||e.sections.length!==t.sections.length||e.refNameTop!==t.refNameTop||e.refNameBottom!==t.refNameBottom||e.lineEnding!==t.lineEnding||e.maxLineLength!==t.maxLineLength)return!1;for(let n=0;n<e.sections.length;n++)if(JSON.stringify(e.sections[n])!==JSON.stringify(t.sections[n]))return!1;return!0}var se=n(1197),ie=Object.defineProperty,oe=(e,t,n)=>(((e,t,n)=>{t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class re{constructor(e,t,n){this.store=e,this.repoPath=t,this.patch=n,oe(this,"chosenLines",new ee(this)),oe(this,"$info",{lines:[],sections:[],lineEnding:"",maxLineLength:0,refNameBottom:"",refNameTop:""}),oe(this,"$chosenFile",null),oe(this,"$saving",!1),oe(this,"$loadedLines",!1),(0,i.init$)(this),this.loadLines().catch()}async loadLines(){const{repoPath:e}=this.store,t=await S.RT.load_conflicted_file({repoPath:e,patch:this.patch}),n="Ok"in t?t.Ok:{lines:[],sections:[],lineEnding:"",maxLineLength:0,refNameBottom:"",refNameTop:""};this.$loadedLines=!0,ne.name;const s=ne(this.$info,n);ne.name,s||(this.$info=n,this.chosenLines.clear(),this.chosenLines.selectAll())}get imageConflict(){return this.patch.isImage}get $binaryConflict(){return!!this.$loadedLines&&!this.patch.isImage&&0===this.$info.lines.length}get lines(){return this.$info.lines}getConflictedLine(e,t,n){return this.$info.sections[e][t][n]}get refNameTop(){if("HEAD"===this.$info.refNameTop){const{$repoStatus:e}=this.store.refs;return`${"Remote"!==e?.state?"local":"remote"}/${e?.branchName??""}`}return this.$info.refNameTop}get refNameBottom(){return this.$info.refNameBottom}isSamePatch(e){return e.id===this.patch.id}conflictedDelete(){return"D"===this.patch.unStagedType||"D"===this.patch.stagedType}get $saveButtonDisabled(){return(this.imageConflict||this.$binaryConflict)&&null===this.$chosenFile||this.$saving}async saveFile(){this.$saving=!0,this.imageConflict?await this.saveImageFile():await this.saveTextFile(),this.$saving=!1}async saveImageFile(){const{repoPath:e,patch:{newFile:t},store:n,$chosenFile:s}=this;null!==s&&("left"===s?await S.En.command({repoPath:e,args:["checkout","--ours",t]}):await S.En.command({repoPath:e,args:["checkout","--theirs",t]}),await(0,D.HW)(e,t),await n.wip.loadWip())}async saveTextFile(){const{wip:e,repoPath:t}=this.store,n=(0,se.uJ)(this.repoPath,this.patch.newFile),s=this.chosenLines.$chosenLines.map((e=>"ok"in e?e.ok.text:e.conflict.text)).join(this.$info.lineEnding);await S.iJ.write_file({filePath:n,content:s});const i=this.getIndexOfSelectedUniquePatch();await(0,D.HW)(t,this.patch.newFile),this.chosenLines.clear(),await e.loadWip(),this.goToClosestIndex(i)}async keepDeletedFile(){const{wip:e,repoPath:t}=this.store,n=this.getIndexOfSelectedUniquePatch();await(0,D.HW)(t,this.patch.newFile),await e.loadWip(),this.goToClosestIndex(n)}async removedDeletedFile(){const{wip:e,repoPath:t}=this.store,n=this.getIndexOfSelectedUniquePatch();await S.En.command({repoPath:t,args:["rm",this.patch.oldFile]}),await e.loadWip(),this.goToClosestIndex(n)}getIndexOfSelectedUniquePatch(){const{wip:{$selectedPatch:e,$patches:t}}=this.store;return null===e?-1:t.findIndex((t=>t.newFile===e.newFile||t.oldFile===e.oldFile))}goToClosestIndex(e){const{wip:{$patches:t},nav:n}=this.store;0!==t.length&&(e<0?n.setSelectedPatchId(t[0].id):e>=t.length?n.setSelectedPatchId(t[t.length-1].id):n.setSelectedPatchId(t[e].id))}}var ae=Object.defineProperty,le=(e,t,n)=>(((e,t,n)=>{t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const ce={pinnedFilePaths:[],date:0};class he{constructor(e){this.wipSt=e,le(this,"currentRepo",""),le(this,"$currentPinned",new Map),(0,i.init$)(this)}loadAllPinned(){return s.o.get("pinnedFilePaths")}saveAllPinned(e){Object.keys(e).length>50&&(e=this.removeOldestRepo(e)),s.o.set("pinnedFilePaths",e)}removeOldestRepo(e){const t=Object.keys(e);let n=e[t[0]],s=t[0];for(const i of t)e[i].date<n.date&&(n=e[i],s=i);return delete e[s],e}pinFile(e,t){this.ensureRepo(e)&&(this.$currentPinned.set(t,!0),this.$currentPinned=new Map(this.$currentPinned),this.saveCurrentPinned())}unPinFile(e,t){this.ensureRepo(e)&&this.$currentPinned.has(t)&&(this.$currentPinned.delete(t),this.$currentPinned=new Map(this.$currentPinned),this.saveCurrentPinned())}has(e,t){return!!this.ensureRepo(e)&&this.$currentPinned.has(t)}getArray(e){return this.ensureRepo(e)?this.wipSt.$patches.filter((e=>this.$currentPinned.has(e.newFile))).map((e=>e.newFile)):[]}size(e){return this.ensureRepo(e)?this.$currentPinned.size:0}saveCurrentPinned(){const e={pinnedFilePaths:Array.from(this.$currentPinned.keys()),date:Date.now()},t=this.loadAllPinned();t[this.currentRepo]=e,this.saveAllPinned(t)}ensureRepo(e){return null!==e&&(this.currentRepo!==e&&this.switchRepo(e),!0)}switchRepo(e){const t=this.loadAllPinned();this.currentRepo=e,this.$currentPinned=new Map;const n=t[e]??ce;for(const e of n.pinnedFilePaths)this.$currentPinned.set(e,!0);this.$currentPinned=new Map(this.$currentPinned)}}var ue=n(8901);class me{constructor(e){this.store=e}stageFile(e){const{store:{repoPath:t,wip:{$patchSize:n},global:{stagedFiles:s}}}=this;s.stageFile(t,e,n)}unStageFile(e){const{store:{repoPath:t,wip:{$patchSize:n},global:{stagedFiles:s}}}=this;s.unStageFile(t,e,n)}stageLine(e,t){const{store:{repoPath:n,wip:{$selectedPatch:s,$patchSize:i},global:{stagedFiles:o}}}=this;null!==s&&o.stageLine(n,s.newFile,e,t,i)}unStageLine(e,t){const{store:{repoPath:n,wip:{$selectedPatch:s,$patchSize:i},global:{stagedFiles:o}}}=this;null!==s&&o.unStageLine(n,s.newFile,e,t,i)}stageHunk(e){const{store:{repoPath:t,wip:{$selectedPatch:n,$patchSize:s},global:{stagedFiles:i}}}=this;null!==n&&i.stageHunk(t,n.newFile,e,s)}unStageHunk(e){const{store:{repoPath:t,wip:{$selectedPatch:n,$patchSize:s},global:{stagedFiles:i}}}=this;null!==n&&i.unStageHunk(t,n.newFile,e,s)}fileStagedState(e){const{store:{repoPath:t,global:{stagedFiles:n}}}=this;return n.fileStageState(t,e)}hunkStagedState(e){const{store:{repoPath:t,wip:{$selectedPatch:n},global:{stagedFiles:s}}}=this;return null===n?"staged":s.hunkStageState(t,n.newFile,e)}lineStageState(e,t){const{store:{repoPath:n,wip:{$selectedPatch:s,$patchSize:i},global:{stagedFiles:o}}}=this;return null===s?"staged":o.lineStageState(n,s.newFile,e,t,i)}async discardLine(e){await(0,ue.VZ)(this.store,e)}cleanupAfterCommit(e){const{store:{repoPath:t,global:{stagedFiles:n}}}=this;n.cleanupAfterCommit(t,e)}}var de=Object.defineProperty,pe=(e,t,n)=>(((e,t,n)=>{t in e?de(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class ge{constructor(e){this.store=e,pe(this,"$filterText",""),pe(this,"onClickCheckbox",(async()=>{const{$checkboxState:e,$selectedInfo:{staged:t,mixed:n,total:s,pinned:i}}=this;switch(e){case"true":this.unStageAll();break;case"false":case"mixed":t+n===s-i?this.unStageAll():this.stageAll()}})),pe(this,"unStageAll",(()=>{const{wip:e}=this.store;for(const t of this.$visiblePatches)e.stagingSt.unStageFile(t.newFile)})),pe(this,"stageAll",(()=>{const{wip:e,repoPath:t}=this.store;for(const{newFile:n}of this.$visiblePatches)e.pinnedFiles.has(t,n)||e.stagingSt.stageFile(n)})),(0,i.init$)(this)}get $visiblePatches(){const{$filterText:e,store:{wip:{$patches:t}}}=this,n=e.toLocaleLowerCase();return t.filter((e=>e.newFile.toLocaleLowerCase().includes(n)))}get $selectedInfo(){const{$visiblePatches:e,store:{wip:t,repoPath:n}}=this;let s=0,i=0,o=0;for(const r of e){const e=t.stagingSt.fileStagedState(r.newFile);t.pinnedFiles.has(n,r.newFile)?o++:"staged"===e?s++:"mixed"===e&&i++}return{staged:s,mixed:i,pinned:o,total:e.length}}get $checkboxState(){const{$selectedInfo:{staged:e,mixed:t,total:n}}=this;return e+t===0?"false":n===e?"true":"mixed"}}var fe=Object.defineProperty,we=(e,t,n)=>(((e,t,n)=>{t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class be{constructor(e){this.store=e,we(this,"$patches",[]),we(this,"lastPatchIndex",0),we(this,"header",""),we(this,"$hunks",[]),we(this,"$splitHunkLines",[[],[]]),we(this,"$patchSize",0),we(this,"$validUtf8",!0),we(this,"conflictedFile",null),we(this,"$mergeInProgress",null),we(this,"$commitMessage",""),we(this,"pinnedFiles",new he(this)),we(this,"stagingSt"),we(this,"workingFilesSt"),we(this,"validateAndLoadHunks",(async()=>{const{nav:e,repoPath:t}=this.store;if(!e.$viewingWip)return;const{$selectedPatch:n}=this;null===n&&null!==e.$selectedPatchId&&this.pickNextPatch(),null!==n&&(n.conflicted?await this.loadConflictedFile(t,n):n.isImage||await this.loadHunks(n))})),we(this,"$loadingHunks",!1),(0,i.init$)(this),this.stagingSt=new me(e),this.workingFilesSt=new ge(e);const{nav:t}=e;i.Reaction.value((()=>t.$selectedPatchId),(async()=>{const e=this.$indexOfSelectedPatch;void 0!==e&&e>=0&&(this.lastPatchIndex=e),t.$selectedCommitId===b.z&&(this.setHunks([],0,[[],[]],!0),this.conflictedFile=null,await this.validateAndLoadHunks())}),this)}async loadWip(e=!1){await this.loadPatches(),e||await this.validateAndLoadHunks(),this.store.nav.validateSelectedCommit()}async loadPatches(){const{repoPath:e}=this.store,t=await S.RT.load_wip_patches({repoPath:e});"Ok"in t?this.setPatchesFromQuery(t.Ok):this.setPatchesFromQuery(null)}setPatchesFromQuery(e){if(e){const t=e.patches,n=e.conflict_commit_id;n&&0===t.length&&t.push(U.u),this.$mergeInProgress=n,0===t.length&&this.$haveWIP&&this.store.nav.setSelectedPatchId(null),this.$patches=t}else this.$mergeInProgress=null,this.store.nav.setSelectedPatchId(null),this.$patches=[]}get $emptyMerge(){return null!==this.$mergeInProgress&&this.$patches.some((e=>e.id===U.v))}pickNextPatch(){const e=this.lastPatchIndex,{$visiblePatches:t}=this.workingFilesSt;void 0!==t[e]?this.store.nav.setSelectedPatchId(t[e].id):void 0!==t[e-1]?this.store.nav.setSelectedPatchId(t[e-1].id):void 0!==t[e+1]?this.store.nav.setSelectedPatchId(t[e+1].id):this.selectFirstPatch()}async loadHunks(e){const{repoPath:t,refs:{$repoStatus:n},global:{settings:{$splitCodeViewer:s}}}=this.store;try{if(this.$loadingHunks=!0,s){const s=await S.RT.load_wip_hunks_split({repoPath:t,patch:e,headCommit:n?.localCommitId??null});if("Ok"in s){const{$selectedPatch:t}=this,{hunks:n,left:i,right:o,patch_size:r,valid_utf8:a}=s.Ok;null!==t&&t.id===e.id?this.setHunks(n,r,[i,o],a):this.setHunks([],0,[[],[]],!0)}}else{const s=await S.RT.load_wip_hunks({repoPath:t,patch:e,headCommit:n?.localCommitId??null}),{$selectedPatch:i}=this;if(null!==i&&i.id===e.id)if("Ok"in s){const[e,t,n]=s.Ok;this.setHunks(e,t,[[],[]],n)}else this.setHunks([],0,[[],[]],!0)}}finally{this.$loadingHunks=!1}}async loadConflictedFile(e,t){null!==this.conflictedFile&&this.conflictedFile.isSamePatch(t)?await this.conflictedFile.loadLines():this.conflictedFile=new re(this.store,e,t)}selectFirstPatch(){const{nav:e}=this.store;this.workingFilesSt.$visiblePatches.length>0?e.setSelectedPatchId(this.workingFilesSt.$visiblePatches[0].id):this.$patches.length>0&&e.setSelectedPatchId(this.$patches[0].id)}goToNextPatch(){const{nav:e}=this.store;if(this.$haveConflicts)return;const t=this.$indexOfSelectedPatch;if(null===this.$selectedPatch)return;const{$visiblePatches:n}=this.workingFilesSt;-1===t?this.selectFirstPatch():t<n.length-1&&e.setSelectedPatchId(n[t+1].id)}goToPreviousPatch(){const{nav:e}=this.store;if(this.$haveConflicts)return;const{$selectedPatch:t,$indexOfSelectedPatch:n}=this;if(null===t)return;const{$visiblePatches:s}=this.workingFilesSt;n>0?e.setSelectedPatchId(s[n-1].id):this.selectFirstPatch()}get $selectedPatch(){const{$selectedPatchId:e}=this.store.nav;return null===e?null:this.$patches.find((t=>t.id===e))??null}get $indexOfSelectedPatch(){const{$selectedPatch:e}=this,{$visiblePatches:t}=this.workingFilesSt;return null!==e?t.findIndex((t=>t.id===e.id)):-1}get $numChanges(){return this.$patches.length}setHunks(e,t,n,s){this.$hunks=e,this.$patchSize=t,this.$validUtf8=s,this.$splitHunkLines=n}get $hunkLines(){return function(e){const t=[];if(0===e.length)return t;for(const n of e){t.push(B("HeaderStart",n.index)),t.push(B("HeaderEnd",n.index));for(const e of n.lines)t.push({...e})}return t.push(B("HeaderStart",-1)),t}(this.$hunks)}get $mode(){const{$selectedPatch:e,$validUtf8:t}=this,{repoPath:n}=this.store;return!t||null!==e&&(this.pinnedFiles.has(n,e.newFile)||"A"===e?.patchType||"D"===e?.patchType)?"commits":"wip"}setCommitMessage(e){this.$commitMessage=e}clearCommitMessage(){this.$commitMessage=""}get $haveWIP(){return this.$patches.length>0}get $haveConflicts(){return this.$patches[0]?.conflicted??!1}}var ye=n(3789),$e=Object.defineProperty;class ve{constructor(){var e;((e,t,n)=>{t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="timeout")?e+"":e,null)}setTimeout(e,t){this.clear(),this.timeout=window.setTimeout(e,t)}clear(){null!==this.timeout&&clearTimeout(this.timeout)}}var ke=Object.defineProperty,Ce=(e,t,n)=>(((e,t,n)=>{t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class _e{constructor(){Ce(this,"left",0),Ce(this,"top",0),Ce(this,"width",0),Ce(this,"height",0),Ce(this,"visible",!1)}}class Se{constructor(e){this.store=e,Ce(this,"mapPool",new i.MapPool),Ce(this,"$current",this.mapPool.newMap()),Ce(this,"_prev",this.mapPool.newMap()),Ce(this,"firstTopPix",0),Ce(this,"timer",new ve),Ce(this,"lastRunTime",0),Ce(this,"calcPositions",((e,t,n,s,i,o,r,a,l)=>{const c=function(e,t,n){let s=t?ye.iw:0;return e?n===b.z?s+ye.ch+ye.J9+ye.ch:s+ye.pe+ye.iw:s+ye.pe}(a,l,t);this.firstTopPix=c,this._prev=this.$current,this.$current=this.calcVisiblePositions(e,c,s,t,n,i,o,r),this.lastRunTime=Date.now()})),(0,i.init$)(this)}calcVisiblePositions(e,t,n,s,i,o,r,a){const l=this.mapPool.newMap();let{width:c,height:h}=o;this.store.nav.$selected||(h=145);let u=t;for(const t of e.values()){const{id:e}=t;if(t.filtered)continue;t.numSkipped>0&&(u+=ye.iw);const o=e===s;let m=u,d=ye.iw;o?(i?(m=n,d=h):(m+=ye.ch,d=ye.J9),u+=2*ye.ch,u+=ye.J9):u+=ye.iw;const p=o?ye.J9:ye.iw,g=o&&i||m>n-p&&m<n+h+p&&!i;l.set(e,{left:Pe(o,i,r),top:m,width:xe(o,i,c,a),height:d,visible:g})}return l}get prev(){return Date.now()>d.zj.animationTime.medium+this.lastRunTime?this.$current:this._prev}}function xe(e,t,n,s){return e?t?n:s+2*ye.Kr:s}function Pe(e,t,n){return e?t?0:n-ye.Kr:n}function Ee(e,t,n){return e===b.z?t?0:n-ye.Kr:n}function Re(e,t,n,s){return e===b.z?t?s.width:n+2*ye.Kr:n}var Ie=n(1578);function Te(e,t,n,s,i){let o=s+16;if((i||"Tag"===n.refType)&&(o+=20),e)return o;const r=.5*t-10;return Math.min(o,r)}function Ne(e,t,n,s,i,o,r){let a=i+16;if((o||r)&&(a+=20),e)return a;const l=function(e,t,n){let s=t-24;return e&&(s-=ye.Kr),n>1&&(s-=20),s}(t,Math.min(n,ye.R),s);return Math.min(a,l)}function Me(e,t,n,s){const{commitId:i}=e[s];let o=0,r=s;for(;e[r]?.commitId===i;)r++,o++;const a=s+o;let l=0;for(let n=s;n<a;n++){const s=Le(t,e[n].id);s.stackSize=o,s.orderInStack=l,l++}}function Le(e,t){let n=e.get(t);return void 0===n&&(n={left:0,top:0,width:0,orderInStack:0,stackSize:0,visible:!1},e.set(t,n)),n}var Fe=Object.defineProperty,Oe=(e,t,n)=>(((e,t,n)=>{t in e?Fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class De{constructor(){Oe(this,"$current",new Map),Oe(this,"$prev",new Map),Oe(this,"lastRun",0),Oe(this,"calcPositions",((e,t,n,s,i,o,r,a,l,c,h)=>{0!==t.array.length&&(this.$prev=this.$current,this.$current=s?function(e,t,n,s,i,o,r,a){const l=new Map,c=Ie.U,h=ye.iw+ye.fk;let u=0;for(const{local:m,remote:d}of e.pairs.values()){if(m){const e=c+u*h,d=e-i;l.set(m.id,{left:n,top:e,width:Te(m.id===r?.id,s,m,t.get(m.id)??0,a===m.id),visible:d>0-ye.iw&&d<o,orderInStack:0,stackSize:0})}for(let e=0;e<d.length;e++){const m=d[e],p=c+(u+e)*h,g=p-i,f=Te(m.id===r?.id,s,m,t.get(m.id)??0,a===m.id);l.set(m.id,{left:n+s-f,top:p,width:f,visible:g>0-ye.iw&&g<o,orderInStack:0,stackSize:0})}u+=Math.max(m?1:0,d.length)}return l}(t,n,r,a,i,o.height,l,h):function(e,t,n,s,i,o,r){const a=new Map;let l=null,c="",h=12;const{innerWidth:u}=window;u>1400&&(h=(u-ye.H8)/2-ye.R);for(let u=0;u<t.length;u++){const m=t[u],{commitId:d,id:p}=m,g=i?.commitId===d,f=e.get(d);if(!f)continue;const w=f.top,b=Le(a,p);c!==d&&(Me(t,a,0,u),g&&(l=u)),b.left=h,b.top=w,b.visible=f.visible&&b.stackSize-1===b.orderInStack||g,b.width=Ne(g,o===d,s,b.stackSize,n.get(m.id)??0,r===m.id,"Tag"===m.refType),c=d}if(null!==l){const e=t[l].id,{stackSize:n}=Le(a,e),s=l+n,i=Le(a,t[s-1].id).width;for(let e=l;e<s;e++){const n=Le(a,t[e].id);e<s-1&&(n.top+=n.orderInStack*ye.iw,n.left+=i+10)}}return a}(e,t.array,n,r,l,c,h),this.lastRun=Date.now())})),(0,i.init$)(this)}get prev(){return Date.now()>this.lastRun+d.zj.animationTime.medium?this.$current:this.$prev}}var je=n(7477),ze=Object.defineProperty,We=(e,t,n)=>(((e,t,n)=>{t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Ve{constructor(e){this.store=e,We(this,"commitPositions"),We(this,"refPositions",new De),We(this,"$wipPosition",new _e),We(this,"$scrollTop",0),We(this,"$refViewScrollTop",0),We(this,"$scrollChange",0),We(this,"$maxRefTextWidth",0),We(this,"$timeInfo",new Map),We(this,"updateCommitPositions",(()=>{if(!this.store.nav.$selected)return;const{store:{nav:{$showingRefView:e,$hoveredRefCardId:t,$selectedCommitId:n,$viewingPatch:s},wip:{$haveWIP:i},repo:{$commits:o,commitFilters:{$haveFilter:r}},refs:{$refTextLengths:a,$repoStatus:l,$filteredRefs:c},global:{windowSt:{$commitViewSize:h}}},$scrollTop:u,$commitLeft:m,$commitWidth:d,$refViewScrollTop:p}=this;e||(this.commitPositions.calcPositions(o,n,s,u,h,m,d,i,r),this.setWipPosition(function(e,t,n,s,i,o,r,a){const l=function(e,t,n,s,i){let o=0;if(s&&(o+=ye.iw),e===b.z){if(t)return i;o+=ye.ch}else o+=ye.pe;return o}(e,t,0,r,a),c=function(e,t,n){return e===b.z?t?n.height:ye.J9:ye.iw}(e,t,i);return{left:Ee(e,t,s),top:l,width:Re(e,t,n,i),height:c,visible:e===b.z&&t||a<l+c}}(n,s,d,m,h,0,r,u)));const g=c.map.get(t)??null;this.refPositions.calcPositions(this.commitPositions.$current,c,a,e,p,h,m,d,g,n,l?.headRefId??null)})),We(this,"setScrollTop",(e=>{this.$scrollTop=e})),We(this,"calcTimeInfo",(()=>{const e=new Map;let t="";const{repo:{$commitIds:n,$commits:s},refs:{$filteredRefs:i}}=this.store;for(const i of n){const n=s.get(i);if(void 0!==n){const s=(0,se.MJ)(n.date.ms),o=s===t;e.set(i,{timeString:s,sameAsPrevious:o,fullDate:o?void 0:(0,se.lF)(n.date.ms)}),t=s}}for(const n of i.array){const s=(0,se.MJ)(n.time),i=s===t;e.set(n.id,{timeString:s,sameAsPrevious:i,fullDate:i?void 0:(0,se.lF)(n.time)}),t=s}this.$timeInfo=e})),(0,i.init$)(this),this.commitPositions=new Se(e),je.q.auto(this.updateCommitPositions,this,"updateCommitPositions"),je.q.auto(this.calcTimeInfo,this,"calcTimeInfo"),je.q.value((()=>this.$contentHeight),(e=>{const{$scrollTop:t,store:{global:{windowSt:{$commitViewSize:{height:n}}}}}=this;t>e-n&&(this.$scrollTop=e-n)}),this,"content height change")}setWipPosition(e){this.$wipPosition=e}storeScrollChange(){this.$scrollChange=this.$scrollTop-this.$refViewScrollTop}setRefViewScrollTop(e){this.$refViewScrollTop=e}get $scrollingEnabled(){const{dialogs:e}=this.store.global;return!(e.$contextMenu.length>0||this.store.nav.$viewingPatch)}get $commitWidth(){const e=this.store.global.windowSt.$commitViewSize.width;return Math.min(Math.round(.7*e-160),ye.H8)}get $commitLeft(){return Math.round((this.store.global.windowSt.$commitViewSize.width-this.$commitWidth)/2)}get $refViewHeight(){const{$current:e}=this.refPositions;let t=0;for(const n of e.values())n.top>t&&(t=n.top);return t+ye.iw+ye.fk+100}get $commitListHeight(){const{$commits:e}=this.store.repo;let t=0;for(const n of e.values())n.numSkipped>0&&t++;return(e.size+t)*ye.iw+ye.J9+2*ye.ch+2*ye.Lc}get $contentHeight(){const{nav:e,global:{windowSt:{$commitViewSize:{height:t}}}}=this.store;return e.$showingRefView?Math.max(t,this.$refViewHeight):Math.max(t,this.$commitListHeight)}setMaxRefTextWidth(e){e>this.$maxRefTextWidth&&(this.$maxRefTextWidth=e)}}var Ae=Object.defineProperty,He=(e,t,n)=>(((e,t,n)=>{t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Be{constructor(e){this.store=e,He(this,"$showRefCardInfo",!1),He(this,"timeEnteredRefView",0),He(this,"refViewTimeout",-1),(0,i.init$)(this),i.Reaction.value((()=>e.nav.$showingRefView),(e=>{-1!==this.refViewTimeout&&clearTimeout(this.refViewTimeout),e?this.refViewTimeout=setTimeout((()=>{this.$showRefCardInfo=!0}),370):this.$showRefCardInfo=!1}),this)}refViewAnimating(){return Date.now()-this.timeEnteredRefView<600}}var Ue=n(4203),Ke=n(2210),qe=Object.defineProperty,Ye=(e,t,n)=>(((e,t,n)=>{t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Ge{constructor(e,t,n){this.global=e,this.repoPath=t,Ye(this,"nav"),Ye(this,"loading"),Ye(this,"config"),Ye(this,"repo"),Ye(this,"refs"),Ye(this,"wip"),Ye(this,"layout"),Ye(this,"search"),Ye(this,"name"),this.nav=new b.i(this),this.loading=new Be(this),this.config=new v,this.repo=new H(this),this.refs=new E(this),this.wip=new be(this),this.layout=new Ve(this),this.search=new Ue.U(this),this.name=t===n?(0,Ke.Tv)(t):t.replace(n??"","")}}var Je=n(8848),Xe=n(8604),Ze=n(5737),Qe=n(6093),et=Object.defineProperty;class tt{constructor(){var e;((e,t,n)=>{t in e?et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="$repos")?e+"":e,{}),(0,i.init$)(this)}fileStageState(e,t){const n=this.$repos[e];if(void 0!==n){const e=n[t];return void 0===e?"staged":0===Object.keys(e.lines).length?e.stage:function(e,t){const n=Object.values(e.lines);let s=null;for(const e of n){if(null!==s&&e.stage!==s)return"mixed";s=e.stage}return t===n.length?s??e.stage:s===e.stage?s:"mixed"}(e,e.patchSize)}return"staged"}lineStageState(e,t,n,s,i){const o=this.$repos[e];if(void 0!==o){const e=o[t];if(void 0!==e){e.patchSize=i;const t=e.lines[n];return void 0!==t&&t.text===s?t.stage:e.stage}}return"staged"}hunkStageState(e,t,n){const s=this.$repos[e];if(void 0===s)return"staged";const i=s[t];if(void 0===i)return"staged";const{lines:o}=n;let r=null;for(const e of o){const{status:t,text:n,index:s}=e;if("+"===t||"-"===t){const e=i.lines[s],t=e?.text===n?e.stage:i.stage;if(null!==r&&t!==r)return"mixed";r=t}}return null!==r?r:"staged"}unStageFile(e,t,n){nt(this.$repos,e,{})[t]={lines:{},stage:"unStaged",patchSize:n},this.saveState()}stageFile(e,t,n){nt(this.$repos,e,{})[t]={lines:{},stage:"staged",patchSize:n},this.saveState()}unStageLine(e,t,n,s,i){const o=nt(this.$repos,e,{}),r=nt(o,t,{lines:{},stage:"staged",patchSize:i});r.patchSize=i,r.lines[n]={text:s,stage:"unStaged"},this.saveState()}stageLine(e,t,n,s,i){const o=nt(this.$repos,e,{}),r=nt(o,t,{lines:{},stage:"unStaged",patchSize:i});r.patchSize=i,r.lines[n]={text:s,stage:"staged"},this.saveState()}stageHunk(e,t,n,s){for(const i of n.lines){const{status:n}=i;"+"!==n&&"-"!==n||this.stageLine(e,t,i.index,i.text,s)}}unStageHunk(e,t,n,s){for(const i of n.lines){const{status:n}=i;"+"!==n&&"-"!==n||this.unStageLine(e,t,i.index,i.text,s)}}resetFile(e,t){delete this.$repos[t],this.saveState()}cleanupAfterCommit(e,t){const n={};this.$repos[e]=n;for(const e of t)n[e]={lines:{},stage:"unStaged",patchSize:0};this.saveState()}resetAll(){this.$repos={}}saveState(){this.$repos={...this.$repos}}}function nt(e,t,n){const s=e[t];return void 0===s?(e[t]=n,n):s}var st=n(8153),it=Object.defineProperty,ot=(e,t,n)=>(((e,t,n)=>{t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class rt{constructor(e){this.gs=e,ot(this,"pull",(async()=>{const{$workspaceRepos:e}=this.gs;await Promise.all(Array.from(e.values()).map((e=>e.repo.pull())))})),ot(this,"fetch",(async()=>{const{$workspaceRepos:e}=this.gs;await Promise.all(Array.from(e.values()).map((e=>e.repo.fetch())))})),ot(this,"push",(async()=>{const{$workspaceRepos:e}=this.gs;await Promise.all(Array.from(e.values()).map((e=>(0,st.VC)(e))))}))}}var at=n(7865),lt=n(9010),ct=Object.defineProperty,ht=(e,t,n)=>(((e,t,n)=>{t in e?ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const ut=new class{constructor(){ht(this,"settings",new a),ht(this,"windowSt",new Xe.I(this)),ht(this,"stagedFiles",new tt),ht(this,"consoleSt",new I.h),ht(this,"dialogs",new w(this.consoleSt)),ht(this,"wsActions",new rt(this)),ht(this,"$workspaceDir",null),ht(this,"$workspaceRepos",new Map),ht(this,"$repo",null),ht(this,"lastRepo",null),ht(this,"gitVersion",null),(0,i.init$)(this),i.Reaction.value((()=>this.$repo),(()=>{this.windowSt.setAnimating(Xe.X.workspace,d.zj.animationTime.long),(0,Qe.$z)(this)}),this)}setPageTitle(){let e="GitFiend";const t=this.$repo?.repoPath??this.$workspaceDir;t&&(e=`${e} - ${t}`),document.title=e}async restoreStartupState(e){let{repoPath:t,selectedRepo:n,recentRepos:s}=e;this.settings.setRecentRepos(s),null!==t&&await this.setRepoPath(t,n)}async setRepoPath(e,t){const{settings:n,consoleSt:s}=this;await s.showLoading(`Loading ${e}`,(async()=>{let s;if(s=await S.RT.scan_workspace({repoPath:e,workspacesEnabled:lt._C}),0===s.length)return(0,Je.K$)(`"${e}" doesn't appear to be a Git repository or workspace.`).catch(),void n.removeFromRecentRepos(e);this.closeRepoOrWorkspace(),window.scrollTo(0,0),await S.iJ.watch_repo({repoPaths:s,rootRepo:e,startChanged:!0}),this.loadWorkspace(e,s,t),n.addToRecentRepos(e)}))}closeRepoOrWorkspace(){this.$repo=null,this.$workspaceRepos=new Map,this.$workspaceDir=null}loadWorkspace(e,t,n){const s=new Map;t.sort(((e,t)=>e.localeCompare(t)));for(const n of t)s.set(n,new Ge(this,n,e));this.$workspaceDir=e,this.$workspaceRepos=s,1===s.size?this.$repo=s.values().next().value??null:n&&s.has(n)?this.$repo=s.get(n)??null:this.$repo=null,this.loadRepos().catch(console.error),this.setPageTitle(),(0,Ze.GA)(this),(0,Qe.$z)(this)}async loadRepos(){const{$repo:e,$workspaceRepos:t}=this;if(e){const{repo:t}=e;await t.loadOrReloadRepoData()}else t.size>0&&await this.loadReposIfNeeded()}async loadReposIfNeeded(){let e=Array.from(this.$workspaceRepos.values()),t=[];const n=[];for(const s of e)await s.repo.refresh.hasChanged()?(console.log("queue",s.repoPath),t.push(s)):n.push(s);for(const e of t)await e.repo.refresh.run();t=[],await(0,M.yy)(1e3);for(const e of n)await e.repo.refresh.hasChanged()&&(console.log("queue (2)",e.repoPath),t.push(e));for(const e of t)await e.repo.refresh.run()}selectWorkspaceRepo(e){if(null===e){if(null===this.$repo)return;return this.$repo=null,(0,Ze.GA)(this),void this.loadReposIfNeeded().catch()}const t=this.$workspaceRepos.get(e);void 0!==t&&(this.$repo=t,this.lastRepo=t,(0,at.S)(this).catch(console.log),this.$repo?.repo.loadOrReloadRepoData(),(0,Ze.GA)(this))}get $workspaceShift(){const{$workspaceRepos:e,$repo:t}=this;return null===t?ye.xl:1===e.size?0:25}getPath(){const{$workspaceDir:e,$repo:t}=this;return null!==e?e:null!==t?t.repoPath:null}}},3789:(e,t,n)=>{"use strict";n.d(t,{H8:()=>u,J9:()=>r,Kr:()=>c,Lc:()=>a,R:()=>m,ch:()=>l,fk:()=>h,iw:()=>i,pe:()=>o,xl:()=>s});const s=48,i=30,o=20,r=300,a=40,l=26,c=16,h=4,u=750,m=300},6947:(e,t,n)=>{"use strict";n.d(t,{V0:()=>l,_3:()=>c,sj:()=>m});var s=n(6343),i=n(4330),o=Object.defineProperty,r=(e,t,n)=>(((e,t,n)=>{t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const a=new class{constructor(){r(this,"ctx",null),r(this,"monoCharWidth",0),r(this,"currentFont","");const e=document.createElement("canvas");this.ctx=e.getContext("2d"),this.setFont(s.gx);const t=document.createElement("canvas").getContext("2d");null!==t&&(t.font=s.Lc,this.monoCharWidth=t.measureText("0").width)}measure(e){return null!==this.ctx?this.ctx.measureText(e).width:0}setFont(e){null!==this.ctx&&this.currentFont!==e&&(this.currentFont=e,this.ctx.font=e)}},l=(0,i.M2)(((e,t)=>(a.setFont(t),a.measure(e))),1e3),c=a.monoCharWidth,h=new Map;function u(e){const t=h.get(e);if(void 0!==t)return t;const n=a.measure(e);return h.set(e,n),n}function m(e,t){a.setFont(t);const n=new Map;let s=0;for(const t of e){const e=Math.round(u(t.text));e>s&&(s=e),n.set(t.id,e)}return{lengths:n,max:s}}},5661:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});const s={repoPath:null,recentRepos:[],selectedRepo:void 0},i={fetchOptions:{v:1,type:n(2994).N.all,remoteName:null},themeSetting:"system",lastClonePath:"",lastCloneUrl:"",lastUpdatePromptVersion:null,commitCardFullscreenListWidth:null,startupState:s,testStartupState:s,workspacesEnabled:!1,previewGitFunctions:!1,autoComplete:!1,splitView:!1,newCodeViewer:!1,filters2:{},pullFastForward:!0,pullRebase:!1,autoFetch:!0,pinnedFilePaths:{}}},2994:(e,t,n)=>{"use strict";n.d(t,{N:()=>s});var s=(e=>(e[e.all=0]="all",e[e.single=1]="single",e))(s||{})},2042:(e,t,n)=>{"use strict";n.d(t,{o:()=>r});var s,i=n(5661),o=Object.defineProperty;class r{static async load(){const e=await n(1998).iJ.get_data_store({repoPath:""});"config"in e?this.data=e.config:console.log(e.error)}static async save(){await n(1998).iJ.set_data_store({data:this.data})}static set(e,t){localStorage.setItem(e,JSON.stringify(t))}static get(e){let t;if(t=localStorage.getItem(e),null!==t)try{return JSON.parse(t)}catch{return t}return i.N[e]}static reset(e){localStorage.removeItem(e)}}((e,t,n)=>{t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(r,"symbol"!=typeof(s="data")?s+"":s,{})},9010:(e,t,n)=>{"use strict";n.d(t,{EE:()=>o,YG:()=>r,_C:()=>i});var s=n(2042);const i=s.o.get("workspacesEnabled"),o=s.o.get("previewGitFunctions"),r=s.o.get("autoComplete")},6093:(e,t,n)=>{"use strict";n.d(t,{$z:()=>a,BA:()=>r});var s=n(4330),i=n(2042);let o="startupState";async function r(){return i.o.get(o)}const a=(0,s.pk)((e=>{const{settings:t,$repo:n,$workspaceDir:s}=e,r={repoPath:s??n?.repoPath??null,selectedRepo:n?.repoPath,recentRepos:t.recentRepos};i.o.set(o,r)}),500)},7027:(e,t,n)=>{"use strict";n.d(t,{i:()=>d,z:()=>m});var s=n(4907),i=n(1795),o=Object.defineProperty,r=(e,t,n)=>(((e,t,n)=>{t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class a{constructor(e,t,n,s){this.startY=e,this.endY=t,this.setFunction=n,this.resolve=s,r(this,"startTime",Date.now()),r(this,"endTime",this.startTime+300),r(this,"distance"),this.distance=t-e,this.frame()}frame(){Date.now()>this.endTime?(this.setFunction(this.endY),this.resolve()):requestAnimationFrame((()=>{const e=Date.now(),t=(0,i.s1)((e-this.startTime)/300);this.setFunction(this.startY+t*this.distance),this.frame()}))}}var l=n(8604),c=n(164),h=Object.defineProperty,u=(e,t,n)=>(((e,t,n)=>{t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const m="WIP";class d{constructor(e){this.store=e,u(this,"$hoveredRefCardId",""),u(this,"$selectedCommitId",null),u(this,"$selectedPatchId",null),u(this,"$showingRefView",!1),u(this,"$hoveredCommitId",""),u(this,"$refCardMenuId",""),u(this,"goHome",(()=>{this.setShowingRefView(!1),this.setSelectedCommit(null),this.setSelectedPatchId(null)})),u(this,"goToCommitsView",(()=>{this.$selectedCommitId===m?(this.setSelectedCommit(null),this.setSelectedPatchId(null)):null!==this.$selectedPatchId&&this.setSelectedPatchId(null),this.setShowingRefView(!1)})),u(this,"goToWipView",(()=>{const{wip:e,nav:t}=this.store;t.setShowingRefView(!1),t.setSelectedCommit(m),e.selectFirstPatch()})),u(this,"setShowingRefView",(e=>{e!==this.$showingRefView&&(this.store.global.windowSt.setAnimating(l.X.commits,s.zj.animationTime.medium),e&&(this.setSelectedPatchId(null),this.store.layout.storeScrollChange()),this.store.loading.timeEnteredRefView=Date.now(),this.$showingRefView=e,this.setHoveredRefCard(""),this.setRefCardMenuId(""))})),u(this,"setSelectedCommit",(e=>{e!==this.$selectedCommitId&&(e!==m||this.store.wip.$haveWIP)&&(this.store.global.windowSt.setAnimating(l.X.commits,s.zj.animationTime.medium),this.$selectedCommitId=e,this.setSelectedPatchId(null))})),u(this,"setSelectedPatchId",(e=>{this.$selectedPatchId!==e&&(this.$viewingPatch&&null!==e||this.store.global.windowSt.setAnimating(l.X.commits,s.zj.animationTime.medium),this.$selectedPatchId=e)})),(0,c.init$)(this)}get $selected(){return this.store.global.$repo?.repoPath===this.store.repoPath}get lastSelected(){return this.store.global.lastRepo?.repoPath===this.store.repoPath}validateSelectedCommit(){const{wip:e,repo:t}=this.store,{$selectedCommitId:n}=this;null!==n&&(n===m?e.$haveWIP||this.setSelectedCommit(null):t.$commits.has(n)||this.setSelectedCommit(null))}setHoveredCommit(e){this.$hoveredCommitId=e}setRefCardMenuId(e){this.$refCardMenuId=e}async scrollCommitIntoView(e){const{global:{windowSt:{$commitViewSize:{height:t}}},layout:n,layout:{$scrollTop:s,commitPositions:{$current:i}}}=this.store,o=i.get(e);if(void 0!==o){const{top:e}=o,i=Math.max(0,e-t/3);await(r=s,l=i,c=n.setScrollTop,Math.abs(l-r)<5?Promise.resolve():new Promise((e=>{new a(r,l,c,e)})))}var r,l,c}get $selectedIndex(){return null!==this.$selectedCommitId&&this.$selectedCommitId!==m?this.store.repo.getCommitIndex(this.$selectedCommitId):null}hasSelectedCommit(){return null!==this.$selectedCommitId}get $viewingWip(){return this.$selectedCommitId===m}get $viewingPatch(){return null!==this.$selectedPatchId}goToNextPatch(){if(this.$viewingWip)return void this.store.wip.goToNextPatch();const{$selectedPatchId:e,store:{repo:{$patches:{patches:t}}}}=this;if(t.length>0){let n=t.findIndex((t=>t.id===e));-1!==n&&(n=Math.min(n+1,t.length-1),this.setSelectedPatchId(t[n].id))}}goToPreviousPatch(){if(this.$viewingWip)return void this.store.wip.goToPreviousPatch();const{$selectedPatchId:e,store:{repo:{$patches:{patches:t}}}}=this;if(t.length>0){let n=t.findIndex((t=>t.id===e));-1!==n&&(n=Math.max(n-1,0),this.setSelectedPatchId(t[n].id))}}setHoveredRefCard(e){this.$hoveredRefCardId=e;const{layout:t}=this.store;""===e&&s.zj.animationTime.medium>0&&setTimeout((()=>{t.updateCommitPositions()}),s.zj.animationTime.medium)}}},8153:(e,t,n)=>{"use strict";n.d(t,{VC:()=>r});var s=n(6950),i=n(6081),o=n(1998);async function r(e){await e.global.consoleSt.showLoading("Pushing",(async()=>{switch(function(e){const{refs:t,config:n,repo:s}=e,{$repoStatus:i}=t;if(i)switch(i.state){case"Local":return 1;case"Remote":break;case"Both":if(i.remoteBehind)return 0}return 0===s.$commitIds.length?3:0===n.$remotes.size?2:0}(e)){case 0:await async function(e){const{global:{windowSt:t},repo:n,repoPath:s}=e;t.$pushInProgress.add(s),t.$pushInProgress=new Set(t.$pushInProgress),await o.En.command({repoPath:s,args:["push"]}),await n.loadOrReloadRepoData(),t.$pushInProgress.delete(s),t.$pushInProgress=new Set(t.$pushInProgress)}(e);break;case 1:await async function(e){const{refs:t,repo:n,global:{windowSt:s},config:i,repoPath:r}=e;s.$pushInProgress.add(r),s.$pushInProgress=new Set(s.$pushInProgress);const{$repoStatus:a}=t;if(null===a)return;const{branchName:l}=a,c=i.getPushRemoteForBranch(l);await o.En.command({repoPath:r,args:["push","--set-upstream",c,l]}),await n.loadOrReloadRepoData(),s.$pushInProgress.delete(r),s.$pushInProgress=new Set(s.$pushInProgress)}(e);break;case 2:await(0,s.J5)()}}),{show:i.w.errorOnly})}},8604:(e,t,n)=>{"use strict";n.d(t,{I:()=>c,X:()=>l});var s=n(3789),i=n(4907),o=n(164),r=Object.defineProperty,a=(e,t,n)=>(((e,t,n)=>{t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),l=(e=>(e[e.workspace=0]="workspace",e[e.commits=1]="commits",e))(l||{});class c{constructor(e){this.store=e,a(this,"lastClickPosition",{x:0,y:0}),a(this,"$animating",new Map),a(this,"$windowSize",{width:innerWidth,height:innerHeight}),a(this,"$refreshingRepo",new Set),a(this,"$pullInProgress",new Set),a(this,"$pushInProgress",new Set),a(this,"$fetchInProgress",new Set),a(this,"timeOfLastFetch",+new Date),a(this,"setAnimating",((e,t)=>{const{$animating:n}=this,s=n.get(e);void 0===s&&clearTimeout(s),n.set(e,setTimeout((()=>{n.delete(e),this.$animating=new Map(n)}),t+70)),this.$animating=new Map(n)})),a(this,"updateDimensions",(()=>{const{innerWidth:e,innerHeight:t}=window;0===e&&requestAnimationFrame(this.updateDimensions),i.zj.disableAnimations(),i.zj.restoreAnimationsDebounced(),this.store.dialogs.clearAllContextMenus(),this.$windowSize={width:e,height:t}})),(0,o.init$)(this)}get $animatingCommits(){return this.$animating.has(1)}get $animatingWorkspace(){return this.$animating.has(0)}get $commitViewSize(){const{$windowSize:{width:e,height:t},store:{$workspaceShift:n}}=this;return{width:e,height:t-s.xl-n,windowHeight:t}}centreLastClick(){this.lastClickPosition={x:window.innerWidth/2,y:window.innerHeight/3}}setFetchInProgress(e){this.$fetchInProgress.add(e),this.$fetchInProgress=new Set(this.$fetchInProgress),this.markTimeOfLastFetch()}setFetchDone(e){this.$fetchInProgress.delete(e),this.$fetchInProgress=new Set(this.$fetchInProgress),this.markTimeOfLastFetch()}markTimeOfLastFetch(){this.timeOfLastFetch=+new Date}getTimeOfLastFetch(){return this.timeOfLastFetch}}},8901:(e,t,n)=>{"use strict";n.d(t,{f3:()=>u,VZ:()=>m,pC:()=>h});var s=n(1998);async function i(e,t){const{refs:{$repoStatus:n},global:{stagedFiles:i},repoPath:r}=e;if(null!==n){const e=await s.RT.load_wip_hunk_lines({repoPath:r,patch:t,headCommit:n.localCommitId}),l="Ok"in e?e.Ok:[],c=a(function(e,t,n,s){const i=s.filter((e=>" "!==e.status)).length;return s.filter((({status:s,text:o,index:r})=>{if(" "===s)return!0;const a=e.lineStageState(t,n,r,o,i);return"+"===s?"staged"===a:"unStaged"===a}))}(i,r,t.newFile,l[0]));return{selectedText:c,allText:a(o(l[0]))}}return null}function o(e){return e.filter((({status:e})=>" "===e||"+"===e))}function r(e,t){const n=e.findIndex((e=>e.index===t)),s=e[n];if(void 0!==s){const{status:t}=s;"-"===t?s.status=" ":"+"===t&&e.splice(n,1)}return e}function a(e){return e.map((e=>e.text+e.lineEnding)).join("")}var l=n(1197),c=n(1640);async function h(e,t){const{repoPath:n}=e;if(!await async function(e){const{repoPath:t,wip:n}=e,i=!(await s.En.command({repoPath:t,args:["reset"]})).error;return await n.loadPatches(),i}(e))return!1;const{mixed:o,staged:r}=function(e,t){const{wip:n,repoPath:s}=e,i=[],o=[];for(const e of t.$visiblePatches){const{newFile:t}=e;if(n.pinnedFiles.has(s,t))continue;const r=n.stagingSt.fileStagedState(t);"mixed"===r?i.push(e):"staged"===r&&o.push(e)}return{mixed:i,staged:o}}(e,t);await function(e,t){const n=[];for(const t of e)n.push(t.newFile),"R"===t.patchType&&n.push(t.oldFile);return s.En.git_add_files({repoPath:t,files:n})}(r,n);for(const t of o){const{newFile:o}=t;try{const r=(0,l.uJ)(n,o),a=await i(e,t);if(!a)break;const{allText:h,selectedText:u}=a;await s.iJ.write_file({filePath:r,content:u}),await(0,c.HW)(n,o),await s.iJ.write_file({filePath:r,content:h})}catch(e){return console.log(e),!1}}return!0}async function u(e,t){const{refs:{$repoStatus:n},repoPath:i,wip:c,wip:{$selectedPatch:h}}=e;if(null!==n&&null!==h){const e=await s.RT.load_wip_hunk_lines({repoPath:i,patch:h,headCommit:n.localCommitId});if("Ok"in e){const n=a(o(function(e,t){let n=e;for(const{status:e,index:s}of t.lines)"+"!==e&&"-"!==e||(n=r(n,s));return n}(e.Ok[0],t)));await s.iJ.write_file({filePath:(0,l.uJ)(i,h.newFile),content:n}),await c.loadWip()}}}async function m(e,t){const{refs:{$repoStatus:n},repoPath:i,wip:c,wip:{$selectedPatch:h}}=e;if(null!==n&&null!==h){const e=await s.RT.load_wip_hunk_lines({repoPath:i,patch:h,headCommit:n.localCommitId});if("Ok"in e){const n=a(o(r(e.Ok[0],t)));await s.iJ.write_file({filePath:(0,l.uJ)(i,h.newFile),content:n}),await c.loadWip()}}}},4071:(e,t,n)=>{"use strict";function s(e){return`hsl(${l(e,360)}, 100%, 85%)`}function i(e,t){return`hsla(${l(e,360)}, 100%, 45%, ${t})`}function o(e){return`hsl(${l(e,360)}, 80%, 75%)`}function r(e){return`hsl(${l(e,360)}, 65%, 60%)`}function a(e){return l(e,360)}n.d(t,{Jh:()=>s,LC:()=>c,M0:()=>o,Ny:()=>a,OR:()=>r,p5:()=>i});const l=(e,t)=>{let n=0;for(let t=0;t<e.length;t++)n=e.charCodeAt(t)+((n<<5)-n);return(Math.abs(n)+240)%t};function c(e){let t=parseInt("0x"+e[0]+e[1]),n=+("0x"+e[2]+e[3]),s=+("0x"+e[4]+e[5]);t/=255,n/=255,s/=255;const i=Math.min(t,n,s),o=Math.max(t,n,s),r=o-i;let a;return a=0==r?0:o==t?(n-s)/r%6:o==n?(s-t)/r+2:(t-n)/r+4,a=Math.round(60*a),a<0&&(a+=360),a}},6343:(e,t,n)=>{"use strict";n.d(t,{Lc:()=>a,V:()=>r,XH:()=>l,fZ:()=>s,gx:()=>o,qs:()=>c,rM:()=>i});const s=2e3,i=500,o="13px -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji",r="600 14px -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji",a="13px 'Menlo', 'Ubuntu Mono', 'Consolas', monospace",l={short:150,medium:300,long:400},c={short:0,medium:0,long:0};function h(e){e?(l.short=50,l.medium=100,l.long=150):(l.short=150,l.medium=300,l.long=400)}!function(){const e=window.matchMedia("(prefers-reduced-motion: reduce)");h(e.matches),e.addEventListener("change",(e=>{h(e.matches)}))}()},7521:(e,t,n)=>{"use strict";n.d(t,{O0:()=>c,ce:()=>u,hz:()=>h});var s=n(9412),i=n(5524);let o=Promise.resolve(),r="",a=!1,l=!1;async function c(e,t,n={}){return t.preventDefault(),async function(e,t,n={}){if(t.stopPropagation(),null!==t.currentTarget){const o=t.currentTarget,c=o.getBoundingClientRect();let h,u;if(!0===n.usePoint?(h=t.clientX,u=t.clientY):(h=c.left,u=c.bottom),(l||a)&&r===m(h,u))return;void 0!==n.classNames&&o.classList.add(...n.classNames);const d=(0,s.Nr)(await e,"context");a=!0,r=m(h,u),await i.g.showContextMenu(d,h,u),(0,s.RB)(),void 0!==n.classNames&&o.classList.remove(...n.classNames),a=!1}}(e,t,n)}function h(){return a}function u(){return o}function m(e,t){return`${e}${t}`}document.addEventListener("mousedown",(()=>{l=a}))},4330:(e,t,n)=>{"use strict";function s(e,t){let n;return(...s)=>{clearTimeout(n),n=setTimeout((()=>{e(...s)}),t)}}function i(e,t){const n=new Map;return function(...s){if(n.size>t){const e=n.keys().next().value;n.delete(e)}const i=s.map((e=>"string"==typeof e?e:JSON.stringify(e))).join();if(n.has(i))return n.get(i);const o=e(...s);return n.set(i,o),o}}function o(e,t,n){return e.splice(n,0,e.splice(t,1)[0])}n.d(t,{Iz:()=>o,M2:()=>i,pk:()=>s})},4222:(e,t,n)=>{"use strict";n.d(t,{M3:()=>s,NS:()=>i,_N:()=>o});const s="left",i="right",o="bottom"},1197:(e,t,n)=>{"use strict";n.d(t,{w3:()=>l,tS:()=>m,QC:()=>u,lF:()=>a,MJ:()=>o,uJ:()=>c,yn:()=>h});const s=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"}),i=[{amount:60,name:"seconds"},{amount:60,name:"minutes"},{amount:24,name:"hours"},{amount:7,name:"days"},{amount:4.34524,name:"weeks"},{amount:12,name:"months"},{amount:Number.POSITIVE_INFINITY,name:"years"}];function o(e){return function(e,t){let n=(e-Date.now())/1e3,o="";for(const e of i){if(Math.abs(n)<e.amount){o=s.format(Math.round(n),e.name);break}n/=e.amount}return o}(e)}n(9039);const r=new Intl.DateTimeFormat(navigator.language,{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"});function a(e){return r.format(new Date(e))}var l=(e=>(e[e.left=0]="left",e[e.middle=1]="middle",e[e.right=2]="right",e[e.back=3]="back",e[e.forward=4]="forward",e))(l||{});function c(...e){return e.join("/")}function h(e){return`${c(".",...e)}`}function u(e){const t=e.split(".");return t.length<2?"":`.${t[t.length-1]}`}function m(e,t=0){let n=3735928559^t,s=1103547991^t;for(let t,i=0;i<e.length;i++)t=e.charCodeAt(i),n=Math.imul(n^t,2654435761),s=Math.imul(s^t,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(s^s>>>13,3266489909),s=Math.imul(s^s>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&s)+(n>>>0)}},6607:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});const s=[];for(let e=0;e<256;e++)s[e]=(e<16?"0":"")+e.toString(16);function i(){const e=n(6982).randomBytes(16);return e[6]=15&e[6]|64,e[8]=63&e[8]|128,`${s[e[0]]+s[e[1]]+s[e[2]]+s[e[3]]}-${s[e[4]]}${s[e[5]]}-${s[e[6]]}${s[e[7]]}-${s[e[8]]}${s[e[9]]}-${s[e[10]]}${s[e[11]]}${s[e[12]]}${s[e[13]]}${s[e[14]]}${s[e[15]]}`}},5499:(e,t,n)=>{"use strict";n.d(t,{ZR:()=>h,sY:()=>c});var s=n(4071),i=n(4907),o=n(1197),r=n(164),a=n(9039);function l(e,t){return"light"===t?(0,s.OR)(e.email):(0,s.M0)(e.email)}function c(e,t,n){if(null!==e.stashId)return function(e,t,n){const s={background:l(e,n),width:t,height:.95*t};let i={paddingTop:1};return"light"===n&&(i.filter="invert(1)"),(0,r.createElement)("div",{className:"Avatar-icon",style:s},(0,r.createElement)("img",{style:i,width:.7*t,alt:"",src:(0,o.yn)(["other","StashIcon.svg"])}))}(e,t,n);const s=l(e,n),i="light"===n?"#fff":"#000",c=function(e){const t=e.split(" ");return 2===t.length?(t[0][0]+t[1][0]).toUpperCase():e[0]}(e.author);let h;h=2===c.length?.47*t:.55*t;const u={background:s,width:t,height:t,fontSize:Math.round(h),color:i};return a.Zm&&(u.paddingTop=1),(0,r.createElement)("div",{className:"Avatar",style:u},c)}function h(e,t){const n={width:e,height:e,borderRadius:e,border:`dotted 2px ${(0,i.Vg)("primaryTextColour")}`,...t};return(0,r.createElement)("div",{className:"Avatar",style:n})}},7273:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var s=n(164);class i extends s.Custom{render(){const{children:e=[],sizeType:t="normal",colour:n="light",className:i,type:o="button",fitContent:r=!1,disabled:a,...l}=this.props,c=["FButton",`FButton-${n}`];return"subtle"!==n&&"text"!==n&&c.push(`FButton-size-${t}`),"green"!==n&&"red"!==n&&"orange"!==n||(a?c.push("FButton-light"):c.push("FButton-coloured")),r&&c.push("FButton-fitContent"),void 0!==i&&c.push(i),(0,s.createElement)("button",{className:c.join(" "),type:o,disabled:a,...l},e)}}},6403:(e,t,n)=>{"use strict";n.d(t,{Sc:()=>i,_P:()=>r,mT:()=>o});var s=n(164);class i extends s.Custom{render(){const{checked:e,onClick:t,classes:n=""}=this.props;return(0,s.createElement)("div",{className:`Checkbox ${n}`,onClick:()=>{t&&t(!e)}},e?(0,s.createElement)("div",{className:"Checkbox-tick"}):null)}}class o extends s.Custom{render(){const{checked:e,onClick:t,disabled:n=!1,labelId:i,id:o,style:r={},tabIndex:a=0,title:l}=this.props,c=n?"false":e;return(0,s.createElement)("span",{id:o,tabIndex:a,className:`Checkbox ${e} ${n}`,style:r,role:"checkbox","aria-labelledby":i,"aria-checked":c,onClick:t,onBeforeInput:t,title:l},this.drawCheck(c))}drawCheck(e){switch(e){case"true":return(0,s.createElement)("div",{className:"Checkbox-tick"});case"mixed":return(0,s.createElement)("div",{className:"Checkbox-mixed"});default:return null}}}class r extends s.Custom{render(){const{checked:e,onClick:t,labelText:n,disabled:i=!1}=this.props,o=e&&!i;return(0,s.createElement)("div",{className:`CheckboxWithLabel ${o} CheckboxWithLabel-disabled ${i}`},(0,s.createElement)("span",{tabIndex:0,className:"Checkbox",style:{marginRight:6},role:"checkbox","aria-labelledby":n,"aria-checked":`${o}`,onClick:t,onBeforeInput:t},o?(0,s.createElement)("div",{className:"Checkbox-tick"}):null),(0,s.createElement)("label",{id:n,onClick:t},n))}}},4444:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});var s=n(164),i=Object.defineProperty,o=(e,t,n)=>(((e,t,n)=>{t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class r extends s.Custom{constructor(){super(...arguments),o(this,"onMouseEnter",(()=>{const{vm:e,index:t,side:n}=this.props;this.$lineIsModified&&e.setHoveredLine(t,n??null)})),o(this,"onMouseLeave",(()=>{this.props.vm.setHoveredLine(null,null)}))}render(){const{hunkLine:e,width:t,top:n,first:i,vm:o}=this.props;return(0,s.createElement)("div",{className:`CodeViewer-line ${this.backgroundClass}`,style:{width:t,top:n,borderTop:i?"unset":void 0},onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onContextMenu:o.showContextMenu},e.text,e.lineEnding)}get $lineIsModified(){const{hunkLine:{status:e}}=this.props;return"+"===e||"-"===e}get backgroundClass(){const{status:e}=this.props.hunkLine;if("HeaderStart"===e)return"CodeViewer-line-header-start";if("HeaderEnd"===e)return"CodeViewer-line-header-end";if(this.$hovering){if("+"===e)return"CodeViewer-background-plus-hover";if("-"===e)return"CodeViewer-background-minus-hover"}return"+"===e?"CodeViewer-background-plus":"-"===e?"CodeViewer-background-minus":"Skip"===e?"CodeViewer-background-skip":"CodeViewer-background-unchanged"}get $hovering(){const{vm:{$hoveredLineSide:e,$hoveredLineIndex:t},index:n,side:s}=this.props;return e===s&&t===n}}},6046:(e,t,n)=>{"use strict";n.d(t,{b:()=>l});var s=n(6403),i=n(3212),o=n(4222),r=n(164),a=Object.defineProperty;class l extends r.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="onClickCheckbox")?e+"":e,(async()=>{const{hunk:e,vm:{store:t},hunkStage:n}=this.props;"unStaged"===n||"mixed"===n?t.wip.stagingSt.stageHunk(e):"staged"===n&&t.wip.stagingSt.unStageHunk(e)}))}render(){const{width:e,top:t}=this.props;return(0,r.createElement)("div",{className:"CodeViewer-margin-row CodeViewer-line-header-end",style:{width:e,transform:`translateY(${t}px)`}},this.drawCheckbox())}drawCheckbox(){const{hunkStage:e,side:t}=this.props;if(t===o.NS)return null;if(null!==e){let t="false";switch(e){case"staged":t="true";break;case"unStaged":t="false";break;case"mixed":t="mixed"}return(0,r.createElement)("div",{className:"CodeViewer-margin-row-checkbox",style:{width:i.Sq,marginBottom:2},title:"Click to toggle all lines in this region"},(0,r.createElement)(s.mT,{checked:t,onClick:this.onClickCheckbox}))}return null}}},6755:(e,t,n)=>{"use strict";function s(e,t){const{store:{wip:{$selectedPatch:n,stagingSt:s}}}=t;if(null!==n){const t=s.lineStageState(e.index,e.text);return[{label:"Select line",click:()=>{s.stageLine(e.index,e.text)},visible:"unStaged"===t},{label:"Unselect line",click:()=>{s.unStageLine(e.index,e.text)},visible:"staged"===t},{label:"Discard Line",async click(){await s.discardLine(e.index)}}]}return[]}n.d(t,{C:()=>s})},7999:(e,t,n)=>{"use strict";n.d(t,{b:()=>c});var s=n(6403),i=n(3212),o=n(4222),r=n(164),a=Object.defineProperty,l=(e,t,n)=>(((e,t,n)=>{t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class c extends r.Custom{constructor(){super(...arguments),l(this,"onClickCheckbox",(async()=>{const{$lineStage:e,props:{hunkLine:t,vm:{store:n}}}=this;"unStaged"===e?n.wip.stagingSt.stageLine(t.index,t.text):"staged"===e&&n.wip.stagingSt.unStageLine(t.index,t.text)})),l(this,"onMouseEnter",(()=>{const{vm:e,index:t,hunkLine:{status:n},side:s}=this.props;"+"!==n&&"-"!==n||e.setHoveredLine(t,s??null)})),l(this,"onMouseLeave",(()=>{this.props.vm.setHoveredLine(null,null)}))}render(){const{hunkLine:e,width:t,top:n,first:s,side:i}=this.props;return(0,r.createElement)("div",{className:`CodeViewer-margin-row ${this.backgroundClass}`,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,style:{width:t,transform:`translateY(${n}px)`}},this.drawCheckbox(),i!==o.NS?(0,r.createElement)(h,{hunkLine:e,side:"left",first:s}):null,i!==o.M3?(0,r.createElement)(h,{hunkLine:e,side:"right",first:s}):null)}get $lineStage(){const{vm:{mode:e,store:{wip:{stagingSt:t}}},hunkLine:{index:n,text:s}}=this.props;return"wip"!==e?null:t.lineStageState(n,s)}drawCheckbox(){const{hunkLine:{status:e}}=this.props,{$lineStage:t}=this;return null===t?null:(0,r.createElement)("div",{className:r.c`CodeViewer-margin-row-checkbox ${!0} CodeViewer-background-skip ${"Skip"===e}`,style:{width:i.Sq}},"+"===e||"-"===e?(0,r.createElement)(s.mT,{checked:"staged"===t?"true":"false",onClick:this.onClickCheckbox,title:"Toggle whether to include this line in your commit"}):null)}get backgroundClass(){const{hunkLine:e,first:t}=this.props,{status:n}=e;if(t)return"";if("HeaderStart"===n)return"CodeViewer-line-header-start";if("HeaderEnd"===n)return"CodeViewer-line-header-end";if(this.$hovering){if("+"===n)return"CodeViewer-background-plus-hover";if("-"===n)return"CodeViewer-background-minus-hover"}return"+"===n?"CodeViewer-background-plus":"-"===n?"CodeViewer-background-minus":"CodeViewer-background-unchanged"}get $hovering(){const{vm:e,index:t,side:n}=this.props,{$hoveredLineSide:s,$hoveredLineIndex:i}=e;return n===s&&i===t}}class h extends r.Custom{render(){const{hunkLine:e,side:t,first:n}=this.props,s=n?"CodeViewer-margin-row-first":"";if("left"===t){const{oldNum:t}=e;return(0,r.createElement)("div",{className:`CodeViewer-margin-left ${u(e)} ${s}`},null!==t?(0,r.createElement)(r.Fragment,null,e.status,t.toString()):null)}const{newNum:i}=e;return(0,r.createElement)("div",{className:`CodeViewer-margin-right ${u(e)} ${s}`},null!==i?(0,r.createElement)(r.Fragment,null,e.status,i.toString()):null)}}function u(e){switch(e.status){case"HeaderStart":return"CodeViewer-margin-row-header-start";case"HeaderEnd":return"CodeViewer-margin-row-header-end";case"Skip":return"CodeViewer-margin-row-skip";default:return""}}},3212:(e,t,n)=>{"use strict";n.d(t,{Cv:()=>$,Sq:()=>y,j4:()=>b,K_:()=>w});var s=n(6386),i=n(6755),o=n(7521),r=n(6947),a=n(164),l=Object.defineProperty,c=(e,t,n)=>(((e,t,n)=>{t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class h{constructor(e,t,n){this.store=e,this.hunkLineStore=t,this.cardVm=n,c(this,"$scrollTop",0),c(this,"$scrollLeft",0),c(this,"$hoveredLineIndex",null),c(this,"$hoveredLineSide",null),c(this,"setScroll",(e=>{const t=e.current;null!==t&&(this.$scrollTop=t.scrollTop,this.$scrollLeft=t.scrollLeft)})),c(this,"showContextMenu",(async e=>{if("wip"!==this.mode||null===this.$hoveredLineIndex)return;const t=this.hunkLines[this.$hoveredLineIndex],n=(0,i.C)(t,this);await(0,o.O0)(n,e,{usePoint:!0})})),(0,a.init$)(this)}resetScroll(){this.$scrollLeft=0,this.$scrollTop=0}get hunkLines(){return this.hunkLineStore.$hunkLines}get mode(){return this.hunkLineStore.$mode}get $width(){return this.cardVm.$codeViewerWidth}get $height(){return Math.round(this.cardVm.$bodyHeight)}setHoveredLine(e,t){"wip"===this.mode&&(this.$hoveredLineIndex=e)}get $firstLine(){return Math.floor(this.$scrollTop/w)}get $numLines(){return 1+Math.ceil(this.$height/w)}get $marginWidth(){const{hunkLines:e,mode:t}=this,n=e[e.length-2];if(void 0!==n){const e=Math.max(n.newNum??0,n.oldNum??0).toString().length;return 2*(r._3*e+2*b)+("wip"===t?y:0)}return 0}get $runwayWidth(){return this.$marginWidth+this.$textWidth}get $textWidth(){return Math.max(15+this.$longestLine*r._3,this.$width-this.$marginWidth)}get $runwayHeight(){return Math.max(this.hunkLines.length*w,this.$height)}get $longestLine(){let e=0;for(const t of this.hunkLines){const n=t.text.length;n>e&&(e=n)}return e}}var u=n(4444),m=n(7999),d=n(2910),p=n(6046),g=Object.defineProperty,f=(e,t,n)=>(((e,t,n)=>{t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const w=18,b=10,y=24;class $ extends a.Custom{constructor(){super(...arguments),f(this,"vm",new h(this.props.store,this.props.hunkLineStore,this.props.cardVm)),f(this,"runwayRef",(0,a.createRef)()),f(this,"contentRef",(0,a.createRef)()),f(this,"textRef",(0,a.createRef)()),f(this,"onScroll",(()=>{this.vm.setScroll(this.runwayRef)}))}render(){const{$runwayWidth:e,$runwayHeight:t,$marginWidth:n,$textWidth:i,$width:o,$height:r}=this.vm,l=this.drawContent();return(0,a.createElement)(s.B,{className:"CodeViewer-pane",width:o,height:r,contentWidth:e,contentHeight:t,onNativeScroll:this.onScroll,outerRef:this.runwayRef,contentRef:this.contentRef},(0,a.createElement)("div",{className:"CodeViewer-margin",style:{width:n,height:t}},l.nums),(0,a.createElement)("div",{className:"CodeViewer-text",ref:this.textRef,style:{left:n,width:i,height:t}},l.lines),(0,a.createElement)("div",{className:"CodeViewer-overlay"},l.headers))}drawContent(){const{store:e,hunkLineStore:{$mode:t,$hunks:n},filePath:s}=this.props,{hunkLines:i,$firstLine:o,$numLines:r,$textWidth:l,$marginWidth:c,$width:h}=this.vm,{wip:{stagingSt:g}}=e,f=Math.min(o+r,i.length),b=[],y=[],$=[];for(let r=o;r<f;r++){const o=i[r];if(void 0===o)continue;const f=r.toString();if("HeaderEnd"===o.status){const{hunkIndex:i}=o,l=n[i];if(void 0!==l){const n="wip"===t?g.hunkStagedState(l):null;$.push((0,a.createElement)(d.f,{store:e,hunkLine:o,hunk:l,mode:t,key:f+"headerEnd",top:r*w-w/2+1,width:h,marginWidth:c})),y.push((0,a.createElement)(p.b,{vm:this.vm,index:r,hunk:l,key:f,top:r*w,width:c,filePath:s,hunkStage:n}))}}else y.push((0,a.createElement)(m.b,{vm:this.vm,index:r,hunkLine:o,key:f,top:r*w,width:c,first:0===r,filePath:s}));b.push((0,a.createElement)(u.S,{vm:this.vm,mode:t,index:r,hunkLine:o,key:f,top:r*w,width:l,first:0===r}))}return{nums:y,lines:b,headers:$}}componentDidMount(){a.Reaction.value((()=>this.vm.store.nav.$selectedPatchId),(()=>{this.vm.resetScroll()}),this),a.Reaction.value((()=>this.vm.$scrollLeft),(e=>{this.textEL.style.transform=`translateX(${-e}px)`}),this)}get textEL(){return this.textRef.current}}},2910:(e,t,n)=>{"use strict";n.d(t,{f:()=>c});var s=n(7273),i=n(8848),o=n(8901),r=n(4222),a=n(164),l=Object.defineProperty;class c extends a.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="discardHunk")?e+"":e,(async()=>{const{hunk:e,store:t}=this.props;await(0,i.M5)(`Discard the line range ${h(e).replace(/@@/g,"")}?`)&&await(0,o.f3)(t,e)}))}render(){const{width:e,top:t,marginWidth:n}=this.props;return(0,a.createElement)("div",{className:"CodeLineHeader",style:{width:e-n,left:n,transform:`translateY(${t}px)`}},this.drawHeaderRanges(),this.drawButtons())}drawHeaderRanges(){const{hunk:e,side:t}=this.props;return t===r.NS?null:(0,a.createElement)("div",{className:"CodeLineHeader-ranges"},h(e))}drawButtons(){const{mode:e,side:t}=this.props;return"wip"!==e||t===r.M3?null:this.drawDiscardButton()}drawDiscardButton(){const{store:{wip:e}}=this.props;return null===e.$selectedPatch?null:(0,a.createElement)(s.R,{sizeType:"small",onClick:this.discardHunk,title:"Discard Hunk"},"Discard")}}function h({oldLineRange:e,newLineRange:t}){return`@@ -${e.start},${e.length} +${t.start},${t.length} @@`}},6386:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});var s=n(164),i=Object.defineProperty,o=(e,t,n)=>(((e,t,n)=>{t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class r extends s.Custom{constructor(){super(...arguments),o(this,"runwayRef",(0,s.createRef)()),o(this,"contentPaneRef",(0,s.createRef)()),o(this,"_scrollY",0),o(this,"_transformY",0),o(this,"onScroll",(e=>{e?.stopPropagation();const t=this.runwayRef.current;if(t){this.props.onNativeScroll(t);const e=this.contentPaneRef.current;if(null!==e){const{scrollTop:n}=t;this._scrollY=n,e.style.transform=`translateY(${-Math.max(n,0)}px)`}}}))}render(){const{width:e,height:t,contentWidth:n,contentHeight:i,children:o,className:r="",outerRef:a,onNativeScroll:l,contentRef:c,stickyElements:h,style:u={},...m}=this.props,d={width:n,height:i},p={...u,width:e,height:t};return n>e&&(p.overflowX="auto"),i>t&&(p.overflowY="auto"),(0,s.createElement)("div",{className:`Runway ${r}`,ref:this.runwayRef,style:p,onScroll:this.onScroll,...m},(0,s.createElement)(s.Fragment,null,h),(0,s.createElement)("div",{className:"Runway-scrollPane",style:d},(0,s.createElement)("div",{className:"Runway-stickyPane"},(0,s.createElement)("div",{className:"Runway-contentPane",style:d,ref:this.contentPaneRef},o))))}componentDidUpdate(){this.onScroll()}componentDidMount(){const e=this.runwayRef.current,t=this.contentPaneRef.current;e&&t&&(this.props.outerRef.current=e,this.props.contentRef.current=t)}componentWillUnmount(){this.props.outerRef.current=null,this.props.outerRef={current:null},this.props.contentRef.current=null,this.props.contentRef={current:null}}}},8338:(e,t,n)=>{"use strict";n.d(t,{j:()=>k});var s=n(5185),i=n(4747),o=n(8774),r=n(7273),a=n(5675),l=n(2042),c=n(5524),h=n(9634),u=n(1998),m=n(164),d=Object.defineProperty,p=(e,t,n)=>(((e,t,n)=>{t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class g extends m.Custom{constructor(){super(...arguments),p(this,"pathInputRef",(0,m.createRef)()),p(this,"urlInputRef",(0,m.createRef)()),p(this,"onClickClone",(async()=>{const{cloneSt:e}=this.props;""!==e.$repoPath&&""!==e.$repoUrl&&(l.o.set("lastCloneUrl",e.$repoUrl),await this.props.cloneSt.startClone(e.$repoPath,e.$repoUrl))})),p(this,"onClickBrowse",(async e=>{e.preventDefault();const t=await c.g.show_open_folder_window();null!==t&&(this.props.cloneSt.$repoPath=t),await this.validateRepoPath()}))}componentDidMount(){m.Reaction.value((()=>this.props.cloneSt.$repoPath),(async()=>{await this.validateRepoPath()}),this)}render(){const{resolve:e,cloneSt:t,descriptionId:n}=this.props;return(0,m.createElement)("form",{className:"CloneForm",onSubmit:async e=>{e.preventDefault(),await this.onClickClone()}},(0,m.createElement)(h.A,{messageId:n},"Clone a Repo"),(0,m.createElement)("div",{className:"CloneForm-inputs"},(0,m.createElement)("label",{htmlFor:o.aK},"URL or path"),(0,m.createElement)(a.L,{id:o.aK,value:t.$repoUrl,autoFocus:!0,inRef:this.urlInputRef,onText:e=>{t.$repoUrl=e},required:!0}),(0,m.createElement)("div",null),(0,m.createElement)("label",{htmlFor:o.ws},"Where to clone to"),(0,m.createElement)(a.L,{id:o.ws,inRef:this.pathInputRef,value:t.$repoPath,onText:e=>{t.$repoPath=e},required:!0}),(0,m.createElement)(r.R,{onClick:this.onClickBrowse},"Browse")),(0,m.createElement)(i.D,{rightButtons:[(0,m.createElement)(r.R,{type:"submit",id:"cloneFormCloneButtonId"},"Clone"),(0,m.createElement)(r.R,{onClick:()=>{e(void 0)}},"Cancel")]}))}async validateRepoPath(){const e=this.pathInputRef.current;if(!e)return;const{cloneSt:t}=this.props;await u.RT.path_exists(t.$repoPath)?(e.setCustomValidity(""),l.o.set("lastClonePath",t.$repoPath)):e.setCustomValidity("path doesn't exist")}}var f=n(1197),w=Object.defineProperty,b=(e,t,n)=>(((e,t,n)=>{t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class y{constructor(e,t){this.resolve=e,this.store=t,b(this,"$inProgress",!1),b(this,"$repoPath",l.o.get("lastClonePath")),b(this,"$repoUrl",l.o.get("lastCloneUrl")),(0,m.init$)(this)}async startClone(e,t){const{consoleSt:n}=this.store;await n.showLoading(`Cloning ${e}`,(async()=>{try{this.$inProgress=!0,(await u.En.clone_repo({repoPath:e,url:t})).error||(await this.loadRepo(e,t),this.resolve(!0))}finally{this.$inProgress=!1}}))}async loadRepo(e,t){const n=function(e){let t;t=e.includes("\\")?"\\":"/";const n=e.split(t);return n[n.length-1].replace(".git","")}(t),s=(0,f.uJ)(e,n);await this.store.setRepoPath(s)}}var $=Object.defineProperty;class v extends m.Custom{constructor(){var e,t,n;super(...arguments),e=this,t="cloneSt",n=new y(this.props.resolve,this.props.store),((e,t,n)=>{t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n)}render(){const{resolve:e,descriptionId:t}=this.props;return(0,m.createElement)("div",{className:m.c`CloneDialog ${!0} CloneDialog-inProgress ${this.cloneSt.$inProgress}`},(0,m.createElement)(g,{cloneSt:this.cloneSt,descriptionId:t,resolve:e}))}}async function k(e){return(0,s.$)({dialogId:k.name,dismissible:!1,contentCallback:(t,n,s)=>(0,m.createElement)(v,{resolve:t,store:e,descriptionId:s})})}},4747:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});var s=n(164);class i extends s.Custom{render(){const{leftButtons:e=[(0,s.createElement)("div",null)],rightButtons:t=[(0,s.createElement)("div",null)],style:n}=this.props;return(0,s.createElement)("div",{className:"DialogButtonRow",style:n},(0,s.createElement)("div",{className:"DialogButtonRow-left"},e),(0,s.createElement)("div",{className:"DialogButtonRow-right"},t))}}},9634:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var s=n(164);class i extends s.Custom{render(){return(0,s.createElement)("div",{className:"DialogMessage",id:this.props.messageId},this.props.children)}}},1257:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});let s=0;function i(){return s++,s}},5185:(e,t,n)=>{"use strict";n.d(t,{K:()=>m,$:()=>d});var s=n(9378),i=n(4907),o=n(164),r=Object.defineProperty,a=(e,t,n)=>(((e,t,n)=>{t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class l extends o.Custom{constructor(){super(...arguments),a(this,"focusableEls",[]),a(this,"ref",(0,o.createRef)()),a(this,"onClick",(e=>{e.currentTarget===e.target&&this.props.dismissible&&this.props.resolveDialog(m)})),a(this,"onKeyDown",(e=>{"Tab"===e.key&&(this.storeFocusableElements(),e.preventDefault(),this.focusableEls.length>1&&(e.shiftKey?this.goToPreviousElement():this.goToNextElement()))}))}render(){const{mode:e,titleId:t,descriptionId:n}=this.props;return(0,o.createElement)("div",{className:"CustomDialog",role:"dialog","aria-modal":"modal"===e||"sheet"===e,"aria-labelledby":t,"aria-describedby":n,onMouseDown:this.onClick,onKeyDown:this.onKeyDown},(0,o.createElement)("div",{className:o.c`CustomDialog-pane ${!0} CustomDialog-sheet ${"sheet"===e}`,tabIndex:-1,ref:this.ref},this.props.children))}componentDidMount(){this.storeFocusableElements();const e=this.ref.current;if(null!==e){const{focusElementId:t}=this.props;void 0!==t&&this.focusableEls.find((e=>e.id===t))?.focus();const{windowSt:{lastClickPosition:n}}=s.M,o=.33*window.innerHeight,r=n.x-window.innerWidth/2,a=n.y-o;e.animate([{transform:`translate(${r}px, ${a}px) scale(0.1, 0.3)`,opacity:0},{opacity:.2},{transform:"translate(0, 0) scale(1, 1)",opacity:1}],{duration:i.zj.animationTime.medium,easing:"ease"})}}componentWillUnmount(){}componentDidUpdate(){this.storeFocusableElements()}goToNextElement(){const e=(this.focusedElementIndex()+1)%this.focusableEls.length;this.focusableEls[e].focus()}goToPreviousElement(){let e=this.focusedElementIndex()-1;e<0&&(e=this.focusableEls.length-1),this.focusableEls[e].focus()}focusedElementIndex(){return this.focusableEls.indexOf(document.activeElement)}storeFocusableElements(){const e=this.ref.current;null!==e&&(this.focusableEls=function(e){const t=e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]');return Array.from(t)}(e))}}var c=n(1257),h=n(6815),u=n(6607);const m=void 0;async function d(e){const t=(0,u.b)(),n=(0,u.b)(),{dialogs:i}=s.M,{dialogId:r,dismissible:a,contentCallback:m}=e,d=(0,c.f)(),p=i.reuseExistingDialog(r,d);if(p)return p;const{resolver:g,promise:f}=(0,h.T)(),w=document.activeElement,b=e=>{i.removeDialog(r),null!==w&&document.body.contains(w)&&w.focus?.(),g(e)},y=m(b,t,n),$=function(e,t,n){const s=e.mode??"modal",{titleId:i,descriptionId:r,focusElementId:a,dismissible:c}=e;return(0,o.createElement)(l,{mode:s,titleId:i,descriptionId:r,resolveDialog:n,focusElementId:a,dismissible:c},t)}({...e,titleId:t,descriptionId:n},y,b);return s.M.dialogs.showDialog({dialogOrder:d,dialogComponent:$,resolveDialog:b,dismissible:a,dialogId:r,promise:f}),f}},8848:(e,t,n)=>{"use strict";n.d(t,{K$:()=>m,M5:()=>u,P6:()=>h});var s=n(5185),i=n(9634),o=n(4747),r=n(7273),a=n(6607),l=n(164);class c extends l.Custom{render(){const{message:e,subMessage:t=null,button1Text:n,button2Text:s,button3Text:a,resolve:c,descriptionId:h}=this.props,u=[(0,l.createElement)(r.R,{id:"1",key:"1",onClick:()=>{c(1)}},n)];void 0!==s&&u.push((0,l.createElement)(r.R,{id:"2",key:"2",onClick:()=>c(2)},s));const m=[];return void 0!==a&&m.push((0,l.createElement)(r.R,{id:"3",key:"3",onClick:()=>c(3)},a)),(0,l.createElement)("div",{className:"MessageDialog"},(0,l.createElement)(i.A,{messageId:h},e),null!==t?(0,l.createElement)("div",{className:"DialogSubMessage",id:h},t):null,(0,l.createElement)("span",{style:{height:14}}),(0,l.createElement)(o.D,{leftButtons:m,rightButtons:u}))}}function h(e){return(0,s.$)({dialogId:(0,a.b)(),dismissible:!1,focusElementId:e.autoFocus?.toString(),contentCallback:(t,n,s)=>(0,l.createElement)(c,{...e,resolve:t,descriptionId:s})})}async function u(e){return 1===await h({message:e,button1Text:"OK",button2Text:"Cancel",autoFocus:1})}async function m(e){await h({message:e,button1Text:"OK",autoFocus:1})}},6882:(e,t,n)=>{"use strict";n.d(t,{M7:()=>f,a6:()=>g});var s=n(5185),i=n(4747),o=n(7273),r=n(5524),a=n(1998),l=n(9634),c=n(164),h=n(9039),u=Object.defineProperty,m=(e,t,n)=>(((e,t,n)=>{t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const d="missingGitDialogRetryId";class p extends c.Custom{constructor(){super(...arguments),m(this,"onClickRetry",(async()=>{console.log("try reload"),location.reload()})),m(this,"onClickQuit",(async()=>{await r.g.closeApp()}))}render(){const{titleId:e,descriptionId:t,store:n}=this.props,{gitVersion:s}=n;let r="Couldn't find Git";return null!==s&&s.major<2&&(r=`GitFiend requires version 2 or later of Git (found ${function(e){return`${e.major}.${e.minor}.${e.patch}`}(s)})`),(0,c.createElement)("div",{className:"MissingGitDialog"},(0,c.createElement)(l.A,{messageId:e},r),(0,c.createElement)("div",{className:"DialogSubMessage",id:t},"If you are installing Git, wait for the install to finish, then try again.",h.cX?(0,c.createElement)("p",null,"You may also need to open Xcode and accept the license agreement."):null),(0,c.createElement)("span",{style:{height:12}}),(0,c.createElement)(i.D,{rightButtons:[(0,c.createElement)(o.R,{type:"submit",onClick:this.onClickQuit},"Quit GitFiend"),(0,c.createElement)(o.R,{id:d,onClick:this.onClickRetry},"Retry")]}))}}async function g(e){return e.windowSt.centreLastClick(),(0,s.$)({dialogId:g.name,dismissible:!1,focusElementId:d,contentCallback:(t,n,s)=>(0,c.createElement)(p,{titleId:n,descriptionId:s,store:e})})}async function f(e){e.gitVersion=await a.RT.git_version({repoPath:"."}),(null===e.gitVersion||e.gitVersion.major<2)&&await g(e).catch(console.log)}},7728:(e,t,n)=>{"use strict";n.d(t,{G:()=>b});var s=n(5185),i=n(4747),o=n(9634),r=n(7273),a=n(8774),l=n(5675),c=n(2042),h=n(5524),u=n(1197),m=n(1998),d=n(7477),p=n(164),g=Object.defineProperty,f=(e,t,n)=>(((e,t,n)=>{t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class w extends p.Custom{constructor(){super(...arguments),f(this,"dirInputRef",(0,p.createRef)()),f(this,"$dir",c.o.get("lastClonePath")),f(this,"$name",""),f(this,"onClickCreate",(async()=>{const{store:e}=this.props,{consoleSt:t}=e;await t.showLoading(`Creating ${this.$name}`,(async()=>{const t=(0,u.uJ)(this.$dir,this.$name);(await m.En.create_repo({repoPath:t})).error||(await e.setRepoPath(t),this.props.resolve(!0))}))})),f(this,"onClickBrowse",(async e=>{e.preventDefault();const t=await h.g.show_open_folder_window();null!==t&&(this.$dir=t)})),f(this,"setDir",(e=>{this.$dir=e})),f(this,"setName",(e=>{this.$name=e}))}componentDidMount(){d.q.value((()=>this.$dir),(async()=>{await this.validateRepoPath()}),this)}render(){const{resolve:e,descriptionId:t}=this.props;return(0,p.createElement)("form",{className:"NewRepoDialog",onSubmit:async e=>{e.preventDefault(),await this.onClickCreate()}},(0,p.createElement)(o.A,{messageId:t},"Create a New Git Repo"),(0,p.createElement)("div",{className:"NewRepoDialog-inputs"},(0,p.createElement)("label",null,"Name"),(0,p.createElement)(l.L,{id:a.Bg,value:this.$name,onText:this.setName,required:!0}),(0,p.createElement)("div",null),(0,p.createElement)("label",null,"Location"),(0,p.createElement)(l.L,{id:a.bs,inRef:this.dirInputRef,value:this.$dir,onText:this.setDir,required:!0}),(0,p.createElement)(r.R,{onClick:this.onClickBrowse},"Browse")),(0,p.createElement)(i.D,{rightButtons:[(0,p.createElement)(r.R,{type:"submit"},"Create Repo"),(0,p.createElement)(r.R,{onClick:()=>{e(void 0)}},"Cancel")]}))}async validateRepoPath(){const e=this.dirInputRef.current;e&&(await m.RT.path_exists(this.$dir)?(e.setCustomValidity(""),c.o.set("lastClonePath",this.$dir)):e.setCustomValidity("path doesn't exist"))}}function b(e){return e.windowSt.centreLastClick(),(0,s.$)({dialogId:b.name,dismissible:!1,focusElementId:a.Bg,contentCallback:(t,n,s)=>(0,p.createElement)(w,{resolve:t,descriptionId:s,store:e})})}},9171:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var s=n(164);function i(e,t){if(0===t.length)return[e];const n=e.toLocaleLowerCase(),i=t.toLocaleLowerCase(),o=i.length,r=[];let a=n.indexOf(i),l=0;for(;a>=0;)r.push(e.substring(l,a),(0,s.createElement)("span",{className:"highlight"},e.substring(a,a+o))),l=a+o,a=n.indexOf(i,l);return r.push(e.substring(l,e.length)),r}},7406:(e,t,n)=>{"use strict";n.d(t,{D:()=>s});const s=(0,n(164).createElement)("span",{className:"icon-down",style:{fontSize:10}})},5675:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});var s=n(164),i=Object.defineProperty,o=(e,t,n)=>(((e,t,n)=>{t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class r extends s.Custom{constructor(){super(...arguments),o(this,"ref",(0,s.createRef)()),o(this,"onClickClear",(()=>{this.props.onText(""),this.ref.current?.focus()})),o(this,"onText",(e=>{const{onText:t}=this.props;void 0!==t&&t(e.target.value,e)}))}render(){const{children:e,className:t="",errorMessage:n,onText:i,clearButton:o=!1,inRef:r,value:a="",...l}=this.props;void 0!==r&&(this.ref=r);const c=(0,s.createElement)("input",{ref:this.ref,className:s.c`FInput `+t,onChange:this.onText,onInput:this.onText,value:a,...l});return o?(0,s.createElement)(s.Fragment,null,c,this.drawClearButton()):c}drawClearButton(){const{value:e=""}=this.props;return(0,s.createElement)("button",{className:"FInput-clearButton",style:{display:0===e.toString().length?"none":"flex"},onClick:this.onClickClear},"✕")}componentDidMount(){if(!0===this.props.autoFocus){const e=this.ref.current;null!==e&&setTimeout((()=>{e.focus()}),1)}}componentDidUpdate(){const{errorMessage:e}=this.props;this.ref.current?.setCustomValidity(e??""),this.ref.current?.reportValidity()}componentWillUnmount(){this.ref={current:null}}}},7627:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});var s=n(164);class i extends s.Custom{render(){const{patchType:e,style:t,...n}=this.props;let i;switch(e){case"T":case"M":i="var(--modifiedColour)";break;case"?":case"A":i="var(--addedColour)";break;case"R":case"C":i="var(--renamedColour)";break;default:i="var(--deletedColour)"}let o=e;return"?"===e&&(o="A"),(0,s.createElement)("div",{className:"PatchTypeIcon",style:{color:i,...t},...n},o)}}},7005:(e,t,n)=>{"use strict";n.d(t,{l:()=>l});var s=n(7273),i=n(7521),o=n(7406),r=n(164),a=Object.defineProperty;class l extends r.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="onClick")?e+"":e,(async e=>{await(0,i.O0)(this.props.options,e)}))}render(){const{options:e,theme:t,...n}=this.props;if(0===e.length)return null;const i=e.find((e=>e.checked))?.label??e[0].label;return(0,r.createElement)(s.R,{className:"Select",...n,onClick:this.onClick},i,o.D)}}},3331:(e,t,n)=>{"use strict";n.d(t,{H:()=>r,y:()=>o});var s=n(164);const i="data:image/svg+xml;base64, PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCAzMzIgMzMyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zOnNlcmlmPSJodHRwOi8vd3d3LnNlcmlmLmNvbS8iIHN0eWxlPSJmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MjsiPjxwYXRoIGQ9Ik0zMzAuOTExLDE1Ny4zNWMwLjczOCwxNC45MTYgLTAuNTQ3LDMwLjE3OCAtNC4wNzEsNDUuNDQxYy0xNy40MjEsNzUuNDYyIC04NC4wMDEsMTI2Ljg5OCAtMTU4LjEwNCwxMjguMjkybC0wLjg0NywtNDQuNjI2YzU0LjEyMSwtMS4wMjMgMTAyLjc0NSwtMzguNTkxIDExNS40NjksLTkzLjcwNGMyLjU3LC0xMS4xMyAzLjUxLC0yMi4yNTggMi45NzYsLTMzLjEzNWw0NC41NzcsLTIuMjY4Wm0tMzEwLjQ0OSwtNzEuNTI4bDM5LjA3MiwyMS41OGMtNS4yMTQsOS41MDcgLTkuMjIyLDE5Ljg3OCAtMTEuNzgsMzAuOTU3Yy0xMi43MjQsNTUuMTE0IDE0LjUxMSwxMTAuMTk1IDYyLjcwNSwxMzQuODM5bC0yMC4zMjQsMzkuNzM4Yy02NS45OTEsLTMzLjczNyAtMTAzLjI4NSwtMTA5LjE1NCAtODUuODYzLC0xODQuNjE1YzMuNTEyLC0xNS4yMTQgOS4wMjMsLTI5LjQ1MSAxNi4xOSwtNDIuNDk5Wm01NC44NzIsLTU5LjAwNGMzNi4zNjMsLTIzLjY0IDgxLjkwMiwtMzMuMDYzIDEyNy40NTcsLTIyLjU0NmM0NS40NTMsMTAuNDkzIDgyLjE5LDM4LjgyMiAxMDQuNTI0LDc1Ljg4NmwtMzguMjEsMjMuMDM4Yy0xNi4zMTIsLTI3LjA3OSAtNDMuMTQ4LC00Ny43NzYgLTc2LjM1MiwtNTUuNDQyYy0zMy4zMDcsLTcuNjkgLTY2LjYwMywtMC43ODUgLTkzLjE3NiwxNi41MmwtMjQuMjQzLC0zNy40NTZaIiBzdHlsZT0iZmlsbDojZmZmOyIvPjwvc3ZnPg==";class o extends s.Custom{render(){const{size:e,invertColour:t,delay:n=!1,style:o="",container:r=!1}=this.props;return r?(0,s.createElement)("div",{className:"Spinner-container"},(0,s.createElement)("img",{className:s.c`Spinner ${!0} Spinner-delay ${n}`,style:{...o,filter:t?"invert(1)":void 0},width:e,height:e,src:i,alt:""})):(0,s.createElement)("img",{className:s.c`Spinner ${!0} Spinner-delay ${n}`,style:{...o,filter:t?"invert(1)":void 0},width:e,height:e,src:i,alt:""})}}class r extends s.Custom{render(){const{fontSize:e,invertColour:t,style:n}=this.props;return(0,s.createElement)("div",{className:"Dotter",style:{fontSize:e,filter:t?"invert(1)":void 0,...n}},(0,s.createElement)("span",{className:"Dotter-dot1"}),(0,s.createElement)("span",{className:"Dotter-dot2"}),(0,s.createElement)("span",{className:"Dotter-dot3"}))}}},3992:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});var s=n(164);class i extends s.Custom{render(){let{style:e}=this.props;return(0,s.createElement)("span",{className:"icon-trash",style:{display:"flex",...e}})}}},4907:(e,t,n)=>{"use strict";n.d(t,{zj:()=>b,Vg:()=>f,cR:()=>y});var s=n(4330),i=n(4071),o=n(6343),r=n(5524),a=n(2042);const l="#f8f8f8",c="#1f1f1f";var h=n(164),u=n(9039),m=Object.defineProperty,d=(e,t,n)=>(((e,t,n)=>{t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const p="(prefers-color-scheme: dark)",g="hsl(36, 100%, 44%)";function f(e){return`var(--${e})`}function w(e,t){document.documentElement.style.setProperty(e,t)}const b=new class{constructor(){d(this,"$theme"),d(this,"animationTime",o.XH),d(this,"restoreAnimationsDebounced",(0,s.pk)((()=>{this.enableAnimations()}),400));const e=a.o.get("themeSetting"),t="system"===e?$():e;this.$theme={name:t,setting:e,accentColour:g,backgroundColour:"light"===t?l:c},(0,h.init$)(this),r.g.setTheme(e).catch(),window.matchMedia(p).addEventListener("change",(e=>{const t=e.matches?"dark":"light";this.updateThemeObservable({...this.$theme,name:t,backgroundColour:"light"===t?l:c}),this.applyTheme()})),this.applyTheme(),this.askMainForAccentColour().catch()}async askMainForAccentColour(){await r.g.sendThemeVarsToRenderer()}applyTheme(){const{$theme:{accentColour:e,name:t,setting:n}}=this;if(document.documentElement.className="",u.cX&&document.documentElement.classList.add("mac"),document.documentElement.classList.add(t),u.MZ)w("--accentHue","36"),w("--accentColour",g);else{const t=(0,i.LC)(e);isNaN(t)||w("--accentHue",t.toString()),u.Zm?w("--accentColour",`hsl(${t}, 100%, 44%)`):8===e.length&&w("--accentColour","#"+e)}a.o.set("themeSetting",n),r.g.setTheme(n).catch(console.log)}async changeTheme(e){const t="system"===e?$():e;this.updateThemeObservable({...this.$theme,name:t,setting:e,backgroundColour:"light"===t?l:c}),this.applyTheme()}setAccentColour(e){this.updateThemeObservable({...this.$theme,accentColour:e??g}),this.applyTheme()}disableAnimations(){this.animationTime!==o.qs&&(this.animationTime=o.qs,document.body.style.setProperty("--animationDuration","0s"))}enableAnimations(){this.animationTime=o.XH,document.body.style.setProperty("--animationDuration",`${this.animationTime.medium}ms`)}updateThemeObservable(e){const{$theme:t}=this;var n,s;n=t,s=e,Object.keys(n).some((e=>n[e]!==s[e]))&&(this.$theme=e)}};function y(e,t,n){b.setAccentColour(n)}function $(){return window.matchMedia(p).matches?"dark":"light"}},6950:(e,t,n)=>{"use strict";n.d(t,{is:()=>D,cX:()=>N,Vk:()=>O,J5:()=>F});var s=n(5185),i=n(9634),o=n(7273),r=n(4747),a=n(5675),l=n(3992),c=n(3331),h=n(8848),u=n(4907),m=n(2042),d=n(1998),p=n(164),g=Object.defineProperty,f=(e,t,n)=>(((e,t,n)=>{t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class w extends p.Custom{constructor(){super(...arguments),f(this,"onClickEdit",(()=>{const{vm:e,name:t,url:n}=this.props;e.$editing=t,e.$newUrl=n,e.$newName=t})),f(this,"onClickApply",(async()=>{const{vm:e,name:t,url:n}=this.props,{repo:s,repoPath:i}=e.store;await e.checkNewUrl((async()=>{if(e.$newName!==t){if((await d.En.command({repoPath:i,args:["remote","rename",t,e.$newName]})).error)return;const n=m.o.get("fetchOptions");n.remoteName===t&&(m.o.set("fetchOptions",{...n,remoteName:e.$newName}),await s.loadOrReloadRepoData())}e.$newUrl!==n&&(await d.En.command({repoPath:i,args:["remote","set-url",e.$newName,e.$newUrl]})).error||(await s.fetch(!0),e.done())}))})),f(this,"onClickCancel",(()=>{this.props.vm.done()})),f(this,"onClickRemove",(async()=>{const{vm:e,name:t}=this.props,{repo:n,repoPath:s}=e.store;await(0,h.M5)(`Are you sure you want to remove ${t}?`)&&((await d.En.command({repoPath:s,args:["remote","remove",t]})).error||(await n.loadOrReloadRepoData(),e.done()))}))}render(){const{name:e,url:t,vm:n}=this.props,s=n.$editing;if(s===e)return(0,p.createElement)(p.Fragment,null,D,(0,p.createElement)(a.L,{id:N.nameInput,autoFocus:!0,value:n.$newName,onText:n.onRemoteNameTextChange}),(0,p.createElement)(a.L,{id:N.urlInput,value:n.$newUrl,onText:n.onUrlInputTextChange}),(0,p.createElement)(o.R,{onClick:this.onClickApply,disabled:e===n.$newName&&t===n.$newUrl},n.$checkingUrl?(0,p.createElement)(c.y,{size:13,invertColour:"light"===u.zj.$theme.name}):"Apply"),(0,p.createElement)(o.R,{onClick:this.onClickCancel},"Cancel"));const i=null!==s&&s!==e;return(0,p.createElement)(p.Fragment,null,D,(0,p.createElement)("div",null,e),(0,p.createElement)("div",null,t),(0,p.createElement)(o.R,{style:{marginLeft:"auto"},disabled:n.$creating||i,title:`Remove ${e}`,onClick:this.onClickRemove,fitContent:!0},(0,p.createElement)(l.u,{style:{fontSize:13}})),(0,p.createElement)(o.R,{onClick:this.onClickEdit,disabled:n.$creating||i},"Edit"))}}var b=Object.defineProperty,y=(e,t,n)=>(((e,t,n)=>{t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class ${constructor(e){this.store=e,y(this,"$editing",null),y(this,"$creating",!1),y(this,"$newName"),y(this,"$newUrl",""),y(this,"$checkingUrl",!1),y(this,"$newUrlErrorMessage",""),y(this,"onRemoteNameTextChange",(e=>{this.$newName=e})),y(this,"onUrlInputTextChange",(e=>{this.$newUrl=e,this.$newUrlErrorMessage=""})),y(this,"checkNewUrl",(async e=>{if(this.$newUrlErrorMessage="",this.validateUrlOrPath())try{this.$checkingUrl=!0,await e()}finally{this.$checkingUrl=!1}})),this.$newName=0===e.config.$remotes.size?"origin":"",(0,p.init$)(this)}get $disableOtherControls(){return null!==this.$editing||this.$creating}validateUrlOrPath(){return this.$newUrlErrorMessage="",!0}done(){this.$editing=null,this.$newName="",this.$newUrl="",this.$creating=!1}}var v=Object.defineProperty,k=(e,t,n)=>(((e,t,n)=>{t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class C extends p.Custom{constructor(){super(...arguments),k(this,"onClickAdd",(()=>{this.props.vm.$creating=!0})),k(this,"onClickApply",(async()=>{const{vm:e}=this.props,{repo:t,repoPath:n}=e.store;await e.checkNewUrl((async()=>{(await d.En.command({repoPath:n,args:["remote","add",e.$newName,e.$newUrl]})).error||(await t.fetch(!0),e.done())}))})),k(this,"onClickCancel",(()=>{this.props.vm.done()}))}render(){const{vm:e}=this.props;return e.$creating?(0,p.createElement)(p.Fragment,null,D,(0,p.createElement)(a.L,{id:N.nameInput,autoFocus:!0,value:e.$newName,required:!0,onText:e.onRemoteNameTextChange}),(0,p.createElement)(a.L,{id:N.urlInput,value:e.$newUrl,onText:e.onUrlInputTextChange,errorMessage:e.$newUrlErrorMessage}),(0,p.createElement)(o.R,{id:N.applyButton,onClick:this.onClickApply,disabled:0===e.$newName.length||0===e.$newUrl.length},e.$checkingUrl?(0,p.createElement)(c.y,{size:13,invertColour:"light"===u.zj.$theme.name}):"Add"),(0,p.createElement)(o.R,{id:N.applyButton,onClick:this.onClickCancel},"Cancel")):(0,p.createElement)(p.Fragment,null,D,(0,p.createElement)(o.R,{id:N.addRemote,onClick:this.onClickAdd,style:{gridColumn:"span 4",marginRight:"auto",marginLeft:0},disabled:null!==e.$editing},"Add Remote"))}}var _=n(7005),S=n(2994),x=n(5661),P=Object.defineProperty;class E{constructor(e){this.store=e,(0,p.init$)(this)}get $selectedPushRemote(){const{config:e,refs:t}=this.store;return null!==e.$pushDefault&&e.$remotes.has(e.$pushDefault)?e.$pushDefault:t.$repoStatus?e.getPushRemoteForBranch(t.$repoStatus.branchName):e.$remotes.has("origin")?"origin":null}get $pushOptions(){const{config:e,repo:t,repoPath:n}=this.store,s=this.$selectedPushRemote;return Array.from(e.$remotes,(([e])=>({label:e,click:async()=>{await d.En.command({repoPath:n,args:["config","remote.pushdefault",e]}),await t.loadOrReloadRepoData()},type:"radio",checked:s===e})))}get $selectedFetchOption(){return this.getSelectedFetchOptionId(m.o.get("fetchOptions"))}getSelectedFetchOptionId(e){const{config:t}=this.store;return 1===t.$remotes.size?Array.from(t.$remotes)[0][0]:e.type===S.N.all?"All":e.remoteName}fetchOptions(){const{config:e}=this.store,t=Array.from(e.$remotes,(([t])=>({label:t,click:()=>{e.setFetchOptions({v:1,type:S.N.single,remoteName:t})},type:"radio",checked:this.$selectedFetchOption===t})));return t.length>1&&t.unshift({label:"All",click:()=>{e.setFetchOptions(x.N.fetchOptions)},type:"radio",checked:"All"===this.$selectedFetchOption}),t}}class R extends p.Custom{constructor(){var e,t,n;super(...arguments),e=this,t="vm",n=new E(this.props.store),((e,t,n)=>{t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n)}render(){const{store:e,disabled:t}=this.props,{config:n}=e;return n.$remotes.size<=1?null:(0,p.createElement)("div",{className:"SelectRemote"},(0,p.createElement)("div",{className:"SelectRemote-label"},"Fetch From:"),(0,p.createElement)(_.l,{options:this.vm.fetchOptions(),theme:u.zj.$theme.name,disabled:t}),(0,p.createElement)("div",{className:"SelectRemote-label SelectRemote-label-push"},"Push To:"),(0,p.createElement)(_.l,{options:this.vm.$pushOptions,theme:u.zj.$theme.name,disabled:t}))}}var I=n(9378),T=Object.defineProperty;const N={okButton:"ConfigureRemotesOkButton",addRemote:"ConfigureRemotesAddButton",nameInput:"ConfigureRemotesNameInput",urlInput:"ConfigureRemotesUrlInput",applyButton:"ConfigureRemotesApplyButton"},{okButton:M}=N;class L extends p.Custom{constructor(){var e,t,n;super(...arguments),e=this,t="vm",n=new $(this.props.store),((e,t,n)=>{t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n)}render(){const{descriptionId:e,resolve:t,store:n}=this.props;return(0,p.createElement)("div",{className:"ConfigureRemotes"},(0,p.createElement)(i.A,{messageId:e},"Configure Remotes"),(0,p.createElement)(R,{store:n,disabled:this.vm.$disableOtherControls}),(0,p.createElement)("div",{className:"ConfigureRemotes-grid"},(0,p.createElement)("div",{className:"ConfigureRemotes-remotes-header"},"Name"),(0,p.createElement)("div",{className:"ConfigureRemotes-remotes-header"},"Url or Path"),(0,p.createElement)("div",null),(0,p.createElement)("div",null),(0,p.createElement)(p.Fragment,null,this.drawRemotes()),(0,p.createElement)(C,{vm:this.vm})),(0,p.createElement)(r.D,{style:{marginTop:12},rightButtons:[(0,p.createElement)(o.R,{id:M,onClick:()=>{t(!0)},disabled:this.vm.$creating||null!==this.vm.$editing},"OK")]}))}drawRemotes(){const{config:e}=this.props.store,t=Array.from(e.$remotes);return t.sort((([e],[t])=>e.toLocaleLowerCase().localeCompare(t.toLocaleLowerCase()))),t.map((([e,t],n)=>(0,p.createElement)(w,{key:e+n,name:e,url:t,vm:this.vm})))}}async function F(){const{$repo:e}=I.M;if(null!==e)return I.M.windowSt.centreLastClick(),(0,s.$)({dialogId:F.name,dismissible:!1,focusElementId:M,contentCallback:(t,n,s)=>(0,p.createElement)(L,{store:e,descriptionId:s,resolve:t})})}function O(e){return{label:"Configure Remotes",async click(){await F()},enabled:null!==e.$repo}}const D=(0,p.createElement)("div",{className:"ConfigureRemotes-gridRow"})},7495:(e,t,n)=>{"use strict";n.d(t,{i:()=>R});var s=n(5185),i=n(5675),o=n(4203),r=n(5499),a=n(1197),l=n(829),c=n(9171),h=n(7627),u=n(164),m=Object.defineProperty;class d extends u.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="onClick")?e+"":e,(()=>{const{patchId:e,onClickPatch:t}=this.props;t(e)}))}render(){const{lines:e,searchText:t}=this.props;return(0,u.createElement)("div",{className:u.c`CommitResultDiff ${!0} CommitResultDiff-truncated ${e.length>6}`,onClick:this.onClick},e.slice(0,6).map((({oldNum:e,newNum:n,status:s,text:i})=>{const o=u.c`CommitResultDiff-colour-minus ${"-"===s} CommitResultDiff-colour-plus ${"+"===s}`;return(0,u.createElement)(u.Fragment,null,(0,u.createElement)("div",{className:`CommitResultDiff-row-margin ${o}`,key:`${n}${e}m`},s,"-"===s?e:n),(0,u.createElement)("div",{className:`CommitResultDiff-row-line ${o}`,key:`${n}${e}l`},(0,c.Z)(i,t)))})).flat())}}var p=n(7273);function g(e,t,n,s,i,o,r){return(0,u.createElement)(u.Fragment,null,(0,u.createElement)(p.R,{className:"PatchResult-file",colour:"text",key:n+2,id:n,onClick:o},(0,u.createElement)("span",null,(0,c.Z)(e,t)),(0,u.createElement)(h.q,{patchType:s})),i.length>0?(0,u.createElement)(d,{lines:i,searchText:t,patchId:n,onClickPatch:r}):null)}var f=n(4071),w=Object.defineProperty;class b extends u.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="onClick")?e+"":e,(()=>{const{store:e,refInfo:{id:t,shortName:n},resolve:s}=this.props;e.repo.repo.commitFilters.setBranchFilter({id:t,short_name:n}),s(!0)}))}render(){const{refInfo:e,searchText:t}=this.props;return(0,u.createElement)("button",{className:"RefResult InlineButton",style:{backgroundColor:(0,f.Jh)(e.shortName)},onClick:this.onClick},(0,c.Z)(e.fullName,t))}}var y=Object.defineProperty,$=(e,t,n)=>(((e,t,n)=>{t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class v extends u.Custom{constructor(){super(...arguments),$(this,"onClickFile",(async({currentTarget:e})=>{e instanceof HTMLElement&&await this.goToFileInCommit(e.id)})),$(this,"onClickCode",(async e=>{await this.goToFileInCommit(e)})),$(this,"onClickUsername",(()=>{const{store:{repo:{repo:e,repo:{$commits:t},nav:n,layout:s}},result:{commitId:i},resolve:o}=this.props;o(!0);const r=t.get(i);if(void 0===r)return void console.log(`Commit id ${i} not found in $allCommits`);const{author:a,email:l}=r;n.goHome(),e.commitFilters.setUsernameFilter({author:a,email:l}),s.setScrollTop(0)})),$(this,"onClickId",(async()=>{const{store:e,result:{commitId:t},resolve:n}=this.props,{repo:{nav:s}}=e;n(!0),s.goHome(),s.setSelectedCommit(t),await s.scrollCommitIntoView(t)}))}render(){const{refMap:e,result:{matches:t,patches:n,diffs:s,refIds:i},commit:o,searchText:h,themeName:m}=this.props;return(0,u.createElement)("div",{className:"CommitResult SearchResult"},this.drawBranches(e,i,o,t,h),(0,u.createElement)("div",{className:"CommitResult-header"},(0,r.sY)(o,20,m),(0,a.lF)(o.date.ms)," by"," ",(0,u.createElement)("button",{className:"InlineButton",onClick:this.onClickUsername},t.includes("Author")?(0,c.Z)(o.author,h):o.author),(0,u.createElement)("button",{className:"InlineButton CommitResult-header-hash",onClick:this.onClickId},t.includes("CommitId")?(0,c.Z)(o.id,h):(0,l.vX)(o))),this.drawCommitMessage(o,t,h),this.drawFoundFiles(o,h,n,s))}drawBranches(e,t,n,s,i){const o=[];return t.forEach((t=>{const s=n.refs.find((e=>e===t)),r=s?e.get(s):void 0;r&&o.push((0,u.createElement)(b,{refInfo:r,searchText:i,key:t,store:this.props.store,resolve:this.props.resolve}))})),(0,u.createElement)("div",{className:"CommitResult-branches"},o)}drawFoundFiles(e,t,n,s){const i=[];if(n.length>0)for(const e of n)i.push(this.drawPatch(e,s,t));return i.length>0?(0,u.createElement)("div",{className:"CommitResult-files"},i):null}drawPatch(e,t,n){const{patchType:s,id:i,newFile:r,oldFile:a}=e,l=t.find((t=>t.patch.id===e.id))?.lines??[];switch(s){case"A":case"C":case"M":if((0,o._)(r,n))return g(r,n,i,s,l,this.onClickFile,this.onClickCode);break;case"D":if((0,o._)(a,n))return g(a,n,i,s,l,this.onClickFile,this.onClickCode);break;case"R":const e=[];return(0,o._)(a,n)&&e.push(g(a,n,i+1,s,l,this.onClickFile,this.onClickCode)),(0,o._)(r,n)&&e.push(g(r,n,i+2,s,l,this.onClickFile,this.onClickCode)),(0,u.createElement)(u.Fragment,null,e)}return l.length>0?g(r,n,i,s,l,this.onClickFile,this.onClickCode):null}async goToFileInCommit(e){const{store:{repo:{nav:t}},resolve:n,result:{commitId:s}}=this.props;n(!0),t.goHome(),await t.scrollCommitIntoView(s),t.setSelectedCommit(s),t.setSelectedPatchId(e)}drawCommitMessage(e,t,n){const s=t.includes("CommitMessage");return(0,u.createElement)("div",{className:u.c`CommitResult-header-message ${!0} CommitResult-header-message-oneLine ${!s}`},s?(0,c.Z)(e.message,n):e.message)}}var k=n(4907),C=Object.defineProperty;class _ extends u.Custom{constructor(){var e,t,n;super(...arguments),e=this,t="ref",n=(0,u.createRef)(),((e,t,n)=>{t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n)}render(){const{search:e,resolve:t}=this.props,{$coreSearchResults:n,repo:{global:{windowSt:s},repo:{$commits:i},refs:{$allRefs:{map:o}}},$searchText:r}=e,{$theme:{name:a}}=k.zj;return(0,u.createElement)("div",{ref:this.ref,className:"SearchResultList",style:{maxHeight:.65*s.$commitViewSize.windowHeight}},n.map((n=>{const s=i.get(n.commitId);return void 0!==s?(0,u.createElement)(v,{refMap:o,result:n,commit:s,key:n.commitId,searchText:r,store:e,resolve:t,themeName:a}):null})))}componentDidMount(){const e=this.ref.current;null!==e&&(e.scrollTop=this.props.search.lastScrollY)}componentWillUnmount(){const e=this.ref.current;null!==e&&(this.props.search.lastScrollY=e.scrollTop)}}var S=n(9817),x=n(3331),P=Object.defineProperty,E=(e,t,n)=>(((e,t,n)=>{t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);async function R(e){e.global.windowSt.centreLastClick(),e.search.searchDialogOpen=!0,await(0,s.$)({dialogId:"SearchDialog",focusElementId:"SearchDialogInput",dismissible:!0,mode:"sheet",contentCallback:t=>(0,u.createElement)(I,{resolve:t,repo:e})}),e.search.searchDialogOpen=!1}class I extends u.Custom{constructor(){super(...arguments),E(this,"inputRef",(0,u.createRef)()),E(this,"onText",(async e=>{await this.props.repo.search.onText(e)})),E(this,"onKeyUp",(e=>{"Escape"===e.key&&this.props.resolve(!0)}))}render(){const{global:{windowSt:{$commitViewSize:{width:e}}},search:t}=this.props.repo;return(0,u.createElement)("div",{className:"SearchDialog",style:{width:(0,S.S4)(600,800,.8*e)}},(0,u.createElement)("div",{className:"SearchDialog-input-container"},(0,u.createElement)(i.L,{inRef:this.inputRef,className:"SearchDialog-input",value:t.$searchText,id:"SearchDialogInput",placeholder:"Search commits, branches or users",onText:this.onText,clearButton:!0}),this.drawSpinner()),(0,u.createElement)(_,{search:t,resolve:this.props.resolve}))}drawSpinner(){return this.props.repo.search.$runningSearch?(0,u.createElement)(x.y,{size:14,style:{position:"absolute",right:44,marginBottom:1},invertColour:"light"===k.zj.$theme.name}):null}componentDidMount(){addEventListener("keyup",this.onKeyUp),this.inputRef.current?.select()}componentWillUnmount(){removeEventListener("keyup",this.onKeyUp)}}},4203:(e,t,n)=>{"use strict";n.d(t,{U:()=>m,_:()=>d});var s=n(9817),i=n(1998),o=n(164),r=Object.defineProperty,a=(e,t,n)=>(((e,t,n)=>{t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class l{constructor(e){this.searchStore=e,a(this,"latestSearchText",""),a(this,"$results",{searchText:"",matches:{}}),a(this,"$running",!1),(0,o.init$)(this)}async run(e,t){if(""===t)return this.$running=!1,void(this.$results={searchText:"",matches:{}});this.$running=!0,this.$results={searchText:"",matches:{}},this.latestSearchText=t;const{repoPath:n}=e,{$commitIds:s}=this;let i=0;for(;;){const e=await this.diffSearchRequest(n,1,t,i)??[];if(this.cancelled(t))return;const o=e.map((e=>e[0]));if(o.some((e=>void 0!==this.$results.matches[e]))&&console.error("Results already contain an id in",o),this.$results={searchText:t,matches:{...this.$results.matches,...Object.fromEntries(e)}},Object.keys(this.$results.matches).length>20)break;if(0===e.length)break;const r=e[0][0],a=s.indexOf(r);if(-1===a)break;i=a+1}this.$running=!1}async diffSearchRequest(e,t,n,o){const r=await i.RT.start_diff_search({repoPath:e,numResults:t,searchText:n,startCommitIndex:o});let a=await i.RT.poll_diff_search({searchId:r});for(;!a.complete&&this.searchStore.searchDialogOpen;)await(0,s.yy)(30),a=await i.RT.poll_diff_search({searchId:r});return a.results}get $commitIds(){const{repo:{$commits:e}}=this.searchStore.repo,t=[];for(const n of e.values())null===n.stashId&&t.push(n.id);return t}cancelled(e){return e!==this.latestSearchText}}var c=Object.defineProperty,h=(e,t,n)=>(((e,t,n)=>{t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const u={repoPath:"",searchText:""};class m{constructor(e){this.repo=e,h(this,"$searchText"),h(this,"$quickSearchResults",[]),h(this,"$runningQuickSearch",!1),h(this,"diffSearch",new l(this)),h(this,"lastScrollY",0),h(this,"searchDialogOpen",!1),h(this,"onText",(async e=>{e!==this.$searchText&&(u.searchText=e,this.$searchText=e,this.runQuickSearch(e).catch(console.error),this.diffSearch.run(this.repo,e).catch(console.error))}));const{repoPath:t,searchText:n}=u;this.$searchText=t===e.repoPath?n:"",u.repoPath=e.repoPath,(0,o.init$)(this)}get $runningSearch(){return this.$searchText.length>0&&(this.$runningQuickSearch||this.diffSearch.$running)}async runQuickSearch(e){try{this.$runningQuickSearch=!0;const t=await i.RT.search_commits({repoPath:this.repo.repoPath,searchText:e,numResults:40});e===this.$searchText&&(this.$quickSearchResults="Ok"in t?t.Ok:[],this.$runningQuickSearch=!1)}catch{this.$runningQuickSearch=!1}}get $coreSearchResults(){const{repo:{repo:{$commits:e}},$searchText:t,$quickSearchResults:n}=this;if(t.length<2)return[];const{$results:s}=this.diffSearch;if(s.searchText===t){const{matches:e}=s;for(const t of Object.keys(e)){const s=n.find((e=>e.commitId===t)),i=e[t];if(void 0===s)n.push({commitId:t,matches:[],patches:i.map((e=>e.patch)),diffs:e[t],refIds:[]});else{for(const e of i)s.patches.some((t=>t.id===e.patch.id))||s.patches.push(e.patch);s.diffs=e[t]}}}return n.sort(((t,n)=>(e.get(n.commitId)?.date.ms??0)-(e.get(t.commitId)?.date.ms??0))),n.map((e=>({...e})))}}function d(e,t){return e.toLocaleLowerCase().includes(t.toLocaleLowerCase())}},886:(e,t,n)=>{"use strict";n.d(t,{I:()=>o,K:()=>r});var s=n(3331),i=n(164);class o extends i.Custom{render(){const{type:e,text:t,loading:n,classes:o=[],selected:a,themeName:l,children:c=[],...h}=this.props;!0===a&&o.push("ToolbarButton-selected");const u=function(e,t,n){return t?(0,i.createElement)("div",{className:"Toolbar-icon-container"},(0,i.createElement)(s.y,{size:18,invertColour:"light"===n})):e}(c,!0===n,l);return(0,i.createElement)("button",{className:`ToolbarButton ToolbarButton-style ${o.join(" ")}`,"aria-selected":`${!!a}`,...h},(0,i.createElement)(i.Fragment,null,u),r(t))}}function r(e){return(0,i.createElement)("div",{className:"ToolbarButtonLabel"},e)}},1521:(e,t,n)=>{"use strict";n.d(t,{v:()=>o});var s=n(886),i=n(164);function o({title:e,subtitle:t,disabled:n=!1,onClick:o,width:r}){return(0,i.createElement)("button",{className:"ToolbarDropdown ToolbarButton-style",style:{minWidth:r},onClick:o,disabled:n},(0,i.createElement)("div",{className:"ToolbarDropdown-value"},e),(0,s.K)(t))}},2210:(e,t,n)=>{"use strict";n.d(t,{Eg:()=>m,Tv:()=>d});var s=n(7521),i=n(5737),o=n(3005),r=n(1521),a=n(6947),l=n(6343),c=n(2650),h=n(164),u=Object.defineProperty;class m extends h.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="onClick")?e+"":e,(async e=>{const{gs:t}=this.props;await(0,s.O0)(function(e){return[...(0,o.n2)(e),i.me,o.gC.open(e),p(e),i.me,o.gC.clone(e),o.gC.create(e)]}(t),e,{classNames:[h.c`ToolbarDropdown-open`,h.c`darkenBackground`]})}))}render(){const{$repo:e,$workspaceRepos:t}=this.props.gs;if(t.size>0){const{$repoName:t}=this;return(0,r.v)({onClick:this.onClick,title:t,subtitle:"Repo",disabled:null!==e,width:(0,a.V0)(t,l.V)})}return(0,h.createElement)("div",{className:"ToolbarDropdown ToolbarButton-style",onClick:this.onClick},(0,h.createElement)("div",{className:"ToolbarDropdown-value"},"Recent..."))}get $repoName(){const{$workspaceDir:e}=this.props.gs;return null!==e?d(e):""}}function d(e){const t=e.split("/").filter((e=>e));return t[t.length-1]}function p(e){const{$workspaceDir:t}=e;return null===t?i.eh:{label:`Close ${t}`,click:()=>(0,c.AT)(e)}}},1795:(e,t,n)=>{"use strict";n.d(t,{Mh:()=>_,s1:()=>S});var s=n(6343),i=n(4071),o=n(9817),r=Object.defineProperty,a=(e,t,n)=>(((e,t,n)=>{t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),l=(e=>(e[e.merge=0]="merge",e[e.pull=1]="pull",e[e.push=2]="push",e[e.dot=3]="dot",e[e.stash=4]="stash",e))(l||{});class c{constructor(e,t,n,i,o){this.repoPath=e,this.commitsToPush=t,this.commitsToPull=n,this.commits=i,this.commitIds=o,a(this,"points",[]),a(this,"lines",[]),a(this,"drawnCommits",new Map),a(this,"filled",Array(s.fZ).fill(0)),this.generate()}generate(){(0,o.WP)(this.repoPath);for(const e of this.commits.values())this.traverseCommit(e,this.commits,this.commitIds);this.points.sort(((e,t)=>e.y-t.y)),this.lines.sort(((e,t)=>e.points[0].y-t.points[0].y)),(0,o.WP)(this.repoPath)}traverseCommit(e,t,n){const{id:s,index:o}=e;if(this.drawnCommits.has(s))return;const r={x:this.filled[o],y:o,commitId:s},a=(0,i.Ny)(e.email);this.points.push({commitId:s,x:r.x,y:r.y,hue:a,type:this.getPointType(e)}),this.filled[r.y]++,this.drawnCommits.set(s,r);for(const s of e.parentIds){const e=t.get(s);void 0!==e&&(this.traverseCommit(e,t,n),this.generateLine(r,e,n,a))}}getPointType(e){return this.commitsToPull.has(e.id)?1:this.commitsToPush.has(e.id)?2:e.isMerge?0:e.stashId?4:3}generateLine(e,t,n,s){const i=[e],{index:o}=t;for(let t=e.y+1;t<o;t++){const e=this.filled[t];this.filled[t]++,i.push({x:e,y:t,commitId:n[t]})}const r=this.drawnCommits.get(t.id)?.x??this.filled[o];i.push({x:r,y:o,commitId:n[o]}),this.lines.push({id:i[0].commitId+i[i.length-1].commitId,points:i,hue:s})}}var h=n(3789),u=n(4907);const m=h.iw,d=m/2;function p(e,t,n,s,i){const{points:o,lines:r}=e,a=[],l=[];let c=!1;for(const e of o){const{commitId:o}=e;if(!0===t.get(o)?.visible||!0===n.get(o)?.visible){c=!0;const r=g(e,t,i),l=g(e,n,i);a.push(f(o,e,l,r,s))}else if(c)break}c=!1;for(const e of r){const{points:o,id:r}=e;for(let a=0;a<o.length;a++){const h=o[a];if(!0===t.get(h.commitId)?.visible||!0===n.get(h.commitId)?.visible){0===a&&(c=!0),l.push(w(r,e,n,t,i,s));break}if(0===a&&c)break}}return{points:a,lines:l}}function g({x:e,y:t,commitId:n},s,i){return{x:(o=e,m+o*(.5*m)),y:(s.get(n)?.top??0)+d-i,commitId:n};var o}function f(e,t,n,s,i){const o=b(n,s,i);return{commitId:e,x:o.x,y:o.y,hue:t.hue,type:t.type}}function w(e,t,n,s,i,o){const{hue:r,points:a}=t;return{id:e,points:a.map((e=>b(g(e,n,i),g(e,s,i),o))),hue:r}}function b(e,t,n){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y),commitId:t.commitId}}var y=n(9853),$=n.n(y),v=n(164),k=Object.defineProperty,C=(e,t,n)=>(((e,t,n)=>{t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class _ extends v.Custom{constructor(){super(...arguments),C(this,"ref",(0,v.createRef)()),C(this,"$canvas",null),C(this,"$instructions",null),C(this,"backgroundColour",u.zj.$theme.backgroundColour),C(this,"setCanvas",(({width:e,height:t})=>{const n=this.ref.current;if(n){const s=function(e,t,n){const s=window.devicePixelRatio;e.width=t*s,e.height=n*s;const i=e.getContext("2d");return null!==i&&i.scale(s,s),i}(n,e,t);this.$canvas=s?{canvas:n,context:s}:null}})),C(this,"runningAnimation",!1)}render(){const{global:{windowSt:e},nav:t}=this.props.store,{$size:{width:n,height:s}}=this;let i={width:n,height:s};return t.$showingRefView&&(i.transform=`translateX(${e.$commitViewSize.width/2}px)`),(0,v.createElement)("canvas",{className:"CommitGraph",style:i,ref:this.ref})}get $size(){const{layout:e,global:{windowSt:{$commitViewSize:{height:t}}}}=this.props.store;return{width:e.$commitLeft,height:t}}componentDidMount(){v.Reaction.auto((()=>{const{repo:e,refs:t}=this.props.store;this.$instructions=new c(this.props.store.repoPath,t.$commitsToPush.thisBranch,t.$commitsToPull,e.$commits,e.$commitIds)}),this),this.setCanvas(this.$size),v.Reaction.object((()=>this.$size),this.setCanvas,this),v.Reaction.value((()=>({positions:this.props.store.layout.commitPositions.$current,instructions:this.$instructions,canvas:this.$canvas,theme:u.zj.$theme})),(({positions:e,instructions:t,canvas:n,theme:s})=>{const{prev:i}=this.props.store.layout.commitPositions,{props:o}=this;if(this.backgroundColour=s.backgroundColour,!n||!t)return;const{global:{windowSt:{$animatingCommits:r}},layout:{$scrollTop:a}}=o.store;if(r&&!this.runningAnimation){const s=u.zj.animationTime.medium;this.runningAnimation=!0,this.animatedDraw(t,e,i,a,n,s,Date.now()+s)}else{this.runningAnimation=!1;const s=p(t,e,i,1,a);this.drawGraph(n,s)}}),this)}animatedDraw(e,t,n,s,i,o,r){requestAnimationFrame((()=>{if(!this.runningAnimation)return;const a=Date.now();if(a<r-15){const l=p(e,t,n,S(1-(r-a)/o),s);this.drawGraph(i,l),this.animatedDraw(e,t,n,s,i,o,r)}else{this.runningAnimation=!1;const o=p(e,t,n,1,s);this.drawGraph(i,o)}}))}drawGraph({context:e,canvas:t},n){const{backgroundColour:s}=this;e.strokeStyle=s,e.fillStyle=s,e.lineWidth=1,e.clearRect(0,0,t.width,t.height),e.beginPath();let i=s;const{points:o,lines:r}=n;for(const t of r){const{points:n,hue:s}=t,o=`hsl(${s}, 65%, 60%)`;i!==o&&(e.stroke(),e.strokeStyle=o,e.fillStyle=o,i=o,e.beginPath());let r=!0;for(const t of n){const{x:n,y:s}=t;r?(e.moveTo(n,s),r=!1):e.lineTo(n,s)}}e.stroke();for(const t of o){const{hue:n,x:o,y:r}=t,a=`hsl(${n}, 65%, 60%)`;switch(i!==a&&(e.strokeStyle=a,e.fillStyle=a,i=a),e.beginPath(),t.type){case l.merge:e.arc(o,r,h.iw/7,0,2*Math.PI),e.fill(),e.beginPath(),e.fillStyle=s,e.arc(o,r,h.iw/10,0,2*Math.PI),e.fill(),e.fillStyle=`hsl(${n}, 65%, 60%)`;break;case l.dot:e.arc(o,r,h.iw/8,0,2*Math.PI),e.fill();break;case l.pull:e.clearRect(o-4,r-7,10,14),e.fillRect(o-3,r-5,6,4),e.moveTo(o,r+5),e.lineTo(o-6,r-1),e.lineTo(o+6,r-1),e.fill();break;case l.push:e.clearRect(o-4,r-7,10,14),e.fillRect(o-3,r+1,6,4),e.moveTo(o,r-5),e.lineTo(o-6,r+1),e.lineTo(o+6,r+1),e.fill();break;case l.stash:e.fillRect(o-3,r-3,6,6)}}}}const S=$()(.25,.1,.25,1)},4188:(e,t,n)=>{"use strict";n.d(t,{m:()=>r,z:()=>a});var s=n(1197),i=n(9171),o=n(164);function r(e,t){return(0,o.createElement)(o.Fragment,null,function(e){return"Tag"===e.refType?(0,o.createElement)("img",{height:14,style:{marginLeft:8,marginRight:-3,marginTop:1},src:(0,s.yn)(["other","TagIcon.svg"]),alt:""}):null}(e),(0,o.createElement)("div",{className:"RefCardTitle"},(0,i.Z)(a(e),t)))}function a(e){return"Tag"===e.refType?e.shortName:"Local"===e.location?"origin"!==e.remoteName&&e.head?`${e.shortName} ➞ ${e.remoteName}`:e.shortName:null!==e.remoteName?`${e.remoteName}/${e.shortName}`:e.shortName}},1578:(e,t,n)=>{"use strict";n.d(t,{U:()=>a,f:()=>l});var s=n(5675),i=n(4907),o=n(164),r=Object.defineProperty;const a=38;class l extends o.Custom{constructor(){var e;super(...arguments),((e,t,n)=>{t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(this,"symbol"!=typeof(e="onSearchText")?e+"":e,(e=>{i.zj.disableAnimations(),i.zj.restoreAnimationsDebounced(),this.props.store.refs.$refSearch=e}))}render(){const{layout:e,refs:t}=this.props.store,{$commitLeft:n,$commitWidth:i}=e;return(0,o.createElement)("div",{className:"RefScaleHeader",style:{height:a,paddingLeft:n,paddingRight:n,width:n+i+n}},(0,o.createElement)("span",null,"Local"),(0,o.createElement)("div",{className:"RefScaleHeader-input-container"},(0,o.createElement)(s.L,{className:"RefScaleHeader-input",autoFocus:!0,placeholder:"Find a branch",style:{left:n},onText:this.onSearchText,value:t.$refSearch,clearButton:!0})),(0,o.createElement)("span",null,"Remote"))}}},5524:(e,t,n)=>{"use strict";n.d(t,{g:()=>a});var s=n(6815),i=Object.defineProperty,o=(e,t,n)=>(((e,t,n)=>{t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class r{constructor(e,t,n){this.channel=e,this.send=t,this.onObject=n,o(this,"callsInProgress",new Map),o(this,"callCount",0),o(this,"call",((e,...t)=>{const n=this.getNextId(),{resolver:i,promise:o}=(0,s.T)(),r={functionName:e,args:t,callNum:n};return this.send(this.channel,r),this.callsInProgress.set(n,i),o})),n.on(e,((e,t)=>{const{callNum:n,result:s}=t;this.callsInProgress.get(n)?.(s),this.callsInProgress.delete(n)}))}getNextId(){return this.callCount++,this.callCount}}const a=new Proxy({},{get:(e,t)=>async(...e)=>l(t,...e)}),l=function(){const{ipcRenderer:e}=n(4157);return"call-in-main",t=e.send,new r("call-in-main",t,e).call;var t}()},9412:(e,t,n)=>{"use strict";function s(e,t){return e.map((({submenu:e,click:n,...i})=>({...i,submenu:e?s(e,t):void 0,click:o(n,t)})))}n.d(t,{Nr:()=>s,RB:()=>l,nY:()=>h,vi:()=>a,xC:()=>u});let i=0;function o(e,t){if(void 0!==e)switch(i++,t){case"main":return c.set(i,e),{name:"callMainMenuFunction",args:[i]};case"context":return r.set(i,e),{name:"callContextMenuFunction",args:[i]}}}const r=new Map;function a(e){r.get(e)?.()}function l(){r.clear()}const c=new Map;function h(e){c.get(e)?.()}function u(){c.clear()}},8774:(e,t,n)=>{"use strict";n.d(t,{BA:()=>g,Bg:()=>r,Gr:()=>h,MO:()=>d,Y5:()=>a,YZ:()=>f,ZR:()=>c,aK:()=>i,aT:()=>m,bs:()=>o,kf:()=>l,qC:()=>u,w1:()=>p,ws:()=>s});const s="CloneForm-dir",i="CloneForm-url",o="NewRepoDialog-dir",r="NewRepoDialog-name",a="ToolbarChangesButton",l="UsernameDialog",c="UsernameDialog-user",h="UsernameDialog-email",u="UsernameDialog-submit",m="WipFileLists-stageAll",d="CommitPane-commit",p="CommitPane-message",g="CommitCardClosed",f="ExpandButton"},6588:(e,t,n)=>{"use strict";n.d(t,{$w:()=>i,bV:()=>s});const s="https://github.com/GitFiend/Support/issues",i="https://gitfiend.com"},5580:(e,t,n)=>{var s=n(6110)(n(9325),"DataView");e.exports=s},8223:(e,t,n)=>{var s=n(6110)(n(9325),"Map");e.exports=s},2804:(e,t,n)=>{var s=n(6110)(n(9325),"Promise");e.exports=s},6545:(e,t,n)=>{var s=n(6110)(n(9325),"Set");e.exports=s},1873:(e,t,n)=>{var s=n(9325).Symbol;e.exports=s},8303:(e,t,n)=>{var s=n(6110)(n(9325),"WeakMap");e.exports=s},695:(e,t,n)=>{var s=n(8096),i=n(2428),o=n(6449),r=n(3656),a=n(361),l=n(7167),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),h=!n&&i(e),u=!n&&!h&&r(e),m=!n&&!h&&!u&&l(e),d=n||h||u||m,p=d?s(e.length,String):[],g=p.length;for(var f in e)!t&&!c.call(e,f)||d&&("length"==f||u&&("offset"==f||"parent"==f)||m&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||a(f,g))||p.push(f);return p}},4932:e=>{e.exports=function(e,t){for(var n=-1,s=null==e?0:e.length,i=Array(s);++n<s;)i[n]=t(e[n],n,e);return i}},1074:e=>{e.exports=function(e){return e.split("")}},2552:(e,t,n)=>{var s=n(1873),i=n(659),o=n(9350),r=s?s.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?i(e):o(e)}},7534:(e,t,n)=>{var s=n(2552),i=n(346);e.exports=function(e){return i(e)&&"[object Arguments]"==s(e)}},5083:(e,t,n)=>{var s=n(1882),i=n(7296),o=n(3805),r=n(7473),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,h=l.toString,u=c.hasOwnProperty,m=RegExp("^"+h.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(s(e)?m:a).test(r(e))}},4901:(e,t,n)=>{var s=n(2552),i=n(294),o=n(346),r={};r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0,r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object DataView]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!r[s(e)]}},8984:(e,t,n)=>{var s=n(5527),i=n(3650),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!s(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},8096:e=>{e.exports=function(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}},7301:e=>{e.exports=function(e){return function(t){return e(t)}}},514:(e,t,n)=>{var s=n(4932);e.exports=function(e,t){return s(t,(function(t){return e[t]}))}},3007:e=>{e.exports=function(e,t){var n=-1,s=e.length;for(t||(t=Array(s));++n<s;)t[n]=e[n];return t}},5481:(e,t,n)=>{var s=n(9325)["__core-js_shared__"];e.exports=s},4840:e=>{var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},6110:(e,t,n)=>{var s=n(5083),i=n(392);e.exports=function(e,t){var n=i(e,t);return s(n)?n:void 0}},659:(e,t,n)=>{var s=n(1873),i=Object.prototype,o=i.hasOwnProperty,r=i.toString,a=s?s.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var s=!0}catch(e){}var i=r.call(e);return s&&(t?e[a]=n:delete e[a]),i}},5861:(e,t,n)=>{var s=n(5580),i=n(8223),o=n(2804),r=n(6545),a=n(8303),l=n(2552),c=n(7473),h="[object Map]",u="[object Promise]",m="[object Set]",d="[object WeakMap]",p="[object DataView]",g=c(s),f=c(i),w=c(o),b=c(r),y=c(a),$=l;(s&&$(new s(new ArrayBuffer(1)))!=p||i&&$(new i)!=h||o&&$(o.resolve())!=u||r&&$(new r)!=m||a&&$(new a)!=d)&&($=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,s=n?c(n):"";if(s)switch(s){case g:return p;case f:return h;case w:return u;case b:return m;case y:return d}return t}),e.exports=$},392:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},9698:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},361:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var s=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==s||"symbol"!=s&&t.test(e))&&e>-1&&e%1==0&&e<n}},7296:(e,t,n)=>{var s,i=n(5481),o=(s=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"";e.exports=function(e){return!!o&&o in e}},5527:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},4361:e=>{e.exports=function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}},317:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,s){n[++t]=[s,e]})),n}},3650:(e,t,n)=>{var s=n(4335)(Object.keys,Object);e.exports=s},6009:(e,t,n)=>{e=n.nmd(e);var s=n(4840),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,r=o&&o.exports===i&&s.process,a=function(){try{return o&&o.require&&o.require("util").types||r&&r.binding&&r.binding("util")}catch(e){}}();e.exports=a},9350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},4335:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},9325:(e,t,n)=>{var s=n(4840),i="object"==typeof self&&self&&self.Object===Object&&self,o=s||i||Function("return this")();e.exports=o},4247:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},3912:(e,t,n)=>{var s=n(1074),i=n(9698),o=n(2054);e.exports=function(e){return i(e)?o(e):s(e)}},7473:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},2054:e=>{var t="\\ud800-\\udfff",n="["+t+"]",s="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^"+t+"]",r="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+s+"|"+i+")?",c="[\\ufe0e\\ufe0f]?",h=c+l+"(?:\\u200d(?:"+[o,r,a].join("|")+")"+c+l+")*",u="(?:"+[o+s+"?",s,r,a,n].join("|")+")",m=RegExp(i+"(?="+i+")|"+u+h,"g");e.exports=function(e){return e.match(m)||[]}},2428:(e,t,n)=>{var s=n(7534),i=n(346),o=Object.prototype,r=o.hasOwnProperty,a=o.propertyIsEnumerable,l=s(function(){return arguments}())?s:function(e){return i(e)&&r.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},6449:e=>{var t=Array.isArray;e.exports=t},4894:(e,t,n)=>{var s=n(1882),i=n(294);e.exports=function(e){return null!=e&&i(e.length)&&!s(e)}},3656:(e,t,n)=>{e=n.nmd(e);var s=n(9325),i=n(9935),o=t&&!t.nodeType&&t,r=o&&e&&!e.nodeType&&e,a=r&&r.exports===o?s.Buffer:void 0,l=(a?a.isBuffer:void 0)||i;e.exports=l},1882:(e,t,n)=>{var s=n(2552),i=n(3805);e.exports=function(e){if(!i(e))return!1;var t=s(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},294:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3805:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},5015:(e,t,n)=>{var s=n(2552),i=n(6449),o=n(346);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==s(e)}},7167:(e,t,n)=>{var s=n(4901),i=n(7301),o=n(6009),r=o&&o.isTypedArray,a=r?i(r):s;e.exports=a},5950:(e,t,n)=>{var s=n(695),i=n(8984),o=n(4894);e.exports=function(e){return o(e)?s(e):i(e)}},9935:e=>{e.exports=function(){return!1}},2306:(e,t,n)=>{var s=n(1873),i=n(3007),o=n(5861),r=n(4894),a=n(5015),l=n(4361),c=n(317),h=n(4247),u=n(3912),m=n(5880),d=s?s.iterator:void 0;e.exports=function(e){if(!e)return[];if(r(e))return a(e)?u(e):i(e);if(d&&e[d])return l(e[d]());var t=o(e);return("[object Map]"==t?c:"[object Set]"==t?h:m)(e)}},5880:(e,t,n)=>{var s=n(514),i=n(5950);e.exports=function(e){return null==e?[]:s(e,i(e))}},9066:(e,t,n)=>{e.exports=n(8544)},8544:(e,t,n)=>{var s=n(2306),i=n(9587),o=/:([a-zA-Z0-9_\-\+]+):/g,r=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function a(e){var t=e.indexOf(":");return t>-1?t===e.length-1?a(e=e.substring(0,t)):a(e=e.substr(t+1)):e}function l(e){return"string"==typeof e&&e.length>0?":"+e+":":e}var c=String.fromCharCode(65039),h=new RegExp(c,"g");function u(e){return e.replace(h,"")}var m=Object.keys(i).reduce((function(e,t){return e[u(i[t])]=t,e}),{}),d={emoji:i,_get:function(e){return m[u(e)]?e:i.hasOwnProperty(e)?i[e]:"string"==typeof(t=e)&&":"!==t[0]?l(t):t;var t},get:function(e){return e=a(e),d._get(e)},find:function(e){return d.findByName(e)||d.findByCode(e)},findByName:function(e){var t=a(e),n=i[t];return n?{emoji:n,key:t}:void 0},findByCode:function(e){var t=u(e),n=m[t];return n?{emoji:i[n],key:n}:void 0},hasEmoji:function(e){return d.hasEmojiByName(e)||d.hasEmojiByCode(e)},hasEmojiByName:function(e){var t=d.findByName(e);return!!t&&t.key===a(e)},hasEmojiByCode:function(e){var t=d.findByCode(e);return!!t&&u(t.emoji)===u(e)},which:function(e,t){var n=u(e),s=m[n];return t?l(s):s},emojify:function(e,t,n){return e?e.split(o).map((function(e,s){if(s%2==0)return e;var i=d._get(e),o=i.indexOf(":")>-1;return o&&"function"==typeof t?t(e):o||"function"!=typeof n?i:n(i,e)})).join(""):""},random:function(){var e=Object.keys(i),t=e[Math.floor(Math.random()*e.length)];return{key:t,emoji:d._get(t)}},search:function(e){var t=Object.keys(i),n=a(e);return t.filter((function(e){return 0===e.toString().indexOf(n)})).map((function(e){return{key:e,emoji:d._get(e)}}))},unemojify:function(e){return e?s(e).map((function(e){return d.which(e,!0)||e})).join(""):""},replace:function(e,t,n){if(!e)return"";var i="function"==typeof t?t:function(){return t},o=s(e),a=o.map((function(e,t){var s=d.findByCode(e);return s&&n&&" "===o[t+1]&&(o[t+1]=""),s?i(s):e})).join("");return n?a.replace(r,""):a},strip:function(e){return d.replace(e,"",!0)}};e.exports=d},6982:e=>{"use strict";e.exports=require("crypto")},4157:e=>{"use strict";e.exports=require("electron")},9587:e=>{"use strict";e.exports=JSON.parse('{"100":"💯","1234":"🔢","umbrella_with_rain_drops":"☔","coffee":"☕","aries":"♈","taurus":"♉","sagittarius":"♐","capricorn":"♑","aquarius":"♒","pisces":"♓","anchor":"⚓","white_check_mark":"✅","sparkles":"✨","question":"❓","grey_question":"❔","grey_exclamation":"❕","exclamation":"❗","heavy_exclamation_mark":"❗","heavy_plus_sign":"➕","heavy_minus_sign":"➖","heavy_division_sign":"➗","hash":"#️⃣","keycap_star":"*️⃣","zero":"0️⃣","one":"1️⃣","two":"2️⃣","three":"3️⃣","four":"4️⃣","five":"5️⃣","six":"6️⃣","seven":"7️⃣","eight":"8️⃣","nine":"9️⃣","copyright":"©️","registered":"®️","mahjong":"🀄","black_joker":"🃏","a":"🅰️","b":"🅱️","o2":"🅾️","parking":"🅿️","ab":"🆎","cl":"🆑","cool":"🆒","free":"🆓","id":"🆔","new":"🆕","ng":"🆖","ok":"🆗","sos":"🆘","up":"🆙","vs":"🆚","flag-ac":"🇦🇨","flag-ad":"🇦🇩","flag-ae":"🇦🇪","flag-af":"🇦🇫","flag-ag":"🇦🇬","flag-ai":"🇦🇮","flag-al":"🇦🇱","flag-am":"🇦🇲","flag-ao":"🇦🇴","flag-aq":"🇦🇶","flag-ar":"🇦🇷","flag-as":"🇦🇸","flag-at":"🇦🇹","flag-au":"🇦🇺","flag-aw":"🇦🇼","flag-ax":"🇦🇽","flag-az":"🇦🇿","flag-ba":"🇧🇦","flag-bb":"🇧🇧","flag-bd":"🇧🇩","flag-be":"🇧🇪","flag-bf":"🇧🇫","flag-bg":"🇧🇬","flag-bh":"🇧🇭","flag-bi":"🇧🇮","flag-bj":"🇧🇯","flag-bl":"🇧🇱","flag-bm":"🇧🇲","flag-bn":"🇧🇳","flag-bo":"🇧🇴","flag-bq":"🇧🇶","flag-br":"🇧🇷","flag-bs":"🇧🇸","flag-bt":"🇧🇹","flag-bv":"🇧🇻","flag-bw":"🇧🇼","flag-by":"🇧🇾","flag-bz":"🇧🇿","flag-ca":"🇨🇦","flag-cc":"🇨🇨","flag-cd":"🇨🇩","flag-cf":"🇨🇫","flag-cg":"🇨🇬","flag-ch":"🇨🇭","flag-ci":"🇨🇮","flag-ck":"🇨🇰","flag-cl":"🇨🇱","flag-cm":"🇨🇲","cn":"🇨🇳","flag-cn":"🇨🇳","flag-co":"🇨🇴","flag-cp":"🇨🇵","flag-cr":"🇨🇷","flag-cu":"🇨🇺","flag-cv":"🇨🇻","flag-cw":"🇨🇼","flag-cx":"🇨🇽","flag-cy":"🇨🇾","flag-cz":"🇨🇿","de":"🇩🇪","flag-de":"🇩🇪","flag-dg":"🇩🇬","flag-dj":"🇩🇯","flag-dk":"🇩🇰","flag-dm":"🇩🇲","flag-do":"🇩🇴","flag-dz":"🇩🇿","flag-ea":"🇪🇦","flag-ec":"🇪🇨","flag-ee":"🇪🇪","flag-eg":"🇪🇬","flag-eh":"🇪🇭","flag-er":"🇪🇷","es":"🇪🇸","flag-es":"🇪🇸","flag-et":"🇪🇹","flag-eu":"🇪🇺","flag-fi":"🇫🇮","flag-fj":"🇫🇯","flag-fk":"🇫🇰","flag-fm":"🇫🇲","flag-fo":"🇫🇴","fr":"🇫🇷","flag-fr":"🇫🇷","flag-ga":"🇬🇦","gb":"🇬🇧","uk":"🇬🇧","flag-gb":"🇬🇧","flag-gd":"🇬🇩","flag-ge":"🇬🇪","flag-gf":"🇬🇫","flag-gg":"🇬🇬","flag-gh":"🇬🇭","flag-gi":"🇬🇮","flag-gl":"🇬🇱","flag-gm":"🇬🇲","flag-gn":"🇬🇳","flag-gp":"🇬🇵","flag-gq":"🇬🇶","flag-gr":"🇬🇷","flag-gs":"🇬🇸","flag-gt":"🇬🇹","flag-gu":"🇬🇺","flag-gw":"🇬🇼","flag-gy":"🇬🇾","flag-hk":"🇭🇰","flag-hm":"🇭🇲","flag-hn":"🇭🇳","flag-hr":"🇭🇷","flag-ht":"🇭🇹","flag-hu":"🇭🇺","flag-ic":"🇮🇨","flag-id":"🇮🇩","flag-ie":"🇮🇪","flag-il":"🇮🇱","flag-im":"🇮🇲","flag-in":"🇮🇳","flag-io":"🇮🇴","flag-iq":"🇮🇶","flag-ir":"🇮🇷","flag-is":"🇮🇸","it":"🇮🇹","flag-it":"🇮🇹","flag-je":"🇯🇪","flag-jm":"🇯🇲","flag-jo":"🇯🇴","jp":"🇯🇵","flag-jp":"🇯🇵","flag-ke":"🇰🇪","flag-kg":"🇰🇬","flag-kh":"🇰🇭","flag-ki":"🇰🇮","flag-km":"🇰🇲","flag-kn":"🇰🇳","flag-kp":"🇰🇵","kr":"🇰🇷","flag-kr":"🇰🇷","flag-kw":"🇰🇼","flag-ky":"🇰🇾","flag-kz":"🇰🇿","flag-la":"🇱🇦","flag-lb":"🇱🇧","flag-lc":"🇱🇨","flag-li":"🇱🇮","flag-lk":"🇱🇰","flag-lr":"🇱🇷","flag-ls":"🇱🇸","flag-lt":"🇱🇹","flag-lu":"🇱🇺","flag-lv":"🇱🇻","flag-ly":"🇱🇾","flag-ma":"🇲🇦","flag-mc":"🇲🇨","flag-md":"🇲🇩","flag-me":"🇲🇪","flag-mf":"🇲🇫","flag-mg":"🇲🇬","flag-mh":"🇲🇭","flag-mk":"🇲🇰","flag-ml":"🇲🇱","flag-mm":"🇲🇲","flag-mn":"🇲🇳","flag-mo":"🇲🇴","flag-mp":"🇲🇵","flag-mq":"🇲🇶","flag-mr":"🇲🇷","flag-ms":"🇲🇸","flag-mt":"🇲🇹","flag-mu":"🇲🇺","flag-mv":"🇲🇻","flag-mw":"🇲🇼","flag-mx":"🇲🇽","flag-my":"🇲🇾","flag-mz":"🇲🇿","flag-na":"🇳🇦","flag-nc":"🇳🇨","flag-ne":"🇳🇪","flag-nf":"🇳🇫","flag-ng":"🇳🇬","flag-ni":"🇳🇮","flag-nl":"🇳🇱","flag-no":"🇳🇴","flag-np":"🇳🇵","flag-nr":"🇳🇷","flag-nu":"🇳🇺","flag-nz":"🇳🇿","flag-om":"🇴🇲","flag-pa":"🇵🇦","flag-pe":"🇵🇪","flag-pf":"🇵🇫","flag-pg":"🇵🇬","flag-ph":"🇵🇭","flag-pk":"🇵🇰","flag-pl":"🇵🇱","flag-pm":"🇵🇲","flag-pn":"🇵🇳","flag-pr":"🇵🇷","flag-ps":"🇵🇸","flag-pt":"🇵🇹","flag-pw":"🇵🇼","flag-py":"🇵🇾","flag-qa":"🇶🇦","flag-re":"🇷🇪","flag-ro":"🇷🇴","flag-rs":"🇷🇸","ru":"🇷🇺","flag-ru":"🇷🇺","flag-rw":"🇷🇼","flag-sa":"🇸🇦","flag-sb":"🇸🇧","flag-sc":"🇸🇨","flag-sd":"🇸🇩","flag-se":"🇸🇪","flag-sg":"🇸🇬","flag-sh":"🇸🇭","flag-si":"🇸🇮","flag-sj":"🇸🇯","flag-sk":"🇸🇰","flag-sl":"🇸🇱","flag-sm":"🇸🇲","flag-sn":"🇸🇳","flag-so":"🇸🇴","flag-sr":"🇸🇷","flag-ss":"🇸🇸","flag-st":"🇸🇹","flag-sv":"🇸🇻","flag-sx":"🇸🇽","flag-sy":"🇸🇾","flag-sz":"🇸🇿","flag-ta":"🇹🇦","flag-tc":"🇹🇨","flag-td":"🇹🇩","flag-tf":"🇹🇫","flag-tg":"🇹🇬","flag-th":"🇹🇭","flag-tj":"🇹🇯","flag-tk":"🇹🇰","flag-tl":"🇹🇱","flag-tm":"🇹🇲","flag-tn":"🇹🇳","flag-to":"🇹🇴","flag-tr":"🇹🇷","flag-tt":"🇹🇹","flag-tv":"🇹🇻","flag-tw":"🇹🇼","flag-tz":"🇹🇿","flag-ua":"🇺🇦","flag-ug":"🇺🇬","flag-um":"🇺🇲","flag-un":"🇺🇳","us":"🇺🇸","flag-us":"🇺🇸","flag-uy":"🇺🇾","flag-uz":"🇺🇿","flag-va":"🇻🇦","flag-vc":"🇻🇨","flag-ve":"🇻🇪","flag-vg":"🇻🇬","flag-vi":"🇻🇮","flag-vn":"🇻🇳","flag-vu":"🇻🇺","flag-wf":"🇼🇫","flag-ws":"🇼🇸","flag-xk":"🇽🇰","flag-ye":"🇾🇪","flag-yt":"🇾🇹","flag-za":"🇿🇦","flag-zm":"🇿🇲","flag-zw":"🇿🇼","koko":"🈁","sa":"🈂️","u7121":"🈚","u6307":"🈯","u7981":"🈲","u7a7a":"🈳","u5408":"🈴","u6e80":"🈵","u6709":"🈶","u6708":"🈷️","u7533":"🈸","u5272":"🈹","u55b6":"🈺","ideograph_advantage":"🉐","accept":"🉑","cyclone":"🌀","foggy":"🌁","closed_umbrella":"🌂","night_with_stars":"🌃","sunrise_over_mountains":"🌄","sunrise":"🌅","city_sunset":"🌆","city_sunrise":"🌇","rainbow":"🌈","bridge_at_night":"🌉","ocean":"🌊","volcano":"🌋","milky_way":"🌌","earth_africa":"🌍","earth_americas":"🌎","earth_asia":"🌏","globe_with_meridians":"🌐","new_moon":"🌑","waxing_crescent_moon":"🌒","first_quarter_moon":"🌓","moon":"🌔","waxing_gibbous_moon":"🌔","full_moon":"🌕","waning_gibbous_moon":"🌖","last_quarter_moon":"🌗","waning_crescent_moon":"🌘","crescent_moon":"🌙","new_moon_with_face":"🌚","first_quarter_moon_with_face":"🌛","last_quarter_moon_with_face":"🌜","full_moon_with_face":"🌝","sun_with_face":"🌞","star2":"🌟","stars":"🌠","thermometer":"🌡️","mostly_sunny":"🌤️","sun_small_cloud":"🌤️","barely_sunny":"🌥️","sun_behind_cloud":"🌥️","partly_sunny_rain":"🌦️","sun_behind_rain_cloud":"🌦️","rain_cloud":"🌧️","snow_cloud":"🌨️","lightning":"🌩️","lightning_cloud":"🌩️","tornado":"🌪️","tornado_cloud":"🌪️","fog":"🌫️","wind_blowing_face":"🌬️","hotdog":"🌭","taco":"🌮","burrito":"🌯","chestnut":"🌰","seedling":"🌱","evergreen_tree":"🌲","deciduous_tree":"🌳","palm_tree":"🌴","cactus":"🌵","hot_pepper":"🌶️","tulip":"🌷","cherry_blossom":"🌸","rose":"🌹","hibiscus":"🌺","sunflower":"🌻","blossom":"🌼","corn":"🌽","ear_of_rice":"🌾","herb":"🌿","four_leaf_clover":"🍀","maple_leaf":"🍁","fallen_leaf":"🍂","leaves":"🍃","mushroom":"🍄","tomato":"🍅","eggplant":"🍆","grapes":"🍇","melon":"🍈","watermelon":"🍉","tangerine":"🍊","lemon":"🍋","banana":"🍌","pineapple":"🍍","apple":"🍎","green_apple":"🍏","pear":"🍐","peach":"🍑","cherries":"🍒","strawberry":"🍓","hamburger":"🍔","pizza":"🍕","meat_on_bone":"🍖","poultry_leg":"🍗","rice_cracker":"🍘","rice_ball":"🍙","rice":"🍚","curry":"🍛","ramen":"🍜","spaghetti":"🍝","bread":"🍞","fries":"🍟","sweet_potato":"🍠","dango":"🍡","oden":"🍢","sushi":"🍣","fried_shrimp":"🍤","fish_cake":"🍥","icecream":"🍦","shaved_ice":"🍧","ice_cream":"🍨","doughnut":"🍩","cookie":"🍪","chocolate_bar":"🍫","candy":"🍬","lollipop":"🍭","custard":"🍮","honey_pot":"🍯","cake":"🍰","bento":"🍱","stew":"🍲","fried_egg":"🍳","cooking":"🍳","fork_and_knife":"🍴","tea":"🍵","sake":"🍶","wine_glass":"🍷","cocktail":"🍸","tropical_drink":"🍹","beer":"🍺","beers":"🍻","baby_bottle":"🍼","knife_fork_plate":"🍽️","champagne":"🍾","popcorn":"🍿","ribbon":"🎀","gift":"🎁","birthday":"🎂","jack_o_lantern":"🎃","christmas_tree":"🎄","santa":"🎅","fireworks":"🎆","sparkler":"🎇","balloon":"🎈","tada":"🎉","confetti_ball":"🎊","tanabata_tree":"🎋","crossed_flags":"🎌","bamboo":"🎍","dolls":"🎎","flags":"🎏","wind_chime":"🎐","rice_scene":"🎑","school_satchel":"🎒","mortar_board":"🎓","medal":"🎖️","reminder_ribbon":"🎗️","studio_microphone":"🎙️","level_slider":"🎚️","control_knobs":"🎛️","film_frames":"🎞️","admission_tickets":"🎟️","carousel_horse":"🎠","ferris_wheel":"🎡","roller_coaster":"🎢","fishing_pole_and_fish":"🎣","microphone":"🎤","movie_camera":"🎥","cinema":"🎦","headphones":"🎧","art":"🎨","tophat":"🎩","circus_tent":"🎪","ticket":"🎫","clapper":"🎬","performing_arts":"🎭","video_game":"🎮","dart":"🎯","slot_machine":"🎰","8ball":"🎱","game_die":"🎲","bowling":"🎳","flower_playing_cards":"🎴","musical_note":"🎵","notes":"🎶","saxophone":"🎷","guitar":"🎸","musical_keyboard":"🎹","trumpet":"🎺","violin":"🎻","musical_score":"🎼","running_shirt_with_sash":"🎽","tennis":"🎾","ski":"🎿","basketball":"🏀","checkered_flag":"🏁","snowboarder":"🏂","woman-running":"🏃‍♀️","man-running":"🏃‍♂️","runner":"🏃‍♂️","running":"🏃‍♂️","woman-surfing":"🏄‍♀️","man-surfing":"🏄‍♂️","surfer":"🏄‍♂️","sports_medal":"🏅","trophy":"🏆","horse_racing":"🏇","football":"🏈","rugby_football":"🏉","woman-swimming":"🏊‍♀️","man-swimming":"🏊‍♂️","swimmer":"🏊‍♂️","woman-lifting-weights":"🏋️‍♀️","man-lifting-weights":"🏋️‍♂️","weight_lifter":"🏋️‍♂️","woman-golfing":"🏌️‍♀️","man-golfing":"🏌️‍♂️","golfer":"🏌️‍♂️","racing_motorcycle":"🏍️","racing_car":"🏎️","cricket_bat_and_ball":"🏏","volleyball":"🏐","field_hockey_stick_and_ball":"🏑","ice_hockey_stick_and_puck":"🏒","table_tennis_paddle_and_ball":"🏓","snow_capped_mountain":"🏔️","camping":"🏕️","beach_with_umbrella":"🏖️","building_construction":"🏗️","house_buildings":"🏘️","cityscape":"🏙️","derelict_house_building":"🏚️","classical_building":"🏛️","desert":"🏜️","desert_island":"🏝️","national_park":"🏞️","stadium":"🏟️","house":"🏠","house_with_garden":"🏡","office":"🏢","post_office":"🏣","european_post_office":"🏤","hospital":"🏥","bank":"🏦","atm":"🏧","hotel":"🏨","love_hotel":"🏩","convenience_store":"🏪","school":"🏫","department_store":"🏬","factory":"🏭","izakaya_lantern":"🏮","lantern":"🏮","japanese_castle":"🏯","european_castle":"🏰","rainbow-flag":"🏳️‍🌈","transgender_flag":"🏳️‍⚧️","waving_white_flag":"🏳️","pirate_flag":"🏴‍☠️","flag-england":"🏴󠁧󠁢󠁥󠁮󠁧󠁿","flag-scotland":"🏴󠁧󠁢󠁳󠁣󠁴󠁿","flag-wales":"🏴󠁧󠁢󠁷󠁬󠁳󠁿","waving_black_flag":"🏴","rosette":"🏵️","label":"🏷️","badminton_racquet_and_shuttlecock":"🏸","bow_and_arrow":"🏹","amphora":"🏺","skin-tone-2":"🏻","skin-tone-3":"🏼","skin-tone-4":"🏽","skin-tone-5":"🏾","skin-tone-6":"🏿","rat":"🐀","mouse2":"🐁","ox":"🐂","water_buffalo":"🐃","cow2":"🐄","tiger2":"🐅","leopard":"🐆","rabbit2":"🐇","black_cat":"🐈‍⬛","cat2":"🐈","dragon":"🐉","crocodile":"🐊","whale2":"🐋","snail":"🐌","snake":"🐍","racehorse":"🐎","ram":"🐏","goat":"🐐","sheep":"🐑","monkey":"🐒","rooster":"🐓","chicken":"🐔","service_dog":"🐕‍🦺","dog2":"🐕","pig2":"🐖","boar":"🐗","elephant":"🐘","octopus":"🐙","shell":"🐚","bug":"🐛","ant":"🐜","bee":"🐝","honeybee":"🐝","ladybug":"🐞","lady_beetle":"🐞","fish":"🐟","tropical_fish":"🐠","blowfish":"🐡","turtle":"🐢","hatching_chick":"🐣","baby_chick":"🐤","hatched_chick":"🐥","bird":"🐦","penguin":"🐧","koala":"🐨","poodle":"🐩","dromedary_camel":"🐪","camel":"🐫","dolphin":"🐬","flipper":"🐬","mouse":"🐭","cow":"🐮","tiger":"🐯","rabbit":"🐰","cat":"🐱","dragon_face":"🐲","whale":"🐳","horse":"🐴","monkey_face":"🐵","dog":"🐶","pig":"🐷","frog":"🐸","hamster":"🐹","wolf":"🐺","polar_bear":"🐻‍❄️","bear":"🐻","panda_face":"🐼","pig_nose":"🐽","feet":"🐾","paw_prints":"🐾","chipmunk":"🐿️","eyes":"👀","eye-in-speech-bubble":"👁️‍🗨️","eye":"👁️","ear":"👂","nose":"👃","lips":"👄","tongue":"👅","point_up_2":"👆","point_down":"👇","point_left":"👈","point_right":"👉","facepunch":"👊","punch":"👊","wave":"👋","ok_hand":"👌","+1":"👍","thumbsup":"👍","-1":"👎","thumbsdown":"👎","clap":"👏","open_hands":"👐","crown":"👑","womans_hat":"👒","eyeglasses":"👓","necktie":"👔","shirt":"👕","tshirt":"👕","jeans":"👖","dress":"👗","kimono":"👘","bikini":"👙","womans_clothes":"👚","purse":"👛","handbag":"👜","pouch":"👝","mans_shoe":"👞","shoe":"👞","athletic_shoe":"👟","high_heel":"👠","sandal":"👡","boot":"👢","footprints":"👣","bust_in_silhouette":"👤","busts_in_silhouette":"👥","boy":"👦","girl":"👧","male-farmer":"👨‍🌾","male-cook":"👨‍🍳","man_feeding_baby":"👨‍🍼","male-student":"👨‍🎓","male-singer":"👨‍🎤","male-artist":"👨‍🎨","male-teacher":"👨‍🏫","male-factory-worker":"👨‍🏭","man-boy-boy":"👨‍👦‍👦","man-boy":"👨‍👦","man-girl-boy":"👨‍👧‍👦","man-girl-girl":"👨‍👧‍👧","man-girl":"👨‍👧","man-man-boy":"👨‍👨‍👦","man-man-boy-boy":"👨‍👨‍👦‍👦","man-man-girl":"👨‍👨‍👧","man-man-girl-boy":"👨‍👨‍👧‍👦","man-man-girl-girl":"👨‍👨‍👧‍👧","man-woman-boy":"👨‍👩‍👦","family":"👨‍👩‍👦","man-woman-boy-boy":"👨‍👩‍👦‍👦","man-woman-girl":"👨‍👩‍👧","man-woman-girl-boy":"👨‍👩‍👧‍👦","man-woman-girl-girl":"👨‍👩‍👧‍👧","male-technologist":"👨‍💻","male-office-worker":"👨‍💼","male-mechanic":"👨‍🔧","male-scientist":"👨‍🔬","male-astronaut":"👨‍🚀","male-firefighter":"👨‍🚒","man_with_probing_cane":"👨‍🦯","red_haired_man":"👨‍🦰","curly_haired_man":"👨‍🦱","bald_man":"👨‍🦲","white_haired_man":"👨‍🦳","man_in_motorized_wheelchair":"👨‍🦼","man_in_manual_wheelchair":"👨‍🦽","male-doctor":"👨‍⚕️","male-judge":"👨‍⚖️","male-pilot":"👨‍✈️","man-heart-man":"👨‍❤️‍👨","man-kiss-man":"👨‍❤️‍💋‍👨","man":"👨","female-farmer":"👩‍🌾","female-cook":"👩‍🍳","woman_feeding_baby":"👩‍🍼","female-student":"👩‍🎓","female-singer":"👩‍🎤","female-artist":"👩‍🎨","female-teacher":"👩‍🏫","female-factory-worker":"👩‍🏭","woman-boy-boy":"👩‍👦‍👦","woman-boy":"👩‍👦","woman-girl-boy":"👩‍👧‍👦","woman-girl-girl":"👩‍👧‍👧","woman-girl":"👩‍👧","woman-woman-boy":"👩‍👩‍👦","woman-woman-boy-boy":"👩‍👩‍👦‍👦","woman-woman-girl":"👩‍👩‍👧","woman-woman-girl-boy":"👩‍👩‍👧‍👦","woman-woman-girl-girl":"👩‍👩‍👧‍👧","female-technologist":"👩‍💻","female-office-worker":"👩‍💼","female-mechanic":"👩‍🔧","female-scientist":"👩‍🔬","female-astronaut":"👩‍🚀","female-firefighter":"👩‍🚒","woman_with_probing_cane":"👩‍🦯","red_haired_woman":"👩‍🦰","curly_haired_woman":"👩‍🦱","bald_woman":"👩‍🦲","white_haired_woman":"👩‍🦳","woman_in_motorized_wheelchair":"👩‍🦼","woman_in_manual_wheelchair":"👩‍🦽","female-doctor":"👩‍⚕️","female-judge":"👩‍⚖️","female-pilot":"👩‍✈️","woman-heart-man":"👩‍❤️‍👨","woman-heart-woman":"👩‍❤️‍👩","woman-kiss-man":"👩‍❤️‍💋‍👨","woman-kiss-woman":"👩‍❤️‍💋‍👩","woman":"👩","man_and_woman_holding_hands":"👫","woman_and_man_holding_hands":"👫","couple":"👫","two_men_holding_hands":"👬","men_holding_hands":"👬","two_women_holding_hands":"👭","women_holding_hands":"👭","female-police-officer":"👮‍♀️","male-police-officer":"👮‍♂️","cop":"👮‍♂️","women-with-bunny-ears-partying":"👯‍♀️","woman-with-bunny-ears-partying":"👯‍♀️","dancers":"👯‍♀️","men-with-bunny-ears-partying":"👯‍♂️","man-with-bunny-ears-partying":"👯‍♂️","woman_with_veil":"👰‍♀️","man_with_veil":"👰‍♂️","bride_with_veil":"👰","blond-haired-woman":"👱‍♀️","blond-haired-man":"👱‍♂️","person_with_blond_hair":"👱‍♂️","man_with_gua_pi_mao":"👲","woman-wearing-turban":"👳‍♀️","man-wearing-turban":"👳‍♂️","man_with_turban":"👳‍♂️","older_man":"👴","older_woman":"👵","baby":"👶","female-construction-worker":"👷‍♀️","male-construction-worker":"👷‍♂️","construction_worker":"👷‍♂️","princess":"👸","japanese_ogre":"👹","japanese_goblin":"👺","ghost":"👻","angel":"👼","alien":"👽","space_invader":"👾","imp":"👿","skull":"💀","woman-tipping-hand":"💁‍♀️","information_desk_person":"💁‍♀️","man-tipping-hand":"💁‍♂️","female-guard":"💂‍♀️","male-guard":"💂‍♂️","guardsman":"💂‍♂️","dancer":"💃","lipstick":"💄","nail_care":"💅","woman-getting-massage":"💆‍♀️","massage":"💆‍♀️","man-getting-massage":"💆‍♂️","woman-getting-haircut":"💇‍♀️","haircut":"💇‍♀️","man-getting-haircut":"💇‍♂️","barber":"💈","syringe":"💉","pill":"💊","kiss":"💋","love_letter":"💌","ring":"💍","gem":"💎","couplekiss":"💏","bouquet":"💐","couple_with_heart":"💑","wedding":"💒","heartbeat":"💓","broken_heart":"💔","two_hearts":"💕","sparkling_heart":"💖","heartpulse":"💗","cupid":"💘","blue_heart":"💙","green_heart":"💚","yellow_heart":"💛","purple_heart":"💜","gift_heart":"💝","revolving_hearts":"💞","heart_decoration":"💟","diamond_shape_with_a_dot_inside":"💠","bulb":"💡","anger":"💢","bomb":"💣","zzz":"💤","boom":"💥","collision":"💥","sweat_drops":"💦","droplet":"💧","dash":"💨","hankey":"💩","poop":"💩","shit":"💩","muscle":"💪","dizzy":"💫","speech_balloon":"💬","thought_balloon":"💭","white_flower":"💮","moneybag":"💰","currency_exchange":"💱","heavy_dollar_sign":"💲","credit_card":"💳","yen":"💴","dollar":"💵","euro":"💶","pound":"💷","money_with_wings":"💸","chart":"💹","seat":"💺","computer":"💻","briefcase":"💼","minidisc":"💽","floppy_disk":"💾","cd":"💿","dvd":"📀","file_folder":"📁","open_file_folder":"📂","page_with_curl":"📃","page_facing_up":"📄","date":"📅","calendar":"📆","card_index":"📇","chart_with_upwards_trend":"📈","chart_with_downwards_trend":"📉","bar_chart":"📊","clipboard":"📋","pushpin":"📌","round_pushpin":"📍","paperclip":"📎","straight_ruler":"📏","triangular_ruler":"📐","bookmark_tabs":"📑","ledger":"📒","notebook":"📓","notebook_with_decorative_cover":"📔","closed_book":"📕","book":"📖","open_book":"📖","green_book":"📗","blue_book":"📘","orange_book":"📙","books":"📚","name_badge":"📛","scroll":"📜","memo":"📝","pencil":"📝","telephone_receiver":"📞","pager":"📟","fax":"📠","satellite_antenna":"📡","loudspeaker":"📢","mega":"📣","outbox_tray":"📤","inbox_tray":"📥","package":"📦","e-mail":"📧","incoming_envelope":"📨","envelope_with_arrow":"📩","mailbox_closed":"📪","mailbox":"📫","mailbox_with_mail":"📬","mailbox_with_no_mail":"📭","postbox":"📮","postal_horn":"📯","newspaper":"📰","iphone":"📱","calling":"📲","vibration_mode":"📳","mobile_phone_off":"📴","no_mobile_phones":"📵","signal_strength":"📶","camera":"📷","camera_with_flash":"📸","video_camera":"📹","tv":"📺","radio":"📻","vhs":"📼","film_projector":"📽️","prayer_beads":"📿","twisted_rightwards_arrows":"🔀","repeat":"🔁","repeat_one":"🔂","arrows_clockwise":"🔃","arrows_counterclockwise":"🔄","low_brightness":"🔅","high_brightness":"🔆","mute":"🔇","speaker":"🔈","sound":"🔉","loud_sound":"🔊","battery":"🔋","electric_plug":"🔌","mag":"🔍","mag_right":"🔎","lock_with_ink_pen":"🔏","closed_lock_with_key":"🔐","key":"🔑","lock":"🔒","unlock":"🔓","bell":"🔔","no_bell":"🔕","bookmark":"🔖","link":"🔗","radio_button":"🔘","back":"🔙","end":"🔚","on":"🔛","soon":"🔜","top":"🔝","underage":"🔞","keycap_ten":"🔟","capital_abcd":"🔠","abcd":"🔡","symbols":"🔣","abc":"🔤","fire":"🔥","flashlight":"🔦","wrench":"🔧","hammer":"🔨","nut_and_bolt":"🔩","hocho":"🔪","knife":"🔪","gun":"🔫","microscope":"🔬","telescope":"🔭","crystal_ball":"🔮","six_pointed_star":"🔯","beginner":"🔰","trident":"🔱","black_square_button":"🔲","white_square_button":"🔳","red_circle":"🔴","large_blue_circle":"🔵","large_orange_diamond":"🔶","large_blue_diamond":"🔷","small_orange_diamond":"🔸","small_blue_diamond":"🔹","small_red_triangle":"🔺","small_red_triangle_down":"🔻","arrow_up_small":"🔼","arrow_down_small":"🔽","om_symbol":"🕉️","dove_of_peace":"🕊️","kaaba":"🕋","mosque":"🕌","synagogue":"🕍","menorah_with_nine_branches":"🕎","clock1":"🕐","clock2":"🕑","clock3":"🕒","clock4":"🕓","clock5":"🕔","clock6":"🕕","clock7":"🕖","clock8":"🕗","clock9":"🕘","clock10":"🕙","clock11":"🕚","clock12":"🕛","clock130":"🕜","clock230":"🕝","clock330":"🕞","clock430":"🕟","clock530":"🕠","clock630":"🕡","clock730":"🕢","clock830":"🕣","clock930":"🕤","clock1030":"🕥","clock1130":"🕦","clock1230":"🕧","candle":"🕯️","mantelpiece_clock":"🕰️","hole":"🕳️","man_in_business_suit_levitating":"🕴️","female-detective":"🕵️‍♀️","male-detective":"🕵️‍♂️","sleuth_or_spy":"🕵️‍♂️","dark_sunglasses":"🕶️","spider":"🕷️","spider_web":"🕸️","joystick":"🕹️","man_dancing":"🕺","linked_paperclips":"🖇️","lower_left_ballpoint_pen":"🖊️","lower_left_fountain_pen":"🖋️","lower_left_paintbrush":"🖌️","lower_left_crayon":"🖍️","raised_hand_with_fingers_splayed":"🖐️","middle_finger":"🖕","reversed_hand_with_middle_finger_extended":"🖕","spock-hand":"🖖","black_heart":"🖤","desktop_computer":"🖥️","printer":"🖨️","three_button_mouse":"🖱️","trackball":"🖲️","frame_with_picture":"🖼️","card_index_dividers":"🗂️","card_file_box":"🗃️","file_cabinet":"🗄️","wastebasket":"🗑️","spiral_note_pad":"🗒️","spiral_calendar_pad":"🗓️","compression":"🗜️","old_key":"🗝️","rolled_up_newspaper":"🗞️","dagger_knife":"🗡️","speaking_head_in_silhouette":"🗣️","left_speech_bubble":"🗨️","right_anger_bubble":"🗯️","ballot_box_with_ballot":"🗳️","world_map":"🗺️","mount_fuji":"🗻","tokyo_tower":"🗼","statue_of_liberty":"🗽","japan":"🗾","moyai":"🗿","grinning":"😀","grin":"😁","joy":"😂","smiley":"😃","smile":"😄","sweat_smile":"😅","laughing":"😆","satisfied":"😆","innocent":"😇","smiling_imp":"😈","wink":"😉","blush":"😊","yum":"😋","relieved":"😌","heart_eyes":"😍","sunglasses":"😎","smirk":"😏","neutral_face":"😐","expressionless":"😑","unamused":"😒","sweat":"😓","pensive":"😔","confused":"😕","confounded":"😖","kissing":"😗","kissing_heart":"😘","kissing_smiling_eyes":"😙","kissing_closed_eyes":"😚","stuck_out_tongue":"😛","stuck_out_tongue_winking_eye":"😜","stuck_out_tongue_closed_eyes":"😝","disappointed":"😞","worried":"😟","angry":"😠","rage":"😡","cry":"😢","persevere":"😣","triumph":"😤","disappointed_relieved":"😥","frowning":"😦","anguished":"😧","fearful":"😨","weary":"😩","sleepy":"😪","tired_face":"😫","grimacing":"😬","sob":"😭","face_exhaling":"😮‍💨","open_mouth":"😮","hushed":"😯","cold_sweat":"😰","scream":"😱","astonished":"😲","flushed":"😳","sleeping":"😴","face_with_spiral_eyes":"😵‍💫","dizzy_face":"😵","face_in_clouds":"😶‍🌫️","no_mouth":"😶","mask":"😷","smile_cat":"😸","joy_cat":"😹","smiley_cat":"😺","heart_eyes_cat":"😻","smirk_cat":"😼","kissing_cat":"😽","pouting_cat":"😾","crying_cat_face":"😿","scream_cat":"🙀","slightly_frowning_face":"🙁","slightly_smiling_face":"🙂","upside_down_face":"🙃","face_with_rolling_eyes":"🙄","woman-gesturing-no":"🙅‍♀️","no_good":"🙅‍♀️","man-gesturing-no":"🙅‍♂️","woman-gesturing-ok":"🙆‍♀️","ok_woman":"🙆‍♀️","man-gesturing-ok":"🙆‍♂️","woman-bowing":"🙇‍♀️","man-bowing":"🙇‍♂️","bow":"🙇‍♂️","see_no_evil":"🙈","hear_no_evil":"🙉","speak_no_evil":"🙊","woman-raising-hand":"🙋‍♀️","raising_hand":"🙋‍♀️","man-raising-hand":"🙋‍♂️","raised_hands":"🙌","woman-frowning":"🙍‍♀️","person_frowning":"🙍‍♀️","man-frowning":"🙍‍♂️","woman-pouting":"🙎‍♀️","person_with_pouting_face":"🙎‍♀️","man-pouting":"🙎‍♂️","pray":"🙏","rocket":"🚀","helicopter":"🚁","steam_locomotive":"🚂","railway_car":"🚃","bullettrain_side":"🚄","bullettrain_front":"🚅","train2":"🚆","metro":"🚇","light_rail":"🚈","station":"🚉","tram":"🚊","train":"🚋","bus":"🚌","oncoming_bus":"🚍","trolleybus":"🚎","busstop":"🚏","minibus":"🚐","ambulance":"🚑","fire_engine":"🚒","police_car":"🚓","oncoming_police_car":"🚔","taxi":"🚕","oncoming_taxi":"🚖","car":"🚗","red_car":"🚗","oncoming_automobile":"🚘","blue_car":"🚙","truck":"🚚","articulated_lorry":"🚛","tractor":"🚜","monorail":"🚝","mountain_railway":"🚞","suspension_railway":"🚟","mountain_cableway":"🚠","aerial_tramway":"🚡","ship":"🚢","woman-rowing-boat":"🚣‍♀️","man-rowing-boat":"🚣‍♂️","rowboat":"🚣‍♂️","speedboat":"🚤","traffic_light":"🚥","vertical_traffic_light":"🚦","construction":"🚧","rotating_light":"🚨","triangular_flag_on_post":"🚩","door":"🚪","no_entry_sign":"🚫","smoking":"🚬","no_smoking":"🚭","put_litter_in_its_place":"🚮","do_not_litter":"🚯","potable_water":"🚰","non-potable_water":"🚱","bike":"🚲","no_bicycles":"🚳","woman-biking":"🚴‍♀️","man-biking":"🚴‍♂️","bicyclist":"🚴‍♂️","woman-mountain-biking":"🚵‍♀️","man-mountain-biking":"🚵‍♂️","mountain_bicyclist":"🚵‍♂️","woman-walking":"🚶‍♀️","man-walking":"🚶‍♂️","walking":"🚶‍♂️","no_pedestrians":"🚷","children_crossing":"🚸","mens":"🚹","womens":"🚺","restroom":"🚻","baby_symbol":"🚼","toilet":"🚽","wc":"🚾","shower":"🚿","bath":"🛀","bathtub":"🛁","passport_control":"🛂","customs":"🛃","baggage_claim":"🛄","left_luggage":"🛅","couch_and_lamp":"🛋️","sleeping_accommodation":"🛌","shopping_bags":"🛍️","bellhop_bell":"🛎️","bed":"🛏️","place_of_worship":"🛐","octagonal_sign":"🛑","shopping_trolley":"🛒","hindu_temple":"🛕","hut":"🛖","elevator":"🛗","hammer_and_wrench":"🛠️","shield":"🛡️","oil_drum":"🛢️","motorway":"🛣️","railway_track":"🛤️","motor_boat":"🛥️","small_airplane":"🛩️","airplane_departure":"🛫","airplane_arriving":"🛬","satellite":"🛰️","passenger_ship":"🛳️","scooter":"🛴","motor_scooter":"🛵","canoe":"🛶","sled":"🛷","flying_saucer":"🛸","skateboard":"🛹","auto_rickshaw":"🛺","pickup_truck":"🛻","roller_skate":"🛼","large_orange_circle":"🟠","large_yellow_circle":"🟡","large_green_circle":"🟢","large_purple_circle":"🟣","large_brown_circle":"🟤","large_red_square":"🟥","large_blue_square":"🟦","large_orange_square":"🟧","large_yellow_square":"🟨","large_green_square":"🟩","large_purple_square":"🟪","large_brown_square":"🟫","pinched_fingers":"🤌","white_heart":"🤍","brown_heart":"🤎","pinching_hand":"🤏","zipper_mouth_face":"🤐","money_mouth_face":"🤑","face_with_thermometer":"🤒","nerd_face":"🤓","thinking_face":"🤔","face_with_head_bandage":"🤕","robot_face":"🤖","hugging_face":"🤗","the_horns":"🤘","sign_of_the_horns":"🤘","call_me_hand":"🤙","raised_back_of_hand":"🤚","left-facing_fist":"🤛","right-facing_fist":"🤜","handshake":"🤝","crossed_fingers":"🤞","hand_with_index_and_middle_fingers_crossed":"🤞","i_love_you_hand_sign":"🤟","face_with_cowboy_hat":"🤠","clown_face":"🤡","nauseated_face":"🤢","rolling_on_the_floor_laughing":"🤣","drooling_face":"🤤","lying_face":"🤥","woman-facepalming":"🤦‍♀️","man-facepalming":"🤦‍♂️","face_palm":"🤦","sneezing_face":"🤧","face_with_raised_eyebrow":"🤨","face_with_one_eyebrow_raised":"🤨","star-struck":"🤩","grinning_face_with_star_eyes":"🤩","zany_face":"🤪","grinning_face_with_one_large_and_one_small_eye":"🤪","shushing_face":"🤫","face_with_finger_covering_closed_lips":"🤫","face_with_symbols_on_mouth":"🤬","serious_face_with_symbols_covering_mouth":"🤬","face_with_hand_over_mouth":"🤭","smiling_face_with_smiling_eyes_and_hand_covering_mouth":"🤭","face_vomiting":"🤮","face_with_open_mouth_vomiting":"🤮","exploding_head":"🤯","shocked_face_with_exploding_head":"🤯","pregnant_woman":"🤰","breast-feeding":"🤱","palms_up_together":"🤲","selfie":"🤳","prince":"🤴","woman_in_tuxedo":"🤵‍♀️","man_in_tuxedo":"🤵‍♂️","person_in_tuxedo":"🤵","mrs_claus":"🤶","mother_christmas":"🤶","woman-shrugging":"🤷‍♀️","man-shrugging":"🤷‍♂️","shrug":"🤷","woman-cartwheeling":"🤸‍♀️","man-cartwheeling":"🤸‍♂️","person_doing_cartwheel":"🤸","woman-juggling":"🤹‍♀️","man-juggling":"🤹‍♂️","juggling":"🤹","fencer":"🤺","woman-wrestling":"🤼‍♀️","man-wrestling":"🤼‍♂️","wrestlers":"🤼","woman-playing-water-polo":"🤽‍♀️","man-playing-water-polo":"🤽‍♂️","water_polo":"🤽","woman-playing-handball":"🤾‍♀️","man-playing-handball":"🤾‍♂️","handball":"🤾","diving_mask":"🤿","wilted_flower":"🥀","drum_with_drumsticks":"🥁","clinking_glasses":"🥂","tumbler_glass":"🥃","spoon":"🥄","goal_net":"🥅","first_place_medal":"🥇","second_place_medal":"🥈","third_place_medal":"🥉","boxing_glove":"🥊","martial_arts_uniform":"🥋","curling_stone":"🥌","lacrosse":"🥍","softball":"🥎","flying_disc":"🥏","croissant":"🥐","avocado":"🥑","cucumber":"🥒","bacon":"🥓","potato":"🥔","carrot":"🥕","baguette_bread":"🥖","green_salad":"🥗","shallow_pan_of_food":"🥘","stuffed_flatbread":"🥙","egg":"🥚","glass_of_milk":"🥛","peanuts":"🥜","kiwifruit":"🥝","pancakes":"🥞","dumpling":"🥟","fortune_cookie":"🥠","takeout_box":"🥡","chopsticks":"🥢","bowl_with_spoon":"🥣","cup_with_straw":"🥤","coconut":"🥥","broccoli":"🥦","pie":"🥧","pretzel":"🥨","cut_of_meat":"🥩","sandwich":"🥪","canned_food":"🥫","leafy_green":"🥬","mango":"🥭","moon_cake":"🥮","bagel":"🥯","smiling_face_with_3_hearts":"🥰","yawning_face":"🥱","smiling_face_with_tear":"🥲","partying_face":"🥳","woozy_face":"🥴","hot_face":"🥵","cold_face":"🥶","ninja":"🥷","disguised_face":"🥸","pleading_face":"🥺","sari":"🥻","lab_coat":"🥼","goggles":"🥽","hiking_boot":"🥾","womans_flat_shoe":"🥿","crab":"🦀","lion_face":"🦁","scorpion":"🦂","turkey":"🦃","unicorn_face":"🦄","eagle":"🦅","duck":"🦆","bat":"🦇","shark":"🦈","owl":"🦉","fox_face":"🦊","butterfly":"🦋","deer":"🦌","gorilla":"🦍","lizard":"🦎","rhinoceros":"🦏","shrimp":"🦐","squid":"🦑","giraffe_face":"🦒","zebra_face":"🦓","hedgehog":"🦔","sauropod":"🦕","t-rex":"🦖","cricket":"🦗","kangaroo":"🦘","llama":"🦙","peacock":"🦚","hippopotamus":"🦛","parrot":"🦜","raccoon":"🦝","lobster":"🦞","mosquito":"🦟","microbe":"🦠","badger":"🦡","swan":"🦢","mammoth":"🦣","dodo":"🦤","sloth":"🦥","otter":"🦦","orangutan":"🦧","skunk":"🦨","flamingo":"🦩","oyster":"🦪","beaver":"🦫","bison":"🦬","seal":"🦭","guide_dog":"🦮","probing_cane":"🦯","bone":"🦴","leg":"🦵","foot":"🦶","tooth":"🦷","female_superhero":"🦸‍♀️","male_superhero":"🦸‍♂️","superhero":"🦸","female_supervillain":"🦹‍♀️","male_supervillain":"🦹‍♂️","supervillain":"🦹","safety_vest":"🦺","ear_with_hearing_aid":"🦻","motorized_wheelchair":"🦼","manual_wheelchair":"🦽","mechanical_arm":"🦾","mechanical_leg":"🦿","cheese_wedge":"🧀","cupcake":"🧁","salt":"🧂","beverage_box":"🧃","garlic":"🧄","onion":"🧅","falafel":"🧆","waffle":"🧇","butter":"🧈","mate_drink":"🧉","ice_cube":"🧊","bubble_tea":"🧋","woman_standing":"🧍‍♀️","man_standing":"🧍‍♂️","standing_person":"🧍","woman_kneeling":"🧎‍♀️","man_kneeling":"🧎‍♂️","kneeling_person":"🧎","deaf_woman":"🧏‍♀️","deaf_man":"🧏‍♂️","deaf_person":"🧏","face_with_monocle":"🧐","farmer":"🧑‍🌾","cook":"🧑‍🍳","person_feeding_baby":"🧑‍🍼","mx_claus":"🧑‍🎄","student":"🧑‍🎓","singer":"🧑‍🎤","artist":"🧑‍🎨","teacher":"🧑‍🏫","factory_worker":"🧑‍🏭","technologist":"🧑‍💻","office_worker":"🧑‍💼","mechanic":"🧑‍🔧","scientist":"🧑‍🔬","astronaut":"🧑‍🚀","firefighter":"🧑‍🚒","people_holding_hands":"🧑‍🤝‍🧑","person_with_probing_cane":"🧑‍🦯","red_haired_person":"🧑‍🦰","curly_haired_person":"🧑‍🦱","bald_person":"🧑‍🦲","white_haired_person":"🧑‍🦳","person_in_motorized_wheelchair":"🧑‍🦼","person_in_manual_wheelchair":"🧑‍🦽","health_worker":"🧑‍⚕️","judge":"🧑‍⚖️","pilot":"🧑‍✈️","adult":"🧑","child":"🧒","older_adult":"🧓","woman_with_beard":"🧔‍♀️","man_with_beard":"🧔‍♂️","bearded_person":"🧔","person_with_headscarf":"🧕","woman_in_steamy_room":"🧖‍♀️","man_in_steamy_room":"🧖‍♂️","person_in_steamy_room":"🧖‍♂️","woman_climbing":"🧗‍♀️","person_climbing":"🧗‍♀️","man_climbing":"🧗‍♂️","woman_in_lotus_position":"🧘‍♀️","person_in_lotus_position":"🧘‍♀️","man_in_lotus_position":"🧘‍♂️","female_mage":"🧙‍♀️","mage":"🧙‍♀️","male_mage":"🧙‍♂️","female_fairy":"🧚‍♀️","fairy":"🧚‍♀️","male_fairy":"🧚‍♂️","female_vampire":"🧛‍♀️","vampire":"🧛‍♀️","male_vampire":"🧛‍♂️","mermaid":"🧜‍♀️","merman":"🧜‍♂️","merperson":"🧜‍♂️","female_elf":"🧝‍♀️","male_elf":"🧝‍♂️","elf":"🧝‍♂️","female_genie":"🧞‍♀️","male_genie":"🧞‍♂️","genie":"🧞‍♂️","female_zombie":"🧟‍♀️","male_zombie":"🧟‍♂️","zombie":"🧟‍♂️","brain":"🧠","orange_heart":"🧡","billed_cap":"🧢","scarf":"🧣","gloves":"🧤","coat":"🧥","socks":"🧦","red_envelope":"🧧","firecracker":"🧨","jigsaw":"🧩","test_tube":"🧪","petri_dish":"🧫","dna":"🧬","compass":"🧭","abacus":"🧮","fire_extinguisher":"🧯","toolbox":"🧰","bricks":"🧱","magnet":"🧲","luggage":"🧳","lotion_bottle":"🧴","thread":"🧵","yarn":"🧶","safety_pin":"🧷","teddy_bear":"🧸","broom":"🧹","basket":"🧺","roll_of_paper":"🧻","soap":"🧼","sponge":"🧽","receipt":"🧾","nazar_amulet":"🧿","ballet_shoes":"🩰","one-piece_swimsuit":"🩱","briefs":"🩲","shorts":"🩳","thong_sandal":"🩴","drop_of_blood":"🩸","adhesive_bandage":"🩹","stethoscope":"🩺","yo-yo":"🪀","kite":"🪁","parachute":"🪂","boomerang":"🪃","magic_wand":"🪄","pinata":"🪅","nesting_dolls":"🪆","ringed_planet":"🪐","chair":"🪑","razor":"🪒","axe":"🪓","diya_lamp":"🪔","banjo":"🪕","military_helmet":"🪖","accordion":"🪗","long_drum":"🪘","coin":"🪙","carpentry_saw":"🪚","screwdriver":"🪛","ladder":"🪜","hook":"🪝","mirror":"🪞","window":"🪟","plunger":"🪠","sewing_needle":"🪡","knot":"🪢","bucket":"🪣","mouse_trap":"🪤","toothbrush":"🪥","headstone":"🪦","placard":"🪧","rock":"🪨","fly":"🪰","worm":"🪱","beetle":"🪲","cockroach":"🪳","potted_plant":"🪴","wood":"🪵","feather":"🪶","anatomical_heart":"🫀","lungs":"🫁","people_hugging":"🫂","blueberries":"🫐","bell_pepper":"🫑","olive":"🫒","flatbread":"🫓","tamale":"🫔","fondue":"🫕","teapot":"🫖","bangbang":"‼️","interrobang":"⁉️","tm":"™️","information_source":"ℹ️","left_right_arrow":"↔️","arrow_up_down":"↕️","arrow_upper_left":"↖️","arrow_upper_right":"↗️","arrow_lower_right":"↘️","arrow_lower_left":"↙️","leftwards_arrow_with_hook":"↩️","arrow_right_hook":"↪️","watch":"⌚","hourglass":"⌛","keyboard":"⌨️","eject":"⏏️","fast_forward":"⏩","rewind":"⏪","arrow_double_up":"⏫","arrow_double_down":"⏬","black_right_pointing_double_triangle_with_vertical_bar":"⏭️","black_left_pointing_double_triangle_with_vertical_bar":"⏮️","black_right_pointing_triangle_with_double_vertical_bar":"⏯️","alarm_clock":"⏰","stopwatch":"⏱️","timer_clock":"⏲️","hourglass_flowing_sand":"⏳","double_vertical_bar":"⏸️","black_square_for_stop":"⏹️","black_circle_for_record":"⏺️","m":"Ⓜ️","black_small_square":"▪️","white_small_square":"▫️","arrow_forward":"▶️","arrow_backward":"◀️","white_medium_square":"◻️","black_medium_square":"◼️","white_medium_small_square":"◽","black_medium_small_square":"◾","sunny":"☀️","cloud":"☁️","umbrella":"☂️","snowman":"☃️","comet":"☄️","phone":"☎️","telephone":"☎️","ballot_box_with_check":"☑️","shamrock":"☘️","point_up":"☝️","skull_and_crossbones":"☠️","radioactive_sign":"☢️","biohazard_sign":"☣️","orthodox_cross":"☦️","star_and_crescent":"☪️","peace_symbol":"☮️","yin_yang":"☯️","wheel_of_dharma":"☸️","white_frowning_face":"☹️","relaxed":"☺️","female_sign":"♀️","male_sign":"♂️","gemini":"♊","cancer":"♋","leo":"♌","virgo":"♍","libra":"♎","scorpius":"♏","chess_pawn":"♟️","spades":"♠️","clubs":"♣️","hearts":"♥️","diamonds":"♦️","hotsprings":"♨️","recycle":"♻️","infinity":"♾️","wheelchair":"♿","hammer_and_pick":"⚒️","crossed_swords":"⚔️","medical_symbol":"⚕️","staff_of_aesculapius":"⚕️","scales":"⚖️","alembic":"⚗️","gear":"⚙️","atom_symbol":"⚛️","fleur_de_lis":"⚜️","warning":"⚠️","zap":"⚡","transgender_symbol":"⚧️","white_circle":"⚪","black_circle":"⚫","coffin":"⚰️","funeral_urn":"⚱️","soccer":"⚽","baseball":"⚾","snowman_without_snow":"⛄","partly_sunny":"⛅","thunder_cloud_and_rain":"⛈️","ophiuchus":"⛎","pick":"⛏️","helmet_with_white_cross":"⛑️","chains":"⛓️","no_entry":"⛔","shinto_shrine":"⛩️","church":"⛪","mountain":"⛰️","umbrella_on_ground":"⛱️","fountain":"⛲","golf":"⛳","ferry":"⛴️","boat":"⛵","sailboat":"⛵","skier":"⛷️","ice_skate":"⛸️","woman-bouncing-ball":"⛹️‍♀️","man-bouncing-ball":"⛹️‍♂️","person_with_ball":"⛹️‍♂️","tent":"⛺","fuelpump":"⛽","scissors":"✂️","airplane":"✈️","email":"✉️","envelope":"✉️","fist":"✊","hand":"✋","raised_hand":"✋","v":"✌️","writing_hand":"✍️","pencil2":"✏️","black_nib":"✒️","heavy_check_mark":"✔️","heavy_multiplication_x":"✖️","latin_cross":"✝️","star_of_david":"✡️","eight_spoked_asterisk":"✳️","eight_pointed_black_star":"✴️","snowflake":"❄️","sparkle":"❇️","x":"❌","negative_squared_cross_mark":"❎","heavy_heart_exclamation_mark_ornament":"❣️","heart_on_fire":"❤️‍🔥","mending_heart":"❤️‍🩹","heart":"❤️","arrow_right":"➡️","curly_loop":"➰","loop":"➿","arrow_heading_up":"⤴️","arrow_heading_down":"⤵️","arrow_left":"⬅️","arrow_up":"⬆️","arrow_down":"⬇️","black_large_square":"⬛","white_large_square":"⬜","star":"⭐","o":"⭕","wavy_dash":"〰️","part_alternation_mark":"〽️","congratulations":"㊗️","secret":"㊙️"}')}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={id:s,loaded:!1,exports:{}};return e[s](o,o.exports,n),o.loaded=!0,o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e=n(4157),t=n(9412),s=n(4907),i=n(8153),o=n(9378),r=n(7728),a=n(8338),l=n(2650),c=n(6882);const h=()=>o.M,u={callContextMenuFunction:t.vi,callMainMenuFunction:t.nY,setThemeInRenderer:s.cR,push:async()=>{const e=h();e.$repo&&await(0,i.VC)(e.$repo)},fetch:function(){h().$repo?.repo.fetch()},pull:function(){h().$repo?.repo.pull()},goToChanges:()=>{h().$repo?.nav.goToWipView()},goToCommits:()=>{h().$repo?.nav.goToCommitsView()},goToBranches:()=>{h().$repo?.nav.setShowingRefView(!0)},createRepo:()=>(0,r.G)(h()),cloneRepo:()=>(0,a.j)(h()),openRepo:()=>(0,l.NV)(h()),openRecentRepo:async e=>{await h().setRepoPath(e)},closeRepo:()=>(0,l.AT)(h()),showMissingGitDialog:()=>(0,c.a6)(h())};var m=n(5131);e.ipcRenderer.on("call-in-renderer",((t,n)=>{const s={result:u[n.functionName](...n.args),callNum:n.callNum};e.ipcRenderer.send("call-in-renderer",s)})),(0,m.e)(o.M).catch()})()})();