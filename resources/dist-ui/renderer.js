(()=>{var e={9853:e=>{var t=.1,s="function"==typeof Float32Array;function n(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function o(e){return 3*e}function r(e,t,s){return((n(t,s)*e+i(t,s))*e+o(t))*e}function a(e,t,s){return 3*n(t,s)*e*e+2*i(t,s)*e+o(t)}function l(e){return e}e.exports=function(e,n,i,o){if(!(0<=e&&e<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===n&&i===o)return l;for(var c=s?new Float32Array(11):new Array(11),h=0;h<11;++h)c[h]=r(h*t,e,i);return function(s){return 0===s?0:1===s?1:r(function(s){for(var n=0,o=1;10!==o&&c[o]<=s;++o)n+=t;--o;var l=n+(s-c[o])/(c[o+1]-c[o])*t,h=a(l,e,i);return h>=.001?function(e,t,s,n){for(var i=0;i<4;++i){var o=a(t,s,n);if(0===o)return t;t-=(r(t,s,n)-e)/o}return t}(s,l,e,i):0===h?l:function(e,t,s,n,i){var o,a,l=0;do{(o=r(a=t+(s-t)/2,n,i)-e)>0?s=a:t=a}while(Math.abs(o)>1e-7&&++l<10);return a}(s,n,n+t,e,i)}(s),n,o)}}},2888:(e,t,s)=>{"use strict";s.d(t,{Custom:()=>m.S,Fragment:()=>a,MapPool:()=>i.F,Reaction:()=>n.q,c:()=>o.c,createElement:()=>c,createRef:()=>h,init$:()=>r.F,renderRoot:()=>u.f});var n=s(7477),i=s(5229),o=s(8290),r=s(9092);class a{}const l={display:"contents"};function c(e,t){const s=t??{children:void 0};if(arguments.length>2)if(Array.isArray(arguments[2]))s.children=arguments[2];else{const e=[];for(let t=2;t<arguments.length;t++)e.push(arguments[t]);s.children=e}return"string"==typeof e?{kind:"dom",name:e,props:s}:e===a?(s.style=l,{kind:"dom",name:"div",props:s}):{kind:"custom",name:e,props:s}}function h(){return{current:null}}var u=s(1907),m=s(5183)},5183:(e,t,s)=>{"use strict";s.d(t,{S:()=>u,T:()=>d});var n=s(8280),i=s(8290),o=s(9322),r=s(4731),a=s(9092),l=s(7354),c=Object.defineProperty,h=(e,t,s)=>((e,t,s)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class u{constructor(e,t,s,i,o){this.props=e,this.directParent=t,this.domParent=s,this.index=i,this.skipInit$=o,h(this,"kind","custom"),h(this,"subComponent",null),h(this,"order"),h(this,"key"),h(this,"__ref",new WeakRef(this)),h(this,"__removed",!1),this.order=n.p.key(t.order,i),this.key=this.props?.key??t.key+i}updateWithNewProps(e){(0,i.rK)(this.props,e)||(this.props=e,this.update())}mount(){this.skipInit$||(0,a.F)(this),this.runRender(),r.S.didMountStack.add(this.__ref)}runRender(){if(this.__removed)return;r.S.renderedList.add(this),r.S.push(this.__ref);const e=this.render();r.S.pop(),null!==e?this.subComponent=o.d.component(e,this.subComponent,this,this.domParent,0):null!==this.subComponent&&(l.n.component(this.subComponent),this.subComponent=null)}update(){this.runRender(),r.S.didUpdateStack.add(this.__ref)}forceUpdate(){r.S.markDirty(this.__ref)}componentDidMount(){}componentDidUpdate(){}componentWillUnmount(){}}const m=new Map;function d(e,t,s,n){if(u.isPrototypeOf(e.name)){const{name:i,props:o}=e,r=new i(o,t,s,n,!1);return r.mount(),r}const{name:i,props:o}=e,r=m.get(i);if(r){const e=new r(o,t,s,n,!0);return e.mount(),e}const a=class extends u{render(){return i(this.props)}};m.set(i,a);const l=new a(o,t,s,n,!0);return l.mount(),l}},2230:(e,t,s)=>{"use strict";s.d(t,{J:()=>h,g:()=>c});var n=s(4113),i=s(9322),o=s(8280),r=s(5229),a=Object.defineProperty,l=(e,t,s)=>((e,t,s)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);const c=new r.F,h=new class{constructor(){l(this,"pool",[]),l(this,"emptyProps",{})}returnComponent(e){e.props=this.emptyProps,e.inserted.length>0&&(e.inserted.length=0),e.subComponents.size>0&&(e.subComponents=c.newMap()),e.siblings=new WeakMap,this.pool.push(e)}newComponent(e,t,s,r){const a=this.pool.pop();if(a){const{name:l,props:c}=e,h="svg"===l?"svg":s.namespace;return a.name=l,a.props=c,a.element="dom"===h?document.createElement(l):document.createElementNS("http://www.w3.org/2000/svg",l),a.key=c?.key??t.key+r,a.order=o.p.key(t.order,r),a.directParent=t,a.domParent=s,a.index=r,a.namespace=h,(0,n.ek)(a.element,a.namespace,c),a.subComponents=i.d.subComponents(a,a,c.children,a.subComponents),o.p.insert(s,a),a}return function(e,t,s,r){const{name:a,props:l}=e,h="svg"===a?"svg":s.namespace,u={kind:"dom",name:a,props:l,element:"dom"===h?document.createElement(a):document.createElementNS("http://www.w3.org/2000/svg",a),order:o.p.key(t.order,r),key:l?.key??t.key+r,inserted:[],subComponents:c.newMap(),siblings:new WeakMap,directParent:t,domParent:s,index:r,namespace:h};return(0,n.ek)(u.element,u.namespace,l),u.subComponents=i.d.subComponents(u,u,l.children,u.subComponents),o.p.insert(s,u),u}(e,t,s,r)}}},6635:(e,t,s)=>{"use strict";s.d(t,{x:()=>r});var n,i=s(8280),o=Object.defineProperty;class r{static makeTextComponent(e,t,s,n){const o=this.components.pop();return o?(function(e,t,s,n,o){e.meta=t,e.key=s.key+o,e.order=i.p.key(s.order,o),e.element.data=t,e.domParent=n,e.index=o,i.p.insert(n,e)}(o,e,t,s,n),o):function(e,t,s,n){const o={kind:"text",element:document.createTextNode(e),order:i.p.key(t.order,n),key:t.key+n,meta:e,index:n,domParent:s};return i.p.insert(s,o),o}(e,t,s,n)}static add(e){this.components.push(e)}}((e,t,s)=>{t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(r,"symbol"!=typeof(n="components")?n+"":n,[])},1907:(e,t,s)=>{"use strict";s.d(t,{f:()=>l});var n=Object.defineProperty,i=(e,t,s)=>((e,t,s)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class o{constructor(e){this.element=e,i(this,"order","1"),i(this,"key","root"),i(this,"inserted",[]),i(this,"siblings",new WeakMap),i(this,"namespace"),this.namespace="svg"===e.nodeName?"svg":"dom"}}var r=s(9322),a=s(4731);function l(e,t){if(null===t)throw new Error("Cottontail render: Root element is null");if(null==e)throw new Error("Cottontail render: Meta is null");"number"==typeof e&&(e=e.toString());const s=new o(t);r.d.component(e,null,s,s,0),a.S.drawFrame()}Object.defineProperty},4731:(e,t,s)=>{"use strict";s.d(t,{S:()=>l});var n=s(8280),i=s(8290),o=Object.defineProperty,r=(e,t,s)=>((e,t,s)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);const a=class{static push(e){this.currentComponentOrReaction.push(e)}static pop(){this.currentComponentOrReaction.pop()}static getCurrent(){return this.currentComponentOrReaction[this.currentComponentOrReaction.length-1]??null}static markDirty(e){const t=e.deref();t&&("custom"===t.kind?this.dirtyComponents.add(e):this.dirtyReactions.add(e)),this.queueRender()}static queueRender(){this.queued||(this.queued=!0,requestAnimationFrame(this.drawFrame))}};r(a,"currentComponentOrReaction",[]),r(a,"dirtyReactions",new Set),r(a,"dirtyComponents",new Set),r(a,"insertsStack",new Set),r(a,"didMountStack",new Set),r(a,"didUpdateStack",new Set),r(a,"queued",!1),r(a,"renderedList",new Set),r(a,"renderList",[]),r(a,"drawFrame",(()=>{const{renderList:e,renderedList:t}=a;for((0,i.kB)("🐇Reactions");a.dirtyReactions.size>0;){const e=a.dirtyReactions.values().next();if(!e.done){const t=e.value;a.dirtyReactions.delete(t),t.deref()?.run()}}(0,i.PZ)("🐇Reactions");for(const t of a.dirtyComponents.values()){const s=t.deref();s&&e.push(s)}a.dirtyComponents.clear(),e.sort(((e,t)=>e.order.localeCompare(t.order)));for(const s of e)t.has(s)||s.update();e.length=0,t.clear(),(0,i.kB)("🐇Inserts");for(const e of a.insertsStack)(0,n.h)(e);a.insertsStack.clear(),(0,i.PZ)("🐇Inserts"),(0,i.kB)("🐇Mount/Update");for(const e of a.didMountStack.values()){const t=e.deref();t&&t.componentDidMount()}a.didMountStack.clear();for(const e of a.didUpdateStack.values()){const t=e.deref();t&&t.componentDidUpdate()}a.didUpdateStack.clear(),(0,i.PZ)("🐇Mount/Update"),a.queued=!1}));let l=a},9092:(e,t,s)=>{"use strict";s.d(t,{F:()=>o});var n=s(4731);const i=!1;function o(e){for(const t in e)if(t.startsWith("$")){const s=e[t];if(!(s instanceof Function)){const o=`__${t}`,r=new Set;Object.defineProperties(e,{[o]:{value:s,writable:!0},[t]:{get(){const e=n.S.getCurrent();return e&&r.add(e),this[o]},set(e){if(this[o]===e)return;i&&console.log(`${o} <-`,e),this[o]=e;const t=n.S.getCurrent();t&&r.delete(t);for(const e of r.values())e.deref()?n.S.markDirty(e):r.delete(e);r.clear()}}})}}}},7477:(e,t,s)=>{"use strict";s.d(t,{q:()=>n});var n,i,o=s(4731),r=s(8290),a=Object.defineProperty,l=(e,t,s)=>((e,t,s)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);(i=n||(n={})).auto=function(e,t,s){const n=new c(e,s);t[Symbol()]=n,n.run()},i.value=function(e,t,s,n){const i=new u(e,t,n);s[Symbol()]=i,i.run()},i.object=function(e,t,s,n){const i=new h(e,t,n);s[Symbol()]=i,i.run()};class c{constructor(e,t){this.fn=e,this.name=t,l(this,"kind","reaction"),l(this,"__ref",new WeakRef(this))}run(){o.S.push(this.__ref),this.fn(),o.S.pop()}}class h{constructor(e,t,s){this.calc=e,this.result=t,this.name=s,l(this,"kind","reaction"),l(this,"__ref",new WeakRef(this)),l(this,"value"),o.S.push(this.__ref),this.value=this.calc(),o.S.pop()}run(){o.S.push(this.__ref);const e=this.calc();o.S.pop(),(0,r.b9)(this.value,e)||(this.value=e,this.result(e))}}class u{constructor(e,t,s){this.calc=e,this.result=t,this.name=s,l(this,"kind","reaction"),l(this,"__ref",new WeakRef(this)),l(this,"value"),o.S.push(this.__ref),this.value=this.calc(),o.S.pop()}run(){o.S.push(this.__ref);const e=this.calc();o.S.pop(),this.value!==e&&(this.value=e,this.result(e))}}},5229:(e,t,s)=>{"use strict";s.d(t,{F:()=>i});var n=Object.defineProperty;class i{constructor(){var e;((e,t,s)=>{t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="maps")?e+"":e,[])}returnMap(e){e.clear(),this.maps.push(e)}newMap(){return this.maps.pop()||new Map}}},8280:(e,t,s)=>{"use strict";s.d(t,{h:()=>i,p:()=>o});var n=s(4731);function i(e){const{inserted:t,siblings:s,element:n}=e;let i=null;for(let e=t.length-1;e>=0;e--){const o=t[e];if(null===i)s.has(o.element)||(n.insertBefore(o.element,null),s.set(o.element,null));else{const e=s.get(i.element);void 0!==e&&e!==o.element&&(n.insertBefore(o.element,i.element),s.set(i.element,o.element),s.has(o.element)||s.set(o.element,null))}i=o}}class o{static key(e,t){return e+String.fromCharCode(t+48)}static insert(e,t){const{inserted:s}=e,{order:i,key:o}=t;for(let r=s.length-1;r>=0;r--){const a=s[r],l=s[r+1];if(i>=a.order)return void(o!==a.key&&(l?(s.splice(r+1,0,t),n.S.insertsStack.add(e)):(s.push(t),n.S.insertsStack.add(e))))}s.unshift(t),n.S.insertsStack.add(e)}static move(e,t){const{inserted:s}=e,{key:n}=t,i=s.findIndex((e=>e.key===n));i>=0&&s.splice(i,1),this.insert(e,t)}static remove(e,t){const{inserted:s,siblings:n}=e,{key:i}=t,o=s.findIndex((e=>e.key===i));if(o>=0){const[e]=s.splice(o,1);n.delete(e.element),e.element.remove()}}}},7354:(e,t,s)=>{"use strict";s.d(t,{n:()=>r});var n=s(2230),i=s(6635),o=s(8280);class r{static component(e){switch(e.kind){case"text":return r.textComponent(e);case"dom":return r.domComponent(e);case"custom":return r.customComponent(e)}}static textComponent(e){o.p.remove(e.domParent,e),i.x.add(e)}static domComponent(e){o.p.remove(e.domParent,e);for(const t of e.subComponents.values())r.component(t);n.J.returnComponent(e)}static customComponent(e){e.__removed=!0,e.componentWillUnmount(),null!==e.subComponent&&(r.component(e.subComponent),e.subComponent=null)}}},9322:(e,t,s)=>{"use strict";s.d(t,{d:()=>c});var n=s(4113),i=s(2230),o=s(6635),r=s(7354),a=s(8280),l=s(5183);class c{static component(e,t,s,n,i){return null===e?(null!==t&&r.n.component(t),null):"number"==typeof e?c.text(e.toString(),t,s,n,i):"string"==typeof e?c.text(e,t,s,n,i):"dom"===e.kind?c.dom(e,t,s,n,i):c.custom(e,t,s,n,i)}static dom(e,t,s,o,l){if(null===t)return i.J.newComponent(e,s,o,l);if(e.kind===t.kind&&e.name===t.name){const i=t.order,r=a.p.key(s.order,l);return i!==r&&(t.index=l,t.order=r,a.p.move(o,t)),(0,n.FO)(t.element,t.namespace,e.props,t.props),t.name=e.name,t.props=e.props,t.subComponents=c.subComponents(t,t,e.props.children,t.subComponents),t}return r.n.component(t),i.J.newComponent(e,s,o,l)}static text(e,t,s,n,i){if(!t)return o.x.makeTextComponent(e,s,n,i);if("text"===t?.kind){const o=t.order,r=a.p.key(s.order,i);return o!==r&&(t.index=i,t.order=r,a.p.move(n,t)),t.meta===e||(t.element.nodeValue=e,t.meta=e),t}return r.n.component(t),o.x.makeTextComponent(e,s,n,i)}static custom(e,t,s,n,i){if(!t)return(0,l.T)(e,s,n,i);if("custom"===t.kind&&t.constructor===e.name){const o=t.order,r=a.p.key(s.order,i);if(r!==o){t.index=i,t.order=r;const{subComponent:e}=t;if(null!==e){const s=a.p.key(t.order,e.index);if(e.order!==s)switch(e.order=s,e.kind){case"dom":case"text":a.p.move(n,e);break;case"custom":e.update()}}}return t.updateWithNewProps(e.props),t}return r.n.component(t),(0,l.T)(e,s,n,i)}static subComponents(e,t,s,n){if(!s){for(const e of n.values())r.n.component(e);return n.clear(),n}const o=i.g.newMap();for(let i=s.length-1;i>=0;i--){const r=s[i];null!=r&&c.subComponent(r,e,t,n,o,i)}for(const e of n.values())r.n.component(e);return i.g.returnMap(n),o}static subComponent(e,t,s,n,i,o){const r="string"==typeof e||"number"==typeof e?o.toString():e.props?.key??o.toString(),a=c.component(e,n.get(r)??null,t,s,o);return n.delete(r),a&&i.set(r,a),a}}},4113:(e,t,s)=>{"use strict";function n(e,t,s){for(const n in s){const o=t[n],r=s[n];void 0!==r&&(void 0===o||o!==r)&&i(e,n,r)}for(const n in t){const i=t[n];void 0===s[n]&&void 0!==i&&(e.style[n]="")}}function i(e,t,s){"number"==typeof s&&function(e){switch(e){case"width":case"minWidth":case"height":case"minHeight":case"top":case"left":case"right":case"bottom":case"fontSize":case"borderWidth":case"borderRadius":case"padding":case"paddingTop":case"paddingLeft":case"paddingRight":case"paddingBottom":case"gap":case"margin":case"marginTop":case"marginLeft":case"marginRight":case"marginBottom":case"lineHeight":case"letterSpacing":case"strokeWidth":case"outlineWidth":case"outlineOffset":case"strokeDashoffset":case"strokeDasharray":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"borderTopLeftRadius":case"borderTopRightRadius":case"borderBottomLeftRadius":case"borderBottomRightRadius":return!0;default:return!1}}(t)?e.style[t]=s+"px":e.style[t]=s}function o(e,t,s){for(const n in s)void 0!==s[n]&&a(e,t,n,s[n])}function r(e,t,s,i){for(const o in s){const r=i[o],c=s[o];void 0!==c?void 0===r?a(e,t,o,c):r!==c&&(o.startsWith("on")?(l(e,o,r),a(e,t,o,c)):"style"===o?n(e,r,c):a(e,t,o,c)):l(e,o,r)}for(const t in i){const n=i[t];void 0===s[t]&&void 0!==n&&l(e,t,n)}}function a(e,t,s,n){switch(s){case"key":case"children":break;case"className":e.setAttribute("class",n);break;case"value":e[s]=n;break;case"style":!function(e,t){for(const s in t)i(e,s,t[s])}(e,n);break;case"ref":n.current=e;break;default:if("svg"===t&&function(e,t,s){switch(t){case"strokeWidth":return e.setAttribute("stroke-width",s),!0;case"strokeLinejoin":return e.setAttribute("stroke-linejoin",s),!0}return!1}(e,s,n))break;s.startsWith("on")?e.addEventListener(s.slice(2).toLowerCase(),n):"boolean"==typeof n?n?e.setAttribute(s,""):e.removeAttribute(s):e.setAttribute(s,n)}}function l(e,t,s){t.startsWith("on")?e.removeEventListener(t.slice(2).toLowerCase(),s):"className"===t?e.removeAttribute("class"):"ref"===t?s.current=null:e.removeAttribute(t)}s.d(t,{ek:()=>o,FO:()=>r})},8290:(e,t,s)=>{"use strict";function n(e,t){for(const s in e)if(e[s]!==t[s])return!1;return!0}function i(e,t){if(t.children!==e.children)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function o(e,...t){if(1===e.length)return e[0];let s="";for(let n=0;n<e.length;n++)t[n]&&(s+=e[n]);return s.trim()}function r(e){}function a(e){}s.d(t,{PZ:()=>a,b9:()=>n,c:()=>o,kB:()=>r,rK:()=>i}),s(1907)},829:(e,t,s)=>{"use strict";function n(e){return e.id.slice(0,7)}s.d(t,{vX:()=>n})},320:(e,t,s)=>{"use strict";s.d(t,{u:()=>i,v:()=>n});const n="EMPTY_MERGE",i={oldFile:"Uncommitted merge",newFile:"Uncommitted merge",patchType:" ",stagedType:" ",unStagedType:" ",conflicted:!1,id:n,isImage:!1}},6815:(e,t,s)=>{"use strict";function n(){let e;return{promise:new Promise((t=>{e=t})),resolver:e}}s.d(t,{T:()=>n})},9817:(e,t,s)=>{"use strict";function n(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}function i(e,t,s){return s<e?e:s>t?t:s}function o(e,t=!0){const s=e.split("/"),n=s[s.length-1];if(t)return n;const i=n.split(".");return i.slice(0,i.length-1).join("")}s.d(t,{S4:()=>i,WP:()=>o,yy:()=>n})},8152:(e,t,s)=>{"use strict";s.d(t,{U:()=>Io,e:()=>Ro});var n=s(6093),i=s(7865),o=s(6882),r=s(6110),a=s(9817),l=s(9039);const c="https://us-central1-gitfiend-pulse.cloudfunctions.net/onRequest2";async function h(){await async function(e,t){try{return await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch(e){}return null}(c,function(){let e=(0,l.uo)();return{type:"pulse",body:{lang:navigator.language,time:Date.now(),platform:e,version:"0.44.3"}}}()),setTimeout(h,864e5)}function u(e,t){if(t?.preventDefault(),"keydown"===t?.type){const e=document.activeElement;if(null!==e&&e!==document.body){const t=e;return void t.blur?.()}}const{$repo:s,dialogs:n}=e;if(n.showingDialog())n.removeTopMostDialog();else if(null!==s){const{nav:e}=s;if(""!==e.$hoveredRefCardId)return void e.setHoveredRefCard("");if(e.$showingRefView)return void e.setShowingRefView(!1);if(e.$viewingPatch)return void e.setSelectedPatchId(null);if(e.hasSelectedCommit())return void e.setSelectedCommit(null)}}var m=s(1197),d=s(719),p=s(7521),g=s(5737),f=s(2650),w=s(7273),b=s(7728),y=s(2888);class $ extends y.Custom{render(){const{store:e}=this.props;return(0,y.createElement)("div",{className:"WelcomeScreen"},(0,y.createElement)("div",{className:"WelcomeScreen-header"},(0,y.createElement)("img",{className:"WelcomeScreen-header-icon",src:(0,m.yn)(["other","icon.svg"]),alt:""})),(0,y.createElement)("div",{className:"WelcomeScreen-controls"},(0,y.createElement)(w.R,{className:"WelcomeScreen-controls-button",onClick:()=>(0,b.G)(e)},"Create"),(0,y.createElement)("span",{style:{width:24}}),(0,y.createElement)(w.R,{className:"WelcomeScreen-controls-button",onClick:()=>(0,f.NV)(e)},"Open"),(0,y.createElement)("span",{style:{width:24}}),(0,y.createElement)(w.R,{className:"WelcomeScreen-controls-button",onClick:()=>(0,f.iO)(e)},"Clone")))}}class v extends y.Custom{render(){const{store:e}=this.props,{dialogs:t}=e;return(0,y.createElement)("div",{className:"DialogRoot"},(0,y.createElement)(y.Fragment,null,t.drawDialogs()),null)}}var k=s(4188),C=s(4071);const _=(0,y.createElement)("span",{className:"HeadBranchTick"},"✓");var S=s(8848),x=s(1998),P=s(1640);async function E(e,t){const{repo:s,global:{consoleSt:n},refs:i,repoPath:o}=t;await n.showLoading(`Checking out ${e.shortName}`,(async()=>{await(0,P.nX)(o,e,i.getSibling(e)),await s.loadOrReloadRepoData()}))}async function R(e,t){const{repo:s,refs:{$repoStatus:n},global:{consoleSt:i},repoPath:o}=e;n&&await i.showLoading(`Merging ${t.shortName} into ${n.branchName}`,(async()=>{await x.En.command({repoPath:o,args:["merge",t.fullName]}),await s.loadOrReloadRepoData()}))}var I=s(5185),T=s(9634),N=s(4747),M=Object.defineProperty,L=(e,t,s)=>((e,t,s)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class F extends y.Custom{constructor(){super(...arguments),L(this,"ref",(0,y.createRef)()),L(this,"$selectedIndex",0),L(this,"onKey",(e=>{switch(e.key){case"Escape":this.props.ins.closeMenu();break;case"ArrowDown":e.preventDefault(),this.goToNextItem();break;case"ArrowUp":e.preventDefault(),this.goToPrevItem();break;case"Tab":case"Enter":e.preventDefault(),this.props.ins.selectWordByIndex(this.$selectedIndex);break;case"n":e.ctrlKey&&(e.preventDefault(),this.goToNextItem());break;case"p":e.ctrlKey&&(e.preventDefault(),this.goToPrevItem())}}))}render(){const{$position:e,$completionList:t,$containerRect:s,$textAreaScrollTop:n}=this.props.ins;if(!e||!s)return null;const{left:i,top:o,height:r}=e,{$selectedIndex:a,$availableHeight:l}=this;let c={};return l>90?(c.left=i-5,c.top=o+r+4-n):(c.left=i-5,c.bottom=1+s.height-e.bottom+e.height+n),(0,y.createElement)("div",{className:"CompletionMenu",ref:this.ref,style:c},t.map(((e,t)=>(0,y.createElement)("div",{role:"button",className:y.c`CompletionMenu-selectedItem ${t===a}`,onClick:()=>{this.props.ins.selectWord(e)},onMouseEnter:()=>{this.$selectedIndex=t},key:e},e))))}goToNextItem(){this.$selectedIndex=(this.$selectedIndex+1)%this.props.ins.$completionList.length,this.showSelectedItem()}goToPrevItem(){const e=this.props.ins.$completionList.length;this.$selectedIndex=(this.$selectedIndex-1+e)%e,this.showSelectedItem()}showSelectedItem(){const{current:e}=this.ref;if(!e)return;const t=e.children.item(this.$selectedIndex);t?.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}get $availableHeight(){const{$containerRect:e,$position:t,$textAreaScrollTop:s}=this.props.ins;return t&&e?innerHeight-(e.top+(t.top-s)+t.height):0}componentDidMount(){addEventListener("keydown",this.onKey),addEventListener("click",this.props.ins.closeMenu)}componentWillUnmount(){removeEventListener("keydown",this.onKey),removeEventListener("click",this.props.ins.closeMenu)}}var O=s(9010),D=Object.defineProperty,j=(e,t,s)=>((e,t,s)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class z{constructor(e,t){this.focusInput=t,j(this,"$text"),j(this,"$position",null),j(this,"$completionList",[]),j(this,"selection",[0,0]),j(this,"$containerRect",null),j(this,"$textAreaScrollTop",0),j(this,"selectWord",(e=>{const{$text:t,selection:[s,n]}=this;this.$text=t.slice(0,s)+e+t.slice(n),this.$completionList=[],this.$position=null,this.focusInput()})),j(this,"closeMenu",(()=>{this.$position=null,this.focusInput()})),this.$text=e,(0,y.init$)(this)}selectWordByIndex(e){this.selectWord(this.$completionList[e])}get $showMenu(){return O.YG&&!!this.$position&&this.$completionList.length>0&&this.$text.length>0}}var W=Object.defineProperty,V=(e,t,s)=>((e,t,s)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class A extends y.Custom{constructor(){super(...arguments),V(this,"divRef",(0,y.createRef)()),V(this,"inputRef",(0,y.createRef)()),V(this,"externalValue",this.props.value??""),V(this,"ins",new z(this.props.value??"",(()=>{this.inputRef.current?.focus()}))),V(this,"onInput",(e=>{const{currentTarget:t}=e;if(!(t instanceof HTMLTextAreaElement||t instanceof HTMLInputElement))return;const{value:s,selectionStart:n,selectionEnd:i}=t;this.ins.$text=s,null!==n&&null!==i&&requestAnimationFrame((()=>{this.updateDiv(n,i,s)}))})),V(this,"onScroll",(e=>{const{currentTarget:t}=e;t instanceof HTMLTextAreaElement&&(this.ins.$textAreaScrollTop=t.scrollTop,this.ins.$position=null)}))}render(){const{style:e,ref:t,className:s="",rows:n}=this.props;t&&(this.inputRef=t);const{$text:i}=this.ins;return(0,y.createElement)("div",{className:`TextInput-container ${s}`,style:e},1===n?this.drawInput(i):this.drawArea(i),(0,y.createElement)("div",{className:"TextInput-hiddenDiv",ref:this.divRef,key:"TextInput-hiddenDiv"},i),this.ins.$showMenu?(0,y.createElement)(F,{ins:this.ins,key:"TextInput-indicator"}):null)}drawInput(e){const{placeholder:t,id:s,onKeyDown:n,required:i}=this.props;return(0,y.createElement)("input",{className:"TextInput-input",ref:this.inputRef,key:"TextInput-input",value:e,required:i,onInput:this.onInput,placeholder:t,id:s,onKeyDown:n})}drawArea(e){const{placeholder:t,id:s,onKeyDown:n,rows:i,required:o}=this.props;return(0,y.createElement)("textarea",{className:"TextInput-input",ref:this.inputRef,key:"TextInput-input",value:e,required:o,onInput:this.onInput,placeholder:t,rows:i,id:s,onKeyDown:n,onScroll:this.onScroll})}updateDiv(e,t,s){const{current:n}=this.divRef;if(!n)return;const i=n.firstChild;if(!i)return;const o=new Range,r=function(e,t){let s=[];for(let n=t;n>=0;n--){const t=e[n];if(" "===t||"\n"===t||"\r"===t)break;s.push(t)}return s.reverse().join("")}(s,e-1);this.getCompletionList(r).catch(console.log),o.setStart(i,e-r.length),o.setEnd(i,e),this.ins.selection=[e-r.length,e];const a=n.getBoundingClientRect(),l=o.getBoundingClientRect();l.y-=a.y,l.x-=a.x,this.ins.$position=l??null}async getCompletionList(e){const{autoComplete:t}=this.props;if(!t)return;const{list:s,currentWord:n}=await t(e);n===e&&(this.ins.$completionList=s)}componentDidMount(){!0===this.props.autoFocus&&setTimeout((()=>{this.ins.focusInput()}),1),y.Reaction.auto((()=>{this.props.onText(this.ins.$text)}),this),this.ins.$containerRect=this.divRef.current?.getBoundingClientRect()??null}componentDidUpdate(){const{errorMessage:e,value:t=""}=this.props;t!==this.externalValue&&(this.externalValue=t,this.ins.$text=t),this.inputRef.current?.setCustomValidity(e??""),this.inputRef.current?.reportValidity()}}function H(e,t){return async s=>{if(!e)return{list:[],currentWord:s};const n=await x.RT.auto_complete({kind:t,repoPath:e,currentWord:s,maxNum:20});return"Ok"in n?{list:n.Ok,currentWord:s}:{list:[],currentWord:s}}}var B=s(8774),U=Object.defineProperty,K=(e,t,s)=>((e,t,s)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);const q="CommitMessageDialog-input";async function Y(e,t,s){return(0,I.$)({dialogId:Y.name,focusElementId:q,dismissible:!1,contentCallback:(n,i,o)=>(0,y.createElement)(G,{repoPath:e,dialogMessage:t,commitMessage:s,descriptionId:o,resolve:n})})}class G extends y.Custom{constructor(){super(...arguments),K(this,"inputText",this.props.commitMessage),K(this,"onTextChange",(e=>{this.inputText=e})),K(this,"onTextAreaKeyPress",(async e=>{(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&this.props.resolve(this.inputText)})),K(this,"getAutoCompleteList",(async e=>{const t=await x.RT.auto_complete({kind:"CommitMessage",repoPath:this.props.repoPath,currentWord:e,maxNum:20});return"Ok"in t?{list:t.Ok,currentWord:e}:{list:[],currentWord:e}}))}render(){const{dialogMessage:e,commitMessage:t,resolve:s,descriptionId:n}=this.props;return(0,y.createElement)("form",{className:"CommitMessageDialog",onSubmit:e=>{e.preventDefault(),s(this.inputText)}},(0,y.createElement)(T.A,{messageId:n},e),(0,y.createElement)("div",{className:"CommitMessageDialog-inputContainer"},(0,y.createElement)(A,{className:"CommitMessageDialog-textInput",style:{flexGrow:1},rows:6,onText:this.onTextChange,value:t,onKeyDown:this.onTextAreaKeyPress,id:B.w1,autoComplete:this.getAutoCompleteList,autoFocus:!0})),(0,y.createElement)(N.D,{rightButtons:[(0,y.createElement)(w.R,{type:"submit"},"OK"),(0,y.createElement)(w.R,{onClick:()=>{s(void 0)}},"Cancel")]}))}}async function J(e,t){const{refs:s,repo:n,repoPath:i}=e,{$commits:o}=n,{$repoStatus:r}=s;if(t.isMerge&&null!==r){const{remoteCommitId:e}=r,s=o.get(t.parentIds[0]),n=o.get(t.parentIds[1]);if(void 0!==s&&void 0!==n&&null!==e){if(s.id===e||await x.RT.commit_is_ancestor({repoPath:i,commitId:s.id,ancestorCandidateId:e}))return s.id;if(n.id===e||await x.RT.commit_is_ancestor({repoPath:i,commitId:n.id,ancestorCandidateId:e}))return n.id}}return t.parentIds[0]??null}function X(e,t,s,n){if(!O.EE||n<2)return;const{wip:{$haveWIP:i}}=t;e.push({label:`Extract changes from branch ${s.shortName}${i?"...":""}`,toolTip:i?"This options isn't available while you have uncommitted changes.":`This will extract the changes on branch ${s.shortName} and allow you to make a single commit.`,async click(){i?await(0,S.K$)("You cannot extract changes while you have uncommitted work"):await async function(e,t){const{repo:s,refs:{$repoStatus:n},global:{consoleSt:i},repoPath:o}=e;n&&await i.showLoading(`Merging ${t.shortName} into ${n.branchName}`,(async()=>{await x.En.command({repoPath:o,args:["merge","--squash",t.fullName]}),await s.loadOrReloadRepoData()}))}(t,s)}})}var Z=Object.defineProperty;const Q="inputDialogInputId";class ee extends y.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="inputText")?e+"":e,"")}render(){const{message:e,confirmButtonText:t="OK",resolve:s,descriptionId:n,autoComplete:i}=this.props;return(0,y.createElement)("form",{className:"InputDialog",onSubmit:e=>{e.preventDefault(),s(this.inputText)}},(0,y.createElement)(T.A,{messageId:n},e),(0,y.createElement)("div",{className:"InputDialog-input"},(0,y.createElement)(A,{id:Q,autoFocus:!0,required:!0,rows:1,onText:e=>{this.inputText=e},autoComplete:i})),(0,y.createElement)(N.D,{rightButtons:[(0,y.createElement)(w.R,{type:"submit"},t),(0,y.createElement)(w.R,{autoFocus:!0,onClick:()=>{s(void 0)}},"Cancel")]}))}}const te=s(9066);function se(e){try{return te.emojify(e)}catch(t){return e}}var ne=Object.defineProperty,ie=(e,t,s)=>((e,t,s)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class oe extends y.Custom{constructor(){super(...arguments),ie(this,"messageRef",(0,y.createRef)()),ie(this,"onClick",(()=>{this.$messageScrollable&&this.props.setMessageExpanded?.(!0)})),ie(this,"updateMessageScrollable",(()=>{const{vm:e}=this.props;if(null!==e.$messageHeight)return;const t=this.messageRef.current;null!==t&&(e.$messageHeight=t.scrollHeight)}))}render(){const{vm:{store:{global:{windowSt:e}}},commit:t,fullScreen:s,messageExpanded:n}=this.props;return e.$animatingCommits?null:(0,y.createElement)("div",{className:"CommitCardMessage-container",onClick:this.onClick},(0,y.createElement)("div",{className:y.c`CommitCardMessage ${!0} text ${!0} CommitCardMessage-scrollable ${this.$messageScrollable&&!s&&!n}`,ref:this.messageRef},se(t.message)),n?this.drawCloseMessageButton():this.drawMoreButton())}get $messageScrollable(){const{$messageHeight:e}=this.props.vm;return null!==e&&e>100}drawCloseMessageButton(){return(0,y.createElement)("div",{className:"CommitCardMessage-backButtonRow"},(0,y.createElement)(w.R,{colour:"text",onClick:e=>{e.stopPropagation(),this.props.setMessageExpanded?.(!1)}},"back"))}drawMoreButton(){return this.$messageScrollable&&!this.props.fullScreen?(0,y.createElement)("div",{className:"CommitCardMessage-moreButton"},(0,y.createElement)("div",{className:"CommitCardMessage-moreButton-text"},"more")):null}componentDidMount(){this.updateMessageScrollable()}componentDidUpdate(){this.updateMessageScrollable()}}var re=s(5499),ae=s(829),le=s(4907),ce=Object.defineProperty,he=(e,t,s)=>((e,t,s)=>t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class ue extends y.Custom{constructor(){super(...arguments),he(this,"onClickUsername",(()=>{const{store:e,commit:{author:t,email:s}}=this.props;e.nav.setSelectedPatchId(null),e.repo.commitFilters.setUsernameFilter({author:t,email:s})})),he(this,"onClickCommitId",(async()=>{try{await navigator.clipboard.writeText(this.props.commit.id)}catch(e){console.log(e)}}))}render(){const{commit:e,toolbar:t=null}=this.props;return(0,y.createElement)("div",{className:"CommitHeader"},(0,y.createElement)("div",{className:"CommitHeader-avatar"},(0,re.sY)(e,32,le.zj.$theme.name)),this.drawCommitInfo(),t)}drawCommitInfo(){const{commit:e}=this.props,{date:{ms:t},id:s,author:n}=e,i=(0,m.MJ)(t),o=(0,m.lF)(t);return(0,y.createElement)("div",{className:"CommitHeader-metadata text"},(0,y.createElement)("div",{className:"CommitHeader-author",title:i},o," by"," ",(0,y.createElement)("button",{className:"InlineButton",onClick:this.onClickUsername},n)),(0,y.createElement)("div",{title:s,onClick:this.onClickCommitId,className:"CommitHeader-commitId"},"(",(0,ae.vX)(e),")"))}}class me extends y.Custom{render(){const{path:e,...t}=this.props,{dir:s,fileName:n}=function(e){const t=e.split("/");return{fileName:t.pop()??"",dir:t.join("/")}}(e);return(0,y.createElement)("div",{...t,className:"TruncatePath",title:e,id:e},(0,y.createElement)("div",{className:"TruncatePath-left"},""!==s?s:n),""!==s?(0,y.createElement)("div",{className:"TruncatePath-right"},"/",n):null)}}var de=s(7627),pe=Object.defineProperty,ge=(e,t,s)=>((e,t,s)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class fe extends y.Custom{constructor(){super(...arguments),ge(this,"onKeyUp",(e=>{if("Enter"===e.key||" "===e.key){e.stopPropagation();const t=e.currentTarget,{nav:s}=this.props.data.store;s.setSelectedPatchId(t.id)}})),ge(this,"onClickPatch",(e=>{e.stopPropagation();const t=e.currentTarget,{nav:s}=this.props.data.store;s.setSelectedPatchId(t.id)})),ge(this,"onContextMenu",(async e=>{const{data:{store:t}}=this.props,{repo:s,nav:n}=t,{$patches:{patches:i}}=s,o=e.currentTarget.id,r=i.find((e=>e.id===o));if(void 0===r)return;const l=(0,a.WP)(r.newFile);await(0,p.O0)([{label:`Show commits containing ${l}`,click:()=>{s.commitFilters.setFileFilter({file_name:r.newFile}),n.setSelectedPatchId(null)}}],e,{usePoint:!0})}))}render(){const{data:{patches:e,selectedPatchId:t},style:s,index:n}=this.props,i=e[n],{id:o}=i;return(0,y.createElement)("div",{className:y.c`PatchListItem ${!0} focusableItemInset ${!0} selected ${t===o}`,style:s,tabIndex:0,key:o,id:o,onClick:this.onClickPatch,onKeyUp:this.onKeyUp,onContextMenu:this.onContextMenu},(0,y.createElement)(me,{path:i.newFile,style:{marginRight:7}}),(0,y.createElement)(de.q,{patchType:i.patchType}))}}var we=Object.defineProperty,be=(e,t,s)=>((e,t,s)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);const ye=l.cX?12:13;class $e extends y.Custom{constructor(){super(...arguments),be(this,"ref",(0,y.createRef)()),be(this,"frames",[]),be(this,"onScroll",(()=>{const{current:e}=this.ref;e instanceof HTMLDivElement&&(e.scrollTop=0)})),be(this,"onWheel",(e=>{const{contentHeight:t,height:s,scrollTop:n,enabled:i}=this.props;if(!i||t<=s)return;e.stopPropagation();let{deltaY:o}=e;const r=n+o,a=t-s;if(!l.cX&&Math.abs(o)>150){o/=2;const e=100/15,t=[],s=o/e;for(let i=1;i<e+1;i++)t.push(Math.min(Math.max(0,n+i*s),a));return this.frames=t,this.animate(),void this.disablePointerEventsWhileScrolling()}this.disablePointerEventsWhileScrolling(),this.props.setScroll(Math.min(Math.max(0,r),a))})),be(this,"animate",(()=>{const e=this.frames.shift();void 0!==e&&(this.props.setScroll(e),this.frames.length>0&&setTimeout(this.animate,15))})),be(this,"thumbTopStart",0),be(this,"mouseStart",0),be(this,"onMouseDown",(e=>{this.props.enabled&&(this.mouseStart=e.y,this.thumbTopStart=this.calcThumbPosition(),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp,{once:!0}))})),be(this,"onMouseMove",(e=>{const{contentHeight:t,height:s}=this.props,n=e.y-this.mouseStart,i=this.calcThumbPercent(this.thumbTopStart+n),o=t-s;this.disablePointerEventsWhileScrolling(),this.props.setScroll(o*i)})),be(this,"onMouseUp",(()=>{window.removeEventListener("mousemove",this.onMouseMove)})),be(this,"timer",0),be(this,"scrolling",!1)}render(){const{children:e,width:t,height:s,contentHeight:n,className:i="",style:o={},enabled:r,scrollTop:a}=this.props;return(0,y.createElement)("div",{ref:this.ref,className:y.c`ScrollArea `+i,style:{width:t,height:s,...o},onWheel:this.onWheel,onScroll:this.onScroll},(0,y.createElement)("div",{className:"ScrollArea-content",style:{pointerEvents:this.scrolling?"none":"unset",transform:`translateY(${-a}px)`,height:n,width:n>s?t-ye:t}},e),(0,y.createElement)("div",{className:"ScrollArea-track",hidden:!r||n<=s},(0,y.createElement)("div",{className:"ScrollArea-thumb",style:{height:this.calcThumbHeight(n,s),transform:`translateY(${this.calcThumbPosition()}px)`},onMouseDown:this.onMouseDown})))}calcScrollPercent(){const{height:e,contentHeight:t,scrollTop:s}=this.props;return s/(t-e)}calcThumbPosition(){const{height:e,contentHeight:t}=this.props;return(e-this.calcThumbHeight(t,e))*this.calcScrollPercent()}calcThumbPercent(e){const{height:t,contentHeight:s}=this.props,n=t-this.calcThumbHeight(s,t);return Math.min(Math.max(0,e/n),1)}calcThumbHeight(e,t){return Math.max(t*(t/e),40)}disablePointerEventsWhileScrolling(){const{enabled:e,contentHeight:t,height:s}=this.props;!e||t<=s||(this.scrolling||(this.scrolling=!0),clearTimeout(this.timer),this.timer=setTimeout((()=>{this.scrolling=!1,this.forceUpdate()}),140))}}var ve=Object.defineProperty,ke=(e,t,s)=>((e,t,s)=>t in e?ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class Ce extends y.Custom{constructor(){super(...arguments),ke(this,"$scrollTop",0),ke(this,"onScroll",(e=>{this.$scrollTop=e}))}render(){let{$scrollTop:e}=this;const{width:t,height:s,item:n,itemData:i,itemKey:o,itemHeight:r,itemCount:a}=this.props,l=a*r;e+s>l&&(this.$scrollTop=l>s?l-s:0);const c=[];for(let t=0;t<a;t++){const a=t*r;a+r>e&&a<e+s&&c.push((0,y.createElement)(n,{key:o(t,i),data:i,style:{position:"absolute",transform:`translateY(${t*r}px)`,width:"100%",height:r},index:t}))}return(0,y.createElement)($e,{width:t,height:s,contentHeight:l,scrollTop:e,setScroll:this.onScroll,enabled:!0},c)}}const _e=215;var Se=s(3789),xe=Object.defineProperty;class Pe extends y.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="itemKey")?e+"":e,((e,t)=>t.patches[e].id))}render(){const{store:e,vm:t}=this.props,{layout:{$commitWidth:s},nav:n}=e,{$visiblePatches:i,$patchListHeight:o}=t,r=n.$viewingPatch?t.$listWidth:s+2*Se.Kr;return(0,y.createElement)(Ce,{width:r,height:o,itemCount:i.length,itemHeight:28,itemKey:this.itemKey,itemData:this.$itemData,item:fe})}get $itemData(){const{store:e,store:{nav:{$selectedPatchId:t}},vm:{$visiblePatches:s}}=this.props;return{store:e,patches:s,selectedPatchId:t}}}var Ee=s(2042),Re=Object.defineProperty,Ie=(e,t,s)=>((e,t,s)=>t in e?Re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class Te{constructor(e){this.store=e,Ie(this,"$headerHeight",0),Ie(this,"$messageHeight",null),Ie(this,"$listWidth",this.getInitialListWidth()),Ie(this,"$userFilterText",""),Ie(this,"$cleared",!1),Ie(this,"setHeaderHeight",(e=>{this.$headerHeight=e})),Ie(this,"setListWidth",(e=>{const t=this.store.global.windowSt.$commitViewSize.width-_e-100;this.$listWidth=Math.round(Math.min(Math.max(e,_e),t)),Ee.o.set("commitCardFullscreenListWidth",this.$listWidth)})),(0,y.init$)(this)}get $visiblePatches(){const{$filterText:e}=this,{$patches:{patches:t}}=this.store.repo;return t.filter((t=>t.newFile.toLocaleLowerCase().includes(e.toLocaleLowerCase())))}get $filterText(){const{$userFilterText:e,$cleared:t,store:{repo:{commitFilters:{$file:s}}}}=this;return t?"":""===e&&s?s.file_name:e}setFilterText(e){this.$cleared=""===e,this.$userFilterText=e}get $width(){return this.store.global.windowSt.$commitViewSize.width}get $height(){const{global:e}=this.store;return e.windowSt.$commitViewSize.height}get $codeViewerWidth(){return this.$width-this.$listWidth}get $patchListHeight(){const{store:{nav:{$viewingPatch:e}}}=this;return e?this.$bodyHeight-34:Se.J9-Math.min(this.$messageHeight??0,100)-42}get $bodyHeight(){return this.$height-this.$headerHeight}getInitialListWidth(){const e=Ee.o.get("commitCardFullscreenListWidth"),{global:{windowSt:{$commitViewSize:t}}}=this.store;if(null!==e){const s=t.width-_e-100;return Math.min(Math.max(e,_e),s)}return Math.max(365,.3*t.width)}}var Ne=s(3331),Me=Object.defineProperty,Le=(e,t,s)=>((e,t,s)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class Fe extends y.Custom{constructor(){super(...arguments),Le(this,"$messageExpanded",!1),Le(this,"ref",(0,y.createRef)()),Le(this,"vm",new Te(this.props.store)),Le(this,"setMessageExpanded",(e=>{this.$messageExpanded=e}))}render(){const{commit:e,store:t}=this.props;return(0,y.createElement)("div",{className:y.c`CommitCardExpanded ${!0} CommitCardExpanded-messageExpanded ${this.$messageExpanded}`},(0,y.createElement)(ue,{store:t,commit:e}),(0,y.createElement)("div",{className:"CommitCardExpanded-content",onWheel:e=>{const t=this.ref.current;null!==t&&t.scrollHeight>t.clientHeight&&e.stopPropagation()},ref:this.ref},(0,y.createElement)(oe,{vm:this.vm,commit:e,fullScreen:!1,messageExpanded:this.$messageExpanded,setMessageExpanded:this.setMessageExpanded}),this.drawFileList()))}drawFileList(){const{store:e,commit:{id:t}}=this.props,{global:{windowSt:s},repo:{$patches:{commitId:n,patches:i}}}=e;return s.$animatingCommits||this.$messageExpanded?null:n!==t?(0,y.createElement)(Ne.y,{size:14,style:{marginLeft:"auto",marginRight:"auto",marginTop:60},invertColour:!0}):0===i.length?null:(0,y.createElement)(Pe,{store:e,vm:this.vm})}}async function Oe(e,t,s){const{nav:n,wip:i,repo:o,global:{consoleSt:r},repoPath:a}=e,{stashId:l}=t;null!==l&&await r.showLoading("Unstashing changes",(async()=>{(await x.En.command({repoPath:a,args:["stash",s,l]})).error||(await x.En.command({repoPath:a,args:["reset",...i.pinnedFiles.getArray(a)]})).error||n.goHome(),await o.loadOrReloadRepoData()}))}var De=s(6403),je=Object.defineProperty,ze=(e,t,s)=>((e,t,s)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);const We="createBranchDialogInputId";function Ve(e,t){return(0,I.$)({dialogId:Ve.name,focusElementId:We,dismissible:!1,contentCallback:(s,n,i)=>(0,y.createElement)(Ae,{repoPath:e,descriptionId:i,resolve:s,autoSwitchAvailable:t})})}class Ae extends y.Custom{constructor(){super(...arguments),ze(this,"inputText",""),ze(this,"$checkoutBranch",this.props.autoSwitchAvailable),ze(this,"getAutoCompleteList",H(this.props.repoPath,"CreateBranch"))}render(){const{resolve:e,descriptionId:t,autoSwitchAvailable:s}=this.props;return(0,y.createElement)("form",{className:"CreateBranchDialog",onSubmit:t=>{t.preventDefault(),e({branchName:this.inputText,checkoutBranch:this.$checkoutBranch})}},(0,y.createElement)(T.A,{messageId:t},"Enter new branch name"),(0,y.createElement)("div",{className:"CreateBranchDialog-inputs"},(0,y.createElement)(A,{id:We,autoFocus:!0,required:!0,onText:e=>{this.inputText=e},rows:1,autoComplete:this.getAutoCompleteList}),(0,y.createElement)(De._P,{checked:this.$checkoutBranch,disabled:!s,onClick:()=>{this.$checkoutBranch=!this.$checkoutBranch},labelText:"Checkout new branch"})),(0,y.createElement)(N.D,{rightButtons:[(0,y.createElement)(w.R,{type:"submit"},"OK"),(0,y.createElement)(w.R,{autoFocus:!0,onClick:()=>{e(void 0)}},"Cancel")]}))}}var He=s(7005),Be=Object.defineProperty,Ue=(e,t,s)=>((e,t,s)=>t in e?Be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class Ke extends y.Custom{constructor(){super(...arguments),Ue(this,"$mode",this.props.defaultMode),Ue(this,"$commitInfo",null)}render(){const{descriptionId:e,resolve:t,commit:s,headInfo:n}=this.props,{$mode:i,$commitInfo:o}=this;return(0,y.createElement)("div",{className:"ResetDialog"},(0,y.createElement)(T.A,{messageId:e},"Reset branch ",n.branchName," to ",s.id.slice(0,6)),(0,y.createElement)("div",{className:"ResetDialog-content"},0===o?.unPushed.length?null:(0,y.createElement)("div",{className:"ResetDialog-content-selector"},(0,y.createElement)("span",null,"Mode:"),(0,y.createElement)(He.l,{options:[{label:"Soft",click:()=>{this.$mode="soft"},type:"checkbox",checked:"soft"===i},{label:"Hard",click:()=>{this.$mode="hard"},type:"checkbox",checked:"hard"===i}],theme:le.zj.$theme.name})),(0,y.createElement)("div",null,this.$message)),(0,y.createElement)(N.D,{rightButtons:[(0,y.createElement)(w.R,{children:"OK",onClick:()=>{t(this.$mode)}}),(0,y.createElement)(w.R,{autoFocus:!0,onClick:()=>{t(void 0)}},"Cancel")]}))}get $message(){const{$commitInfo:e,$mode:t}=this;if(!e)return null;const{pushed:s,unPushed:n}=e;switch(t){case"soft":return n.length>0&&s.length>0?`This will undo ${n.length} commit${1===n.length?"":"s"} and move your local branch back ${s.length} commit${1===s.length?"":"s"}.`:n.length>0?`This will undo ${n.length} commit${1===n.length?"":"s"}.`:s.length>0?`This will move your local branch back ${s.length} commit${1===s.length?"":"s"}.`:null;case"hard":return n.length>0&&s.length>0?`This will discard ${n.length} commit${1===n.length?"":"s"} and move your local branch back ${s.length} commit${1===s.length?"":"s"}.`:n.length>0?`This will discard ${n.length} commit${1===n.length?"":"s"}.`:s.length>0?`This will move your local branch back ${s.length} commit${1===s.length?"":"s"}.`:null}}async getSelectedCommits(){const{commit:e,store:{repo:{$commitIds:t},refs:{$commitsToPush:s},repoPath:n}}=this.props;e.index;const i=await x.RT.get_all_commits_on_current_branch({repoPath:n,includeDescendants:!1}),o="Ok"in i?i.Ok:[],r=new Set(o),a=[],l=[];for(let n=e.index-1;n>=0;n--){const e=t[n];r.has(e)&&(s.thisBranch.has(e)?l.push(e):a.push(e))}return{pushed:a,unPushed:l}}async componentDidMount(){this.$commitInfo=await this.getSelectedCommits()}}async function qe(e,t){const s=[];if(null!==t.stashId)s.push({label:"Unstash Changes",click:()=>Oe(e,t,"pop")},{label:"Unstash Changes and Keep Stash",click:()=>Oe(e,t,"apply")},{label:"Discard Stash",click:()=>async function(e,t){const{nav:s,repo:n,global:{consoleSt:i},repoPath:o}=e,r=await(0,S.M5)(`Are you sure you want to discard the stash "${t.message}"?`),{stashId:a}=t;r&&null!==a&&await i.showLoading("Discarding stash",(async()=>{await x.En.command({repoPath:o,args:["stash","drop",a]}),s.goHome(),await n.loadOrReloadRepoData()}))}(e,t)});else{!function(e,t,{id:s,message:n}){const{refs:{$commitsToPush:i,$repoStatus:o},wip:{$haveWIP:r},repoPath:a}=t;o?.localCommitId===s&&i.allBranches.has(s)&&e.push({label:"Edit Commit Message...",async click(){const e=n.trim(),s=(await Y(a,"Edit commit message",n.trim()))?.trim();s&&s!==e&&(r&&await x.En.stash_changes({repoPath:a}),await x.En.command({repoPath:a,args:["commit","--amend","-m",s]}),r&&await x.En.command({repoPath:a,args:["stash","pop"]}),await t.repo.loadOrReloadRepoData())}})}(s,e,t),function(e,t,s){const{refs:{$commitsToPush:n},wip:{$haveWIP:i},repoPath:o}=t;if(n.allBranches.has(s.id)){const n=function(e){const{refs:{$commitsToPush:t},repo:{$commits:s}}=e,n=Array.from(t.allBranches.keys()).map((e=>s.get(e)));n.sort(((e,t)=>e.index-t.index));const i=[];for(const e of n){if(e.isMerge||0===e.parentIds.length)break;i.push(e)}return i}(t);let r=n.findIndex((e=>e.id===s.id));0===r&&n.length>1&&(s=n[n.length-1]);const a=0===r?n.length:r+1;O.EE&&a>1&&e.push({label:`Squash ${a} commits into 1...`,click:async()=>{if(i)return void await(0,S.K$)("You cannot squash commits while you have uncommitted changes");const e=(await Y(o,`Squash ${a} commits into 1\n\nCommit message:`,s.message.trim()))?.trim();if(e){const{global:{consoleSt:n},repoPath:i}=t;await n.showLoading("Squashing commits",(async()=>{const n=await J(t,s);null!==n&&(await x.En.command({repoPath:i,args:["reset","--soft",n]}),await(0,P.g9)(i),await(0,P.PT)(i,e),await t.repo.loadOrReloadRepoData())}))}}})}}(s,e,t),function(e,t,s){if(0===s.parentIds.length)return;const{refs:{$commitsToPush:{allBranches:n}},repo:i}=t;if(n.has(s.id)){const o=[];for(const e of n.keys()){const t=i.$commits.get(e);t&&t.parentIds.length>0&&o.push(t)}o.sort(((e,t)=>e.index-t.index));const r=o.findIndex((e=>e.id===s.id))+1;let a;a=r>1?`Undo ${r} commits...`:"Undo commit...",e.push({label:a,click:async()=>{await async function(e,t,s){const n="commit"+(s>1?"s":""),i=`This will undo ${s} ${n}. The changes in these commits will be kept.`;if(await(0,S.M5)(i)){const{global:{consoleSt:s},repo:i,wip:o,repoPath:r}=e;o.setCommitMessage(t.message),await s.showLoading(`Undoing ${n}`,(async()=>{const s=await J(e,t);null!==s&&(console.log(`Choosing ${s} of ${JSON.stringify(t.parentIds)}`),await x.En.command({repoPath:r,args:["reset","--soft",s]}),await i.loadOrReloadRepoData())}))}}(t,s,r)}}),e.push(g.me)}}(s,e,t),s.push({label:"Create Branch Here...",click:()=>Ge(e,t.id)},{label:"Create Tag Here...",click:()=>Je(e,t.id)});const{refs:n,repoPath:i}=e,{$repoStatus:o}=n,r=!(!o?.localCommitId||!await x.RT.commit_is_ancestor({repoPath:i,commitId:o.localCommitId,ancestorCandidateId:t.id})),a=null!==o&&await async function(e,t,s){if(e.isMerge||null!==e.stashId||e.id===t.localCommitId)return!1;const n=await x.RT.commit_is_on_branch({repoPath:s,commitId:e.id,includeDescendants:!1});return"Ok"in n&&!n.Ok}(t,o,i),l=null!==o&&r||o?.localCommitId===t.id;s.push(g.me),s.push({label:`Show all Commits by ${t.author}`,click(){e.nav.setShowingRefView(!1),e.nav.setSelectedPatchId(null),e.repo.commitFilters.setUsernameFilter(t)}}),(a||l)&&s.push(g.me),s.push({label:"Cherry-pick Changes in this Commit",click:async()=>{await async function(e,t){await async function(e,t,s){const{repo:n,nav:i,global:{consoleSt:o},wip:r,repoPath:a}=e;await o.showLoading(`Cherry picking commit ${t.id.slice(0,6)}`,(async()=>{const e=["cherry-pick"];e.push("-x"),e.push(t.id),await x.En.command({repoPath:a,args:e}),await n.loadOrReloadRepoData()}))}(e,t)}(e,t)},visible:a,enabled:!e.wip.$haveConflicts},{label:"Revert Changes in this Commit...",click:()=>async function(e,t){const{global:{consoleSt:s},repo:n,repoPath:i,wip:{$haveWIP:o}}=e;if(o)return void await(0,S.K$)("You cannot revert a commit while you have uncommitted changes");const r=await(0,S.P6)({message:"Do you want to immediately commit the changes?",button1Text:"Yes",button2Text:"No",button3Text:"Cancel",autoFocus:2});void 0!==r&&3!==r&&await s.showLoading("Reverting commit",(async()=>{await(0,P.An)(i,t,1===r),await n.loadOrReloadRepoData()}))}(e,t.id),visible:l,enabled:!e.wip.$haveConflicts&&!t.isMerge}),function(e,t,s,n){const{refs:i,wip:o}=t,{$repoStatus:r}=i;if(r&&n){let n="soft";r.localCommitId!==r.remoteCommitId||o.$haveWIP||(n="hard"),e.push({label:`Reset branch ${r.branchName} to this commit...`,click:async()=>{const{global:{consoleSt:e},repo:i,repoPath:o}=t,a=await(l={defaultMode:n,store:t,commit:s,headInfo:r},(0,I.$)({dialogId:Ke.name,dismissible:!1,contentCallback:(e,t,s)=>(0,y.createElement)(Ke,{...l,descriptionId:s,resolve:e})}));var l;a&&await e.showLoading(`Resetting ${r.branchName} to commit ${s.id.slice(0,6)}`,(async()=>{await x.En.command({repoPath:o,args:["reset",`--${a}`,s.id]}),await i.loadOrReloadRepoData()}))},enabled:!t.wip.$haveConflicts})}}(s,e,t,r)}return Ye(s,e),s}function Ye(e,t){const{repo:s,wip:n,nav:i,global:{settings:o}}=t;i.$viewingPatch&&e.push(g.me,{label:o.$splitCodeViewer?"Inline code viewer":"Split code viewer",async click(){const e=!o.$splitCodeViewer;Ee.o.set("splitView",e),o.$splitCodeViewer=e,i.$viewingWip?await n.validateAndLoadHunks():await s.reloadHunks()}})}async function Ge(e,t){const{repo:s,wip:{$haveWIP:n},refs:{$repoStatus:i},refs:o,repoPath:r}=e,a=await Ve(r,function(e,t,s){return e===t||!s}(t,i?.localCommitId??null,n));if(void 0!==a){const{branchName:n,checkoutBranch:i}=a;if(await(0,P.HU)(r,n,t),await s.loadOrReloadRepoData(),i){const t=o.findRefByShortName(n);null!==t&&await E(t,e)}}}async function Je(e,t){const{repo:s,repoPath:n}=e,i=await async function(e){return(0,I.$)({dialogId:JSON.stringify(e.message),focusElementId:Q,dismissible:!1,contentCallback:(t,s,n)=>(0,y.createElement)(ee,{...e,descriptionId:n,resolve:t})})}({message:"Enter new tag name",autoComplete:H(n,"CreateBranch")});void 0!==i&&(await x.En.command({repoPath:n,args:["tag",i,t]}),await s.loadOrReloadRepoData())}var Xe=s(6950);async function Ze(e,t,s,n,i,o){const{nav:r}=t;r.$refCardMenuId!==s.id&&(r.setRefCardMenuId(s.id),await(0,p.O0)(function(e,t,s,n,i){const{nav:o}=e;let r;return r="Tag"===t.refType?function(e,t){const{refs:s,global:{consoleSt:n},repo:i,repoPath:o}=e,{$currentRemoteName:r}=s,a=r??"origin";return[{label:`Push to ${a}`,click:async()=>{await n.showLoading(`Pushing ${t.shortName} to ${a}`,(async()=>{await x.En.command({repoPath:o,args:["push",a,t.shortName]})}))}},{label:`Delete local ${t.shortName}`,click:async()=>{await n.showLoading(`Deleting ${t.shortName}`,(async()=>{await x.En.command({repoPath:o,args:["tag","--delete",t.shortName]}),await i.loadOrReloadRepoData()}))}},{label:`Delete ${a}/${t.shortName}...`,click:async()=>{await(0,S.M5)(`Are you sure you want to delete ${a}/${t.shortName}?`)&&await n.showLoading(`Deleting ${a}/${t.shortName}`,(async()=>{await x.En.command({repoPath:o,args:["push","--delete",a,t.shortName]}),await i.loadOrReloadRepoData()}))}}]}(e,t):"Remote"===t.location?function(e,t,s,n){const{refs:{$repoStatus:i}}=e,o=[];return s||o.push({label:"Checkout",click:()=>E(t,e)}),n>0&&t.siblingId!==i?.headRefId&&o.push({label:`Merge ${t.remoteName}/${t.shortName} into ${i?.branchName}`,click:()=>R(e,t)}),X(o,e,t,n),null!==t.remoteName&&o.push({label:`Delete ${t.remoteName}/${t.shortName}...`,click:()=>async function(e,t){const{repo:s,global:{consoleSt:n},refs:i,repoPath:o}=e,r=t.remoteName;await(0,S.M5)(`Are you sure you want to delete ${r}/${t.shortName}?`)&&await n.showLoading(`Deleting ${r}/${t.shortName}`,(async()=>{await(0,P.KF)(o,t,i.getSibling(t)),await s.loadOrReloadRepoData()}))}(e,t)}),o}(e,t,s,n):null!==t.siblingId?function(e,t,s,n,i){const{refs:o}=e,r=[];return i||(n||r.push({label:"Checkout",click:()=>E(t,e)}),o.$repoStatus&&s>0&&(r.push({label:`Merge ${t.shortName} into ${o.$repoStatus.branchName}`,click:()=>R(e,t)}),X(r,e,t,s)),n||r.push({label:"Delete Local Checkout...",click:()=>async function(e,t){const{repo:s,global:{consoleSt:n},repoPath:i}=e,o=function(e,t){const s=t.refs.$localRefDiffs.get(e.id);return void 0===s?0:s.aheadOfRemote}(t,e);let r;r=o>0?`You have ${o} unpushed commits. Are you sure you want to delete ${t.shortName}?`:`Are you sure you want to delete your local checkout of ${t.shortName}?`,await(0,S.M5)(r)&&await n.showLoading(`Deleting ${t.remoteName}/${t.shortName}`,(async()=>{await(0,P.$I)(i,t),await s.loadOrReloadRepoData()}))}(e,t)})),r}(e,t,n,s,i):function(e,t,s,n){const{refs:i}=e,o=[];return n||o.push({label:"Checkout",click:()=>E(t,e)}),s>0&&o.push({label:`Merge ${t.shortName} into ${i.$repoStatus?.branchName}`,click:()=>R(e,t)}),n||o.push({label:"Delete unpublished branch...",click:()=>async function(e,t){const{repo:s,refs:n,global:{consoleSt:i},repoPath:o}=e;let r;const a=n.$localRefDiffs.get(t.id);r=void 0!==a&&a.aheadOfHead>0?`${t.shortName} has ${a.aheadOfHead} unpublished commits. Are you sure you want to delete it?`:`Are you sure you want to delete ${t.shortName}?`,await(0,S.M5)(r)&&await i.showLoading(`Deleting ${t.shortName}`,(async()=>{await(0,P.$I)(o,t),await s.loadOrReloadRepoData()}))}(e,t)}),o}(e,t,n,s),r.length>0&&r.push(g.me),r.push({label:"Create branch here...",click:()=>Ge(e,t.commitId)}),r.push({label:"Create tag here...",click:()=>Je(e,t.commitId)}),"Branch"===t.refType&&(r.push(g.me),r.push({label:"Hide other branches",click:()=>{e.repo.commitFilters.setBranchFilter({id:t.id,short_name:t.shortName})}})),"Local"===t.location&&(r.push(g.me),r.push((0,Xe.Vk)(e.global))),o.$showingRefView||(r.push(g.me),r.push(Qe(o))),r}(t,s,n,i,o),e),r.setRefCardMenuId(""))}function Qe(e){return{label:"Show All Branches",click:()=>{e.setShowingRefView(!0)},enabled:!e.$showingRefView}}var et=Object.defineProperty,tt=(e,t,s)=>((e,t,s)=>t in e?et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class st extends y.Custom{constructor(){super(...arguments),tt(this,"_endX",1/0),tt(this,"_endY",1/0),tt(this,"_endScale",1/0),tt(this,"_inProgress",0)}componentDidMount(){nt(this)}componentDidUpdate(){nt(this)}onFinish(){}}function nt(e){const t=e.ref.current;if(null===t)return;const{fromX:s,fromY:n,toX:i,toY:o,duration:r,fromScale:a=1,toScale:l=1}=e.props,c=e._inProgress>0,h=s===i&&n===o&&a===l;if(i===e._endX&&o===e._endY&&l===e._endScale)return;let u;if(c){for(const e of t.getAnimations())e.cancel();u=r}else u=h?0:r;t.animate([{transform:`translate(${s}px, ${n}px) scale(${a})`},{transform:`translate(${i}px, ${o}px) scale(${l})`}],{easing:"ease",duration:u,fill:"forwards"}).onfinish=()=>{e._inProgress--,0===e._inProgress&&e.onFinish()},e._endX=i,e._endY=o,e._endScale=l,e._inProgress++}var it=Object.defineProperty,ot=(e,t,s)=>((e,t,s)=>t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class rt extends st{constructor(){super(...arguments),ot(this,"ref",(0,y.createRef)()),ot(this,"onClickStack",(()=>{const{refId:e,store:t}=this.props;t.nav.setHoveredRefCard(e)})),ot(this,"onClickRef",(async e=>{const{refInfo:t,props:s}=this;if(!t)return;const{showingContextMenu:n,store:i,headId:o,refId:r,aheadOfHead:a}=s,l=r===o,c=l||null!==o&&t.siblingId===o;n||await Ze(e,i,t,c,a,l)}))}render(){const{refInfo:e}=this;if(null===e)return null;const{refId:t,orderInStack:s,stackSize:n,showingRefView:i,hoveringStack:o,headId:r,width:a,searchText:l}=this.props,c=(0,C.Jh)(e.shortName),h=t===r,u=function(e,t,s){const{showingRefView:n,orderInStack:i,hoveringStack:o,showingContextMenu:r}=e,a={width:t};if(!n){let e=i;(o||r)&&(e+=300),s&&(e+=20),a.zIndex=e}return a}(this.props,a,h);return(0,y.createElement)("div",{ref:this.ref,className:"RefCard",style:u},(0,y.createElement)("button",{className:y.c`RefCard-content ${!0} RefCard-local ${"Local"===e.location}`,style:{background:c},onContextMenu:this.onClickRef,onClick:this.onClickRef},h?_:null,(0,k.m)(e,l)),!i&&n>1&&s+1===n?function(e,t,s,n){const i={background:t,opacity:s?0:1};return(0,y.createElement)("button",{className:"StackIndicator",style:i,onClick:n},"+",e-1)}(s+1,c,o,this.onClickStack):null)}get refInfo(){const{refId:e,store:{refs:t}}=this.props;return t.$allRefs.map.get(e)??null}}function at(e,t,s,n,i,o,r,a,l,c,h,u,m,d,p,g){const{id:f}=t,w=d===f,b=("Remote"===t.location?h:u).get(f),{left:$,top:v,stackSize:k,orderInStack:C,width:_}=n,{left:S,top:x}=i;return(0,y.createElement)(rt,{store:e,showingRefView:o,refId:f,key:f,index:s,toX:$,toY:v,fromX:0===S?$:S,fromY:0===x?v:x,duration:le.zj.animationTime.medium,width:_,commitWidth:r,marginWidth:a,hoveringCard:m===f||w,hoveringStack:t.commitId===l,isOnSelectedCommit:c===t.commitId,headId:p,showingContextMenu:w,stackSize:k,orderInStack:C,aheadOfHead:b?.aheadOfHead??0,searchText:g})}class lt extends y.Custom{render(){const{positions:e,pairs:t,diffsToHead:s,commitWidth:n,commitLeft:i,timeInfo:o}=this.props,r=[];for(const a of t.values()){const{local:t,remote:l}=a;let c=t?.head??!1;if(t&&0===l.length){const a=ct(t,e,s,o,i,n,c);a&&r.push(a),c&&(c=!1)}for(const t of l){const a=ct(t,e,s,o,i,n,c);a&&r.push(a),c&&(c=!1)}}return(0,y.createElement)("div",{className:"RefScaleInfo"},r)}}function ct({shortName:e,id:t},s,n,i,o,r,a){const l=s.get(t),c=n.get(t);return l?.visible&&c?(0,y.createElement)("div",{key:t,className:"RefScaleInfo-row",style:{top:l.top+2,height:26,gridTemplateColumns:`${o}px ${r}px ${o}px`}},function(e,t){const{aheadOfHead:s,behindHead:n}=e;if(t)return(0,y.createElement)("span",{className:"RefScaleInfo-diff",style:{fontWeight:600}},"Current Branch");if(0===n&&0===s)return(0,y.createElement)("span",null);const i=`${s} commit${1!==s?"s":""} ahead, ${n} behind your current branch`;return(0,y.createElement)("span",{className:"RefScaleInfo-diff",title:i},(0,y.createElement)("b",null,s)," Ahead, ",(0,y.createElement)("b",null,n)," Behind")}(c,a),(0,y.createElement)("span",{className:"RefScaleInfo-background",style:{background:(0,C.p5)(e,.15)}}),(0,y.createElement)("span",{className:"RefScaleInfo-time"},i.get(t)?.timeString??"")):null}class ht extends y.Custom{render(){const{store:e}=this.props,{nav:t,layout:s}=e,{$showingRefView:n,$viewingPatch:i}=t;let o={};i&&(o.opacity=0);const{$scrollChange:r}=s;return n&&(o.top=-r,o.transform=`translateY(${r}px)`),(0,y.createElement)("div",{className:"RefScale",inert:i,style:o},(0,y.createElement)(ut,{store:e}))}}class ut extends y.Custom{render(){const{refs:e,layout:t,nav:s}=this.props.store,{$commitWidth:n,$commitLeft:i,$timeInfo:o}=t,{$current:r,prev:a}=t.refPositions,{$filteredRefs:l,$diffsToHead:c,$localRefDiffs:h,$repoStatus:u,$refSearch:m}=e,{$showingRefView:d,$selectedCommitId:p,$hoveredRefCardId:g,$refCardMenuId:f}=s;if(0===l.array.length)return null;const w=e.$filteredRefs.map.get(g)?.commitId??null,b=[],$=d?m:"";for(let e=0;e<l.array.length;e++){const t=l.array[e],{id:s}=t,o=r.get(s);if(void 0===o)continue;const m=a.get(s)??o;(o.visible||m.visible)&&b.push(at(this.props.store,l.array[e],e,o,m,d,n,i,w,p,c,h,g,f,u?.headRefId??null,$))}return d&&b.push((0,y.createElement)(lt,{key:"RefScaleInfo",positions:r,pairs:l.pairs,diffsToHead:c,localRefDiffs:h,commitWidth:n,commitLeft:i,timeInfo:o})),(0,y.createElement)(y.Fragment,null,b)}}var mt=Object.defineProperty,dt=(e,t,s)=>((e,t,s)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class pt extends y.Custom{constructor(){super(...arguments),dt(this,"ref",(0,y.createRef)()),dt(this,"resizeObserver",null)}render(){return(0,y.createElement)("div",{className:"SizeObserver",ref:this.ref},this.props.children)}componentDidMount(){const e=this.ref.current;e&&(this.resizeObserver=new ResizeObserver((e=>{const{width:t,height:s}=e[0].contentRect;this.props.onResize(t,s)})),this.resizeObserver.observe(e))}componentWillUnmount(){this.resizeObserver?.disconnect()}}var gt=Object.defineProperty,ft=(e,t,s)=>((e,t,s)=>t in e?gt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class wt extends y.Custom{constructor(){super(...arguments),ft(this,"initialMouseX",0),ft(this,"initialListWidth",0),ft(this,"onMouseDown",(e=>{this.initialMouseX=e.clientX,this.initialListWidth=this.props.vm.$listWidth,window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",(()=>{window.removeEventListener("mousemove",this.onMouseMove)}),{once:!0})})),ft(this,"onMouseMove",(e=>{const t=e.clientX-this.initialMouseX;this.props.vm.setListWidth(this.initialListWidth+t)}))}render(){return(0,y.createElement)("div",{className:"ListResizer",style:{height:this.props.vm.$bodyHeight}},(0,y.createElement)("div",{className:"ListResizer-grabber",onMouseDown:this.onMouseDown}))}}var bt=Object.defineProperty,yt=(e,t,s)=>((e,t,s)=>t in e?bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class $t extends y.Custom{constructor(){super(...arguments),yt(this,"ref",(0,y.createRef)()),yt(this,"$dimensions",null),yt(this,"$fileSize",null)}render(){const{imagePath:e,type:t,style:s,maxHeight:n,message:i}=this.props,o=`ImageInfo ImageInfo-${t}`;return(0,y.createElement)("div",{className:o,style:s},(0,y.createElement)("div",{className:"ImageInfo-title"},i),(0,y.createElement)("img",{className:"ImageInfo-image",style:{maxHeight:n},ref:this.ref,src:e,alt:"",onLoad:async()=>{const t=this.ref.current;if(t){const s=await x.RT.file_size(e.split("?")[0]),n="Ok"in s?s.Ok:0;this.setInfo(t.naturalWidth,t.naturalHeight,n)}}}),(0,y.createElement)("div",{className:"ImageInfo-info"},this.drawDimensions(),this.drawFileSize()))}drawDimensions(){const{$dimensions:e}=this;return e?(0,y.createElement)(y.Fragment,null,(0,y.createElement)("div",null,"Width:"),(0,y.createElement)("div",null,e.width,"px"),(0,y.createElement)("div",null,"Height:"),(0,y.createElement)("div",null,e.height,"px")):null}drawFileSize(){const{$fileSize:e}=this;return null===e?null:(0,y.createElement)(y.Fragment,null,(0,y.createElement)("div",null,"File Size:"),(0,y.createElement)("div",null,vt(e)))}setInfo(e,t,s){this.$dimensions={width:e,height:t},this.$fileSize=s}}function vt(e){if(0===e)return"0 kB";const t=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB","GB","TB"][t]}const kt={showAdded:!1,showDeleted:!1,addedName:"Added",deletedName:"Deleted"};async function Ct(e,t,s,n){const i=await async function(e,t,s){const n=(0,m.tS)(e+t+s)+(0,m.QC)(t),i=await x.RT.temp_dir("");return"Ok"in i?(0,m.uJ)(i.Ok,n):null}(t,s,n);return i&&await x.RT.load_commit_image({repoPath:e,commitId:t,originalImagePath:s,tempImagePath:i})&&await x.RT.path_exists(i)?i:null}var _t=Object.defineProperty,St=(e,t,s)=>((e,t,s)=>t in e?_t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class xt extends y.Custom{constructor(){super(...arguments),St(this,"$readyToShow",!1),St(this,"$oldImagePath",null),St(this,"$newImagePath",null),St(this,"setOldImagePath",(async e=>{null!==e&&await x.RT.path_exists(e)&&(this.$oldImagePath=e)}))}render(){return this.$readyToShow?(0,y.createElement)("div",{className:"ImageDiffView"},(0,y.createElement)("div",{className:"ImageDiffView-row"},this.drawOld(),this.drawAddedImage())):null}async componentDidMount(){const e=this.$imageDiffFlags;e.showAdded&&await this.loadAddedImage(),e.showDeleted&&await this.loadDeletedImage(),this.setReady(!0)}get $imageDiffFlags(){const e=this.$selectedPatch;return e?function(e){switch(e.patchType){case" ":case"?":case"C":case"A":return{showAdded:!0,showDeleted:!1,addedName:"Added",deletedName:"Deleted"};case"D":return{showAdded:!1,showDeleted:!0,addedName:"Added",deletedName:"Deleted"};case"T":case"M":return{showAdded:!0,showDeleted:!0,addedName:"Added",deletedName:"Deleted"};case"R":return function(e){return{showAdded:!0,showDeleted:!1,addedName:`Renamed "${(0,a.WP)(e.oldFile)}" to "${(0,a.WP)(e.newFile)}"`,deletedName:"",rename:!0}}(e);case"U":case"X":case"!":case"B":return kt}}(e):kt}get $selectedPatch(){const{repo:e,wip:t}=this.props.store;return e.$selectedPatch?e.$selectedPatch:t.$selectedPatch?t.$selectedPatch:null}async loadAddedImage(){const{store:{repoPath:e,repo:{$selectedPatch:t}},newFile:s,mode:n}=this.props;"wip"===n?await this.setNewImagePath((0,m.uJ)(e,s)):t&&await this.setNewImagePath(await this.checkoutImageFromHistory(e,t.commitId,s,"added"))}async loadDeletedImage(){const{store:{repoPath:e},oldFile:t}=this.props,s=this.getOldImageCommitId();s&&await this.setOldImagePath(await this.checkoutImageFromHistory(e,s,t,"deleted"))}getOldImageCommitId(){const{store:{repo:{$commits:e,$selectedCommit:t},refs:s},mode:n}=this.props;if("wip"===n)return s.$repoStatus?.localCommitId??null;if(("commit"===n||"stash"===n)&&t){const[s]=t.parentIds;return e.get(s)?.id??null}return null}drawOld(){return null!==this.$oldImagePath?(0,y.createElement)($t,{imagePath:this.$oldImagePath,maxHeight:.7*this.props.columnSize.$bodyHeight,message:this.$imageDiffFlags.deletedName,type:"deleted"}):null}async checkoutImageFromHistory(e,t,s,n){return Ct(e,t,s,n)}async setNewImagePath(e){null!==e&&await x.RT.path_exists(e)&&(this.$newImagePath=`${e}?${Date.now()}`)}drawAddedImage(){return null!==this.$newImagePath?(0,y.createElement)($t,{imagePath:this.$newImagePath,maxHeight:.7*this.props.columnSize.$bodyHeight,style:{maxWidth:this.$oldImagePath?"45%":void 0},message:this.$imageDiffFlags.addedName,type:!0===this.$imageDiffFlags.rename?"renamed":"added"}):null}setReady(e){this.$readyToShow=e}}var Pt=s(3212),Et=s(5675),Rt=s(6386),It=s(4444),Tt=s(7999),Nt=s(2910),Mt=s(6046),Lt=s(6755),Ft=s(6947),Ot=s(4222),Dt=Object.defineProperty,jt=(e,t,s)=>((e,t,s)=>t in e?Dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class zt{constructor(e,t,s){this.store=e,this.hunkLineStore=t,this.cardVm=s,jt(this,"$scrollTop",0),jt(this,"$scrollLeft",0),jt(this,"$hoveredLineIndex",null),jt(this,"$hoveredLineSide",null),jt(this,"$focussedPane",Ot.M3),jt(this,"setScroll",(e=>{const t=e.current;null!==t&&(this.$scrollTop=t.scrollTop,this.$scrollLeft=t.scrollLeft)})),jt(this,"showContextMenu",(async e=>{const t=[];if("wip"===this.mode){const{$hoveredLineIndex:e,$hoveredLineSide:s}=this;if(e&&s){const n=s===Ot.M3?this.hunkLinesLeft[e]:this.hunkLinesRight[e];t.push(...(0,Lt.C)(n,this))}}await(0,p.O0)(t,e,{usePoint:!0})})),(0,y.init$)(this)}resetScroll(){this.$scrollLeft=0,this.$scrollTop=0}get hunkLinesLeft(){return this.hunkLineStore.$splitHunkLines[0]}get hunkLinesRight(){return this.hunkLineStore.$splitHunkLines[1]}get mode(){return this.hunkLineStore.$mode}get $width(){const{hunkLinesLeft:e,hunkLinesRight:t}=this;return 0===e.length||0===t.length?this.cardVm.$codeViewerWidth:this.cardVm.$codeViewerWidth/2}get $height(){return Math.round(this.cardVm.$bodyHeight)}setHoveredLine(e,t){"wip"===this.mode&&(this.$hoveredLineIndex=e,this.$hoveredLineSide=t)}get $firstLine(){return Math.floor(this.$scrollTop/Pt.K_)}get $numLines(){return 1+Math.ceil(this.$height/Pt.K_)}get $marginWidth(){const{hunkLinesLeft:e,mode:t}=this;let s=e[e.length-2];if(s||(s=this.hunkLinesRight[this.hunkLinesRight.length-2]),s){const e=Math.max(s.newNum??0,s.oldNum??0).toString().length;return Ft._3*e+2*Pt.j4+("wip"===t?Pt.Sq:0)}return 0}get $runwayWidth(){return this.$marginWidth+this.$textWidth}get $textWidth(){return Math.max(15+this.$longestLine*Ft._3,this.$width-this.$marginWidth)}get $runwayHeight(){const e=Math.max(this.hunkLinesLeft.length,this.hunkLinesRight.length);return Math.max(e*Pt.K_,this.$height)}get $longestLine(){let e=0;for(const t of this.hunkLinesLeft){const s=t.text.length;s>e&&(e=s)}for(const t of this.hunkLinesRight){const s=t.text.length;s>e&&(e=s)}return e}}var Wt=Object.defineProperty,Vt=(e,t,s)=>((e,t,s)=>t in e?Wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class At extends y.Custom{constructor(){super(...arguments),Vt(this,"vm",new zt(this.props.store,this.props.hunkLineStore,this.props.cardVm)),Vt(this,"runwayRefLeft",(0,y.createRef)()),Vt(this,"contentRefLeft",(0,y.createRef)()),Vt(this,"textRefLeft",(0,y.createRef)()),Vt(this,"runwayRefRight",(0,y.createRef)()),Vt(this,"contentRefRight",(0,y.createRef)()),Vt(this,"textRefRight",(0,y.createRef)()),Vt(this,"onMouseEnterLeft",(()=>{this.vm.$focussedPane=Ot.M3})),Vt(this,"onMouseEnterRight",(()=>{this.vm.$focussedPane=Ot.NS})),Vt(this,"onLeftPaneScroll",(()=>{this.vm.$focussedPane===Ot.M3&&this.vm.setScroll(this.runwayRefLeft)})),Vt(this,"onRightPaneScroll",(()=>{this.vm.$focussedPane===Ot.NS&&this.vm.setScroll(this.runwayRefRight)}))}render(){const{$runwayWidth:e,$runwayHeight:t,$marginWidth:s,$textWidth:n,$width:i,$height:o}=this.vm,r=this.drawContentLeft(),a=this.drawContentRight();return(0,y.createElement)("div",{className:"CodeViewerSplit"},r?(0,y.createElement)(Rt.B,{className:"CodeViewerSplit-pane",width:i,height:o,contentWidth:e,contentHeight:t,onNativeScroll:this.onLeftPaneScroll,onMouseEnter:this.onMouseEnterLeft,outerRef:this.runwayRefLeft,contentRef:this.contentRefLeft},(0,y.createElement)("div",{className:"CodeViewer-margin",style:{width:s,height:t}},r.nums),(0,y.createElement)("div",{className:"CodeViewer-text",ref:this.textRefLeft,style:{left:s,width:n,height:t}},r.lines),(0,y.createElement)("div",{className:"CodeViewer-overlay"},r.headers)):null,a?(0,y.createElement)(Rt.B,{className:"CodeViewerSplit-pane",width:i,height:o,contentWidth:e,contentHeight:t,onNativeScroll:this.onRightPaneScroll,onMouseEnter:this.onMouseEnterRight,outerRef:this.runwayRefRight,contentRef:this.contentRefRight},(0,y.createElement)("div",{className:"CodeViewer-margin",style:{width:s,height:t}},a.nums),(0,y.createElement)("div",{className:"CodeViewer-text",ref:this.textRefRight,style:{left:s,width:n,height:t}},a.lines),(0,y.createElement)("div",{className:"CodeViewer-overlay"},a.headers)):null)}drawContentLeft(){const{store:e,hunkLineStore:{$mode:t,$hunks:s},filePath:n}=this.props,{hunkLinesLeft:i,$firstLine:o,$numLines:r,$textWidth:a,$marginWidth:l,$width:c}=this.vm,{wip:{stagingSt:h}}=e,u=Math.min(o+r,i.length),m=[],d=[],p=[];for(let r=o;r<u;r++){const o=i[r];if(void 0===o)continue;const u=r.toString();if("HeaderEnd"===o.status){const{hunkIndex:i}=o,a=s[i];if(void 0!==a){const s="wip"===t?h.hunkStagedState(a):null;p.push((0,y.createElement)(Nt.f,{store:e,hunkLine:o,hunk:a,mode:t,key:`${u}headerEnd`,top:r*Pt.K_-Pt.K_/2+1,width:c,marginWidth:l,side:Ot.M3})),d.push((0,y.createElement)(Mt.b,{vm:this.vm,index:r,hunk:a,key:u,top:r*Pt.K_,width:l,filePath:n,hunkStage:s,side:Ot.M3}))}}else d.push((0,y.createElement)(Tt.b,{vm:this.vm,index:r,hunkLine:o,key:u,top:r*Pt.K_,width:l,first:0===r,filePath:n,side:Ot.M3}));m.push((0,y.createElement)(It.S,{vm:this.vm,mode:t,index:r,hunkLine:o,key:u,top:r*Pt.K_,width:a,first:0===r,side:Ot.M3}))}return 0===d.length?null:{nums:d,lines:m,headers:p}}drawContentRight(){const{store:e,hunkLineStore:{$mode:t,$hunks:s},filePath:n}=this.props,{hunkLinesRight:i,$firstLine:o,$numLines:r,$textWidth:a,$marginWidth:l,$width:c}=this.vm,{wip:{stagingSt:h}}=e,u=Math.min(o+r,i.length),m=[],d=[],p=[];for(let r=o;r<u;r++){const o=i[r];if(void 0===o)continue;const u=r.toString();if("HeaderEnd"===o.status){const{hunkIndex:i}=o,a=s[i];if(void 0!==a){const s="wip"===t?h.hunkStagedState(a):null;p.push((0,y.createElement)(Nt.f,{store:e,hunkLine:o,hunk:a,mode:t,key:`${u}headerEnd`,top:r*Pt.K_-Pt.K_/2+1,width:c,marginWidth:l,side:Ot.NS})),d.push((0,y.createElement)(Mt.b,{vm:this.vm,index:r,hunk:a,key:u,top:r*Pt.K_,width:l,filePath:n,hunkStage:s,side:Ot.NS}))}}else d.push((0,y.createElement)(Tt.b,{vm:this.vm,index:r,hunkLine:o,key:u,top:r*Pt.K_,width:l,first:0===r,filePath:n,side:Ot.NS}));m.push((0,y.createElement)(It.S,{vm:this.vm,mode:t,index:r,hunkLine:o,key:u,top:r*Pt.K_,width:a,first:0===r,side:Ot.NS}))}return 0===d.length?null:{nums:d,lines:m,headers:p}}componentDidMount(){y.Reaction.value((()=>this.vm.store.nav.$selectedPatchId),(()=>{this.vm.resetScroll()}),this),y.Reaction.value((()=>this.vm.$scrollLeft),(e=>{const{textRefLeft:{current:t},textRefRight:{current:s}}=this;if(t&&s&&(t.style.transform=`translateX(${-e}px)`,s.style.transform=`translateX(${-e}px)`),this.vm.$focussedPane===Ot.M3){const{current:t}=this.runwayRefRight;t&&(t.scrollLeft=e)}else{const{current:t}=this.runwayRefLeft;t&&(t.scrollLeft=e)}}),this),y.Reaction.value((()=>this.vm.$scrollTop),(e=>{const{current:t}=this.runwayRefLeft,{current:s}=this.runwayRefRight;t&&s&&(this.vm.$focussedPane===Ot.M3?s.scrollTop=e:t.scrollTop=e)}),this)}}var Ht=Object.defineProperty,Bt=(e,t,s)=>((e,t,s)=>t in e?Ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class Ut{constructor(e,t,s){this.parent=e,this.left=t,this.right=s,Bt(this,"x",0),Bt(this,"y",0),Bt(this,"side",0),Bt(this,"wheel",!1),Bt(this,"onLeftScroll",(()=>{if(0!==this.side)return;if(this.wheel)return void(this.wheel=!1);const{left:e,right:t}=this;t.scrollLeft=e.scrollLeft,t.scrollTop=e.scrollTop})),Bt(this,"onRightScroll",(()=>{if(1!==this.side)return;if(this.wheel)return void(this.wheel=!1);const{left:e,right:t}=this;e.scrollLeft=t.scrollLeft,e.scrollTop=t.scrollTop})),Bt(this,"onWheel",(e=>{const{deltaX:t,deltaY:s}=e;if(Math.abs(t)<40&&Math.abs(s)<40){e.preventDefault(),this.wheel=!0;const{left:n,right:i}=this;n.scrollLeft+=t,n.scrollTop+=s,i.scrollLeft+=t,i.scrollTop+=s}})),t.addEventListener("mouseenter",(()=>{this.side=0})),s.addEventListener("mouseenter",(()=>{this.side=1})),t.addEventListener("scroll",this.onLeftScroll),s.addEventListener("scroll",this.onRightScroll),e.addEventListener("wheel",this.onWheel)}dispose(){this.parent.removeEventListener("wheel",this.onWheel)}}var Kt=Object.defineProperty,qt=(e,t,s)=>((e,t,s)=>t in e?Kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class Yt extends y.Custom{constructor(){super(...arguments),qt(this,"ref",(0,y.createRef)()),qt(this,"syncScroll",null),qt(this,"loadHtml",(async()=>{const{current:e}=this.ref;if(!e)return;this.syncScroll&&this.syncScroll.dispose();const{repo:{$selectedCommit:t,$selectedPatch:s},global:{settings:{$splitCodeViewer:n}},repoPath:i}=this.props.store;if(t&&s){const o=await x.RT.get_patch_as_html({repoPath:i,commit:t,patch:s,theme:le.zj.$theme.name,split:n});"Ok"in o?(e.innerHTML=o.Ok,this.setupScrollSync()):e.innerHTML=""}}))}render(){const{cardVm:e,store:{global:{settings:{$splitCodeViewer:t}}}}=this.props,{$codeViewerWidth:s,$bodyHeight:n}=e;return(0,y.createElement)("div",{className:y.c`CodeViewerSsr ${!0} CodeViewerSsr-split ${t}`,style:{width:s,height:n},ref:this.ref})}async componentDidMount(){y.Reaction.value((()=>this.props.store.repo.$selectedPatch),this.loadHtml,this),y.Reaction.value((()=>le.zj.$theme),this.loadHtml,this),await this.loadHtml()}setupScrollSync(){if(!this.props.store.global.settings.$splitCodeViewer)return;const e=document.getElementsByClassName("CodeViewerSsr-split").item(0),t=e?.children,s=t?.item(0),n=t?.item(1);e instanceof HTMLElement&&s instanceof HTMLElement&&n instanceof HTMLElement&&(this.syncScroll=new Ut(e,s,n))}}var Gt=Object.defineProperty;class Jt extends y.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?Gt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="onText")?e+"":e,(e=>{this.props.vm.setFilterText(e)}))}render(){const{store:{global:{windowSt:e},repo:t},vm:s}=this.props;if(e.$animatingCommits)return null;const{$patches:{patches:n}}=t;return 0===n.length?null:(0,y.createElement)("div",{className:"CommitCardFullscreenBody"},(0,y.createElement)("div",{className:"CommitCardFullscreenBody-sidebar"},this.drawFilter(),(0,y.createElement)(Pe,{store:this.props.store,vm:s})),(0,y.createElement)(wt,{vm:s}),this.drawContent())}drawFilter(){return(0,y.createElement)("div",{className:"CommitCardFullscreenBody-sidebar-filter"},(0,y.createElement)(Et.L,{value:this.props.vm.$filterText,placeholder:"Filter",onText:this.onText,clearButton:!0}))}drawContent(){const{store:e,vm:t}=this.props,{repo:s,repo:{$selectedPatch:n,$selectedCommit:i},global:{settings:{$ssrCodeViewer:o,$splitCodeViewer:r}}}=e;if(null!==n&&null!==i){if(n.isImage){const{oldFile:s,newFile:o}=n;return(0,y.createElement)(xt,{store:e,key:s,mode:null===i.stashId?"commit":"stash",columnSize:t,oldFile:s,newFile:o})}return o?(0,y.createElement)(Yt,{store:e,cardVm:t,commit:i,patch:n}):r?(0,y.createElement)(At,{store:e,hunkLineStore:s,cardVm:t,filePath:n.newFile}):(0,y.createElement)(Pt.Cv,{store:e,hunkLineStore:s,cardVm:t,filePath:n.newFile})}return null}componentDidMount(){const{store:{repo:{commitFilters:{$file:e},$patches:{patches:t}},nav:s}}=this.props;if(e){const n=t.find((t=>t.newFile.includes(e.file_name)));n&&s.setSelectedPatchId(n.id)}}}function Xt(e){return(0,y.createElement)("div",{className:"CardToolbar"},e)}var Zt=Object.defineProperty,Qt=(e,t,s)=>((e,t,s)=>t in e?Zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class es extends y.Custom{constructor(){super(...arguments),Qt(this,"vm",new Te(this.props.store)),Qt(this,"popStash",(async()=>{const{commit:e,store:t}=this.props;await Oe(t,e,"pop")})),Qt(this,"onHeaderResize",((e,t)=>{this.vm.setHeaderHeight(t)}))}render(){const{commit:e,store:t}=this.props;return(0,y.createElement)("div",{className:`CommitCardFullscreen ${is()}`},(0,y.createElement)(pt,{onResize:this.onHeaderResize},(0,y.createElement)(ue,{store:t,commit:e,toolbar:this.drawToolbar()}),",",(0,y.createElement)(oe,{vm:this.vm,commit:e,fullScreen:!0,messageExpanded:!1})),this.drawBody())}drawBody(){const{store:e,commit:t}=this.props,{global:{windowSt:s},repo:n}=e;if(s.$animatingCommits)return null;const{$patches:{patches:i}}=n;return 0===i.length?null:(0,y.createElement)(Jt,{store:e,commit:t,vm:this.vm})}drawToolbar(){const{commit:e}=this.props;if(null!==e.stashId)return Xt([this.drawPopStashButton()])}drawPopStashButton(){return(0,y.createElement)(w.R,{onClick:this.popStash,key:"pop"},"Unstash Changes")}}var ts=(e=>(e[e.forward=0]="forward",e[e.backwards=1]="backwards",e[e.none=2]="none",e))(ts||{});let ss=2;function ns(e){ss=e}function is(){let e;switch(ss){case 0:e=y.c` CommitCardFullscreenForward`;break;case 1:e=y.c` CommitCardFullscreenBack`;break;case 2:e=""}return ss=2,e}var os=Object.defineProperty;class rs extends y.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?os(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="onClick")?e+"":e,(async e=>{const{store:t,commit:s}=this.props;await(0,p.O0)(qe(t,s),e)}))}render(){const{editable:e,showMenu:t}=this.props,s=Se.iw;let n;return n=e&&!t?(0,y.createElement)("svg",{viewBox:`0 0 ${s} ${s}`},(0,y.createElement)("circle",{style:{fill:"var(--blueText)"},cx:s/2,cy:s/2,r:.1*s})):(0,y.createElement)("span",{className:"icon-menu",style:{fontSize:.44*s}}),(0,y.createElement)(w.R,{className:y.c`CommitCardMenuButton ${!0} CommitCardMenuButton-editable ${e}`,colour:"subtle",style:{width:s,height:s},onClick:this.onClick,title:e?"This commit can be edited as it hasn't been pushed":"show commit menu"},n)}}var as=s(6343),ls=s(8290),cs=Object.defineProperty,hs=(e,t,s)=>((e,t,s)=>t in e?cs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class us extends y.Custom{constructor(){super(...arguments),hs(this,"lastTransform",this.props.transform),hs(this,"lastCompleted",null),hs(this,"inProgress",null),hs(this,"visible",this.props.visible)}animate(){const e=this.ref.current;if(null===e||!this.visible)return;const{lastTransform:t,props:{transform:s,duration:n}}=this;if(this.lastCompleted===s||this.inProgress===s)return;let i=n;if((this.inProgress||this.lastCompleted||t)&&t!==s||(i=0),this.inProgress)for(const t of e.getAnimations())t.cancel();e.animate([{transform:this.lastCompleted??t??s},{transform:s}],{easing:"ease",duration:i,fill:"forwards"}).onfinish=()=>{this.inProgress=null,this.lastCompleted=s},this.inProgress=s}componentDidMount(){this.animate()}componentDidUpdate(){this.animate()}updateWithNewProps(e){(0,ls.rK)(this.props,e)||(this.lastTransform=this.props.transform,this.visible=this.props.visible||e.visible,this.visible||(this.lastCompleted=null,this.inProgress=null),this.props=e,this.update(),this.componentDidUpdate())}}var ms=Object.defineProperty,ds=(e,t,s)=>((e,t,s)=>t in e?ms(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class ps extends us{constructor(){super(...arguments),ds(this,"ref",(0,y.createRef)())}render(){return this.props.visible?(0,y.createElement)("div",{className:"CommitCardBackground",style:{width:as.rM,height:as.rM},ref:this.ref}):null}}class gs extends y.Custom{constructor(){super(...arguments),ds(this,"ref",(0,y.createRef)()),ds(this,"animateCardBackground",(()=>{const e=this.ref.current;if(e){const{width:t,height:s,prevWidth:n,prevHeight:i,animationDuration:o}=this.props;e.animate([{transform:`scale(${n/as.rM}, ${i/as.rM})`},{transform:`scale(${t/as.rM}, ${s/as.rM})`}],{easing:"ease",duration:o,fill:"forwards"})}}))}render(){return(0,y.createElement)("div",{className:"CommitCardBackground",style:{width:as.rM,height:as.rM},ref:this.ref,key:"CommitCardBackground"})}componentDidMount(){this.animateCardBackground()}componentDidUpdate(){this.animateCardBackground()}}function fs(e,t,s,n=!0){const i=t.length,o=32*i;let r={transform:`translateX(${e-o}px)`,width:o,gridTemplateColumns:`repeat(${i}, 32px)`};return n||(r.animationDuration="0s"),(0,y.createElement)("div",{className:"CardControls",style:r,key:`CardControls${s}`},t)}var ws=s(7027),bs=Object.defineProperty,ys=(e,t,s)=>((e,t,s)=>t in e?bs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class $s extends y.Custom{constructor(){super(...arguments),ys(this,"onClick",(async()=>{this.$fullScreen?await this.closeCard():await this.onClickExpand()})),ys(this,"onClickExpand",(async()=>{this.$fullScreen||(this.props.commitId===ws.z?this.props.store.wip.selectFirstPatch():this.props.store.repo.selectFirstPatch())}))}render(){const{$fullScreen:e}=this;return(0,y.createElement)(w.R,{colour:"subtle",className:B.YZ,onClick:this.onClick,title:e?"Minimise this commit":"Expand this commit"},this.drawExpandIcon(e))}drawExpandIcon(e){const t=!e,s=t?"0":"180deg",n=t?"180deg":"0";return(0,y.createElement)("div",{className:y.c`ExpandIcon ${!0} ExpandIcon-min ${!t}`},vs({transform:`rotate(${n})`}),vs({transform:`rotate(${s})`}))}get $fullScreen(){const{store:e}=this.props,{nav:t,global:{windowSt:s}}=e;return t.$viewingPatch&&!s.$animatingCommits}async closeCard(){const{nav:e}=this.props.store;e.$viewingPatch?e.setSelectedPatchId(null):e.setSelectedCommit(null)}}function vs(e){return(0,y.createElement)("div",{className:"ExpandIcon-arrow",style:e})}var ks=Object.defineProperty,Cs=(e,t,s)=>((e,t,s)=>t in e?ks(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class _s extends st{constructor(){super(...arguments),Cs(this,"ref",(0,y.createRef)()),Cs(this,"onClick",(async()=>{const{nav:e}=this.props.store;await this.onMouseLeave(),e.setSelectedCommit(this.props.commitId)})),Cs(this,"showContextMenu",(async e=>{const{store:t,commitId:s,commits:n}=this.props,i=n.get(s);await(0,p.O0)(qe(t,i),e,{usePoint:!0})})),Cs(this,"onMouseEnter",(()=>{this.props.store.nav.setHoveredCommit(this.props.commitId)})),Cs(this,"onMouseLeave",(async()=>{(0,p.hz)()&&await(0,p.ce)(),this.props.store.nav.setHoveredCommit("")})),Cs(this,"onClickNextCommit",(async()=>{ns(ts.forward);const{repo:e}=this.props.store,t=e.getNextCommitId();null!==t&&await e.switchToCommit(t)})),Cs(this,"onClickPrevCommit",(async()=>{ns(ts.backwards);const{repo:e}=this.props.store,t=e.getPrevCommitId();null!==t&&await e.switchToCommit(t)}))}render(){const{width:e,height:t,prevWidth:s,prevHeight:n,isSelected:i,viewingPatch:o,commitId:r,commits:a}=this.props,l=a.get(r);if(void 0===l)return null;const c=o&&!i;return(0,y.createElement)("div",{ref:this.ref,className:y.c`CommitCard ${!0} selected ${i} CommitCard-hidden ${c}`,tabIndex:c?-1:0,style:{width:e,height:t}},i?(0,y.createElement)(gs,{key:"background",width:e,height:t,prevWidth:s,prevHeight:n,animationDuration:le.zj.animationTime.medium}):null,this.drawBody(i,o,l),i?this.drawCardControls(l):null)}drawBody(e,t,s){return e?t?(0,y.createElement)(es,{store:this.props.store,commit:s}):(0,y.createElement)(Fe,{store:this.props.store,commit:s}):this.drawCommitCardClosed(s)}drawCommitCardClosed(e){return(0,y.createElement)("div",{className:B.BA,onClick:this.onClick,onContextMenu:this.showContextMenu,onMouseOver:this.onMouseEnter,onMouseLeave:this.onMouseLeave},(0,re.sY)(e,24,this.props.theme.name),(0,y.createElement)("div",{className:"CommitCard-message"},se(e.message)),this.drawMenuButton(e))}drawMenuButton(e){const{editable:t,hoveringOnClosedCard:s}=this.props;return s||t?(0,y.createElement)(rs,{store:this.props.store,commit:e,editable:t,showMenu:s}):null}drawCardControls(e){const{store:t,width:s,editable:n}=this.props,{nav:i}=t,{$selectedCommitId:o}=i;if(null!==o){const{$selectedPatchId:r}=i;if(null!==r){const i=0===e.index&&!t.wip.$haveWIP,r=e.index===t.repo.$commits.size-1;return fs(s,[(0,y.createElement)(w.R,{colour:"subtle",onClick:this.onClickPrevCommit,disabled:i,title:"Go to previous commit",style:{transform:"rotate(0deg)",paddingTop:1}},Ss(14,i)),(0,y.createElement)(w.R,{colour:"subtle",onClick:this.onClickNextCommit,disabled:r,title:"Go to next commit",style:{transform:"rotate(180deg)",paddingTop:2}},Ss(14,r)),(0,y.createElement)(rs,{store:t,showMenu:!0,editable:n,commit:e}),(0,y.createElement)($s,{store:t,commitId:o})],o,!1)}return fs(s,[(0,y.createElement)(rs,{store:t,showMenu:!0,editable:n,commit:e}),(0,y.createElement)($s,{store:t,commitId:o})],o)}return null}}function Ss(e,t){const s=e/2,n=e-2,i=.73*n,o=.27*n;return(0,y.createElement)("svg",{width:e,height:e,style:{opacity:t?.5:1}},(0,y.createElement)("line",{x1:2,y1:i,x2:s,y2:o,style:{stroke:"var(--primaryTextColour)",strokeWidth:2,strokeLinecap:"round"}}),(0,y.createElement)("line",{x1:s,y1:o,x2:n,y2:i,style:{stroke:"var(--primaryTextColour)",strokeWidth:2,strokeLinecap:"round"}}))}function xs(e,t,s,n,i,o,r,a,l,c){const{left:h,top:u,width:m,height:d}=n,p=s===o,g=l===s;return(0,y.createElement)(_s,{key:s,store:e,commits:t,commitId:s,isSelected:p,width:m,height:d,prevWidth:i.width,prevHeight:i.height,toX:h,toY:u,fromX:i.left,fromY:i.top,duration:le.zj.animationTime.medium,viewingPatch:r,editable:a,hoveringOnClosedCard:g,theme:c})}function Ps(e,t){return(0,y.createElement)("div",{className:"WipCardHeader"},(0,re.ZR)(32,{marginRight:5}),(0,y.createElement)("div",{className:"WipCardHeader-message"},e),(0,y.createElement)(y.Fragment,null,t??(0,y.createElement)("div",{style:{flexGrow:3}})))}var Es=Object.defineProperty,Rs=(e,t,s)=>((e,t,s)=>t in e?Es(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class Is extends y.Custom{constructor(){super(...arguments),Rs(this,"onClickSave",(async()=>{this.props.conflictViewSt.file?.saveFile()})),Rs(this,"abortMerge",(async()=>{const{wip:e,global:{consoleSt:t},repoPath:s}=this.props.conflictViewSt.store;await t.showLoading("Aborting merge",(async()=>{await x.En.command({repoPath:s,args:["merge","--abort"]}),await x.En.command({repoPath:s,args:["rebase","--abort"]}),await x.En.command({repoPath:s,args:["reset","--merge","HEAD"]}),await e.loadWip()}),{hideError:!0})}))}render(){return Ps(this.getMessageText(),[this.drawToolbar()])}getMessageText(){const{store:e}=this.props.conflictViewSt,{nav:t}=e;return t.$viewingPatch?function(e){const{wip:t}=e,s=t.$selectedPatch,n=t.$numChanges;return null!==s?`Conflict${n>1?"s":""} in ${s.newFile}`:""}(e):Ts(e)}get $fullScreen(){const{nav:e,global:{windowSt:t}}=this.props.conflictViewSt.store;return e.$viewingPatch&&!t.$animatingCommits}drawToolbar(){return this.$fullScreen?Xt([this.drawSaveButton(),this.drawAbortMergeButton()]):null}drawAbortMergeButton(){return(0,y.createElement)(w.R,{colour:"red",onClick:this.abortMerge,key:"abort"},"Abort Merge")}drawSaveButton(){const{file:e}=this.props.conflictViewSt;return null!==e&&e.conflictedDelete()?null:(0,y.createElement)(w.R,{colour:"green",disabled:e?.$saveButtonDisabled,onClick:this.onClickSave,key:"save"},"Save File")}}function Ts(e){const{wip:t,refs:s}=e,{$repoStatus:n}=s;if(!n)return"";const i=t.$numChanges;return 1===i?`1 file conflict found when merging into ${n.branchName}`:i>1?`${i} conflicting files found when merging into ${n.branchName}`:""}var Ns=Object.defineProperty;class Ms extends y.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?Ns(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="onClickWip")?e+"":e,(()=>{const{nav:e}=this.props.store;e.setSelectedCommit(ws.z)}))}render(){return(0,y.createElement)("div",{className:"WipCardClosed",onClick:this.onClickWip,onKeyUp:this.onClickWip},(0,re.ZR)(24),this.renderMessageRow())}renderMessageRow(){const e=this.countPatchTypes(),t=Array.from(e.entries()).map((([e,t])=>(0,y.createElement)("div",{className:"WipCardClosed-iconGroup",key:e},(0,y.createElement)("div",{className:"WipCardClosed-iconGroup-count"},t),(0,y.createElement)(de.q,{patchType:e}))));return(0,y.createElement)("div",{className:"WipCardClosed-message"},(0,y.createElement)("div",{className:"WipCardClosed-message-label"},this.getMessageText()),(0,y.createElement)(y.Fragment,null,t))}getMessageText(){const{wip:e}=this.props.store;return e.$haveConflicts?Ts(this.props.store):Ci(e.$numChanges)}countPatchTypes(){const{wip:{$patches:e}}=this.props.store,t=new Map;for(const s of e)Ls(t,s.patchType);return t}}function Ls(e,t){const s=e.get(t);void 0===s?e.set(t,1):e.set(t,s+1)}var Fs=s(320),Os=s(5524),Ds=Object.defineProperty,js=(e,t,s)=>((e,t,s)=>t in e?Ds(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class zs extends y.Custom{constructor(){super(...arguments),js(this,"patch",this.props.data.patches[this.props.index]),js(this,"onClickPatch",(e=>{e.stopPropagation();const{nav:t}=this.props.data.store;t.setSelectedPatchId(this.patch.id)})),js(this,"onContextMenu",(async e=>{const{data:{store:t}}=this.props,{repo:s,nav:n,repoPath:i}=t,{patch:o}=this;if(null===o)return;const r=[];"A"!==o.patchType&&r.push({label:`Show commits containing ${(0,a.WP)(o.newFile)}`,click:async()=>{s.commitFilters.setFileFilter({file_name:o.newFile}),n.setSelectedPatchId(null)}}),"D"!==o.patchType&&r.push({label:`Show in ${(0,d.dx)()}`,click:this.showFileInFolder}),r.push({label:"Copy path",click(){navigator.clipboard.writeText((0,m.uJ)(i,o.newFile))}}),await(0,p.O0)(r,e,{usePoint:!0})})),js(this,"showFileInFolder",(async()=>{const{patch:e}=this,{repoPath:t}=this.props.data.store;if(null!==t&&null!==e){const s=(0,m.uJ)(t,e.newFile);await Os.g.showItemInFolder(s)}})),js(this,"onKeyUp",(e=>{if("Enter"===e.key||" "===e.key){const{nav:e}=this.props.data.store;e.setSelectedPatchId(this.patch.id)}}))}render(){const{style:e}=this.props;return(0,y.createElement)("div",{className:"WipListItem focusableItemInset",tabIndex:0,style:e,onClick:this.onClickPatch,onKeyUp:this.onKeyUp,onContextMenu:this.onContextMenu},(0,y.createElement)(me,{path:this.patch.newFile,style:{marginRight:7}}),(0,y.createElement)(de.q,{patchType:this.patch.patchType}))}}var Ws=Object.defineProperty;class Vs extends y.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?Ws(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="itemKey")?e+"":e,((e,t)=>t.patches[e].id))}render(){const{store:e,height:t}=this.props,{wip:s,layout:n,global:{windowSt:i}}=e;return i.$animatingCommits?null:s.$emptyMerge?this.drawEmptyMergeMessage():(0,y.createElement)(Ce,{height:t,width:n.$wipPosition.width,itemCount:s.$patches.length,itemHeight:28,itemKey:this.itemKey,itemData:this.$itemData,item:zs})}get $itemData(){const{store:e}=this.props;return{store:e,patches:e.wip.$patches}}drawEmptyMergeMessage(){return(0,y.createElement)("div",{className:"WipPatchList"},(0,y.createElement)("div",{className:"WipListItem",key:Fs.v,onClick:e=>this.onClickPatch(Fs.u,e)},As))}async onClickPatch(e,t){t.stopPropagation();const{nav:s}=this.props.store;s.setSelectedPatchId(e.id)}}const As="All conflicts have been resolved. Commit to complete the merge.";class Hs extends y.Custom{render(){const{store:e}=this.props;return(0,y.createElement)("div",{className:"WipCardExpanded"},Ps(this.getMessageText()),(0,y.createElement)(Vs,{store:e,height:Se.J9-48}))}getMessageText(){const{wip:e}=this.props.store;return Ci(e.$numChanges)}}var Bs=s(7406),Us=Object.defineProperty;class Ks extends y.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?Us(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="showDropdown")?e+"":e,(async e=>{const{wip:{$patches:t,stagingSt:s,pinnedFiles:n},repoPath:i}=this.props.store,o=t.filter((e=>{const t=s.fileStagedState(e.newFile);return!n.has(i,e.newFile)&&("staged"===t||"mixed"===t)})).length,r=t.filter((e=>n.has(i,e.newFile))).length,a=[{label:"Stash All Changes",click:this.props.wipStore.stashAllChanges,enabled:r<t.length},{label:"Stash Selected Changes",click:this.props.wipStore.stashStagedChanges,enabled:o>0}];await(0,p.O0)(a,e)}))}render(){return(0,y.createElement)(w.R,{className:"StashButton",onClick:this.showDropdown},(0,y.createElement)("span",{className:"icon-stash"}),"Stash",Bs.D)}}var qs=s(3992),Ys=s(8901),Gs=Object.defineProperty,Js=(e,t,s)=>((e,t,s)=>t in e?Gs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class Xs{constructor(e){this.store=e,Js(this,"discardAllChanges",(async()=>{if(!await(0,S.M5)("This will discard all staged, unstaged and any untracked files. Do you want to continue?"))return;const{store:e}=this,{wip:t,wip:{$patches:s},global:{consoleSt:n},repoPath:i,repo:o,nav:r}=e;await n.showLoading("Discarding changes",(async()=>{s.filter((e=>t.pinnedFiles.has(i,e.newFile))).length>0?(await Zs(s.filter((e=>!t.pinnedFiles.has(i,e.newFile))),i),await o.loadOrReloadRepoData(),t.setCommitMessage("")):(await(0,P.n9)(i),r.goHome(),await o.loadOrReloadRepoData(),t.setCommitMessage(""))}))})),Js(this,"stashAllChanges",(async()=>{const{repo:e,global:{consoleSt:t},wip:{$patches:s,pinnedFiles:n,workingFilesSt:i},repoPath:o}=this.store;s.filter((e=>n.has(o,e.newFile))).length>0?(i.stageAll(),await this.stashStagedChanges()):await t.showLoading("Stashing all changes",(async()=>{await x.En.stash_changes({repoPath:o}),await e.loadOrReloadRepoData()}))})),Js(this,"stashStagedChanges",(async()=>{const{store:e}=this,{wip:t,wip:{workingFilesSt:s,pinnedFiles:n},repo:i,global:{consoleSt:o},refs:r,repoPath:a}=e;await o.showLoading("Stashing selected changes",(async()=>{if(0===t.$patches.filter((e=>{const s=t.stagingSt.fileStagedState(e.newFile),i=n.has(a,e.newFile);return"unStaged"===s||"mixed"===s||i})).length&&t.workingFilesSt.$visiblePatches.length===t.$patches.length)await x.En.stash_changes({repoPath:a});else{const{$repoStatus:t}=r;t?.localCommitId&&(await(0,Ys.pC)(e,s),await x.En.stash_staged({repoPath:a,headCommitId:t.localCommitId}))}await i.loadOrReloadRepoData()}))}))}}async function Zs(e,t){for(const s of e)(await(0,P.E0)(t,s.newFile)).error||("A"===s.patchType?await x.En.command({repoPath:t,args:["clean","-f","--",s.newFile]}):await x.En.command({repoPath:t,args:["checkout","--",s.newFile]}))}var Qs=Object.defineProperty,en=(e,t,s)=>((e,t,s)=>t in e?Qs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class tn extends y.Custom{constructor(){super(...arguments),en(this,"onClickDiscard",(async e=>{const{wip:{$patches:t,stagingSt:s,pinnedFiles:n},repoPath:i}=this.props.store,o=t.filter((e=>{const t=s.fileStagedState(e.newFile);return!n.has(i,e.newFile)&&("staged"===t||"mixed"===t)})).length,r=t.filter((e=>n.has(i,e.newFile))).length,a=[{label:"Discard All Changes",click:this.props.wipStore.discardAllChanges,enabled:r<t.length},{label:"Discard Selected Changes",click:this.discardSelectedChanged,enabled:o>0}];await(0,p.O0)(a,e)})),en(this,"discardSelectedChanged",(async()=>{const{store:e}=this.props,{wip:t,wip:{workingFilesSt:{$visiblePatches:s},$patches:n},global:{consoleSt:i},repoPath:o,repo:r}=e,a=new Set(s),l=n.filter((e=>{const s=t.stagingSt.fileStagedState(e.newFile);return!t.pinnedFiles.has(o,e.newFile)&&("staged"===s||"mixed"===s)&&a.has(e)}));if(l.length===n.length&&l.length>1)await this.props.wipStore.discardAllChanges();else{if(l.length>1&&!await(0,S.M5)(`This will discard changes to ${l.length} files. Do you want to continue?`))return;await i.showLoading("Discarding selected changes",(async()=>{await Zs(l,o),await r.loadOrReloadRepoData()}))}}))}render(){return Ps(this.getMessageText(),[this.drawToolbar()])}getMessageText(){const{wip:e}=this.props.store;return Ci(e.$numChanges)}drawToolbar(){const{global:{windowSt:e}}=this.props.store;return e.$animatingCommits?null:Xt([(0,y.createElement)(Ks,{store:this.props.store,wipStore:this.props.wipStore,key:"stash-button"}),this.drawDiscardAllButton()])}drawDiscardAllButton(){return(0,y.createElement)(w.R,{onClick:this.onClickDiscard},(0,y.createElement)(qs.u,null),"Discard",Bs.D)}}var sn=Object.defineProperty,nn=(e,t,s)=>((e,t,s)=>t in e?sn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class on extends y.Custom{constructor(){super(...arguments),nn(this,"$username",""),nn(this,"$email",""),nn(this,"onSubmit",(async e=>{e.preventDefault();const{store:{repoPath:t},resolve:s}=this.props,n=await x.En.command({repoPath:t,args:["config","--global","user.name",this.$username]}),i=await x.En.command({repoPath:t,args:["config","--global","user.email",this.$email]});n.error||i.error||s(!0)})),nn(this,"setUsername",(e=>{this.$username=e})),nn(this,"setEmail",(e=>{this.$email=e}))}render(){const{resolve:e,descriptionId:t}=this.props;return(0,y.createElement)("form",{className:"UsernameDialog",id:B.kf,onSubmit:this.onSubmit},(0,y.createElement)(T.A,{messageId:t},"Git needs some information before you can commit"),(0,y.createElement)("div",{className:"FInputDialogColumn"},(0,y.createElement)("label",{htmlFor:B.ZR},"Username"),(0,y.createElement)(Et.L,{id:B.ZR,value:this.$username,onText:this.setUsername,required:!0}),(0,y.createElement)("label",{htmlFor:B.Gr},"Email"),(0,y.createElement)(Et.L,{id:B.Gr,value:this.$email,onText:this.setEmail,type:"email",required:!0})),(0,y.createElement)(N.D,{rightButtons:[(0,y.createElement)(w.R,{id:B.qC,type:"submit"},"Save"),(0,y.createElement)(w.R,{onClick:()=>e(void 0)},"Cancel")]}))}async componentDidMount(){}}function rn(e){return(0,I.$)({dialogId:rn.name,dismissible:!1,focusElementId:B.ZR,contentCallback:(t,s,n)=>(0,y.createElement)(on,{descriptionId:n,resolve:t,store:e})})}var an=Object.defineProperty,ln=(e,t,s)=>((e,t,s)=>t in e?an(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class cn extends y.Custom{constructor(){super(...arguments),ln(this,"$username",""),ln(this,"$email",""),ln(this,"$mounted",!1),ln(this,"getAutoCompleteList",(async e=>{const t=await x.RT.auto_complete({kind:"CommitMessage",repoPath:this.props.store.repoPath,currentWord:e,maxNum:20});return"Ok"in t?{list:t.Ok,currentWord:e}:{list:[],currentWord:e}})),ln(this,"onTextChange",(e=>{this.props.store.wip.setCommitMessage(e)})),ln(this,"onTextAreaKeyPress",(async e=>{this.$commitDisabled||!e.ctrlKey&&!e.metaKey||"Enter"!==e.key||await this.commit()})),ln(this,"onClickCommit",(async()=>{this.usernameOk?await this.commit():void 0!==await rn(this.props.store)&&(this.$username=await this.loadUsername(),this.$email=await this.loadEmail())})),ln(this,"commit",(async()=>{const{store:e}=this.props,{repo:t,wip:s,global:{consoleSt:n},wip:{workingFilesSt:i},repoPath:o}=e;await n.showLoading("Committing",(async()=>{let n;const{$filterText:r,$checkboxState:a}=i;if(n=s.$emptyMerge||""===r&&"true"===a?!(await(0,P.g9)(o)).error:await(0,Ys.pC)(e,i),n&&!(await(0,P.PT)(o,s.$commitMessage)).error)return s.clearCommitMessage(),await t.loadOrReloadRepoData(),s.stagingSt.cleanupAfterCommit(i.$visiblePatches.map((e=>e.newFile))),void await s.validateAndLoadHunks();await t.loadOrReloadRepoData()}))}))}render(){const{wip:e}=this.props.store;return(0,y.createElement)("div",{className:"CommitPane",style:{height:180}},(0,y.createElement)(A,{className:"CommitPane-message",onText:this.onTextChange,value:e.$commitMessage,placeholder:this.placeholder(),onKeyDown:this.onTextAreaKeyPress,id:B.w1,autoComplete:this.getAutoCompleteList}),this.drawCommitButton())}async componentDidMount(){this.$username=await this.loadUsername(),this.$email=await this.loadEmail(),this.usernameOk||void 0!==await rn(this.props.store)&&(this.$username=await this.loadUsername(),this.$email=await this.loadEmail()),this.$mounted=!0,document.getElementById(B.w1)?.focus()}async loadUsername(){const e=await x.RT.run({repoPath:this.props.store.repoPath,args:["config","user.name"]});return"Ok"in e?e.Ok:""}async loadEmail(){const e=await x.RT.run({repoPath:this.props.store.repoPath,args:["config","user.email"]});return"Ok"in e?e.Ok:""}placeholder(){return`Message (${l.cX?"Cmd":"Ctrl"} + Enter to commit)`}drawCommitButton(){let e;return e=this.$mounted?this.usernameOk?`Commit as ${this.$username}`:"Configure Git...":"Commit",(0,y.createElement)(w.R,{className:"CommitPane-submitButton",id:B.MO,onClick:this.onClickCommit,disabled:this.$commitDisabled},e)}get $commitDisabled(){const{wip:e,repoPath:t}=this.props.store;return!this.$mounted||!!this.usernameOk&&(0===e.$patches.filter((s=>"unStaged"!==e.stagingSt.fileStagedState(s.newFile)&&!e.pinnedFiles.has(t,s.newFile))).length||""===e.$commitMessage)}get usernameOk(){return""!==this.$username&&""!==this.$email}}function hn(e){const{store:t,fileName:s,invert:n=!1,themeName:i,style:o={},...r}=e;let a=n;"dark"===i&&(a=!a);let l=o;return a&&(l.filter="invert(1)"),(0,y.createElement)("img",{alt:"",...r,style:l,src:(0,m.yn)(["other",`${s}.svg`])})}var un=Object.defineProperty,mn=(e,t,s)=>((e,t,s)=>t in e?un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class dn extends y.Custom{constructor(){super(...arguments),mn(this,"ref",(0,y.createRef)()),mn(this,"prevSelected",this.selected),mn(this,"onClick",(()=>{const{patch:e,props:{data:{store:t}}}=this;null!==e&&t.nav.setSelectedPatchId(e.id)})),mn(this,"onKeyUp",(async e=>{"Enter"!==e.key&&" "!==e.key||(this.selected?await this.onClickCheckbox():this.onClick())})),mn(this,"onClickCheckbox",(async()=>{const{patch:e,props:t}=this,{wip:{stagingSt:s}}=t.data.store;if(null===e)return;const{$patchStage:n}=this,{newFile:i}=e;switch(n){case"staged":s.unStageFile(i);break;case"unStaged":case"mixed":s.stageFile(i)}})),mn(this,"showContentMenu",(async e=>{const{data:{store:t}}=this.props,{wip:s,repo:n,nav:i,repoPath:o}=t,{patch:r}=this;if(null===r)return;const{$patchStage:l}=this,c=[this.stageFileMenuItem(),{label:"Lock file",type:"checkbox",checked:this.$pinned,click:async()=>{this.$pinned?s.pinnedFiles.unPinFile(o,r.newFile):("staged"===l&&(await(0,P.E0)(o,r.newFile),await s.loadWip()),s.pinnedFiles.pinFile(o,r.newFile))}}];c.push(g.me),"A"===r.patchType?c.push({label:"Delete file",click:async()=>{(await(0,P.E0)(o,r.newFile)).error||await x.En.command({repoPath:o,args:["clean","-f","--",r.newFile]}),await s.loadWip()},enabled:!this.$pinned}):c.push({label:"Discard changes",click:async()=>{(await(0,P.E0)(o,r.newFile)).error||await x.En.command({repoPath:o,args:["checkout","--",r.newFile]}),await s.loadWip()},enabled:!this.$pinned}),"M"===r.patchType&&c.push({label:"Remove file from Git tracking",click:async()=>{await x.En.command({repoPath:o,args:["rm",r.newFile,"--cached"]}),await s.loadWip()}}),c.push(g.me),"A"!==r.patchType&&c.push({label:`Show commits containing ${(0,a.WP)(r.newFile)}`,click:async()=>{n.commitFilters.setFileFilter({file_name:r.newFile}),i.setSelectedPatchId(null)}}),"D"!==r.patchType&&c.push({label:`Show in ${(0,d.dx)()}`,click:this.showFileInFolder}),c.push({label:"Copy path",click(){navigator.clipboard.writeText((0,m.uJ)(o,r.newFile))}}),await(0,p.O0)(c,e,{usePoint:!0})})),mn(this,"showFileInFolder",(async()=>{const{patch:e}=this,{repoPath:t}=this.props.data.store;if(null!==t&&null!==e){const s=(0,m.uJ)(t,e.newFile);await Os.g.showItemInFolder(s)}}))}render(){const{patch:e,props:t,$pinned:s}=this,{style:n}=t;if(null===e)return null;const{newFile:i,patchType:o}=e;return(0,y.createElement)("div",{className:y.c`WorkingFileListElement ${!0} selected ${this.selected} pinned ${s} focusableItemInset ${!0}`,ref:this.ref,id:i,tabIndex:0,style:n,onClick:this.onClick,onDoubleClick:this.onClickCheckbox,onKeyUp:this.onKeyUp,onContextMenu:this.showContentMenu},this.drawCheckbox(i),(0,y.createElement)(me,{path:i}),(0,y.createElement)(de.q,{patchType:o}))}componentDidUpdate(){this.selected&&!this.prevSelected&&this.ref.current?.focus(),this.prevSelected=this.selected}drawCheckbox(e){return this.$pinned?(0,y.createElement)("div",{className:"WorkingFileListElement-pinIcon"},(0,y.createElement)(hn,{fileName:"LockIcon",style:{filter:"brightness(1.5)",height:"12px"},store:this.props.data.store.global,themeName:this.props.data.themeName})):(0,y.createElement)(De.mT,{style:{marginRight:7,marginTop:2},tabIndex:-1,checked:this.checked(),onClick:this.onClickCheckbox,labelId:e})}get selected(){const{patch:e,props:t}=this,{data:{selectedPatchId:s}}=t;return s===e?.id}get patch(){const{index:e,data:{patches:t}}=this.props;return t[e]??null}get $patchStage(){const{patch:e}=this;if(null===e)return"unStaged";const{newFile:t}=e,{data:{store:{wip:{stagingSt:s}}}}=this.props;return s.fileStagedState(t)}checked(){const{$patchStage:e}=this;switch(e){case"staged":return"true";case"unStaged":return"false";case"mixed":return"mixed"}}stageFileMenuItem(){const{patch:e}=this;if(null===e)return g.eh;const{$patchStage:t}=this;return{label:"staged"===t?"Unselect file":"Select file",click:this.onClickCheckbox,enabled:!this.$pinned}}get $pinned(){const{data:{store:{wip:e,repoPath:t}}}=this.props,{patch:s}=this;return null!==s&&e.pinnedFiles.has(t,s.newFile)}}var pn=Object.defineProperty,gn=(e,t,s)=>((e,t,s)=>t in e?pn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class fn extends y.Custom{constructor(){super(...arguments),gn(this,"$inputFocused",!1),gn(this,"onText",(e=>{this.props.vm.$filterText=e})),gn(this,"onFocus",(()=>{this.$inputFocused=!0})),gn(this,"onBlur",(()=>{this.$inputFocused=!1}))}render(){return(0,y.createElement)(Et.L,{className:"WorkingFileListFilter",value:this.props.vm.$filterText,placeholder:"Filter",style:{width:this.$width},onText:this.onText,onFocus:this.onFocus,onBlur:this.onBlur,clearButton:!0})}get $width(){return this.$inputFocused||this.props.vm.$filterText.length>0?"60%":"100px"}}class wn extends y.Custom{render(){const{props:{vm:{$bodyHeight:e,$listWidth:t},store:{wip:{workingFilesSt:s}}}}=this;return(0,y.createElement)(y.Fragment,null,(0,y.createElement)("div",{className:"WipFileLists-TitleRow",style:{height:33}},(0,y.createElement)(De.mT,{id:B.aT,checked:s.$checkboxState,onClick:s.onClickCheckbox}),this.drawStagedRatio(),(0,y.createElement)(fn,{vm:s})),(0,y.createElement)(Ce,{width:t,height:e-180-33,itemCount:s.$visiblePatches.length,itemHeight:28,itemKey:bn,itemData:this.$itemData,item:dn}))}drawStagedRatio(){const{$selectedInfo:{staged:e,mixed:t,total:s,pinned:n}}=this.props.store.wip.workingFilesSt;return(0,y.createElement)("div",{className:"WorkingFileList-ratio"},e+t," / ",s-n)}get $itemData(){const{store:e,vm:t}=this.props,{nav:{$selectedPatchId:s},wip:{workingFilesSt:n}}=e,{$theme:{name:i}}=le.zj;return{store:e,patches:n.$visiblePatches,workingFilesSt:n,vm:t,selectedPatchId:s,themeName:i}}}function bn(e,t){return t.patches[e].id}class yn extends y.Custom{render(){const{store:e,vm:t}=this.props,{global:{windowSt:s}}=e;if(s.$animatingCommits)return null;const{$listWidth:n}=t;return(0,y.createElement)("div",{className:"WipFileLists",style:{width:n}},(0,y.createElement)(wn,{store:e,vm:t}),(0,y.createElement)(cn,{store:e}))}}class $n extends y.Custom{render(){const{message:e}=this.props;return(0,y.createElement)("div",{className:"CodeViewerMessage"},e)}}class vn extends y.Custom{render(){const{store:e,vm:t}=this.props,{global:{windowSt:s}}=e;return s.$animatingCommits?null:(0,y.createElement)("div",{className:"WipCardExpanded-content"},(0,y.createElement)(yn,{store:e,vm:t}),(0,y.createElement)(wt,{vm:t}),this.drawFileContent())}drawFileContent(){const{store:e,vm:t}=this.props,{wip:s}=e,{$selectedPatch:n,$loadingHunks:i,$hunks:o}=s;if(null===n)return null;if(i&&0===o.length)return(0,y.createElement)(Ne.y,{size:20,delay:!0,style:{margin:"26px auto auto"},invertColour:"light"===le.zj.$theme.name});const{oldFile:r,newFile:a}=n;return s.$emptyMerge?(0,y.createElement)($n,{message:As}):n.isImage?(0,y.createElement)(xt,{store:e,oldFile:r,newFile:a,mode:"wip",columnSize:t,key:r}):i||0!==s.$hunkLines.length?e.global.settings.$splitCodeViewer?(0,y.createElement)(At,{store:e,hunkLineStore:s,cardVm:t,filePath:a}):(0,y.createElement)(Pt.Cv,{store:e,hunkLineStore:s,cardVm:t,filePath:a}):(0,y.createElement)($n,{message:""})}}var kn=Object.defineProperty,Cn=(e,t,s)=>((e,t,s)=>t in e?kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class _n extends y.Custom{constructor(){super(...arguments),Cn(this,"vm",new Te(this.props.store)),Cn(this,"drawBody",(()=>(0,y.createElement)(vn,{store:this.props.store,vm:this.vm}))),Cn(this,"onHeaderResize",((e,t)=>{this.vm.setHeaderHeight(t)}))}render(){return(0,y.createElement)("div",{className:is()},(0,y.createElement)(pt,{onResize:this.onHeaderResize},(0,y.createElement)(tn,{store:this.props.store,wipStore:this.props.wipStore})),this.drawBody())}}var Sn=Object.defineProperty,xn=(e,t,s)=>((e,t,s)=>t in e?Sn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class Pn{constructor(e){this.conflictViewSt=e,xn(this,"$clientWidth",0),xn(this,"$clientHeight",0),xn(this,"$scrollTop",0),(0,y.init$)(this)}get file(){return this.conflictViewSt.store.wip.$conflictedFile}get $codeWidth(){const{$marginWidth:e}=this.conflictViewSt;if(null===this.file)return 0;const t=15+e+this.file.$info.maxLineLength*Ft._3;return Math.max(t,this.$clientWidth-(e+15))}get $firstLine(){return Math.floor(this.$scrollTop/Pt.K_)}get $numLines(){return 1+Math.ceil(this.$clientHeight/Pt.K_)}setClientHeight(e){this.$clientHeight=e}setClientWidth(e){this.$clientWidth=e}setScrollTop(e){this.$scrollTop=e}}class En extends Pn{get $codeHeight(){if(null===this.file)return 0;const e=Nn+this.file.lines.length*Pt.K_;return Math.max(e,this.$clientHeight)}}class Rn extends Pn{get $codeHeight(){if(null===this.file)return 0;const e=Nn+this.file.chosenLines.$chosenLines.length*Pt.K_;return Math.max(e,this.$clientHeight)}}var In=Object.defineProperty,Tn=(e,t,s)=>((e,t,s)=>t in e?In(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);const Nn=30;class Mn{constructor(e){this.store=e,Tn(this,"$hoveredLine",-1),Tn(this,"panes",{[Ot.M3]:new En(this),[Ot.NS]:new En(this),[Ot._N]:new Rn(this)}),Tn(this,"$hoveredPane",Ot.M3),Tn(this,"$leftRatio",0),Tn(this,"$topRatio",0),(0,y.init$)(this)}get file(){return this.store.wip.$conflictedFile}setHoveredLine(e){this.$hoveredLine=e}setScrollRatios(e,t){this.$leftRatio=e,this.$topRatio=t}get $marginWidth(){if(null===this.file)return 0;const e=this.file.lines.length.toString().length;return 22+Ft._3*e+2*Pt.j4}setHoveredPane(e){this.$hoveredPane=e}}function Ln(e,t,s){switch(e){case Ot.M3:return s?(0,le.Vg)("conflictLeftChosen"):t?(0,le.Vg)("conflictLeftHover"):(0,le.Vg)("conflictLeft");case Ot.NS:return s?(0,le.Vg)("conflictRightChosen"):t?(0,le.Vg)("conflictRightHover"):(0,le.Vg)("conflictRight");default:return(0,le.Vg)("conflictLeft")}}class Fn extends y.Custom{render(){const{index:e,lineNumber:t}=this.props;return(0,y.createElement)("div",{className:"ConflictCodeMargin-line",style:{transform:`translateY(${Pt.K_*e}px)`}},t.toString())}}function On(e,t,s,n,i,o){const r=e.panes[n];return(0,y.createElement)(y.Fragment,null,(0,y.createElement)("div",{className:"ViewHunk-lineContainer",style:{width:r.$codeWidth,height:r.$codeHeight,left:e.$marginWidth},ref:s},o),(0,y.createElement)("div",{className:"ConflictCodeMargin",style:{width:e.$marginWidth,height:r.$codeHeight}},i))}class Dn extends y.Custom{render(){const{side:e,conflictViewSt:t,index:s}=this.props;return(0,y.createElement)("div",{className:"ConflictedLineBlank ViewHunk-line",style:{width:t.panes[e].$codeWidth,top:s*Pt.K_}})}}class jn extends y.Custom{render(){const{line:e,side:t,conflictViewSt:s,index:n,vm:i}=this.props,o={width:s.panes[t].$codeWidth,background:i.$colour,top:n*Pt.K_};return(0,y.createElement)("div",{className:"ConflictedLine ViewHunk-line",style:o,onMouseEnter:i.onMouseEnter,onMouseLeave:i.onMouseLeave,onClick:i.onClick},e.conflict.text)}}class zn extends y.Custom{render(){const{lineNumber:e,index:t,vm:s}=this.props,n={background:s.$colour,top:t*Pt.K_};return(0,y.createElement)("div",{className:"ConflictedLineMargin",onMouseEnter:s.onMouseEnter,onMouseLeave:s.onMouseLeave,style:n,onClick:s.onClick},this.drawCheckbox(),e)}drawCheckbox(){const{line:e,file:t}=this.props,s=t.chosenLines.has(e);return(0,y.createElement)(De.Sc,{checked:s})}}var Wn=Object.defineProperty,Vn=(e,t,s)=>((e,t,s)=>t in e?Wn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class An{constructor(e,t,s,n,i){this.conflictViewSt=e,this.side=t,this.line=s,this.index=n,this.file=i,Vn(this,"onClick",(()=>{const{line:e,file:{chosenLines:t}}=this;"conflict"in e&&t.toggleLine(e)})),Vn(this,"onMouseEnter",(()=>{const{index:e,conflictViewSt:t}=this;t.setHoveredLine(e)})),Vn(this,"onMouseLeave",(()=>{const{conflictViewSt:e}=this;e.setHoveredLine(-1)})),(0,y.init$)(this)}get $mouseHovering(){const{conflictViewSt:e,index:t,side:s}=this;return e.$hoveredPane===s&&e.$hoveredLine===t}get $chosen(){const{file:e,line:t}=this;return"conflict"in t&&e.chosenLines.has(t)}get $colour(){const{side:e}=this;return Ln(e,this.$mouseHovering,this.$chosen)}}var Hn=Object.defineProperty,Bn=(e,t,s)=>((e,t,s)=>t in e?Hn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class Un extends y.Custom{constructor(){super(...arguments),Bn(this,"blanks",0),Bn(this,"lineVms",new WeakMap)}render(){const{conflictViewSt:e,pane:t,file:s,forwardRef:n}=this.props,i=this.drawLines(e,s,t);return On(e,0,n,t,i.marginLines,i.textLines)}drawLines(e,t,s){const n=e.panes[s],i=n.$firstLine,o=n.$numLines,r=Math.min(i+o,t.lines.length),a=[],l=[];this.blanks=0;for(let n=i;n<r;n++){const i=t.lines[n];if(void 0===i)continue;let o=null;if("slot"in i){const r=t.getConflictedLine(i.slot.section,s,i.slot.index);if("conflict"in r){const i=this.lineVms.get(r);void 0!==i?o=i:(o=new An(e,s,r,n,t),this.lineVms.set(r,o))}}a.push(this.drawTextLine(e,t,i,n,n,o)),l.push(this.drawMarginLine(e,t,i,n,n,o))}return{textLines:a,marginLines:l}}drawTextLine(e,t,s,n,i,o){const{pane:r}=this.props;if("ok"in s)return(0,y.createElement)(Kn,{key:n.toString(),line:s,width:e.panes[r].$codeWidth,index:i});{const a=t.getConflictedLine(s.slot.section,r,s.slot.index);return"blank"in a?(0,y.createElement)(Dn,{conflictViewSt:e,side:r,file:t,index:i,key:n.toString()}):(0,y.createElement)(jn,{key:n.toString(),file:t,side:r,conflictViewSt:e,line:a,index:i,vm:o})}}drawMarginLine(e,t,s,n,i,o){const{pane:r}=this.props;if("slot"in s){const a=t.getConflictedLine(s.slot.section,r,s.slot.index);return"blank"in a?(this.blanks++,function(e,t){return(0,y.createElement)("div",{className:"ConflictedLineMarginBlank",style:{top:e*Pt.K_},key:t})}(i,n.toString())):(0,y.createElement)(zn,{file:t,side:r,key:n.toString(),conflictViewSt:e,line:a,lineNumber:1+i-this.blanks,index:i,vm:o})}return(0,y.createElement)(Fn,{index:i,key:n.toString(),lineNumber:1+i-this.blanks})}}class Kn extends y.Custom{render(){const{line:e,width:t,index:s}=this.props;return(0,y.createElement)("div",{className:"ViewHunk-line",style:{width:t,top:Pt.K_*s}},e.ok.text)}}class qn extends y.Custom{render(){const{line:e,width:t,vm:s}=this.props,{text:n}=e.conflict;return(0,y.createElement)("div",{className:"ViewHunk-line",style:{position:"absolute",width:t,top:s.$top,backgroundColor:s.$colour,zIndex:s.$dragging?100:"unset",transform:s.dragSt.$dragInProgress&&!s.$dragging?"top 150ms":"none",cursor:"move"},onMouseEnter:s.onMouseEnter,onMouseLeave:s.onMouseLeave,onMouseDown:s.onMouseDown},n)}}class Yn extends y.Custom{render(){const{vm:e}=this.props,t={background:e.$colour,top:e.$top,zIndex:e.$dragging?100:"unset",transition:e.dragSt.$dragInProgress&&!e.$dragging?"top 150ms":"none",cursor:"move"};return(0,y.createElement)("div",{className:"ConflictCodeMargin",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onMouseDown:e.onMouseDown,style:t},this.drawGrabIcon(),e.$index+1)}drawGrabIcon(){const e=`url("${["other","GrabIcon.svg"].join("/")}") no-repeat 50% 50%`;return(0,y.createElement)("div",{style:{height:Pt.K_,width:13,backgroundColor:"var(--disabledTextColour)",mask:e}})}}var Gn=Object.defineProperty,Jn=(e,t,s)=>((e,t,s)=>t in e?Gn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class Xn{constructor(e,t,s){this.conflictViewSt=e,this.file=t,this.line=s,Jn(this,"onMouseDown",(e=>{const{line:t}=this;this.dragSt.setDragging(e,t,this.$top)})),Jn(this,"onMouseEnter",(()=>{null===this.dragSt.$draggedLine&&this.conflictViewSt.setHoveredLine(this.$index)})),Jn(this,"onMouseLeave",(()=>{null===this.dragSt.$draggedLine&&this.conflictViewSt.setHoveredLine(-1)})),(0,y.init$)(this)}get dragSt(){return this.file.chosenLines.dragSt}get $index(){return this.file.chosenLines.$lineIndices.get(this.line.conflict.key)??0}get $top(){return this.$dragging?this.dragSt.$draggedElementTop:Pt.K_*this.$index}get $dragging(){const{key:e}=this.line.conflict;return this.dragSt.$draggedLine?.conflict.key===e}get $mouseHovering(){const{conflictViewSt:e}=this;return this.$dragging||null===this.dragSt.$draggedLine&&e.$hoveredPane===Ot._N&&e.$hoveredLine===this.$index}get $colour(){return Ln(this.line.conflict.side,this.$mouseHovering,!1)}}var Zn=Object.defineProperty;class Qn extends y.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?Zn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="lineVms")?e+"":e,new WeakMap)}componentDidMount(){const{conflictViewSt:e,file:t}=this.props;y.Reaction.auto((()=>{e.panes[Ot._N].$firstLine,this.forceUpdate()}),this),y.Reaction.auto((()=>{const{$draggedLine:e,$currentIndex:s,$newIndex:n}=t.chosenLines.dragSt;null!==e&&-1!==s&&s!==n&&t.chosenLines.reorder(e,s,n)}),this)}render(){const{conflictViewSt:e,file:t,forwardRef:s}=this.props,n=this.drawLines(e,t);return On(e,0,s,Ot._N,n.marginLines,n.textLines)}drawLines(e,t){const s=e.panes[Ot._N],n=s.$firstLine,i=s.$numLines,o=Math.min(n+i,t.chosenLines.$chosenLines.length),r=[],a=[];for(let s=n;s<o;s++){const n=t.chosenLines.$chosenLines[s];if(void 0===n)continue;let i=null;if("conflict"in n){const s=this.lineVms.get(n);void 0!==s?i=s:(i=new Xn(e,t,n),this.lineVms.set(n,i))}r.push(this.drawTextLine(e,t,n,s,s,i)),a.push(this.drawMarginLine(e,t,n,s,s,i))}return{textLines:r,marginLines:a}}drawTextLine(e,t,s,n,i,o){return"conflict"in s?(0,y.createElement)(qn,{conflictViewSt:e,file:t,line:s,key:s.conflict.key,width:e.panes[Ot._N].$codeWidth,vm:o}):(0,y.createElement)(ei,{line:s,key:n.toString(),width:e.panes[Ot._N].$codeWidth,index:i})}drawMarginLine(e,t,s,n,i,o){return"conflict"in s?(0,y.createElement)(Yn,{conflictViewSt:e,file:t,key:n,vm:o}):(0,y.createElement)(Fn,{index:i,key:n.toString(),lineNumber:i+1})}}class ei extends y.Custom{render(){const{line:e,width:t,index:s}=this.props,{text:n}=e.ok;return(0,y.createElement)("div",{className:"ViewHunk-line",style:{position:"absolute",width:t,top:Pt.K_*s}},n)}}var ti=Object.defineProperty,si=(e,t,s)=>((e,t,s)=>t in e?ti(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class ni extends y.Custom{constructor(){super(...arguments),si(this,"runWay",(0,y.createRef)()),si(this,"paneRef",(0,y.createRef)()),si(this,"textRef",(0,y.createRef)()),si(this,"toggleAllLines",(()=>{const{pane:e,conflictViewSt:{store:{wip:{$conflictedFile:t}}}}=this.props;e!==Ot._N&&null!==t&&t.chosenLines.toggleSide(e)})),si(this,"onScroll",(()=>{this.updateScrollPositions()})),si(this,"onMouseEnter",(()=>{this.props.conflictViewSt.setHoveredPane(this.props.pane)}))}render(){const{conflictViewSt:e,conflictViewSt:{store:{global:{windowSt:t},wip:s}},pane:n,width:i,height:o}=this.props;if(t.$animatingCommits||null===s.$conflictedFile)return null;const{$runwayStyle:r}=this;return(0,y.createElement)(Rt.B,{className:`ConflictCodeViewer ConflictView-pane-${n}`,id:n,width:i,height:o,contentWidth:r.minWidth,contentHeight:r.height,onNativeScroll:this.onScroll,onMouseEnter:this.onMouseEnter,outerRef:this.runWay,contentRef:this.paneRef,stickyElements:this.drawTitle(s.$conflictedFile)},this.drawPane(n,s.$conflictedFile,e))}drawPane(e,t,s){return e===Ot._N?(0,y.createElement)(Qn,{conflictViewSt:s,file:t,forwardRef:this.textRef}):(0,y.createElement)(Un,{conflictViewSt:s,pane:e,file:t,forwardRef:this.textRef})}get $runwayStyle(){const{conflictViewSt:e,pane:t}=this.props,s=e.panes[t];return{minWidth:s.$codeWidth+e.$marginWidth,height:s.$codeHeight}}drawTitle(e){return(0,y.createElement)("div",{className:"ConflictCodeViewer-title"},this.drawTitleCheckbox(e),this.$title,this.drawIncludedLines(e))}get $title(){const{pane:e,conflictViewSt:t}=this.props,{file:s}=t;return null===s?null:e===Ot.M3?s.refNameTop:e===Ot.NS?s.refNameBottom:(0,y.createElement)("div",{style:{marginLeft:10}},"Output")}drawIncludedLines(e){const{pane:t}=this.props;if(t===Ot._N)return null;const{chosen:s,total:n}=e.chosenLines.$lineStats[t],i=`Selected ${s}/${n} lines from ${this.$title}`;return(0,y.createElement)("div",{className:"ConflictCodeViewer-title-includedLines",title:i},s,"/",n)}drawTitleCheckbox(e){return this.props.pane===Ot._N?null:(0,y.createElement)(De.Sc,{classes:"ConflictCodeViewer-title-checkbox",checked:e.chosenLines.allInSideChosen(this.props.pane),onClick:this.toggleAllLines})}updateScrollPositions(){const{conflictViewSt:e,pane:t}=this.props,s=this.runWay.current;if(null!==s&&e.$hoveredPane===t){const t=s.scrollLeft/(s.scrollWidth-s.clientWidth),n=s.scrollTop/(s.scrollHeight-s.clientHeight);e.setScrollRatios(isNaN(t)?0:t,isNaN(n)?0:n)}}updateDimensions(){const{conflictViewSt:e,pane:t,width:s,height:n}=this.props,i=e.panes[t];i.setClientWidth(s),i.setClientHeight(n),this.updateScrollPositions()}componentDidMount(){const{conflictViewSt:e,pane:t}=this.props;y.Reaction.value((()=>e.$leftRatio),(s=>{const n=this.runWay.current,i=this.textRef.current;if(null!==n&&null!==i){const{scrollWidth:o,clientWidth:r}=n,a=Math.round(s*(o-r));e.$hoveredPane!==t&&(n.scrollLeft=a),i.style.transform=`translateX(-${a}px)`}}),this),y.Reaction.value((()=>e.$topRatio),(s=>{const n=this.runWay.current,i=this.paneRef.current;if(null!==n&&null!==i){const{scrollHeight:o,clientHeight:r}=n,a=Math.round(s*(o-r));e.$hoveredPane!==t&&(n.scrollTop=a),e.panes[t].setScrollTop(a),i.style.transform=`translateY(${-a}px)`}}),this),this.updateDimensions()}componentDidUpdate(){this.updateDimensions()}}var ii=Object.defineProperty,oi=(e,t,s)=>((e,t,s)=>t in e?ii(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class ri extends y.Custom{constructor(){super(...arguments),oi(this,"onClickKeep",(async()=>{const{file:e}=this.props.conflictViewSt;null!==e&&await e.keepDeletedFile()})),oi(this,"onClickDelete",(async()=>{const{file:e}=this.props.conflictViewSt;null!==e&&await e.removedDeletedFile()}))}render(){const{global:{windowSt:e}}=this.props.conflictViewSt.store;return e.$animatingCommits?null:(0,y.createElement)("div",{className:"DeleteConflict"},(0,y.createElement)("div",{className:"DeleteConflict-dialog"},(0,y.createElement)("div",{className:"DeleteConflict-message"},this.messageText()),(0,y.createElement)("div",{className:"DeleteConflict-buttons"},(0,y.createElement)(w.R,{colour:"orange",onClick:this.onClickKeep},"Keep"),(0,y.createElement)(w.R,{colour:"red",onClick:this.onClickDelete},"Delete"))))}messageText(){const{store:{refs:e},file:t}=this.props.conflictViewSt;if(null===t)return null;const{patch:{stagedType:s,oldFile:n}}=t;return"D"===s?(0,y.createElement)(y.Fragment,null,(0,y.createElement)("b",null,n)," has been deleted on ",e.$repoStatus?.branchName," and modified on the other branch.",(0,y.createElement)("br",null),(0,y.createElement)("br",null),"Do you want to keep the modified version of delete it?"):(0,y.createElement)(y.Fragment,null,(0,y.createElement)("b",null,n)," has been deleted on the other branch and modified on"," ",e.$repoStatus?.branchName,(0,y.createElement)("br",null),(0,y.createElement)("br",null),"Do you want to keep the modified version or delete it?")}}var ai=Object.defineProperty,li=(e,t,s)=>((e,t,s)=>t in e?ai(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class ci extends y.Custom{constructor(){super(...arguments),li(this,"$readyToShow",!1),li(this,"$leftImagePath",null),li(this,"$rightImagePath",null)}render(){if(!this.$readyToShow||this.props.store.global.windowSt.$animatingCommits)return null;const{$leftImagePath:e,$rightImagePath:t,props:{vm:{$bodyHeight:s},file:{$chosenFile:n}}}=this;return(0,y.createElement)("div",{className:"ImageConflict"},(0,y.createElement)("h2",null,"Choose which image to keep"),(0,y.createElement)("div",{className:"ImageConflict-images"},e?(0,y.createElement)("button",{className:y.c`ImageConflict-optionButton ${!0} ImageConflict-chosen ${"left"===n}`,onClick:()=>{const{file:e}=this.props;"left"!==e.$chosenFile?e.$chosenFile="left":e.$chosenFile=null}},(0,y.createElement)($t,{imagePath:e,maxHeight:s,message:this.$nameOfCurrent,type:"conflicted"})):null,t?(0,y.createElement)("button",{className:y.c`ImageConflict-optionButton ${!0} ImageConflict-chosen ${"right"===n}`,onClick:()=>{const{file:e}=this.props;"right"!==e.$chosenFile?e.$chosenFile="right":e.$chosenFile=null}},(0,y.createElement)($t,{imagePath:t,maxHeight:s,message:this.$nameOfOther,type:"conflicted"})):null))}get $nameOfCurrent(){return"Current branch"}get $nameOfOther(){const{props:{store:{wip:{$mergeInProgress:e}}}}=this;return e?`Other branch (commit id ${e.slice(0,8)})`:""}async componentDidMount(){const{file:{patch:e},store:{repoPath:t,wip:{$mergeInProgress:s}}}=this.props;if(!s)return;const n=(0,m.uJ)(t,e.newFile);await x.RT.path_exists(n)&&(this.$leftImagePath=n);const i=await Ct(t,s,e.newFile,"conflicted");i&&await x.RT.path_exists(i)&&(this.$rightImagePath=i),this.$readyToShow=!0}}var hi=Object.defineProperty;class ui extends y.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?hi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="$fileSize")?e+"":e,null)}render(){const{type:e,style:t,message:s}=this.props,n=`BinaryInfo BinaryInfo-${e}`;return(0,y.createElement)("div",{className:n,style:t},(0,y.createElement)("div",{className:"BinaryInfo-title"},s),(0,y.createElement)("div",{className:"BinaryInfo-info"},this.drawFileSize()))}async componentDidMount(){const e=await x.RT.file_size(this.props.filePath);this.$fileSize="Ok"in e?e.Ok:null}drawFileSize(){const{$fileSize:e}=this;return null===e?null:(0,y.createElement)(y.Fragment,null,(0,y.createElement)("div",null,"File Size:"),(0,y.createElement)("div",null,vt(e)))}}var mi=Object.defineProperty,di=(e,t,s)=>((e,t,s)=>t in e?mi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class pi extends y.Custom{constructor(){super(...arguments),di(this,"$readyToShow",!1),di(this,"$leftFilePath",null),di(this,"$rightFilePath",null)}render(){if(!this.$readyToShow||this.props.store.global.windowSt.$animatingCommits)return null;const{$leftFilePath:e,$rightFilePath:t,props:{file:{$chosenFile:s}}}=this;return(0,y.createElement)("div",{className:"BinaryConflict"},(0,y.createElement)("h2",null,"Choose which version to keep:"),(0,y.createElement)("div",{className:"BinaryConflict-images"},e?(0,y.createElement)("button",{className:y.c`BinaryConflict-optionButton ${!0} BinaryConflict-chosen ${"left"===s}`,onClick:()=>{const{file:e}=this.props;"left"!==e.$chosenFile?e.$chosenFile="left":e.$chosenFile=null}},(0,y.createElement)(ui,{filePath:e,message:this.$nameOfCurrent,type:"conflicted"})):null,t?(0,y.createElement)("button",{className:y.c`BinaryConflict-optionButton ${!0} BinaryConflict-chosen ${"right"===s}`,onClick:()=>{const{file:e}=this.props;"right"!==e.$chosenFile?e.$chosenFile="right":e.$chosenFile=null}},(0,y.createElement)(ui,{filePath:t,message:this.$nameOfOther,type:"conflicted"})):null))}get $nameOfCurrent(){return"Current branch"}get $nameOfOther(){const{props:{store:{wip:{$mergeInProgress:e}}}}=this;return e?`Other branch (commit id ${e.slice(0,8)})`:""}async componentDidMount(){const{file:{patch:e},store:{repoPath:t,wip:{$mergeInProgress:s}}}=this.props;if(!s)return;const n=(0,m.uJ)(t,e.newFile);await x.RT.path_exists(n)&&(this.$leftFilePath=n);const i=await Ct(t,s,e.newFile,"conflicted");i&&await x.RT.path_exists(i)&&(this.$rightFilePath=i),this.$readyToShow=!0}}var gi=Object.defineProperty,fi=(e,t,s)=>((e,t,s)=>t in e?gi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class wi extends y.Custom{constructor(){super(...arguments),fi(this,"conflictViewSt",new Mn(this.props.store)),fi(this,"vm",new Te(this.props.store)),fi(this,"onHeaderResize",((e,t)=>{this.vm.setHeaderHeight(t)}))}render(){return(0,y.createElement)(y.Fragment,null,(0,y.createElement)(pt,{onResize:this.onHeaderResize},(0,y.createElement)(Is,{conflictViewSt:this.conflictViewSt})),this.drawBody())}drawBody(){const{conflictViewSt:e,props:{store:t}}=this,{file:s}=e;if(!s)return null;if(s.conflictedDelete())return(0,y.createElement)(ri,{conflictViewSt:e});if(s.imageConflict)return(0,y.createElement)(ci,{store:t,file:s,vm:this.vm});if(s.$binaryConflict)return(0,y.createElement)(pi,{store:t,file:s,vm:this.vm});const{global:{windowSt:n}}=t,i=n.$commitViewSize.width,o=this.vm.$bodyHeight/2;return(0,y.createElement)("div",{className:"ConflictView-body",style:{height:o}},(0,y.createElement)(ni,{conflictViewSt:e,width:i/2,height:o,pane:Ot.M3}),(0,y.createElement)(ni,{conflictViewSt:e,width:i/2,height:o,pane:Ot.NS}),(0,y.createElement)(ni,{conflictViewSt:e,width:i,height:o,pane:Ot._N}))}}var bi=Object.defineProperty;class yi extends y.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?bi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="onClick")?e+"":e,(async e=>{const{wipStore:t}=this.props,s=[{label:"Stash All Changes",click:t.stashAllChanges},{label:"Discard All Changes",click:t.discardAllChanges}];Ye(s,t.store),await(0,p.O0)(s,e)}))}render(){const{showMenu:e,disabled:t=!1}=this.props,s=Se.iw;let n;return n=e?(0,y.createElement)("span",{className:"icon-menu",style:{fontSize:.44*s}}):(0,y.createElement)("svg",{viewBox:`0, 0, ${s}, ${s}`},(0,y.createElement)("circle",{style:{fill:"var(--blueText)"},cx:s/2,cy:s/2,r:.1*s})),(0,y.createElement)(w.R,{className:"WipCardMenuButton",colour:"subtle",style:{width:s,height:s},onClick:this.onClick,title:"show changes menu",disabled:t},n)}}var $i=Object.defineProperty,vi=(e,t,s)=>((e,t,s)=>t in e?$i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class ki extends us{constructor(){super(...arguments),vi(this,"wipStore",new Xs(this.props.store)),vi(this,"ref",(0,y.createRef)()),vi(this,"onClickNextCommit",(async()=>{ns(ts.forward);const{repo:e}=this.props.store,t=e.getNextCommitId();null!==t&&await e.switchToCommit(t)}))}render(){const{props:{store:{layout:{$wipPosition:e}}},$isSelected:t}=this,{width:s,height:n}=e;return(0,y.createElement)("div",{ref:this.ref,className:y.c`WipCard ${!0} selected ${t}`,style:{width:s,height:n}},this.drawBackground(e,t),this.drawBody(t),this.drawCardControls(t))}drawBackground(e,t){return(0,y.createElement)(ps,{visible:t,transform:`scale(${e.width/as.rM}, ${e.height/as.rM})`,duration:le.zj.animationTime.medium,key:"CommitBackground"})}drawCardControls(e){if(!e)return null;const{repo:t,layout:s,nav:{$viewingPatch:n},wip:{$haveConflicts:i}}=this.props.store,o=0===t.$commitIds.length,r=[(0,y.createElement)(yi,{store:this.props.store,wipStore:this.wipStore,showMenu:!0,disabled:i}),(0,y.createElement)($s,{store:this.props.store,commitId:ws.z,key:ws.z})];return n&&!i&&r.unshift((0,y.createElement)(w.R,{colour:"subtle",disabled:!0,title:"Go to previous commit",style:{transform:"rotate(0deg)",paddingTop:1},tabIndex:-1},Ss(14,!0)),(0,y.createElement)(w.R,{colour:"subtle",onClick:this.onClickNextCommit,disabled:o,title:"Go to next commit",style:{transform:"rotate(180deg)",paddingTop:2}},Ss(14,o))),fs(s.$wipPosition.width,r,ws.z,!n)}get $isSelected(){return this.props.store.nav.$selectedCommitId===ws.z}drawBody(e){const{store:t}=this.props,{nav:s,wip:n}=t;return e?s.$viewingPatch?n.$haveConflicts?(0,y.createElement)(wi,{store:t,key:null===s.$selectedPatchId?"0":s.$selectedPatchId}):(0,y.createElement)(_n,{store:t,wipStore:this.wipStore}):(0,y.createElement)(Hs,{store:t}):(0,y.createElement)(Ms,{store:t})}}function Ci(e){return 1===e?`${e} changed file`:`${e} changed files`}var _i=Object.defineProperty;class Si extends st{constructor(){var e,t,s;super(...arguments),e=this,t="ref",s=(0,y.createRef)(),((e,t,s)=>{t in e?_i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(e,"symbol"!=typeof t?t+"":t,s)}render(){const{width:e,numSkipped:t}=this.props;return(0,y.createElement)("div",{className:"FilterMessage",style:{width:e,height:Se.iw},ref:this.ref},xi(e/6),t," commit",t>1?"s":""," hidden",xi(e/6))}}function xi(e){return(0,y.createElement)("div",{className:"FilterMessage-line",style:{width:e}},(0,y.createElement)("div",{className:"FilterMessage-linePart FilterMessage-linePart-a"}),(0,y.createElement)("div",{className:"FilterMessage-linePart FilterMessage-linePart-b"}))}class Pi extends y.Custom{render(){return(0,y.createElement)("div",{className:"Filter",style:{background:this.props.info.colour}},this.message(),this.drawRemoveButton())}message(){const{type:e,name:t}=this.props.info;switch(e){case"commit":return(0,y.createElement)(y.Fragment,null,"Commit: ",(0,y.createElement)("b",null,t));case"branch":return(0,y.createElement)(y.Fragment,null,"Branch: ",(0,y.createElement)("b",null,t));case"username":return(0,y.createElement)(y.Fragment,null,"Username: ",(0,y.createElement)("b",null,t));case"file":return(0,y.createElement)(y.Fragment,null,"File: ",(0,y.createElement)("b",null,t))}}drawRemoveButton(){return(0,y.createElement)("button",{className:"Filter-removeButton",title:"Remove filter",onClick:this.props.info.removeFunction},(0,y.createElement)("svg",{width:9,height:9},(0,y.createElement)("line",{x1:0,y1:0,x2:9,y2:9,stroke:"black"}),(0,y.createElement)("line",{x1:0,y1:9,x2:9,y2:0,stroke:"black"})))}}const Ei=y.c`Filters`;class Ri extends y.Custom{render(){const{repo:{commitFilters:{$haveFilter:e}}}=this.props.store;if(!e)return null;const{layout:{$commitLeft:t,$commitWidth:s},nav:{$viewingPatch:n}}=this.props.store;return(0,y.createElement)("div",{className:Ei,style:{left:t,minWidth:s,opacity:n?0:1,pointerEvents:n?"none":"auto"}},(0,y.createElement)("span",{className:"Filters-label"},"Filters: "),(0,y.createElement)(y.Fragment,null,this.drawFilters()))}drawFilters(){const{repo:{commitFilters:e}}=this.props.store;return e.getFilters().map((e=>(0,y.createElement)(Pi,{info:e})))}}var Ii=Object.defineProperty,Ti=(e,t,s)=>((e,t,s)=>t in e?Ii(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class Ni extends st{constructor(){super(...arguments),Ti(this,"ref",(0,y.createRef)()),Ti(this,"onClick",(async e=>{await Eo(this.props.store.global,e)}))}render(){const{fullDate:e,timeString:t}=this.props;return(0,y.createElement)("div",{className:"TimeMarker",ref:this.ref,title:e,onClick:this.onClick,onContextMenu:this.onClick},t)}}class Mi extends y.Custom{render(){const{store:e}=this.props;return(0,y.createElement)("div",{className:"CommitCardList",inert:e.nav.$showingRefView,style:this.$style},(0,y.createElement)(Ri,{store:e}),(0,y.createElement)(Li,{store:e,key:"CommitCardListInner"}),this.drawWipCard())}drawWipCard(){const{store:e}=this.props,{layout:{$wipPosition:t},wip:s}=e;if(!s.$haveWIP)return null;const{left:n,top:i,visible:o}=t;return(0,y.createElement)(ki,{store:e,key:"WipCard",transform:`translate(${n}px, ${i}px)`,visible:o,duration:le.zj.animationTime.medium})}get $style(){const{store:e}=this.props,{nav:t,global:{windowSt:s},layout:n}=e;return t.$showingRefView?{position:"fixed",top:-n.$scrollTop+n.$refViewScrollTop+"px",transform:`translateX(${s.$commitViewSize.width/2}px)`,opacity:0}:{}}}class Li extends y.Custom{render(){const{store:e}=this.props,{layout:t,repo:s,nav:n,refs:i}=e,{$commits:o}=s,{commitPositions:r,$timeInfo:a,$commitLeft:l,$commitWidth:c}=t,{$selectedCommitId:h,$viewingPatch:u,$hoveredCommitId:m}=n,{$theme:d,animationTime:p}=le.zj,{$commitsToPush:g}=i,f=g.size>0,{$current:w,prev:b}=r,$=[];for(const{id:t,numSkipped:s}of o.values()){const n=w.get(t);if(!n)continue;const i=b.get(t)??n;if(n.visible||i.visible){if(s>0){const e=t===h?Se.ch:0;$.push((0,y.createElement)(Si,{key:t+s,fromX:l,fromY:i.top-Se.iw-e,toX:l,toY:n.top-Se.iw-e,duration:p.medium,width:c,numSkipped:s}))}$.push(xs(e,o,t,n,i,h,u,f&&g.allBranches.has(t),m,d));const r=a.get(t);if(r){const s=(r.sameAsPrevious?null:r.timeString)??null;if(s){const o=r.fullDate,a=u&&h===t,l=Math.min(innerWidth-5,Se.R+Se.H8+(innerWidth-Se.H8)/2);$.push((0,y.createElement)(Ni,{key:`${t}-time`,store:e,timeString:s,fullDate:o,fromX:l,toX:l,fromY:i.top,toY:a?i.top:n.top,duration:le.zj.animationTime.medium}))}}}}return(0,y.createElement)(y.Fragment,null,$)}}var Fi=Object.defineProperty;const Oi=y.c`Repo`;class Di extends y.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?Fi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="onScroll")?e+"":e,(e=>{const{layout:t,nav:s}=this.props.store;s.$showingRefView?t.setRefViewScrollTop(e):t.setScrollTop(e)}))}render(){const{store:e}=this.props,{layout:t,nav:s,global:{windowSt:{$commitViewSize:{width:n,height:i}}}}=e,{$contentHeight:o,$scrollTop:r,$refViewScrollTop:a,$scrollingEnabled:l}=t,{$showingRefView:c,$selected:h}=s;return(0,y.createElement)($e,{width:n,height:i,style:{top:Se.xl},contentHeight:o,scrollTop:c?a:r,setScroll:this.onScroll,enabled:l&&h},(0,y.createElement)("div",{className:Oi,style:{height:o},key:e.repoPath},(0,y.createElement)(ht,{store:e}),(0,y.createElement)(Mi,{store:e})))}}var ji=s(1795);class zi extends y.Custom{render(){const{size:e,colour:t,value:s,bottom:n,left:i}=this.props,o=.6875*e;return(0,y.createElement)("div",{className:"NumberBadge",style:{background:t,minWidth:e,height:e,bottom:n,left:i,borderRadius:e,fontFamily:"sans-serif",fontSize:o,paddingLeft:s>9?2:0,paddingRight:s>9?2:0}},s.toString())}}class Wi extends y.Custom{render(){const{toolbarStore:e,animationClass:t}=this.props,{$changesData:s,$branchName:n,$refreshing:i,store:{name:o}}=e;return(0,y.createElement)("div",{className:y.c`RepoStrip ${!0} RepoStrip-refreshing ${i}`+" "+t,onClick:e.onClickStrip},(0,y.createElement)("button",{className:"RepoStrip-repoButton"},o),i?(0,y.createElement)(Ne.H,{fontSize:20}):(0,y.createElement)("div",{className:"RepoStrip-branch"},n),(0,y.createElement)("button",{className:"RepoStrip-button icon-changes-view",style:{fontSize:21},onClick:e.onClickChanges},s.badgeNumber>0?(0,y.createElement)(zi,{value:s.badgeNumber,size:16,colour:s.badgeColour,bottom:9,left:27}):null),function(e){const{disabled:t,badgeNumber:s,pulling:n}=e.$pullData;return n?(0,y.createElement)(Ne.y,{size:18,invertColour:"light"===le.zj.$theme.name,container:!0}):(0,y.createElement)("button",{className:"RepoStrip-button icon-pull",disabled:t,onClick:e.onClickPull,onContextMenu:e.onPullContextMenu},s>0?(0,y.createElement)(zi,{value:s,size:16,colour:(0,le.Vg)("pullColour"),bottom:9,left:27}):null)}(e),function(e){const{disabled:t,badgeNumber:s,pushing:n}=e.$pushData;return n?(0,y.createElement)(Ne.y,{size:18,invertColour:"light"===le.zj.$theme.name,container:!0}):(0,y.createElement)("button",{className:"RepoStrip-button icon-push",disabled:t,onClick:e.onClickPush,onContextMenu:e.onPushContextMenu},s>0?(0,y.createElement)(zi,{value:s,size:16,colour:(0,le.Vg)("pullColour"),bottom:9,left:27}):null)}(e),function(e){const{disabled:t,fetching:s}=e.$fetchData;return s?(0,y.createElement)(Ne.y,{size:18,invertColour:"light"===le.zj.$theme.name,container:!0}):(0,y.createElement)("button",{className:"RepoStrip-button icon-fetch",disabled:t,onClick:e.onClickFetch,onContextMenu:e.onFetchContextMenu})}(e))}}var Vi=Object.defineProperty;class Ai extends y.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?Vi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="render")?e+"":e,(()=>{const{store:e,hidden:t}=this.props;return(0,y.createElement)("button",{title:"Main menu",className:"AppMenu ToolbarButton-style",disabled:t,onClick:async t=>{await(0,p.O0)((0,g.XJ)(e),t,{classNames:[y.c`darkenBackground`]})}},(0,y.createElement)("div",{className:"icon-menu",style:{fontSize:17}}))}))}}function Hi(e){if(e.length>22){const t=e.split("/");return t[t.length-1]}return e}var Bi=s(886),Ui=Object.defineProperty;class Ki extends y.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?Ui(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="onClick")?e+"":e,(async e=>{await(0,p.O0)(this.buildBranchMenu(),e,{classNames:["ToolbarDropdown-open","darkenBackground"]})}))}render(){const{toolbarStore:e}=this.props,{$branchName:t,$branchesData:s}=e;return(0,y.createElement)("button",{title:"Show all branches",className:y.c`ToolbarButton ${!0} ToolbarButton-style ${!0} BranchDropdown ${!0} ToolbarButton-selected ${s.selected}`,onClick:e.onClickBranches},(0,y.createElement)("div",{className:"ToolbarDropdown-value"},t??" "),(0,Bi.K)("Branch"))}buildBranchMenu(){const{$branchName:e,store:t}=this.props.toolbarStore,s=this.buildRefList(t).map((s=>({label:s.shortName,type:"checkbox",click:async()=>{await E(s,t)},checked:Hi(s.shortName)===e})));return s.push(g.me),s.push((0,Xe.Vk)(t.global)),s.push(g.me),s.push(Qe(t.nav)),s}buildRefList(e){const{refs:t}=e,s=Array.from(t.$refInfoLocal.values()).filter((e=>"Tag"!==e.refType)).slice(0,10);for(const e of t.$allRefs.array){if(s.length>=10)break;"Tag"===e.refType||s.some((t=>t.shortName===e.shortName))||s.push(e)}return s}}var qi=s(3005),Yi=s(1521),Gi=Object.defineProperty;class Ji extends y.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?Gi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="onClick")?e+"":e,(async e=>{const{toolbarStore:t,workspace:s}=this.props;let n;var i;s?n=function(e){const{$workspaceRepos:t,$repo:s}=e;return[...Array.from(t.values()).map((t=>({label:t.name,type:"checkbox",checked:t.name===s?.name,async click(){le.zj.disableAnimations(),e.selectWorkspaceRepo(t.repoPath),le.zj.restoreAnimationsDebounced()}}))),g.me,{label:"Show All Repos",click(){e.selectWorkspaceRepo(null)}}]}(t.store.global):(i=t.store.global,n=[...(0,qi.n2)(i),g.me,qi.gC.open(i),qi.gC.close(i),g.me,qi.gC.clone(i),qi.gC.create(i)]),await(0,p.O0)(n,e,{classNames:[y.c`ToolbarDropdown-open`,y.c`darkenBackground`]})}))}render(){const{toolbarStore:e}=this.props,{store:{name:t},$dropdownLabelWidths:s}=e;return(0,Yi.v)({onClick:this.onClick,title:t,subtitle:"Repo",width:s.repoName})}}const Xi=(0,y.createElement)("span",{className:"Toolbar-noDrag"}),Zi=l.cX?Xi:(0,y.createElement)("span",null);class Qi extends y.Custom{render(){const{store:e,toolbarStore:t,animationClass:s,workspace:n}=this.props,{global:i}=e,{$theme:{name:o}}=le.zj,{$pullData:r,$pushData:a,$fetchData:c,$commitsData:h,$changesData:u}=t;return(0,y.createElement)("div",{className:y.c`RepoToolbar `+s,style:{gridTemplateColumns:"50px minmax(0, 1fr) 60px 60px 60px 1fr 50px",transitionDuration:"300ms",borderTop:n?"1px solid var(--extraLightBorder)":""}},l.cX?(0,y.createElement)("span",null):(0,y.createElement)(Ai,{store:i,hidden:!1}),(0,y.createElement)("div",{className:"RepoToolbar-side"},(0,y.createElement)(Ji,{toolbarStore:t,workspace:n}),(0,y.createElement)(Ki,{toolbarStore:t,repoSelected:!0})),(0,y.createElement)(Bi.I,{text:u.text,id:B.Y5,onClick:t.onClickChanges,disabled:u.disabled,themeName:o,selected:u.selected,role:"tab"},(0,y.createElement)("div",{className:"Toolbar-icon icon-changes-view",style:{fontSize:21}}),u.badgeNumber>0?(0,y.createElement)(zi,{value:u.badgeNumber,size:16,colour:u.badgeColour,bottom:16,left:27}):null),(0,y.createElement)(Bi.I,{text:"Commits",themeName:o,onClick:t.onClickCommits,selected:h.selected,role:"tab"},(0,y.createElement)("div",{className:"Toolbar-icon icon-commits-view",style:{fontSize:21}})),(0,y.createElement)(Bi.I,{text:"Search",themeName:o,onClick:t.onClickSearchButton},(0,y.createElement)("div",{className:"Toolbar-icon icon-SearchIcon",style:{fontSize:19,marginTop:-1}})),(0,y.createElement)("div",{className:"RepoToolbar-side"},(0,y.createElement)(Bi.I,{text:"Pull",loading:r.pulling,classes:["mw50"],disabled:r.disabled,themeName:o,onClick:t.onClickPull,onContextMenu:t.onPullContextMenu},(0,y.createElement)("div",{className:"Toolbar-icon icon-pull",style:{fontSize:18}}),r.badgeNumber>0?(0,y.createElement)(zi,{value:r.badgeNumber,size:16,colour:(0,le.Vg)("pullColour"),bottom:16,left:27}):null),(0,y.createElement)(Bi.I,{text:a.text,disabled:a.disabled,loading:a.pushing,classes:["mw50"],themeName:o,onClick:t.onClickPush,onContextMenu:t.onPushContextMenu,title:a.title},(0,y.createElement)("div",{className:"Toolbar-icon icon-push",style:{fontSize:18}}),a.badgeNumber>0?(0,y.createElement)(zi,{value:a.badgeNumber,size:16,colour:(0,le.Vg)("pullColour"),bottom:16,left:27}):null),(0,y.createElement)(Bi.I,{text:c.text,disabled:c.disabled,themeName:o,onClick:t.onClickFetch,onContextMenu:t.onFetchContextMenu,loading:c.fetching,classes:["mw50"]},(0,y.createElement)("div",{className:"Toolbar-icon icon-fetch",style:{fontSize:18}}))),Zi)}}var eo=s(8153),to=s(7495),so=Object.defineProperty,no=(e,t,s)=>((e,t,s)=>t in e?so(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class io{constructor(e){this.store=e,no(this,"onClickPull",(async e=>{e.stopPropagation(),await this.store.repo.pull()})),no(this,"onPullContextMenu",(async e=>{await(0,p.O0)((0,d.E4)(this.store),e)})),no(this,"onClickPush",(async e=>{e.stopPropagation(),await(0,eo.VC)(this.store)})),no(this,"onPushContextMenu",(async e=>{const t=[(0,Xe.Vk)(this.store.global)];await(0,p.O0)(t,e)})),no(this,"onClickFetch",(async e=>{e.stopPropagation(),await this.store.repo.fetch()})),no(this,"onFetchContextMenu",(async e=>{const t=[(0,d.KH)(),g.me,(0,Xe.Vk)(this.store.global)];await(0,p.O0)(t,e)})),no(this,"onClickBranches",(()=>{const{nav:e}=this.store;this.store.nav.setShowingRefView(!e.$showingRefView)})),no(this,"onClickCommits",(()=>{this.store.nav.goToCommitsView()})),no(this,"onClickChanges",(()=>{this.store.nav.goToWipView()})),no(this,"onClickSearchButton",(async()=>{await(0,to.i)(this.store)})),no(this,"onClickStrip",(()=>{const{repoPath:e,global:t}=this.store;null!==t.$repo||t.selectWorkspaceRepo(e)})),(0,y.init$)(this)}get $branchName(){const{store:e}=this,t=e.refs.$repoStatus?.branchName??null;return t?Hi(t):null}get $remoteName(){const{$branchName:e,store:{config:t}}=this;return e?t.getPushRemoteForBranch(e):null}get $dropdownLabelWidths(){const{$branchName:e,store:{global:{windowSt:{$windowSize:{width:t}}},name:s}}=this,n=(0,Ft.V0)(s,as.V)+29,i=null!==e?(0,Ft.V0)(e,as.V)+29:0,o=(t-280)/2;return 0===i?{repoName:Math.min(o,n),branchName:0}:{repoName:Math.min(n/(n+i)*o,n),branchName:Math.min(i/(n+i)*o,i)}}get $pullData(){const{refs:e,global:{windowSt:{$pullInProgress:t}},repoPath:s}=this.store;return{disabled:e.$currentBranchIsUnpublished,badgeNumber:e.$numCommitsToPushPull.pull,pulling:t.has(s)}}get $pushData(){const{refs:e,global:{windowSt:{$pushInProgress:t},$repo:s},repo:n,repoPath:i}=this.store,{$currentBranchIsUnpublished:o,$numCommitsToPushPull:r,$repoStatus:a}=e;let l;l=o||null===e.$currentRemoteName?"Publish":"Push";let c=r.push;const h=0===n.$commitIds.length&&null!==s||null===s&&"Local"===a?.state;a&&a.remoteBehind>0&&(c=a.remoteBehind);let u="Run git push in this repo";if(o){const{$remoteName:e,$branchName:t}=this;u=e&&t?`Publish branch ${t} to ${e}`:"Publish branch",c=1}else c>0&&(u=`Push ${c} commit${c>1?"s":""}`);return{disabled:h,text:l,badgeNumber:c,pushing:t.has(i),title:u}}get $fetchData(){const{global:{windowSt:{$fetchInProgress:e}},repoPath:t,refs:s}=this.store,n=e.has(t);return{text:n?"Fetching":"Fetch",disabled:null===s.$currentRemoteName,fetching:n}}get $branchesData(){return{selected:this.store.nav.$showingRefView}}get $commitsData(){const{$selectedPatchId:e,$showingRefView:t}=this.store.nav;return{selected:null===e&&!t}}get $changesData(){const{wip:{$haveConflicts:e,$haveWIP:t,$numChanges:s},nav:n}=this.store;return{text:e?"Conflicts":"Changes",disabled:!t,selected:n.$selectedCommitId===ws.z&&null!==n.$selectedPatchId,badgeNumber:s,badgeColour:e?"#ffae45":(0,le.Vg)("pullColour")}}get $refreshing(){const{store:{repoPath:e,global:{windowSt:{$refreshingRepo:t}}}}=this;return t.has(e)}}var oo=s(1578),ro=Object.defineProperty,ao=(e,t,s)=>((e,t,s)=>t in e?ro(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class lo extends us{constructor(){super(...arguments),ao(this,"toolbarStore",new io(this.props.store)),ao(this,"ref",(0,y.createRef)())}render(){if(!this.visible)return null;const{store:e}=this.props,{nav:{$selected:t,lastSelected:s},global:{$workspaceRepos:n,$repo:i,windowSt:{$animatingWorkspace:o}}}=e,{toolbarStore:r}=this,a=this.animationClasses(o&&s,t),l=n.size>1,c=o||l&&!t,h=o&&s||t,u=t&&!o,m=u&&e.nav.$showingRefView;return(0,y.createElement)("div",{ref:this.ref,key:e.repoPath,className:"RepoContainer",inert:null!==i&&!t},h?(0,y.createElement)(Qi,{store:e,toolbarStore:r,animationClass:a.toolbar,workspace:l}):null,c?(0,y.createElement)(Wi,{toolbarStore:r,animationClass:a.strip}):null,m?(0,y.createElement)(oo.f,{store:e}):null,u?(0,y.createElement)(ji.Mh,{store:e}):null,u?(0,y.createElement)(Di,{store:e}):null)}animationClasses(e,t){return e?t?{strip:y.c`RepoStrip-animateOut`,toolbar:y.c`RepoStrip-animateIn`}:{strip:y.c`RepoStrip-animateIn`,toolbar:y.c`RepoStrip-animateOut`}:{strip:"",toolbar:""}}}var co=Object.defineProperty,ho=(e,t,s)=>((e,t,s)=>t in e?co(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);const uo=.95;class mo{constructor(e){this.gs=e,ho(this,"$current",new Map),ho(this,"$scrollTop",0),ho(this,"calcPositions",(()=>{const{$scrollTop:e,gs:t}=this,{$workspaceRepos:s,$repo:n,windowSt:i}=t,{height:o,windowHeight:r}=i.$commitViewSize,a=new Map;if(s.size>0)if(null===n){let t=0;for(const n of s.values()){const s=Se.pe+(Se.xl+Se.pe)*t;a.set(n.repoPath,{left:0,top:s,height:Se.xl,opacity:1,scale:uo,selected:!1,visible:po(s,o,e)}),t++}}else{const t=Array.from(s.values()),i=t.indexOf(n);for(let s=0;s<t.length;s++){const n=t[s];if(i===s)a.set(n.repoPath,{left:0,top:e,height:r,opacity:1,scale:1,selected:!0,visible:!0});else if(s<i){let t=-3*Se.iw*(i-s)+e;a.set(n.repoPath,{left:0,top:t,height:Se.xl,opacity:0,scale:uo,selected:!1,visible:po(t,o,e)})}else{let t=o+3*Se.iw*(s-i)+e;a.set(n.repoPath,{left:0,top:t,height:Se.xl,opacity:0,scale:uo,selected:!1,visible:po(t,o,e)})}}}this.$current=a})),ho(this,"setScrollTop",(e=>{this.$scrollTop=e})),(0,y.init$)(this)}get $contentHeight(){const{$repo:e,$workspaceRepos:t,windowSt:{$commitViewSize:{height:s}}}=this.gs;return null===e?Math.max(Se.pe+t.size*(Se.xl+Se.pe),s):s}}function po(e,t,s){return e+Se.xl>s&&e-Se.xl<s+t}var go=Object.defineProperty;class fo extends y.Custom{constructor(){var e,t,s;super(...arguments),e=this,t="layout",s=new mo(this.props.gs),((e,t,s)=>{t in e?go(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(e,"symbol"!=typeof t?t+"":t,s)}render(){const{$repo:e,$workspaceRepos:t,windowSt:{$commitViewSize:{width:s,windowHeight:n}},$workspaceShift:i}=this.props.gs,o=[],{$current:r}=this.layout;for(const e of t.values()){const{repoPath:t}=e,s=r.get(t);s&&o.push((0,y.createElement)(lo,{transform:`translate(${s.left}px, ${s.top}px) scale(${s.scale})`,visible:s.visible,duration:le.zj.animationTime.long,store:e,workspaceLayout:this.layout,key:t}))}const{$contentHeight:a,$scrollTop:l}=this.layout;return(0,y.createElement)($e,{className:"Workspace",style:{transform:`translateY(${i}px)`},width:s,height:n-i,contentHeight:a,scrollTop:l,setScroll:this.layout.setScrollTop,enabled:null===e},o)}componentDidMount(){y.Reaction.auto(this.layout.calcPositions,this)}}var wo=s(2210),bo=s(6081),yo=Object.defineProperty,$o=Object.defineProperty,vo=(e,t,s)=>((e,t,s)=>t in e?$o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class ko extends y.Custom{constructor(){super(...arguments),vo(this,"onClick",(async e=>{await(0,p.O0)(this.buildBranchMenu(),e,{classNames:[y.c`ToolbarDropdown-open`,y.c`darkenBackground`]})})),vo(this,"createBranch",(async()=>{const{gs:{$workspaceRepos:e,consoleSt:t,windowSt:s}}=this.props;s.centreLastClick();const n=await Ve(null,!0);if(!n)return;const{branchName:i,checkoutBranch:o}=n;await t.showLoading(`Creating branch ${i}`,(async()=>{for(const t of e.values()){const{repoPath:e}=t;await(0,P.HU)(e,i),o&&await x.En.command({repoPath:e,args:["checkout",i]}),await t.repo.loadOrReloadRepoData()}}),{show:bo.w.errorOnly})}))}render(){const{$branchName:e}=this;return(0,Yi.v)({onClick:this.onClick,title:e??"...",subtitle:"Branch",disabled:this.props.repoSelected,width:100})}get $branchName(){const{gs:{$workspaceRepos:e}}=this.props;let t=null;for(const s of e.values()){const{$repoStatus:e}=s.refs;if(!e)return null;if(null===t)t=e.branchName;else if(t!==e.branchName)return null}return t?Hi(t):null}buildBranchMenu(){const{$branchName:e}=this,t=this.getCommonBranches(),s=[];return s.push({label:"Create Branch...",click:this.createBranch}),e&&s.push({label:"Merge Branch...",enabled:!1,click:()=>{const{gs:{$workspaceRepos:s}}=this.props;return Array.from(s.values()).some((e=>e.wip.$haveWIP))?(0,S.K$)("You have uncommitted changes. Commit or stash these changes before merging"):function(e,t,s){return t.sort(((e,t)=>e.localeCompare(t))),(0,I.$)({contentCallback:(n,i,o)=>{const r=class extends y.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?yo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="$selectedBranch")?e+"":e,"")}render(){return(0,y.createElement)(y.Fragment,null,(0,y.createElement)(T.A,{messageId:o},"Choose a branch to merge into ",s),(0,y.createElement)("div",{className:"MergeWsBranch"},(0,y.createElement)(He.l,{options:this.options(),theme:le.zj.$theme.name})),(0,y.createElement)(N.D,{rightButtons:[(0,y.createElement)(w.R,{onClick:()=>{const{$workspaceRepos:t}=e;for(const e of t.values());}},"Merge"),(0,y.createElement)(w.R,{autoFocus:!0,onClick:()=>{n(I.K)}},"Cancel")]}))}options(){const{$selectedBranch:e}=this;return t.map((t=>({label:t,checked:e===t,click:()=>{this.$selectedBranch=t}})))}};return(0,y.createElement)(r,null)},dialogId:"showMakeBranchDialog",dismissible:!0})}(this.props.gs,t,e)}}),s.push(g.me),s.push(...t.map((t=>({label:t,type:"checkbox",click:async()=>{await this.checkout(t)},checked:Hi(t)===e})))),s}async checkout(e){const{gs:{$workspaceRepos:t,consoleSt:s},gs:n}=this.props,i=[];for(const s of t.values()){const{refs:{$repoStatus:t}}=s;if(!t)return;const n=t.branches.find((t=>t===e));n&&n!==t.branchName&&i.push((0,P.vU)(s.repoPath,n))}await s.showLoading(`Checking out ${e}`,(async()=>{await Promise.all(i),await n.loadReposIfNeeded()}),{show:bo.w.errorOnly})}getCommonBranches(){const{gs:{$workspaceRepos:e}}=this.props,t=new Map;for(const s of e.values()){const{$repoStatus:e}=s.refs;if(!e)return[];for(const n of e.branches){let e=t.get(n);e||(e=new Set,t.set(n,e)),e.add(s.repoPath)}}const s=e.size,n=[];for(const[e,i]of t)i.size===s&&n.push(e);return n}}var Co=Object.defineProperty;class _o extends y.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?Co(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="onClick")?e+"":e,(()=>{const{gs:e}=this.props;e.selectWorkspaceRepo(null),(0,g.GA)(e)}))}render(){const{gs:e}=this.props,{$repo:t,$workspaceRepos:s}=e,n=null!==t;return(0,y.createElement)("div",{className:y.c`WsToolbar ${!0} WsToolbar-hidden ${n}`,style:{gridTemplateColumns:"50px 1fr 1fr 50px"},onClick:this.onClick},l.cX?(0,y.createElement)("span",null):(0,y.createElement)(Ai,{store:e,hidden:n}),(0,y.createElement)("div",{className:"WsToolbar-side"},(0,y.createElement)(wo.Eg,{gs:e}),s.size>1?(0,y.createElement)(ko,{gs:e,repoSelected:null!==t}):null),(0,y.createElement)("div",{className:"WsToolbar-side"},this.drawRightSideElements(n)),(0,y.createElement)("span",null))}drawRightSideElements(e){const{gs:t}=this.props,{$theme:{name:s}}=le.zj,{$workspaceRepos:n,wsActions:i}=t;return 0===n.size?null:(0,y.createElement)(y.Fragment,null,(0,y.createElement)(Bi.I,{text:"Pull",loading:!e&&t.windowSt.$pullInProgress.size>0,classes:["mw50"],disabled:e,themeName:s,onClick:i.pull},(0,y.createElement)("div",{className:"Toolbar-icon icon-pull",style:{fontSize:18}})),(0,y.createElement)(Bi.I,{text:"Push",loading:!e&&t.windowSt.$pushInProgress.size>0,classes:["mw50"],disabled:e,themeName:s,onClick:i.push},(0,y.createElement)("div",{className:"Toolbar-icon icon-push",style:{fontSize:18}})),(0,y.createElement)(Bi.I,{text:"Fetch",loading:!e&&t.windowSt.$fetchInProgress.size>0,classes:["mw50"],disabled:e,themeName:s,onClick:i.fetch},(0,y.createElement)("div",{className:"Toolbar-icon icon-fetch",style:{fontSize:18}})))}}var So=Object.defineProperty,xo=(e,t,s)=>((e,t,s)=>t in e?So(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class Po extends y.Custom{constructor(){super(...arguments),xo(this,"onContextMenu",(e=>{e.preventDefault()})),xo(this,"onClickBody",(async e=>{const{store:t}=this.props;t.windowSt.lastClickPosition={x:e.clientX,y:e.clientY};const{target:s}=e;if(null!==s){const n=s;n.className!==Oi&&n.className!==Ei||(0,p.hz)()||await Eo(t,e)}})),xo(this,"handleWindowKeyShortcuts",(e=>{null!==document.activeElement&&"TEXTAREA"===document.activeElement.tagName&&"Escape"!==e.key||function(e,t){switch(e.key){case"ArrowUp":return void function(e,{$repo:t}){if(e.preventDefault(),null!==t){const{repo:e,nav:s}=t;s.$viewingPatch?s.goToPreviousPatch():s.hasSelectedCommit()&&e.goToPreviousCommit()}}(e,t);case"ArrowDown":return void function(e,{$repo:t}){if(e.preventDefault(),null!==t){const{repo:e,nav:s}=t;s.$viewingPatch?s.goToNextPatch():s.hasSelectedCommit()&&e.goToNextCommit()}}(e,t);case"Escape":u(t,e)}}(e,this.props.store)}))}render(){const{store:e,store:{$workspaceRepos:{size:t}}}=this.props;return(0,y.createElement)(y.Fragment,null,1!==t?(0,y.createElement)(_o,{gs:e}):null,t>0?(0,y.createElement)(fo,{gs:e}):(0,y.createElement)($,{store:e}),(0,y.createElement)(v,{store:e}))}componentDidMount(){document.body.addEventListener("mousedown",this.onClickBody,!0),window.addEventListener("resize",this.props.store.windowSt.updateDimensions),document.addEventListener("keydown",this.handleWindowKeyShortcuts),document.body.addEventListener("contextmenu",this.onContextMenu),requestAnimationFrame(this.props.store.windowSt.updateDimensions),y.Reaction.value((()=>this.props.store.windowSt.$animating.size>0),(e=>{e?document.documentElement.classList.add("animating"):document.documentElement.classList.remove("animating")}),this)}componentWillUnmount(){document.body.removeEventListener("mousedown",this.onClickBody,!0),window.removeEventListener("resize",this.props.store.windowSt.updateDimensions),document.removeEventListener("keydown",this.handleWindowKeyShortcuts),document.body.removeEventListener("contextmenu",this.onContextMenu)}}async function Eo(e,t){switch(t.button){case m.w3.left:u(e,t);break;case m.w3.right:const{$repo:s,windowSt:n}=e;n.lastClickPosition={x:t.clientX,y:t.clientY},null!==s&&await async function(e,t){const{repoPath:s}=e,n=[(0,d.NU)(s)],i=(0,d.Wr)(e);i.length>0&&(n.push(g.me),n.push(...i)),await(0,p.O0)(n,t,{usePoint:!0})}(s,t)}}async function Ro(e){(0,o.M7)(e).catch(console.log);const t=await(0,n.BA)(),{repoPath:s}=await async function(){return await Os.g.getAppArgv()??{repoPath:null}}();return null!==s&&(t.repoPath=s),(0,i.R)(e),Io(e),await e.restoreStartupState(t),(0,g.GA)(e),async function(){await(0,a.yy)(5e3),await h()}().catch((e=>console.log(e))),l.Zm||(0,r.P)(e).catch((e=>{console.log(e)})),e}function Io(e,t=!1){t&&(document.body.innerHTML=""),(0,y.renderRoot)((0,y.createElement)(Po,{store:e}),document.body)}},1998:(e,t,s)=>{"use strict";s.d(t,{En:()=>y,iJ:()=>$,RT:()=>v});var n=s(5185),i=s(4747),o=s(7273),r=s(5675),a=s(9634),l=s(2888),c=Object.defineProperty,h=(e,t,s)=>((e,t,s)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);const u="username";class m extends l.Custom{constructor(){super(...arguments),h(this,"username",""),h(this,"password",""),h(this,"onUsernameChange",(e=>{this.username=e})),h(this,"onPasswordChange",(e=>{this.password=e})),h(this,"onCancel",(()=>{this.props.resolve(n.K)})),h(this,"onSubmit",(e=>{e.preventDefault(),this.props.resolve({username:this.username,password:this.password})}))}render(){const{url:e,descriptionId:t}=this.props;let s="Authentication Required";return null!==e&&(s=`Authentication required for "${new URL(e).origin}"`),(0,l.createElement)("form",{className:"CredentialsDialog",onSubmit:this.onSubmit},(0,l.createElement)(a.A,{messageId:t},s),(0,l.createElement)("div",{className:"FInputDialogColumn"},(0,l.createElement)("label",{htmlFor:u},"Username:"),(0,l.createElement)(r.L,{id:u,onText:this.onUsernameChange,autoFocus:!0,required:!0}),(0,l.createElement)("label",{className:"CredentialsDialog-passwordLabel",htmlFor:"password"},"Password or Personal Access Token:"),(0,l.createElement)(r.L,{id:"password",type:"password",onText:this.onPasswordChange,required:!0})),(0,l.createElement)(i.D,{rightButtons:[(0,l.createElement)(o.R,{type:"submit"},"OK"),(0,l.createElement)(o.R,{autoFocus:!0,onClick:this.onCancel},"Cancel")]}))}}async function d(e){const{$repo:t,windowSt:s}=e;s.centreLastClick();let i=null;if(null!==t){const{repoPath:e,refs:s}=t,{$currentRemoteName:n}=s;if(null!==n){const t=await y.command({repoPath:e,args:["remote","get-url",n]});t.error||(i=t.stdout.join("").trim())}}return(0,n.$)({dismissible:!1,contentCallback:(e,t,s)=>(0,l.createElement)(m,{resolve:e,url:i,descriptionId:s}),dialogId:d.name,focusElementId:u})}var p=s(9817),g=s(9378),f=s(9039);const w=`http://${f.Hc}:${f.JL}`;async function b(e){const t=await $.poll_action2({actionId:e});if(!("Ok"in t))throw new Error("poll_action2 returned nothing. The action doesn't exist?");return g.M.consoleSt.setActionState(e,t.Ok),t.Ok}const y=new Proxy({},{get:(e,t)=>async e=>{let s=await k(t,e),n=await b(s);for(;!n.done;)await(0,p.yy)(100),n=await b(s);if(n.error&&"credential"===n.error){const i=await d(g.M);if(i)for(await $.set_credentials(i),s=await k(t,e),n=await b(s);!n.done;)n=await b(s)}return n}}),$=new Proxy({},{get:(e,t)=>e=>k(t,e)}),v=new Proxy({},{get:(e,t)=>e=>k(t,e)});async function k(e,t){try{const s=await fetch(`${w}/f/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await s.json()}catch(e){console.log(e)}return null}},9039:(e,t,s)=>{"use strict";s.d(t,{Hc:()=>o,JL:()=>n,MZ:()=>l,Zm:()=>a,cX:()=>r,uo:()=>c});let n=29997,i="win32";const o="127.0.0.1";let r=!1,a=!1,l=!1;function c(){return i}!function(){const e=new URLSearchParams(window.location.search),t=e.get("port");t&&(n=+t),i=e.get("platform"),"darwin"===i?r=!0:"win32"===i?a=!0:l=!0}()},1640:(e,t,s)=>{"use strict";s.d(t,{$I:()=>m,An:()=>g,E0:()=>r,HU:()=>a,HW:()=>o,KF:()=>d,PT:()=>l,a$:()=>u,g9:()=>i,n9:()=>p,nX:()=>c,vU:()=>h});var n=s(1998);const i=e=>n.En.command({repoPath:e,args:["add","-A"]}),o=(e,t)=>n.En.command({repoPath:e,args:["add",t]}),r=(e,t)=>n.En.command({repoPath:e,args:["reset","--",t]}),a=(e,t,s)=>{const i=["branch",t];return void 0!==s&&i.push(s),n.En.command({repoPath:e,args:i})},l=(e,t)=>n.En.command({repoPath:e,args:["commit","-m",t]}),c=(e,t,s)=>"Local"===t.location?n.En.command({repoPath:e,args:["checkout",t.shortName]}):null!==s?n.En.command({repoPath:e,args:["checkout",s.shortName]}):n.En.command({repoPath:e,args:["checkout","-b",t.shortName,t.fullName]});function h(e,t){return n.En.command({repoPath:e,args:["checkout",t]})}const u=(e,t,s)=>n.En.command({repoPath:e,args:["pull",t?"--ff":"--no-ff",s?"--rebase":"--no-rebase"]}),m=(e,t)=>n.En.command({repoPath:e,args:["branch","-D",t.shortName]}),d=async(e,t,s)=>{const i="Remote"===t.location?t:s,o=i?.remoteName??t.remoteName;null!==i&&null!==o&&await n.En.command({repoPath:e,args:["push","-d",o,i.shortName]})},p=async e=>{(await n.En.command({repoPath:e,args:["reset","--hard"]})).error||await n.En.command({repoPath:e,args:["clean","-fd"]})},g=(e,t,s=!1)=>{const i=["revert","--no-edit",t];return s||i.push("--no-commit"),n.En.command({repoPath:e,args:i})}},3005:(e,t,s)=>{"use strict";s.d(t,{_R:()=>m,gC:()=>u,n2:()=>d});var n=s(2650),i=s(5737),o=s(7728),r=s(9039);function a(e){return{label:"Create Repo...",click:()=>(0,o.G)(e),accelerator:"CmdOrCtrl+Shift+N"}}function l(e){return{label:"Clone Repo...",click:()=>(0,n.iO)(e),accelerator:"CmdOrCtrl+N"}}function c(e){return{label:"Open Local Repo...",click:()=>{setTimeout((()=>(0,n.NV)(e)),10)},accelerator:"CmdOrCtrl+O"}}function h(e){const{$repo:t}=e;return null===t?i.eh:{label:`Close ${t.repoPath}`,click:()=>(0,n.AT)(e)}}const u={create:a,clone:l,open:c,close:h};function m(e){const t=[a(e),l(e),c(e)],{$repo:s}=e;return null!==s&&(t.push(i.me),t.push(h(e))),t.push(i.me,...d(e)),r.cX||(t.push(i.me),t.push({role:"quit"})),{label:"File",submenu:t}}function d(e){const t=e.settings.recentRepos.filter((e=>e.path.length>0));return t.length>0?[...t.map((t=>function(e,t){const s=e.getPath();return{label:t,type:"checkbox",click:async()=>{await e.setRepoPath(t)},checked:t===s}}(e,t.path)))]:[]}},5737:(e,t,s)=>{"use strict";s.d(t,{XJ:()=>k,eh:()=>$,GA:()=>v,me:()=>y});var n=s(3005),i=s(2042),o=s(4907),r=s(9010),a=s(1998);function l(e){const t=o.zj.$theme.setting,{$repo:s}=e,n=[{label:"Theme",submenu:[{label:"System",type:"radio",checked:"system"===t,click:()=>o.zj.changeTheme("system")},{label:"Light",type:"radio",checked:"light"===t,click:()=>o.zj.changeTheme("light")},{label:"Dark",type:"radio",checked:"dark"===t,click:()=>o.zj.changeTheme("dark")}]},null!==s?y:$,{label:"Show Changes",click:()=>{const{$repo:t}=e;t?.nav.goToWipView()},visible:null!==s,accelerator:"CommandOrControl+1"},{label:"Show Commits",click:()=>{const{$repo:t}=e;t?.nav.goToCommitsView()},visible:null!==s,accelerator:"CommandOrControl+2"},{label:"Show Branches",click:()=>{const{$repo:t}=e;t?.nav.setShowingRefView(!0)},visible:null!==s,accelerator:"CommandOrControl+3"}];return n.push(y),n.push({role:"resetZoom"},{role:"zoomIn"},{role:"zoomOut"}),n.push(y),n.push({role:"reload"},{label:"Clear Cache and Reload",async click(){await a.iJ.clear_all_caches({repoPath:""}),location.reload()}},{role:"toggleDevTools"},y,{label:"Preview Features",submenu:[{label:"Workspaces",type:"checkbox",checked:r._C,click(){i.o.set("workspacesEnabled",!r._C),location.reload()}},{label:"New Functions (Squash, Extract changes)",type:"checkbox",checked:r.EE,click(){i.o.set("previewGitFunctions",!r.EE),location.reload()}},{label:"Auto-complete in input fields",type:"checkbox",checked:r.YG,click(){i.o.set("autoComplete",!r.YG),location.reload()}},{label:"Split Code Viewer",type:"checkbox",checked:i.o.get("splitView"),click(){i.o.set("splitView",!i.o.get("splitView")),location.reload()}},{label:"New Code Viewer",type:"checkbox",checked:i.o.get("newCodeViewer"),click(){i.o.set("newCodeViewer",!i.o.get("newCodeViewer")),location.reload()}}]}),{label:"View",submenu:n}}var c=s(9039);function h(){const e=[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"delete"},{role:"selectAll"}];return c.cX&&e.push({type:"separator"},{label:"Speech",submenu:[{role:"startSpeaking"},{role:"stopSpeaking"}]}),{label:"Edit",submenu:e}}var u=s(2650),m=s(6588),d=s(5524);function p(){const e={label:"Support",async click(){await d.g.openExternalUrl(m.bV)}};return c.cX?{role:"help",submenu:[e,y,{label:"Learn More",async click(){await d.g.openExternalUrl(m.$w)}}]}:{label:"Help",submenu:[e,y,{label:"About",click:()=>{setTimeout((async()=>{await(0,u.x8)()}),1)}}]}}var g=s(719),f=s(9412),w=s(4330),b=s(6110);const y={type:"separator"},$={label:"none",visible:!1},v=(0,w.pk)((async e=>{const t=k(e);c.cX&&t.unshift(function(e){return{label:"GitFiend",submenu:[{label:"About GitFiend",click:u.x8},{label:"Check for updates...",click:()=>(0,b.r)(e)},y,{role:"services"},y,{role:"hide"},{role:"hideOthers"},{role:"unhide"},y,{role:"quit"}]}}(e)),(0,f.xC)(),await d.g.setApplicationMenu((0,f.Nr)(t,"main"))}),100);function k(e){return[(0,n._R)(e),h(),l(e),(0,g.cJ)(e),p()]}},2650:(e,t,s)=>{"use strict";s.d(t,{AT:()=>c,NV:()=>l,iO:()=>a,x8:()=>h});var n=s(8338),i=s(8152),o=s(5524),r=s(6093);async function a(e){e.windowSt.centreLastClick(),await(0,n.j)(e)}async function l(e){const t=await o.g.show_open_folder_window();null!==t&&await e.setRepoPath(t)}function c(e){e.closeRepoOrWorkspace(),(0,r.$z)(e),(0,i.U)(e,!0)}async function h(){await o.g.showAboutDialog()}},719:(e,t,s)=>{"use strict";s.d(t,{E4:()=>f,KH:()=>p,NU:()=>u,Wr:()=>d,cJ:()=>h,dx:()=>m});var n=s(5737),i=s(8153),o=s(6950),r=s(7495),a=s(5524),l=s(2042),c=s(9039);function h(e){const{$repo:t}=e;if(null===t)return n.eh;const{repo:s}=t;return{label:"Repo",submenu:[{label:"Find",accelerator:"CommandOrControl+f",click:async()=>{await(0,r.i)(t)}},{type:"separator"},{label:"Pull",accelerator:"CommandOrControl+Shift+P",click:async()=>{await s.pull()}},{label:"Push",accelerator:"CommandOrControl+Shift+U",click:async()=>{await(0,i.VC)(t)}},{label:"Fetch",accelerator:"CommandOrControl+Shift+F",click:async()=>{await s.fetch()}},n.me,g(e),p(),(0,o.Vk)(e),n.me,u(t.repoPath),n.me,...d(t)]}}function u(e){return{label:`Open ${null===e?"Repo":e} in ${m()}`,async click(){null!==e&&await a.g.showItemInFolder(e)},enabled:null!==e}}function m(){return c.cX?"Finder":c.MZ?"File Manager":"File Explorer"}function d(e){const{config:t}=e,s=[];return t.$remotes.forEach(((e,t)=>{e=e.replace(".git",""),s.push({label:`Open ${e} (${t})`,async click(){await a.g.openExternalUrl(e)}})})),s}const p=()=>({label:"Auto fetch",type:"checkbox",click:()=>{l.o.set("autoFetch",!l.o.get("autoFetch"))},checked:l.o.get("autoFetch")});function g(e){return{label:"Pull options",submenu:w(e)}}function f(e){return[...w(e.global),n.me,(0,o.Vk)(e.global)]}function w(e){return[{label:"Fast Forward When Possible",type:"checkbox",checked:l.o.get("pullFastForward"),async click(){l.o.set("pullFastForward",!l.o.get("pullFastForward")),(0,n.GA)(e)}},{label:"Rebase",type:"checkbox",checked:l.o.get("pullRebase"),async click(){l.o.set("pullRebase",!l.o.get("pullRebase")),(0,n.GA)(e)}}]}},7865:(e,t,s)=>{"use strict";s.d(t,{R:()=>a,S:()=>u});var n=s(4907),i=s(9817),o=s(1998),r=s(2042);function a(e){window.addEventListener("focus",(async()=>{await async function(e){if(!l)try{l=!0,await Promise.all([c(e),u(e),n.zj.askMainForAccentColour()])}finally{l=!1}}(e)})),window.addEventListener("blur",(async()=>{await o.iJ.clear_cache({repoPath:""})}))}let l=!1;async function c(e){const{$repo:t,$workspaceRepos:s}=e;if(null!==t){const{wip:e,repo:s}=t;await s.loadOrReloadRepoData(),await(0,i.yy)(1e3),await e.loadWip()}else s.size>0&&await e.loadReposIfNeeded()}const h=6e4;async function u({$repo:e,windowSt:t}){if(null!==e){const{repo:s}=e;if(r.o.get("autoFetch")){const e=+new Date;t.getTimeOfLastFetch()+h<e&&await s.fetch()}}}},6081:(e,t,s)=>{"use strict";s.d(t,{h:()=>h,w:()=>l});var n=s(9817),i=s(1257),o=s(2888),r=Object.defineProperty,a=(e,t,s)=>((e,t,s)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s),l=(e=>(e[e.message=0]="message",e[e.outputOnly=1]="outputOnly",e[e.errorOnly=2]="errorOnly",e))(l||{});const c={show:0,ignoreLogNum:0,hideError:!1};class h{constructor(){a(this,"$functionsInProgress",0),a(this,"$loadingModalMessage",""),a(this,"$displayOptions",c),a(this,"$actions",new Map),a(this,"$dialogNumber",0),a(this,"$userClickedShow",!1),a(this,"onClickShow",(()=>{this.$userClickedShow=!0})),a(this,"onClickOk",(()=>{this.clear()})),(0,o.init$)(this)}async showLoading(e,t,s=c){0===this.$functionsInProgress&&(this.$dialogNumber=(0,i.f)(),this.$actions=new Map),this.$loadingModalMessage=e,this.$displayOptions={...c,...s},this.$functionsInProgress++;const o=Date.now(),r=await t(),a=Date.now()-o;return a<500&&await(0,n.yy)(500-a),this.$functionsInProgress--,0!==this.$functionsInProgress||this.$userClickedShow||this.$hasError||this.clear(),r}get $showConsole(){return this.$userClickedShow||this.$hasError}get $hasError(){return!this.$displayOptions.hideError&&Array.from(this.$actions.values()).some((e=>e.error))}get $showLoadModal(){const{$displayOptions:{show:e,ignoreLogNum:t},$hasError:s}=this;if(s)return!0;switch(e){case 1:return this.$numLogs>t;case 2:return this.$showConsole;case 0:return""!==this.$loadingModalMessage}}get $numLogs(){return Array.from(this.$actions.values()).reduce(((e,t)=>e+t.stdout.length+t.stderr.length),0)}get $disableShowConsoleButton(){return this.$showConsole||0===this.$numLogs}clear(){this.$loadingModalMessage="",this.$userClickedShow=!1,this.$actions=new Map,this.$functionsInProgress=0,this.$displayOptions=c}setActionState(e,t){this.$actions=new Map([...this.$actions.entries(),[e,t]]),function(e){if(e){const{stdout:t,stderr:s,error:n}=e;let i="white-space: pre; font-family: monospace; background: #eee; padding: 3px; border-radius: 4px;";t.length>0&&console.log(`%c${t}`,i+"color: black;"),s.length>0&&console.log(`%c${s}`,i+"color: #333;")}}(t)}}},9378:(e,t,s)=>{"use strict";s.d(t,{M:()=>ut});var n=s(2042),i=s(2888),o=Object.defineProperty,r=(e,t,s)=>((e,t,s)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class a{constructor(){r(this,"recentRepos",[]),r(this,"$splitCodeViewer",n.o.get("splitView")),r(this,"$ssrCodeViewer",n.o.get("newCodeViewer")),(0,i.init$)(this)}addToRecentRepos(e){const t=this.recentRepos.find((t=>t.path===e));void 0!==t?t.date=Date.now():this.recentRepos.push({path:e,date:Date.now()}),this.recentRepos.sort(((e,t)=>t.date-e.date)),this.recentRepos=this.recentRepos.slice(0,15)}removeFromRecentRepos(e){this.recentRepos=this.recentRepos.filter((t=>t.path!==e))}setRecentRepos(e){this.recentRepos=e}}var l=s(5185),c=s(3331),h=Object.defineProperty;class u extends i.Custom{constructor(){var e,t,s;super(...arguments),e=this,t="ref",s=(0,i.createRef)(),((e,t,s)=>{t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(e,"symbol"!=typeof t?t+"":t,s)}render(){return(0,i.createElement)("div",{className:"GitConsole text",ref:this.ref},this.drawLogs())}drawLogs(){const{$actions:e}=this.props.consoleSt,t=[];for(const[s,{stdout:n,stderr:o}]of e.entries())o.forEach(((e,n)=>{t.push((0,i.createElement)("span",{className:"GitConsole-stderr",key:`${s}-stderr-${n}`},e))})),n.forEach(((e,n)=>{t.push((0,i.createElement)("span",{className:"GitConsole-stdout",key:`${s}-stdout-${n}`},e))}));return t}componentDidUpdate(){const{current:e}=this.ref;null!==e&&(e.scrollTop=e.scrollHeight)}}var m=s(7273),d=s(4907);class p extends i.Custom{render(){const{consoleSt:e}=this.props,{$showConsole:t,$disableShowConsoleButton:s,$loadingModalMessage:n}=e;return(0,i.createElement)("div",{className:"LoadingModal-screen"},(0,i.createElement)("div",{className:"LoadingModal-messageContainer"},(0,i.createElement)("div",{className:"LoadingModal-message"},t?null:(0,i.createElement)(c.y,{size:16,invertColour:"light"===d.zj.$theme.name,style:{marginRight:10}}),""!==n?(0,i.createElement)("div",{className:"LoadingModal-messageText"},n,"..."):null),t?this.drawConsole():(0,i.createElement)(m.R,{className:"LoadingModal-showConsoleButton",colour:"text",disabled:s,onClick:e.onClickShow},"Show Console")))}drawConsole(){const{consoleSt:e}=this.props,{$functionsInProgress:t}=e;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(u,{consoleSt:e,key:"git-console"}),(0,i.createElement)(m.R,{onClick:e.onClickOk,disabled:t>0,style:{marginLeft:"auto",marginRight:12}},t?(0,i.createElement)(c.y,{size:14,invertColour:"light"===d.zj.$theme.name}):"OK"))}}var g=Object.defineProperty,f=(e,t,s)=>((e,t,s)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class w{constructor(e){this.consoleSt=e,f(this,"$dialogData",new Map),f(this,"$contextMenu",[]),(0,i.init$)(this)}showContextMenu(e){this.$contextMenu=[...this.$contextMenu,e]}removeTopSubmenu(){this.$contextMenu.length>0&&(this.$contextMenu=this.$contextMenu.slice(0,-1))}clearAllContextMenus(){if(0!==this.$contextMenu.length){for(const e of this.$contextMenu)e.resolver();this.$contextMenu=[]}}showDialog(e){const t=new Map(this.$dialogData);t.set(e.dialogId,e),this.$dialogData=t}removeDialog(e){const t=new Map(this.$dialogData);t.delete(e),this.$dialogData=t}showingDialog(){return this.$dialogData.size>0}removeTopMostDialog(){let e=null;for(const[,t]of this.$dialogData)(null===e||t.dialogOrder>e.dialogOrder)&&(e=t);null!==e&&e.dismissible&&(this.$dialogData.delete(e.dialogId),e.resolveDialog(l.K),this.$dialogData=new Map(this.$dialogData))}reuseExistingDialog(e,t){const s=this.$dialogData.get(e)??null;return null===s?null:(s.dialogOrder=t,this.$dialogData=new Map(this.$dialogData),s.promise)}drawDialogs(){const{$dialogData:e,consoleSt:t}=this,s=[];for(const[t,n]of e)s.push({order:n.dialogOrder,element:(0,i.createElement)("div",{key:t},n.dialogComponent)});return t.$showLoadModal&&s.push({order:t.$dialogNumber,element:(0,i.createElement)(p,{consoleSt:t,key:"loading-modal"})}),s.sort(((e,t)=>e.order-t.order)),s.map((e=>e.element))}}var b=s(7027),y=Object.defineProperty,$=(e,t,s)=>((e,t,s)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class v{constructor(){$(this,"config",{}),$(this,"$pushDefault",null),$(this,"$remotes",new Map),$(this,"$fetchOptions",n.o.get("fetchOptions")),(0,i.init$)(this)}setConfig(e){this.$remotes=new Map(Object.entries(e.remotes)),this.config=e.entries,this.loadKnownKeys(e.entries)}setFetchOptions(e){n.o.set("fetchOptions",e),this.$fetchOptions=e}loadKnownKeys(e){this.$pushDefault=e["remote.pushdefault"]??null}getPushRemoteForBranch(e){return function(e,t){const s=t[`branch.${e}.pushremote`];if(void 0!==s)return s;const n=t["remote.pushdefault"]??null;if(null!==n)return n;const i=t[`branch.${e}.remote`];return void 0!==i?i:"origin"}(e,this.config)}}var k=s(4188),C=s(6947),_=s(6343),S=s(1998),x=Object.defineProperty,P=(e,t,s)=>((e,t,s)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class E{constructor(e){this.store=e,P(this,"$refArray",[]),P(this,"$refTextLengths",new Map),P(this,"$localRefDiffs",new Map),P(this,"$diffsToHead",new Map),P(this,"$commitsToPull",new Set),P(this,"$repoStatus",null),P(this,"$refSearch",""),P(this,"$commitsToPush",{thisBranch:new Set,allBranches:new Set,size:0}),P(this,"loadCommitsToPushPull",(()=>Promise.all([this.loadCommitsToPull(),this.loadCommitsToPush()]))),P(this,"measureRefText",(e=>{if(0===e.length)return;const{lengths:t,max:s}=(0,C.sj)(e.map((e=>({text:(0,k.z)(e),id:e.id}))),_.gx);this.store.layout.setMaxRefTextWidth(s),this.$refTextLengths=t})),(0,i.init$)(this)}get $numCommitsToPushPull(){if(null===this.store.global.$repo){const{$repoStatus:e}=this;return e?{push:e.remoteBehind,pull:e.remoteAhead}:{push:0,pull:0}}return{push:this.$commitsToPush.size,pull:this.$commitsToPull.size}}async loadRefDiffs(){const{repoPath:e}=this.store,{$repoStatus:t}=this;if(t?.localCommitId){const s=await S.RT.calc_ref_diffs({repoPath:e,headCommitId:t.localCommitId});if(null!==s){let[e,t]=s;this.$localRefDiffs=new Map(Object.entries(e)),this.$diffsToHead=new Map(Object.entries(t))}}}get $allRefs(){const{$refArray:e}=this;e.sort(((e,t)=>{if(e.time===t.time){if(e.head)return 1;if(t.head)return-1}return t.time-e.time}));const t=new Map;for(const s of e)t.set(s.id,s);return{map:t,array:e}}get $filteredRefs(){const{$allRefs:e,$refSearch:t}=this,s=new Map;for(const n of e.array)t.length>1?n.fullName.toLowerCase().includes(t.toLowerCase())&&R(s,n):R(s,n);return{map:e.map,array:e.array,pairs:s}}setRefArray(e){this.measureRefText(e),this.$refArray=e}findRefByShortName(e){for(const t of this.$allRefs.array)if(t.shortName===e)return t;return null}getSibling({siblingId:e,shortName:t}){const{config:s}=this.store;if(null!==e){const n=this.$allRefs.map.get(e),i=s.getPushRemoteForBranch(t);if(void 0!==n&&n.remoteName===i)return n}return null}get $refInfoLocal(){return this.$allRefs.array.filter((e=>"Local"===e.location))}get $remotes(){const e=new Set;for(const t of this.$filteredRefs.array)null!==t.remoteName&&e.add(t.remoteName);return Array.from(e)}async loadCommitsToPush(){const{thisBranch:e,allBranches:t}=await S.RT.get_un_pushed_commits({repoPath:this.store.repoPath});this.$commitsToPush={thisBranch:new Set(e),allBranches:new Set(t),size:Math.max(e.length,t.length)}}get $currentBranchIsUnpublished(){return"Local"===this.$repoStatus?.state}async loadCommitsToPull(){const{repoPath:e}=this.store,{$repoStatus:t}=this;if(null===t)return;const{localCommitId:s,remoteCommitId:n}=t;if(s&&n){const t=await S.RT.commit_ids_between_commits({repoPath:e,commitId1:s,commitId2:n}),i="Ok"in t?t.Ok:[];this.$commitsToPull=new Set(i)}}get $currentRemoteName(){const{$repoStatus:e}=this;return e?this.store.config.getPushRemoteForBranch(e.branchName):null}}function R(e,t){if("Branch"===t.refType){const s=e.get(t.shortName);if(s)"Local"===t.location?s.local=t:s.remote.push(t);else{const s={local:null,remote:[]};"Local"===t.location?s.local=t:s.remote.push(t),e.set(t.shortName,s)}}}var I=s(6081),T=s(2994),N=s(4071),M=s(9817),L=Object.defineProperty;class F{constructor(e,t,s,n){this.name=e,this.colour=t,this.removeFunction=s,this.type=n}}class O{constructor(e,t){var s;this.repoSt=e,this.store=t,((e,t,s)=>{t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(s="$filters")?s+"":s,[]),(0,i.init$)(this),this.loadFilters(),i.Reaction.value((()=>JSON.stringify(this.$filters)),(()=>(this.persistFilters(),this.repoSt.loadCommits({useCache:!0}))),this)}setBranchFilter(e){this.$filters=this.$filters.filter((e=>!("branch"in e))),null!==e&&this.$filters.push({branch:{id:e.id,short_name:e.short_name}}),this.store.nav.setShowingRefView(!1)}setUsernameFilter(e){this.$filters=this.$filters.filter((e=>!("user"in e))),null!==e&&this.$filters.push({user:e})}setFileFilter(e){this.$filters=this.$filters.filter((e=>!("file"in e))),null!==e&&this.$filters.push({file:e})}get $haveFilter(){return this.$filters.length>0}get $file(){const e=this.$filters.find((e=>"file"in e));return e&&"file"in e?e.file:null}getFilters(){const e=[];for(const t of this.$filters)if("branch"in t){const{short_name:s}=t.branch;e.push(new F(s,(0,N.Jh)(s),(()=>{this.setBranchFilter(null)}),"branch"))}else if("user"in t){const{author:s,email:n}=t.user;e.push(new F(s,(0,N.Jh)(n),(()=>{this.setUsernameFilter(null)}),"username"))}else if("file"in t){const{file_name:s}=t.file;e.push(new F((0,M.WP)(s),(0,N.Jh)(s),(()=>{this.setFileFilter(null)}),"file"))}return e}persistFilters(){const{repoPath:e}=this.store,t=n.o.get("filters2");t[e]=this.$filters,n.o.set("filters2",t)}loadFilters(){const{repoPath:e}=this.store,t=n.o.get("filters2")[e];void 0!==t&&(this.$filters=t)}}var D=s(1640),j=Object.defineProperty,z=(e,t,s)=>((e,t,s)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class W{constructor(e,t,s){this.store=e,this.quickRefresh=t,this.fullRefresh=s,z(this,"lastRefreshType",0),z(this,"run",(async()=>{await this.refresh()}))}async refresh(){const{refreshType:e}=this;this.setLoading(!0),0===e?(this.lastRefreshType=0,await this.quickRefresh()):(this.lastRefreshType=1,await this.fullRefresh()),this.setLoading(!1)}async hasChanged(){const{store:{repoPath:e},lastRefreshType:t,refreshType:s}=this;if(t!==s)return!0;const n=await S.RT.repo_has_changed({repoPath:e});return null===n&&console.error(`${e} wasn't found in our watch dirs.`),n??!1}get refreshType(){const{store:e,store:{global:{$repo:t}}}=this;return t===e?1:0}setLoading(e){const{store:{global:{windowSt:t},repoPath:s}}=this;e?(t.$refreshingRepo.add(s),t.$refreshingRepo=new Set(t.$refreshingRepo)):(t.$refreshingRepo.delete(s),t.$refreshingRepo=new Set(t.$refreshingRepo))}}var V=Object.defineProperty,A=(e,t,s)=>((e,t,s)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class H{constructor(e){this.store=e,A(this,"$commits",new Map),A(this,"$commitIds",[]),A(this,"$patches",{commitId:"",patches:[]}),A(this,"$hunks",[]),A(this,"$hunkLines",[]),A(this,"$splitHunkLines",[[],[]]),A(this,"$mode","commits"),A(this,"commitFilters"),A(this,"fullRefresh",(async()=>{const{wip:e,refs:t,nav:s,config:n,repoPath:i}=this.store,o=await S.RT.load_repo_status({repoPath:i});if("Err"in o)return void console.error(`Failed to load repo status for ${i}: `,o.Err);const{patches:r,config:a}=o.Ok;n.setConfig(a),e.setPatchesFromQuery(r),t.$repoStatus=o.Ok,await this.loadCommits(),s.validateSelectedCommit(),await e.validateAndLoadHunks(),await Promise.all([t.loadCommitsToPushPull(),t.loadRefDiffs()])})),A(this,"refresh"),A(this,"pull",(async()=>{const{global:e,repo:t}=this.store,{consoleSt:s,windowSt:i}=e;await s.showLoading("Pulling",(async()=>{const{repoPath:e}=this.store;i.$pullInProgress.add(e),i.$pullInProgress=new Set(i.$pullInProgress),await(0,D.a$)(e,n.o.get("pullFastForward"),n.o.get("pullRebase")),i.$pullInProgress.delete(e),i.$pullInProgress=new Set(i.$pullInProgress),await t.loadOrReloadRepoData()}),{show:I.w.errorOnly})})),(0,i.init$)(this),this.commitFilters=new O(this,e),this.refresh=new W(e,(async()=>{const{wip:e,refs:t,config:s,repoPath:n}=this.store,i=await S.RT.load_repo_status({repoPath:n});if("Ok"in i){const{Ok:n}=i;s.setConfig(n.config),e.setPatchesFromQuery(n.patches),t.$repoStatus=n}else console.log("failed to load ws repo",n,i.Err),e.setPatchesFromQuery(null)}),this.fullRefresh);const{nav:t}=e;i.Reaction.value((()=>t.$selectedCommitId),(async t=>{const{repoPath:s}=e,{$patches:{patches:n}}=this;if(n.at(0)?.commitId!==t)if(null===t||t===b.z)this.$patches={commitId:"",patches:[]};else{const e=await S.RT.load_patches_for_commit({repoPath:s,commitId:t});this.$patches={commitId:t,patches:"Ok"in e?e.Ok:[]}}}),this),i.Reaction.value((()=>{const{$selectedPatchId:e}=t;if(null===e)return null;const{$patches:{patches:s},$selectedCommit:n}=this;return 0===s.length?null:n?.id+e}),(async()=>{if(t.$viewingWip)return;this.clearHunks();const{$selectedPatchId:e}=t;null!==e&&await this.loadHunksForId(e)}),this)}async loadOrReloadRepoData(){await this.refresh.hasChanged()?await this.refresh.run():(await(0,M.yy)(1e3),await this.refresh.hasChanged()&&await this.refresh.run())}async loadCommits(e){const{nav:t,refs:s,repoPath:n}=this.store,i=await S.RT.load_commits_and_refs({repoPath:n,numCommits:e?.num??_.fZ,filters:this.commitFilters.$filters,fast:e?.useCache??!1,skipStashes:e?.skipStashes??!1}),[o,r]="Ok"in i?i.Ok:[[],[]],a=new Map;for(const e of o)a.set(e.id,e);this.setCommits(a),s.setRefArray(r),t.validateSelectedCommit()}setCommits(e){this.$commits=e,this.$commitIds=Array.from(this.$commits.keys())}async fetch(e){const{store:t}=this,{repo:s,global:i,config:o}=t,{consoleSt:r,windowSt:a}=i;async function l(){const{repoPath:e}=t;a.setFetchInProgress(e);const s=n.o.get("fetchOptions");s.type!==T.N.all&&o.$remotes.has(s.remoteName)?await S.En.command({repoPath:e,args:["fetch","--prune",s.remoteName]}):await S.En.fetch_all({repoPath:e}),a.setFetchDone(e)}e?await r.showLoading("Fetching",l,{show:I.w.errorOnly}):await l(),await s.loadOrReloadRepoData()}async reloadHunks(){const{store:{nav:{$viewingWip:e,$selectedPatchId:t}}}=this;!e&&t&&await this.loadHunksForId(t)}async loadHunksForId(e){if(this.store.global.settings.$ssrCodeViewer)return;const{repo:t,nav:s}=this.store,{$selectedCommit:n,$patches:{patches:i}}=t,o=i.find((t=>t.id===e));if(n&&o)if(this.store.global.settings.$splitCodeViewer){const[t,i,r]=await this.loadHunksSplit(n,o);s.$selectedPatchId===e&&(this.$hunks=t,this.$hunkLines=[],this.$splitHunkLines=[i,r])}else{const[t,i]=await this.loadHunks(n,o);s.$selectedPatchId===e&&(this.$hunks=t,this.$hunkLines=i,this.$splitHunkLines=[[],[]])}}async loadHunks(e,t){if(null!==t&&!t.isImage){const s=await S.RT.load_hunks({repoPath:this.store.repoPath,commit:e,patch:t});if("Ok"in s)return s.Ok}return[[],[]]}async loadHunksSplit(e,t){if(null!==t&&!t.isImage){const s=await S.RT.load_hunks_split({repoPath:this.store.repoPath,commit:e,patch:t});if("Ok"in s)return s.Ok}return[[],[],[]]}selectFirstPatch(){const{$patches:{patches:e}}=this;e.length>0&&this.store.nav.setSelectedPatchId(e[0].id)}getCommitIndex(e){const t=this.$commits.get(e);return void 0!==t?t.index:-1}get $selectedPatch(){const{$patches:{patches:e}}=this,{$selectedPatchId:t}=this.store.nav;return e.find((e=>e.id===t))??null}get $selectedCommit(){const{store:{nav:{$selectedCommitId:e}}}=this;return null!==e&&e!==b.z?this.$commits.get(e)??null:null}goToNextCommit(){this.store.nav.setSelectedCommit(this.getNextCommitId())}getNextCommitId(){const{$commitIds:e,store:{nav:t,nav:{$selectedCommitId:s}}}=this;if(s===b.z&&e.length>0)return e[0];if(null!==s){const{$selectedIndex:s}=t;if(null!==s&&s<e.length-1)return e[s+1]}return null}goToPreviousCommit(){this.store.nav.setSelectedCommit(this.getPrevCommitId())}getPrevCommitId(){const{nav:e,wip:t}=this.store;if(e.hasSelectedCommit()){const{$selectedIndex:s}=e;if(0===s&&t.$haveWIP)return b.z;if(null!==s)return this.$commitIds[s-1]}return null}async switchToCommit(e){const{repoPath:t,nav:s}=this.store;if(d.zj.disableAnimations(),d.zj.restoreAnimationsDebounced(),e===b.z)return void s.goToWipView();if(void 0===this.$commits.get(e))return;const n=await S.RT.load_patches_for_commit({repoPath:t,commitId:e}),i="Ok"in n?n.Ok:[],o=i.at(0)??null;s.$selectedCommitId=e,s.$selectedPatchId=o?.id??null,this.$patches={commitId:e,patches:i}}clearHunks(){this.$hunks=[],this.$hunkLines=[],this.$splitHunkLines=[[],[]]}}function B(e,t){return{status:e,oldNum:null,newNum:null,hunkIndex:t,text:"",index:0,lineEnding:"\n"}}var U=s(320),K=s(4222),q=s(3212),Y=Object.defineProperty,G=(e,t,s)=>((e,t,s)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class J{constructor(e){this.chosenLines=e,G(this,"$draggedLine",null),G(this,"$initialTop",0),G(this,"$initialClientY",0),G(this,"$deltaY",0),G(this,"$sectionStartIndex",0),G(this,"onMouseMove",(e=>{this.$deltaY=e.clientY-this.$initialClientY})),G(this,"onMouseUp",(()=>{window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),this.endDragging()})),(0,i.init$)(this)}setDragging(e,t,s){this.$draggedLine=t,this.$initialTop=s,this.$initialClientY=e.clientY,this.$deltaY=0,this.$sectionStartIndex=s/q.K_-this.$currentIndex,window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)}endDragging(){this.$draggedLine=null}get $draggedElementTop(){return this.$initialTop+this.$deltaY}get $newIndex(){const{$draggedLine:e}=this;return null===e?-1:Math.round((this.$initialTop+this.$deltaY)/q.K_)-this.$sectionStartIndex}get $dragInProgress(){return null!==this.$draggedLine}get $currentIndex(){const{$draggedLine:e}=this;if(null!==e){const t=this.chosenLines.$sections.get(e.conflict.section);if(void 0!==t){const s=t.array.findIndex((t=>e.conflict.key===t.conflict.key));if(-1!==s)return s}}return-1}}var X=s(4330),Z=Object.defineProperty,Q=(e,t,s)=>((e,t,s)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class ee{constructor(e){this.conflictedFile=e,Q(this,"$sections",new Map),Q(this,"dragSt",new J(this)),(0,i.init$)(this)}clear(){this.$sections=new Map}has({conflict:{section:e,key:t}}){return this.$sections.get(e)?.set.has(t)??!1}add(e){const{section:t}=e.conflict,{$sections:s}=this;if(!this.has(e)){s.has(t)||s.set(t,{array:[],set:new Set});const n=s.get(t);n?.array.push(e),n?.set.add(e.conflict.key)}this.$sections=new Map(s)}remove(e){const{$sections:t}=this,{section:s,key:n}=e.conflict,i=t.get(s);if(void 0!==i){i.set.delete(n);const e=i.array.findIndex((e=>e.conflict.key===n));-1!==e&&i.array.splice(e,1),this.$sections=new Map(t)}}toggleLine(e){this.has(e)?this.remove(e):this.add(e)}get $chosenLines(){const e=[],t=new Map;for(const s of this.conflictedFile.lines)if("ok"in s)e.push(s);else{const n=this.$sections.get(s.slot.section);if(!t.has(s.slot.section)&&void 0!==n){for(const t of n.array)e.push(t);t.set(s.slot.section,!0)}}return e}get $lineIndices(){const e=new Map,t=new Map;let s=0;for(const n of this.conflictedFile.lines)if("slot"in n){const i=this.$sections.get(n.slot.section);if(!t.has(n.slot.section)&&void 0!==i){for(const t of i.array)e.set(t.conflict.key,s),s++;t.set(n.slot.section,!0)}}else s++;return e}get $lineStats(){const{sections:e}=this.conflictedFile.$info;let t=0,s=0;for(const n of e)t+=te(n[K.M3]),s+=te(n[K.NS]);let n=0,i=0;return this.$sections.forEach((e=>{for(const t of e.array)t.conflict.side===K.M3?n++:i++})),{[K.M3]:{chosen:n,total:t,allChosen:n===t},[K.NS]:{chosen:i,total:s,allChosen:i===s}}}allInSideChosen(e){return this.$lineStats[e].allChosen}toggleSide(e,t=null){const s=!0===t||!this.allInSideChosen(e);for(const t of this.conflictedFile.$info.sections)for(const n of t[e])"conflict"in n&&(s?this.add(n):this.remove(n))}selectAll(){this.toggleSide(K.M3,!0),this.toggleSide(K.NS,!0)}reorder(e,t,s){const n=this.$sections.get(e.conflict.section);void 0===n||s>=n.array.length||t===s||t<0||s<0||((0,X.Iz)(n.array,t,s),this.$sections=new Map(this.$sections))}}function te(e){const t=e.findIndex((e=>"blank"in e));return-1!==t?t:e.length}function se(e,t){if(e.lines.length!==t.lines.length||e.sections.length!==t.sections.length||e.refNameTop!==t.refNameTop||e.refNameBottom!==t.refNameBottom||e.lineEnding!==t.lineEnding||e.maxLineLength!==t.maxLineLength)return!1;for(let s=0;s<e.sections.length;s++)if(JSON.stringify(e.sections[s])!==JSON.stringify(t.sections[s]))return!1;return!0}var ne=s(1197),ie=Object.defineProperty,oe=(e,t,s)=>((e,t,s)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class re{constructor(e,t,s){this.store=e,this.repoPath=t,this.patch=s,oe(this,"chosenLines",new ee(this)),oe(this,"$info",{lines:[],sections:[],lineEnding:"",maxLineLength:0,refNameBottom:"",refNameTop:""}),oe(this,"$chosenFile",null),oe(this,"$saving",!1),oe(this,"$loadedLines",!1),(0,i.init$)(this)}async loadLines(){const{repoPath:e}=this.store;this.$loadedLines=!1;const t=await S.RT.load_conflicted_file({repoPath:e,patch:this.patch}),s="Ok"in t?t.Ok:{lines:[],sections:[],lineEnding:"",maxLineLength:0,refNameBottom:"",refNameTop:""};se.name;const n=se(this.$info,s);se.name,n||(this.$info=s,this.chosenLines.clear(),this.chosenLines.selectAll()),this.$loadedLines=!0}get imageConflict(){return this.patch.isImage}get $binaryConflict(){return!!this.$loadedLines&&!this.patch.isImage&&0===this.$info.lines.length}get lines(){return this.$info.lines}getConflictedLine(e,t,s){return this.$info.sections[e][t][s]}get refNameTop(){if("HEAD"===this.$info.refNameTop){const{$repoStatus:e}=this.store.refs;return`${"Remote"!==e?.state?"local":"remote"}/${e?.branchName??""}`}return this.$info.refNameTop}get refNameBottom(){return this.$info.refNameBottom}isSamePatch(e){return e.id===this.patch.id}conflictedDelete(){return"D"===this.patch.unStagedType||"D"===this.patch.stagedType}get $saveButtonDisabled(){return(this.imageConflict||this.$binaryConflict)&&null===this.$chosenFile||this.$saving}async saveFile(){this.$saving=!0,this.imageConflict?await this.saveImageFile():await this.saveTextFile(),this.$saving=!1}async saveImageFile(){const{repoPath:e,patch:{newFile:t},store:s,$chosenFile:n}=this;null!==n&&("left"===n?await S.En.command({repoPath:e,args:["checkout","--ours",t]}):await S.En.command({repoPath:e,args:["checkout","--theirs",t]}),await(0,D.HW)(e,t),await s.wip.loadWip())}async saveTextFile(){const{wip:e,repoPath:t}=this.store,s=(0,ne.uJ)(this.repoPath,this.patch.newFile),n=this.chosenLines.$chosenLines.map((e=>"ok"in e?e.ok.text:e.conflict.text)).join(this.$info.lineEnding);await S.iJ.write_file({filePath:s,content:n});const i=this.getIndexOfSelectedUniquePatch();await(0,D.HW)(t,this.patch.newFile),this.chosenLines.clear(),await e.loadWip(),this.goToClosestIndex(i)}async keepDeletedFile(){const{wip:e,repoPath:t}=this.store,s=this.getIndexOfSelectedUniquePatch();await(0,D.HW)(t,this.patch.newFile),await e.loadWip(),this.goToClosestIndex(s)}async removedDeletedFile(){const{wip:e,repoPath:t}=this.store,s=this.getIndexOfSelectedUniquePatch();await S.En.command({repoPath:t,args:["rm",this.patch.oldFile]}),await e.loadWip(),this.goToClosestIndex(s)}getIndexOfSelectedUniquePatch(){const{wip:{$selectedPatch:e,$patches:t}}=this.store;return null===e?-1:t.findIndex((t=>t.newFile===e.newFile||t.oldFile===e.oldFile))}goToClosestIndex(e){const{wip:{$patches:t},nav:s}=this.store;0!==t.length&&(e<0?s.setSelectedPatchId(t[0].id):e>=t.length?s.setSelectedPatchId(t[t.length-1].id):s.setSelectedPatchId(t[e].id))}}var ae=Object.defineProperty,le=(e,t,s)=>((e,t,s)=>t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);const ce={pinnedFilePaths:[],date:0};class he{constructor(e){this.wipSt=e,le(this,"currentRepo",""),le(this,"$currentPinned",new Map),(0,i.init$)(this)}loadAllPinned(){return n.o.get("pinnedFilePaths")}saveAllPinned(e){Object.keys(e).length>50&&(e=this.removeOldestRepo(e)),n.o.set("pinnedFilePaths",e)}removeOldestRepo(e){const t=Object.keys(e);let s=e[t[0]],n=t[0];for(const i of t)e[i].date<s.date&&(s=e[i],n=i);return delete e[n],e}pinFile(e,t){this.ensureRepo(e)&&(this.$currentPinned.set(t,!0),this.$currentPinned=new Map(this.$currentPinned),this.saveCurrentPinned())}unPinFile(e,t){this.ensureRepo(e)&&this.$currentPinned.has(t)&&(this.$currentPinned.delete(t),this.$currentPinned=new Map(this.$currentPinned),this.saveCurrentPinned())}has(e,t){return!!this.ensureRepo(e)&&this.$currentPinned.has(t)}getArray(e){return this.ensureRepo(e)?this.wipSt.$patches.filter((e=>this.$currentPinned.has(e.newFile))).map((e=>e.newFile)):[]}size(e){return this.ensureRepo(e)?this.$currentPinned.size:0}saveCurrentPinned(){const e={pinnedFilePaths:Array.from(this.$currentPinned.keys()),date:Date.now()},t=this.loadAllPinned();t[this.currentRepo]=e,this.saveAllPinned(t)}ensureRepo(e){return null!==e&&(this.currentRepo!==e&&this.switchRepo(e),!0)}switchRepo(e){const t=this.loadAllPinned();this.currentRepo=e,this.$currentPinned=new Map;const s=t[e]??ce;for(const e of s.pinnedFilePaths)this.$currentPinned.set(e,!0);this.$currentPinned=new Map(this.$currentPinned)}}var ue=s(8901);class me{constructor(e){this.store=e}stageFile(e){const{store:{repoPath:t,wip:{$patchSize:s},global:{stagedFiles:n}}}=this;n.stageFile(t,e,s)}unStageFile(e){const{store:{repoPath:t,wip:{$patchSize:s},global:{stagedFiles:n}}}=this;n.unStageFile(t,e,s)}stageLine(e,t){const{store:{repoPath:s,wip:{$selectedPatch:n,$patchSize:i},global:{stagedFiles:o}}}=this;null!==n&&o.stageLine(s,n.newFile,e,t,i)}unStageLine(e,t){const{store:{repoPath:s,wip:{$selectedPatch:n,$patchSize:i},global:{stagedFiles:o}}}=this;null!==n&&o.unStageLine(s,n.newFile,e,t,i)}stageHunk(e){const{store:{repoPath:t,wip:{$selectedPatch:s,$patchSize:n},global:{stagedFiles:i}}}=this;null!==s&&i.stageHunk(t,s.newFile,e,n)}unStageHunk(e){const{store:{repoPath:t,wip:{$selectedPatch:s,$patchSize:n},global:{stagedFiles:i}}}=this;null!==s&&i.unStageHunk(t,s.newFile,e,n)}fileStagedState(e){const{store:{repoPath:t,global:{stagedFiles:s}}}=this;return s.fileStageState(t,e)}hunkStagedState(e){const{store:{repoPath:t,wip:{$selectedPatch:s},global:{stagedFiles:n}}}=this;return null===s?"staged":n.hunkStageState(t,s.newFile,e)}lineStageState(e,t){const{store:{repoPath:s,wip:{$selectedPatch:n,$patchSize:i},global:{stagedFiles:o}}}=this;return null===n?"staged":o.lineStageState(s,n.newFile,e,t,i)}async discardLine(e){await(0,ue.VZ)(this.store,e)}cleanupAfterCommit(e){const{store:{repoPath:t,global:{stagedFiles:s}}}=this;s.cleanupAfterCommit(t,e)}}var de=Object.defineProperty,pe=(e,t,s)=>((e,t,s)=>t in e?de(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class ge{constructor(e){this.store=e,pe(this,"$filterText",""),pe(this,"onClickCheckbox",(async()=>{const{$checkboxState:e,$selectedInfo:{staged:t,mixed:s,total:n,pinned:i}}=this;switch(e){case"true":this.unStageAll();break;case"false":case"mixed":t+s===n-i?this.unStageAll():this.stageAll()}})),pe(this,"unStageAll",(()=>{const{wip:e}=this.store;for(const t of this.$visiblePatches)e.stagingSt.unStageFile(t.newFile)})),pe(this,"stageAll",(()=>{const{wip:e,repoPath:t}=this.store;for(const{newFile:s}of this.$visiblePatches)e.pinnedFiles.has(t,s)||e.stagingSt.stageFile(s)})),(0,i.init$)(this)}get $visiblePatches(){const{$filterText:e,store:{wip:{$patches:t}}}=this,s=e.toLocaleLowerCase();return t.filter((e=>e.newFile.toLocaleLowerCase().includes(s)))}get $selectedInfo(){const{$visiblePatches:e,store:{wip:t,repoPath:s}}=this;let n=0,i=0,o=0;for(const r of e){const e=t.stagingSt.fileStagedState(r.newFile);t.pinnedFiles.has(s,r.newFile)?o++:"staged"===e?n++:"mixed"===e&&i++}return{staged:n,mixed:i,pinned:o,total:e.length}}get $checkboxState(){const{$selectedInfo:{staged:e,mixed:t,total:s}}=this;return e+t===0?"false":s===e?"true":"mixed"}}var fe=Object.defineProperty,we=(e,t,s)=>((e,t,s)=>t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class be{constructor(e){this.store=e,we(this,"$patches",[]),we(this,"lastPatchIndex",0),we(this,"header",""),we(this,"$hunks",[]),we(this,"$splitHunkLines",[[],[]]),we(this,"$patchSize",0),we(this,"$validUtf8",!0),we(this,"$conflictedFile",null),we(this,"$mergeInProgress",null),we(this,"$commitMessage",""),we(this,"pinnedFiles",new he(this)),we(this,"stagingSt"),we(this,"workingFilesSt"),we(this,"validateAndLoadHunks",(async()=>{const{nav:e,repoPath:t}=this.store;if(!e.$viewingWip)return;const{$selectedPatch:s}=this;null===s&&null!==e.$selectedPatchId&&this.pickNextPatch(),null!==s&&(s.conflicted?await this.loadConflictedFile(t,s):s.isImage||await this.loadHunks(s))})),we(this,"$loadingHunks",!1),(0,i.init$)(this),this.stagingSt=new me(e),this.workingFilesSt=new ge(e);const{nav:t}=e;i.Reaction.value((()=>t.$selectedPatchId),(async()=>{const e=this.$indexOfSelectedPatch;void 0!==e&&e>=0&&(this.lastPatchIndex=e),t.$selectedCommitId===b.z&&(this.setHunks([],0,[[],[]],!0),this.$conflictedFile=null,await this.validateAndLoadHunks())}),this)}async loadWip(e=!1){await this.loadPatches(),e||await this.validateAndLoadHunks(),this.store.nav.validateSelectedCommit()}async loadPatches(){const{repoPath:e}=this.store,t=await S.RT.load_wip_patches({repoPath:e});"Ok"in t?this.setPatchesFromQuery(t.Ok):this.setPatchesFromQuery(null)}setPatchesFromQuery(e){if(e){const t=e.patches,s=e.conflict_commit_id;s&&0===t.length&&t.push(U.u),this.$mergeInProgress=s,0===t.length&&this.$haveWIP&&this.store.nav.setSelectedPatchId(null),this.$patches=t}else this.$mergeInProgress=null,this.store.nav.setSelectedPatchId(null),this.$patches=[]}get $emptyMerge(){return null!==this.$mergeInProgress&&this.$patches.some((e=>e.id===U.v))}pickNextPatch(){const e=this.lastPatchIndex,{$visiblePatches:t}=this.workingFilesSt;void 0!==t[e]?this.store.nav.setSelectedPatchId(t[e].id):void 0!==t[e-1]?this.store.nav.setSelectedPatchId(t[e-1].id):void 0!==t[e+1]?this.store.nav.setSelectedPatchId(t[e+1].id):this.selectFirstPatch()}async loadHunks(e){const{repoPath:t,refs:{$repoStatus:s},global:{settings:{$splitCodeViewer:n}}}=this.store;try{if(this.$loadingHunks=!0,n){const n=await S.RT.load_wip_hunks_split({repoPath:t,patch:e,headCommit:s?.localCommitId??null});if("Ok"in n){const{$selectedPatch:t}=this,{hunks:s,left:i,right:o,patch_size:r,valid_utf8:a}=n.Ok;null!==t&&t.id===e.id?this.setHunks(s,r,[i,o],a):this.setHunks([],0,[[],[]],!0)}}else{const n=await S.RT.load_wip_hunks({repoPath:t,patch:e,headCommit:s?.localCommitId??null}),{$selectedPatch:i}=this;if(null!==i&&i.id===e.id)if("Ok"in n){const[e,t,s]=n.Ok;this.setHunks(e,t,[[],[]],s)}else this.setHunks([],0,[[],[]],!0)}}finally{this.$loadingHunks=!1}}async loadConflictedFile(e,t){null!==this.$conflictedFile&&this.$conflictedFile.isSamePatch(t)||(this.$conflictedFile=new re(this.store,e,t)),await this.$conflictedFile.loadLines()}selectFirstPatch(){const{nav:e}=this.store;this.workingFilesSt.$visiblePatches.length>0?e.setSelectedPatchId(this.workingFilesSt.$visiblePatches[0].id):this.$patches.length>0&&e.setSelectedPatchId(this.$patches[0].id)}goToNextPatch(){const{nav:e}=this.store;if(this.$haveConflicts)return;const t=this.$indexOfSelectedPatch;if(null===this.$selectedPatch)return;const{$visiblePatches:s}=this.workingFilesSt;-1===t?this.selectFirstPatch():t<s.length-1&&e.setSelectedPatchId(s[t+1].id)}goToPreviousPatch(){const{nav:e}=this.store;if(this.$haveConflicts)return;const{$selectedPatch:t,$indexOfSelectedPatch:s}=this;if(null===t)return;const{$visiblePatches:n}=this.workingFilesSt;s>0?e.setSelectedPatchId(n[s-1].id):this.selectFirstPatch()}get $selectedPatch(){const{$selectedPatchId:e}=this.store.nav;return null===e?null:this.$patches.find((t=>t.id===e))??null}get $indexOfSelectedPatch(){const{$selectedPatch:e}=this,{$visiblePatches:t}=this.workingFilesSt;return null!==e?t.findIndex((t=>t.id===e.id)):-1}get $numChanges(){return this.$patches.length}setHunks(e,t,s,n){this.$hunks=e,this.$patchSize=t,this.$validUtf8=n,this.$splitHunkLines=s}get $hunkLines(){return function(e){const t=[];if(0===e.length)return t;for(const s of e){t.push(B("HeaderStart",s.index)),t.push(B("HeaderEnd",s.index));for(const e of s.lines)t.push({...e})}return t.push(B("HeaderStart",-1)),t}(this.$hunks)}get $mode(){const{$selectedPatch:e,$validUtf8:t}=this,{repoPath:s}=this.store;return!t||null!==e&&(this.pinnedFiles.has(s,e.newFile)||"A"===e?.patchType||"D"===e?.patchType)?"commits":"wip"}setCommitMessage(e){this.$commitMessage=e}clearCommitMessage(){this.$commitMessage=""}get $haveWIP(){return this.$patches.length>0}get $haveConflicts(){return this.$patches[0]?.conflicted??!1}}var ye=s(3789),$e=Object.defineProperty;class ve{constructor(){var e;((e,t,s)=>{t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="timeout")?e+"":e,null)}setTimeout(e,t){this.clear(),this.timeout=window.setTimeout(e,t)}clear(){null!==this.timeout&&clearTimeout(this.timeout)}}var ke=Object.defineProperty,Ce=(e,t,s)=>((e,t,s)=>t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class _e{constructor(){Ce(this,"left",0),Ce(this,"top",0),Ce(this,"width",0),Ce(this,"height",0),Ce(this,"visible",!1)}}class Se{constructor(e){this.store=e,Ce(this,"mapPool",new i.MapPool),Ce(this,"$current",this.mapPool.newMap()),Ce(this,"_prev",this.mapPool.newMap()),Ce(this,"firstTopPix",0),Ce(this,"timer",new ve),Ce(this,"lastRunTime",0),Ce(this,"calcPositions",((e,t,s,n,i,o,r,a,l)=>{const c=function(e,t,s){let n=t?ye.iw:0;return e?s===b.z?n+ye.ch+ye.J9+ye.ch:n+ye.pe+ye.iw:n+ye.pe}(a,l,t);this.firstTopPix=c,this._prev=this.$current,this.$current=this.calcVisiblePositions(e,c,n,t,s,i,o,r),this.lastRunTime=Date.now()})),(0,i.init$)(this)}calcVisiblePositions(e,t,s,n,i,o,r,a){const l=this.mapPool.newMap();let{width:c,height:h}=o;this.store.nav.$selected||(h=145);let u=t;for(const t of e.values()){const{id:e}=t;if(t.filtered)continue;t.numSkipped>0&&(u+=ye.iw);const o=e===n;let m=u,d=ye.iw;o?(i?(m=s,d=h):(m+=ye.ch,d=ye.J9),u+=2*ye.ch,u+=ye.J9):u+=ye.iw;const p=o?ye.J9:ye.iw,g=o&&i||m>s-p&&m<s+h+p&&!i;l.set(e,{left:Pe(o,i,r),top:m,width:xe(o,i,c,a),height:d,visible:g})}return l}get prev(){return Date.now()>d.zj.animationTime.medium+this.lastRunTime?this.$current:this._prev}}function xe(e,t,s,n){return e?t?s:n+2*ye.Kr:n}function Pe(e,t,s){return e?t?0:s-ye.Kr:s}function Ee(e,t,s){return e===b.z?t?0:s-ye.Kr:s}function Re(e,t,s,n){return e===b.z?t?n.width:s+2*ye.Kr:s}var Ie=s(1578);function Te(e,t,s,n,i){let o=n+16;if((i||"Tag"===s.refType)&&(o+=20),e)return o;const r=.5*t-10;return Math.min(o,r)}function Ne(e,t,s,n,i,o,r){let a=i+16;if((o||r)&&(a+=20),e)return a;const l=function(e,t,s){let n=t-24;return e&&(n-=ye.Kr),s>1&&(n-=20),n}(t,Math.min(s,ye.R),n);return Math.min(a,l)}function Me(e,t,s,n){const{commitId:i}=e[n];let o=0,r=n;for(;e[r]?.commitId===i;)r++,o++;const a=n+o;let l=0;for(let s=n;s<a;s++){const n=Le(t,e[s].id);n.stackSize=o,n.orderInStack=l,l++}}function Le(e,t){let s=e.get(t);return void 0===s&&(s={left:0,top:0,width:0,orderInStack:0,stackSize:0,visible:!1},e.set(t,s)),s}var Fe=Object.defineProperty,Oe=(e,t,s)=>((e,t,s)=>t in e?Fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class De{constructor(){Oe(this,"$current",new Map),Oe(this,"$prev",new Map),Oe(this,"lastRun",0),Oe(this,"calcPositions",((e,t,s,n,i,o,r,a,l,c,h)=>{0!==t.array.length&&(this.$prev=this.$current,this.$current=n?function(e,t,s,n,i,o,r,a){const l=new Map,c=Ie.U,h=ye.iw+ye.fk;let u=0;for(const{local:m,remote:d}of e.pairs.values()){if(m){const e=c+u*h,d=e-i;l.set(m.id,{left:s,top:e,width:Te(m.id===r?.id,n,m,t.get(m.id)??0,a===m.id),visible:d>0-ye.iw&&d<o,orderInStack:0,stackSize:0})}for(let e=0;e<d.length;e++){const m=d[e],p=c+(u+e)*h,g=p-i,f=Te(m.id===r?.id,n,m,t.get(m.id)??0,a===m.id);l.set(m.id,{left:s+n-f,top:p,width:f,visible:g>0-ye.iw&&g<o,orderInStack:0,stackSize:0})}u+=Math.max(m?1:0,d.length)}return l}(t,s,r,a,i,o.height,l,h):function(e,t,s,n,i,o,r){const a=new Map;let l=null,c="",h=12;const{innerWidth:u}=window;u>1400&&(h=(u-ye.H8)/2-ye.R);for(let u=0;u<t.length;u++){const m=t[u],{commitId:d,id:p}=m,g=i?.commitId===d,f=e.get(d);if(!f)continue;const w=f.top,b=Le(a,p);c!==d&&(Me(t,a,0,u),g&&(l=u)),b.left=h,b.top=w,b.visible=f.visible&&b.stackSize-1===b.orderInStack||g,b.width=Ne(g,o===d,n,b.stackSize,s.get(m.id)??0,r===m.id,"Tag"===m.refType),c=d}if(null!==l){const e=t[l].id,{stackSize:s}=Le(a,e),n=l+s,i=Le(a,t[n-1].id).width;for(let e=l;e<n;e++){const s=Le(a,t[e].id);e<n-1&&(s.top+=s.orderInStack*ye.iw,s.left+=i+10)}}return a}(e,t.array,s,r,l,c,h),this.lastRun=Date.now())})),(0,i.init$)(this)}get prev(){return Date.now()>this.lastRun+d.zj.animationTime.medium?this.$current:this.$prev}}var je=s(7477),ze=Object.defineProperty,We=(e,t,s)=>((e,t,s)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class Ve{constructor(e){this.store=e,We(this,"commitPositions"),We(this,"refPositions",new De),We(this,"$wipPosition",new _e),We(this,"$scrollTop",0),We(this,"$refViewScrollTop",0),We(this,"$scrollChange",0),We(this,"$maxRefTextWidth",0),We(this,"$timeInfo",new Map),We(this,"updateCommitPositions",(()=>{if(!this.store.nav.$selected)return;const{store:{nav:{$showingRefView:e,$hoveredRefCardId:t,$selectedCommitId:s,$viewingPatch:n},wip:{$haveWIP:i},repo:{$commits:o,commitFilters:{$haveFilter:r}},refs:{$refTextLengths:a,$repoStatus:l,$filteredRefs:c},global:{windowSt:{$commitViewSize:h}}},$scrollTop:u,$commitLeft:m,$commitWidth:d,$refViewScrollTop:p}=this;e||(this.commitPositions.calcPositions(o,s,n,u,h,m,d,i,r),this.setWipPosition(function(e,t,s,n,i,o,r,a){const l=function(e,t,s,n,i){let o=0;if(n&&(o+=ye.iw),e===b.z){if(t)return i;o+=ye.ch}else o+=ye.pe;return o}(e,t,0,r,a),c=function(e,t,s){return e===b.z?t?s.height:ye.J9:ye.iw}(e,t,i);return{left:Ee(e,t,n),top:l,width:Re(e,t,s,i),height:c,visible:e===b.z&&t||a<l+c}}(s,n,d,m,h,0,r,u)));const g=c.map.get(t)??null;this.refPositions.calcPositions(this.commitPositions.$current,c,a,e,p,h,m,d,g,s,l?.headRefId??null)})),We(this,"setScrollTop",(e=>{this.$scrollTop=e})),We(this,"calcTimeInfo",(()=>{const e=new Map;let t="";const{repo:{$commitIds:s,$commits:n},refs:{$filteredRefs:i}}=this.store;for(const i of s){const s=n.get(i);if(void 0!==s){const n=(0,ne.MJ)(s.date.ms),o=n===t;e.set(i,{timeString:n,sameAsPrevious:o,fullDate:o?void 0:(0,ne.lF)(s.date.ms)}),t=n}}for(const s of i.array){const n=(0,ne.MJ)(s.time),i=n===t;e.set(s.id,{timeString:n,sameAsPrevious:i,fullDate:i?void 0:(0,ne.lF)(s.time)}),t=n}this.$timeInfo=e})),(0,i.init$)(this),this.commitPositions=new Se(e),je.q.auto(this.updateCommitPositions,this,"updateCommitPositions"),je.q.auto(this.calcTimeInfo,this,"calcTimeInfo"),je.q.value((()=>this.$contentHeight),(e=>{const{$scrollTop:t,store:{global:{windowSt:{$commitViewSize:{height:s}}}}}=this;t>e-s&&(this.$scrollTop=e-s)}),this,"content height change")}setWipPosition(e){this.$wipPosition=e}storeScrollChange(){this.$scrollChange=this.$scrollTop-this.$refViewScrollTop}setRefViewScrollTop(e){this.$refViewScrollTop=e}get $scrollingEnabled(){const{dialogs:e}=this.store.global;return!(e.$contextMenu.length>0||this.store.nav.$viewingPatch)}get $commitWidth(){const e=this.store.global.windowSt.$commitViewSize.width;return Math.min(Math.round(.7*e-160),ye.H8)}get $commitLeft(){return Math.round((this.store.global.windowSt.$commitViewSize.width-this.$commitWidth)/2)}get $refViewHeight(){const{$current:e}=this.refPositions;let t=0;for(const s of e.values())s.top>t&&(t=s.top);return t+ye.iw+ye.fk+100}get $commitListHeight(){const{$commits:e}=this.store.repo;let t=0;for(const s of e.values())s.numSkipped>0&&t++;return(e.size+t)*ye.iw+ye.J9+2*ye.ch+2*ye.Lc}get $contentHeight(){const{nav:e,global:{windowSt:{$commitViewSize:{height:t}}}}=this.store;return e.$showingRefView?Math.max(t,this.$refViewHeight):Math.max(t,this.$commitListHeight)}setMaxRefTextWidth(e){e>this.$maxRefTextWidth&&(this.$maxRefTextWidth=e)}}var Ae=Object.defineProperty,He=(e,t,s)=>((e,t,s)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class Be{constructor(e){this.store=e,He(this,"$showRefCardInfo",!1),He(this,"timeEnteredRefView",0),He(this,"refViewTimeout",-1),(0,i.init$)(this),i.Reaction.value((()=>e.nav.$showingRefView),(e=>{-1!==this.refViewTimeout&&clearTimeout(this.refViewTimeout),e?this.refViewTimeout=setTimeout((()=>{this.$showRefCardInfo=!0}),370):this.$showRefCardInfo=!1}),this)}refViewAnimating(){return Date.now()-this.timeEnteredRefView<600}}var Ue=s(4203),Ke=s(2210),qe=Object.defineProperty,Ye=(e,t,s)=>((e,t,s)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class Ge{constructor(e,t,s){this.global=e,this.repoPath=t,Ye(this,"nav"),Ye(this,"loading"),Ye(this,"config"),Ye(this,"repo"),Ye(this,"refs"),Ye(this,"wip"),Ye(this,"layout"),Ye(this,"search"),Ye(this,"name"),this.nav=new b.i(this),this.loading=new Be(this),this.config=new v,this.repo=new H(this),this.refs=new E(this),this.wip=new be(this),this.layout=new Ve(this),this.search=new Ue.U(this),this.name=t===s?(0,Ke.Tv)(t):t.replace(s??"","")}}var Je=s(8848),Xe=s(8604),Ze=s(5737),Qe=s(6093),et=Object.defineProperty;class tt{constructor(){var e;((e,t,s)=>{t in e?et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="$repos")?e+"":e,{}),(0,i.init$)(this)}fileStageState(e,t){const s=this.$repos[e];if(void 0!==s){const e=s[t];return void 0===e?"staged":0===Object.keys(e.lines).length?e.stage:function(e,t){const s=Object.values(e.lines);let n=null;for(const e of s){if(null!==n&&e.stage!==n)return"mixed";n=e.stage}return t===s.length?n??e.stage:n===e.stage?n:"mixed"}(e,e.patchSize)}return"staged"}lineStageState(e,t,s,n,i){const o=this.$repos[e];if(void 0!==o){const e=o[t];if(void 0!==e){e.patchSize=i;const t=e.lines[s];return void 0!==t&&t.text===n?t.stage:e.stage}}return"staged"}hunkStageState(e,t,s){const n=this.$repos[e];if(void 0===n)return"staged";const i=n[t];if(void 0===i)return"staged";const{lines:o}=s;let r=null;for(const e of o){const{status:t,text:s,index:n}=e;if("+"===t||"-"===t){const e=i.lines[n],t=e?.text===s?e.stage:i.stage;if(null!==r&&t!==r)return"mixed";r=t}}return null!==r?r:"staged"}unStageFile(e,t,s){st(this.$repos,e,{})[t]={lines:{},stage:"unStaged",patchSize:s},this.saveState()}stageFile(e,t,s){st(this.$repos,e,{})[t]={lines:{},stage:"staged",patchSize:s},this.saveState()}unStageLine(e,t,s,n,i){const o=st(this.$repos,e,{}),r=st(o,t,{lines:{},stage:"staged",patchSize:i});r.patchSize=i,r.lines[s]={text:n,stage:"unStaged"},this.saveState()}stageLine(e,t,s,n,i){const o=st(this.$repos,e,{}),r=st(o,t,{lines:{},stage:"unStaged",patchSize:i});r.patchSize=i,r.lines[s]={text:n,stage:"staged"},this.saveState()}stageHunk(e,t,s,n){for(const i of s.lines){const{status:s}=i;"+"!==s&&"-"!==s||this.stageLine(e,t,i.index,i.text,n)}}unStageHunk(e,t,s,n){for(const i of s.lines){const{status:s}=i;"+"!==s&&"-"!==s||this.unStageLine(e,t,i.index,i.text,n)}}resetFile(e,t){delete this.$repos[t],this.saveState()}cleanupAfterCommit(e,t){const s={};this.$repos[e]=s;for(const e of t)s[e]={lines:{},stage:"unStaged",patchSize:0};this.saveState()}resetAll(){this.$repos={}}saveState(){this.$repos={...this.$repos}}}function st(e,t,s){const n=e[t];return void 0===n?(e[t]=s,s):n}var nt=s(8153),it=Object.defineProperty,ot=(e,t,s)=>((e,t,s)=>t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class rt{constructor(e){this.gs=e,ot(this,"pull",(async()=>{const{$workspaceRepos:e}=this.gs;await Promise.all(Array.from(e.values()).map((e=>e.repo.pull())))})),ot(this,"fetch",(async()=>{const{$workspaceRepos:e}=this.gs;await Promise.all(Array.from(e.values()).map((e=>e.repo.fetch())))})),ot(this,"push",(async()=>{const{$workspaceRepos:e}=this.gs;await Promise.all(Array.from(e.values()).map((e=>(0,nt.VC)(e))))}))}}var at=s(7865),lt=s(9010),ct=Object.defineProperty,ht=(e,t,s)=>((e,t,s)=>t in e?ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);const ut=new class{constructor(){ht(this,"settings",new a),ht(this,"windowSt",new Xe.I(this)),ht(this,"stagedFiles",new tt),ht(this,"consoleSt",new I.h),ht(this,"dialogs",new w(this.consoleSt)),ht(this,"wsActions",new rt(this)),ht(this,"$workspaceDir",null),ht(this,"$workspaceRepos",new Map),ht(this,"$repo",null),ht(this,"lastRepo",null),ht(this,"gitVersion",null),(0,i.init$)(this),i.Reaction.value((()=>this.$repo),(()=>{this.windowSt.setAnimating(Xe.X.workspace,d.zj.animationTime.long),(0,Qe.$z)(this)}),this)}setPageTitle(){let e="GitFiend";const t=this.$repo?.repoPath??this.$workspaceDir;t&&(e=`${e} - ${t}`),document.title=e}async restoreStartupState(e){let{repoPath:t,selectedRepo:s,recentRepos:n}=e;this.settings.setRecentRepos(n),null!==t&&await this.setRepoPath(t,s)}async setRepoPath(e,t){const{settings:s,consoleSt:n}=this;await n.showLoading(`Loading ${e}`,(async()=>{let n;if(n=await S.RT.scan_workspace({repoPath:e,workspacesEnabled:lt._C}),0===n.length)return(0,Je.K$)(`"${e}" doesn't appear to be a Git repository or workspace.`).catch(),void s.removeFromRecentRepos(e);this.closeRepoOrWorkspace(),window.scrollTo(0,0),await S.iJ.watch_repo({repoPaths:n,rootRepo:e,startChanged:!0}),this.loadWorkspace(e,n,t),s.addToRecentRepos(e)}))}closeRepoOrWorkspace(){this.$repo=null,this.$workspaceRepos=new Map,this.$workspaceDir=null}loadWorkspace(e,t,s){const n=new Map;t.sort(((e,t)=>e.localeCompare(t)));for(const s of t)n.set(s,new Ge(this,s,e));this.$workspaceDir=e,this.$workspaceRepos=n,1===n.size?this.$repo=n.values().next().value??null:s&&n.has(s)?this.$repo=n.get(s)??null:this.$repo=null,this.loadRepos().catch(console.error),this.setPageTitle(),(0,Ze.GA)(this),(0,Qe.$z)(this)}async loadRepos(){const{$repo:e,$workspaceRepos:t}=this;if(e){const{repo:t}=e;await t.loadOrReloadRepoData()}else t.size>0&&await this.loadReposIfNeeded()}async loadReposIfNeeded(){let e=Array.from(this.$workspaceRepos.values()),t=[];const s=[];for(const n of e)await n.repo.refresh.hasChanged()?(console.log("queue",n.repoPath),t.push(n)):s.push(n);for(const e of t)await e.repo.refresh.run();t=[],await(0,M.yy)(1e3);for(const e of s)await e.repo.refresh.hasChanged()&&(console.log("queue (2)",e.repoPath),t.push(e));for(const e of t)await e.repo.refresh.run()}selectWorkspaceRepo(e){if(null===e){if(null===this.$repo)return;return this.$repo=null,(0,Ze.GA)(this),void this.loadReposIfNeeded().catch()}const t=this.$workspaceRepos.get(e);void 0!==t&&(this.$repo=t,this.lastRepo=t,(0,at.S)(this).catch(console.log),this.$repo?.repo.loadOrReloadRepoData(),(0,Ze.GA)(this))}get $workspaceShift(){const{$workspaceRepos:e,$repo:t}=this;return null===t?ye.xl:1===e.size?0:25}getPath(){const{$workspaceDir:e,$repo:t}=this;return null!==e?e:null!==t?t.repoPath:null}}},3789:(e,t,s)=>{"use strict";s.d(t,{H8:()=>u,J9:()=>r,Kr:()=>c,Lc:()=>a,R:()=>m,ch:()=>l,fk:()=>h,iw:()=>i,pe:()=>o,xl:()=>n});const n=48,i=30,o=20,r=300,a=40,l=26,c=16,h=4,u=750,m=300},6947:(e,t,s)=>{"use strict";s.d(t,{V0:()=>l,_3:()=>c,sj:()=>m});var n=s(6343),i=s(4330),o=Object.defineProperty,r=(e,t,s)=>((e,t,s)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);const a=new class{constructor(){r(this,"ctx",null),r(this,"monoCharWidth",0),r(this,"currentFont","");const e=document.createElement("canvas");this.ctx=e.getContext("2d"),this.setFont(n.gx);const t=document.createElement("canvas").getContext("2d");null!==t&&(t.font=n.Lc,this.monoCharWidth=t.measureText("0").width)}measure(e){return null!==this.ctx?this.ctx.measureText(e).width:0}setFont(e){null!==this.ctx&&this.currentFont!==e&&(this.currentFont=e,this.ctx.font=e)}},l=(0,i.M2)(((e,t)=>(a.setFont(t),a.measure(e))),1e3),c=a.monoCharWidth,h=new Map;function u(e){const t=h.get(e);if(void 0!==t)return t;const s=a.measure(e);return h.set(e,s),s}function m(e,t){a.setFont(t);const s=new Map;let n=0;for(const t of e){const e=Math.round(u(t.text));e>n&&(n=e),s.set(t.id,e)}return{lengths:s,max:n}}},5661:(e,t,s)=>{"use strict";s.d(t,{N:()=>i});const n={repoPath:null,recentRepos:[],selectedRepo:void 0},i={fetchOptions:{v:1,type:s(2994).N.all,remoteName:null},themeSetting:"system",lastClonePath:"",lastCloneUrl:"",lastUpdatePromptVersion:null,commitCardFullscreenListWidth:null,startupState:n,testStartupState:n,workspacesEnabled:!1,previewGitFunctions:!1,autoComplete:!1,splitView:!1,newCodeViewer:!1,filters2:{},pullFastForward:!0,pullRebase:!1,autoFetch:!0,pinnedFilePaths:{}}},2994:(e,t,s)=>{"use strict";s.d(t,{N:()=>n});var n=(e=>(e[e.all=0]="all",e[e.single=1]="single",e))(n||{})},2042:(e,t,s)=>{"use strict";s.d(t,{o:()=>r});var n,i=s(5661),o=Object.defineProperty;class r{static async load(){const e=await s(1998).iJ.get_data_store({repoPath:""});"config"in e?this.data=e.config:console.log(e.error)}static async save(){await s(1998).iJ.set_data_store({data:this.data})}static set(e,t){localStorage.setItem(e,JSON.stringify(t))}static get(e){let t;if(t=localStorage.getItem(e),null!==t)try{return JSON.parse(t)}catch{return t}return i.N[e]}static reset(e){localStorage.removeItem(e)}}((e,t,s)=>{t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(r,"symbol"!=typeof(n="data")?n+"":n,{})},9010:(e,t,s)=>{"use strict";s.d(t,{EE:()=>o,YG:()=>r,_C:()=>i});var n=s(2042);const i=n.o.get("workspacesEnabled"),o=n.o.get("previewGitFunctions"),r=n.o.get("autoComplete")},6093:(e,t,s)=>{"use strict";s.d(t,{$z:()=>a,BA:()=>r});var n=s(4330),i=s(2042);let o="startupState";async function r(){return i.o.get(o)}const a=(0,n.pk)((e=>{const{settings:t,$repo:s,$workspaceDir:n}=e,r={repoPath:n??s?.repoPath??null,selectedRepo:s?.repoPath,recentRepos:t.recentRepos};i.o.set(o,r)}),500)},7027:(e,t,s)=>{"use strict";s.d(t,{i:()=>d,z:()=>m});var n=s(4907),i=s(1795),o=Object.defineProperty,r=(e,t,s)=>((e,t,s)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class a{constructor(e,t,s,n){this.startY=e,this.endY=t,this.setFunction=s,this.resolve=n,r(this,"startTime",Date.now()),r(this,"endTime",this.startTime+300),r(this,"distance"),this.distance=t-e,this.frame()}frame(){Date.now()>this.endTime?(this.setFunction(this.endY),this.resolve()):requestAnimationFrame((()=>{const e=Date.now(),t=(0,i.s1)((e-this.startTime)/300);this.setFunction(this.startY+t*this.distance),this.frame()}))}}var l=s(8604),c=s(2888),h=Object.defineProperty,u=(e,t,s)=>((e,t,s)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);const m="WIP";class d{constructor(e){this.store=e,u(this,"$hoveredRefCardId",""),u(this,"$selectedCommitId",null),u(this,"$selectedPatchId",null),u(this,"$showingRefView",!1),u(this,"$hoveredCommitId",""),u(this,"$refCardMenuId",""),u(this,"goHome",(()=>{this.setShowingRefView(!1),this.setSelectedCommit(null),this.setSelectedPatchId(null)})),u(this,"goToCommitsView",(()=>{this.$selectedCommitId===m?(this.setSelectedCommit(null),this.setSelectedPatchId(null)):null!==this.$selectedPatchId&&this.setSelectedPatchId(null),this.setShowingRefView(!1)})),u(this,"goToWipView",(()=>{const{wip:e,nav:t}=this.store;t.setShowingRefView(!1),t.setSelectedCommit(m),e.selectFirstPatch()})),u(this,"setShowingRefView",(e=>{e!==this.$showingRefView&&(this.store.global.windowSt.setAnimating(l.X.commits,n.zj.animationTime.medium),e&&(this.setSelectedPatchId(null),this.store.layout.storeScrollChange()),this.store.loading.timeEnteredRefView=Date.now(),this.$showingRefView=e,this.setHoveredRefCard(""),this.setRefCardMenuId(""))})),u(this,"setSelectedCommit",(e=>{e!==this.$selectedCommitId&&(e!==m||this.store.wip.$haveWIP)&&(this.store.global.windowSt.setAnimating(l.X.commits,n.zj.animationTime.medium),this.$selectedCommitId=e,this.setSelectedPatchId(null))})),u(this,"setSelectedPatchId",(e=>{this.$selectedPatchId!==e&&(this.$viewingPatch&&null!==e||this.store.global.windowSt.setAnimating(l.X.commits,n.zj.animationTime.medium),this.$selectedPatchId=e)})),(0,c.init$)(this)}get $selected(){return this.store.global.$repo?.repoPath===this.store.repoPath}get lastSelected(){return this.store.global.lastRepo?.repoPath===this.store.repoPath}validateSelectedCommit(){const{wip:e,repo:t}=this.store,{$selectedCommitId:s}=this;null!==s&&(s===m?e.$haveWIP||this.setSelectedCommit(null):t.$commits.has(s)||this.setSelectedCommit(null))}setHoveredCommit(e){this.$hoveredCommitId=e}setRefCardMenuId(e){this.$refCardMenuId=e}async scrollCommitIntoView(e){const{global:{windowSt:{$commitViewSize:{height:t}}},layout:s,layout:{$scrollTop:n,commitPositions:{$current:i}}}=this.store,o=i.get(e);if(void 0!==o){const{top:e}=o,i=Math.max(0,e-t/3);await(r=n,l=i,c=s.setScrollTop,Math.abs(l-r)<5?Promise.resolve():new Promise((e=>{new a(r,l,c,e)})))}var r,l,c}get $selectedIndex(){return null!==this.$selectedCommitId&&this.$selectedCommitId!==m?this.store.repo.getCommitIndex(this.$selectedCommitId):null}hasSelectedCommit(){return null!==this.$selectedCommitId}get $viewingWip(){return this.$selectedCommitId===m}get $viewingPatch(){return null!==this.$selectedPatchId}goToNextPatch(){if(this.$viewingWip)return void this.store.wip.goToNextPatch();const{$selectedPatchId:e,store:{repo:{$patches:{patches:t}}}}=this;if(t.length>0){let s=t.findIndex((t=>t.id===e));-1!==s&&(s=Math.min(s+1,t.length-1),this.setSelectedPatchId(t[s].id))}}goToPreviousPatch(){if(this.$viewingWip)return void this.store.wip.goToPreviousPatch();const{$selectedPatchId:e,store:{repo:{$patches:{patches:t}}}}=this;if(t.length>0){let s=t.findIndex((t=>t.id===e));-1!==s&&(s=Math.max(s-1,0),this.setSelectedPatchId(t[s].id))}}setHoveredRefCard(e){this.$hoveredRefCardId=e;const{layout:t}=this.store;""===e&&n.zj.animationTime.medium>0&&setTimeout((()=>{t.updateCommitPositions()}),n.zj.animationTime.medium)}}},8153:(e,t,s)=>{"use strict";s.d(t,{VC:()=>r});var n=s(6950),i=s(6081),o=s(1998);async function r(e){await e.global.consoleSt.showLoading("Pushing",(async()=>{switch(function(e){const{refs:t,config:s,repo:n}=e,{$repoStatus:i}=t;if(i)switch(i.state){case"Local":return 1;case"Remote":break;case"Both":if(i.remoteBehind)return 0}return 0===n.$commitIds.length?3:0===s.$remotes.size?2:0}(e)){case 0:await async function(e){const{global:{windowSt:t},repo:s,repoPath:n}=e;t.$pushInProgress.add(n),t.$pushInProgress=new Set(t.$pushInProgress),await o.En.command({repoPath:n,args:["push"]}),await s.loadOrReloadRepoData(),t.$pushInProgress.delete(n),t.$pushInProgress=new Set(t.$pushInProgress)}(e);break;case 1:await async function(e){const{refs:t,repo:s,global:{windowSt:n},config:i,repoPath:r}=e;n.$pushInProgress.add(r),n.$pushInProgress=new Set(n.$pushInProgress);const{$repoStatus:a}=t;if(null===a)return;const{branchName:l}=a,c=i.getPushRemoteForBranch(l);await o.En.command({repoPath:r,args:["push","--set-upstream",c,l]}),await s.loadOrReloadRepoData(),n.$pushInProgress.delete(r),n.$pushInProgress=new Set(n.$pushInProgress)}(e);break;case 2:await(0,n.J5)()}}),{show:i.w.errorOnly})}},8604:(e,t,s)=>{"use strict";s.d(t,{I:()=>c,X:()=>l});var n=s(3789),i=s(4907),o=s(2888),r=Object.defineProperty,a=(e,t,s)=>((e,t,s)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s),l=(e=>(e[e.workspace=0]="workspace",e[e.commits=1]="commits",e))(l||{});class c{constructor(e){this.store=e,a(this,"lastClickPosition",{x:0,y:0}),a(this,"$animating",new Map),a(this,"$windowSize",{width:innerWidth,height:innerHeight}),a(this,"$refreshingRepo",new Set),a(this,"$pullInProgress",new Set),a(this,"$pushInProgress",new Set),a(this,"$fetchInProgress",new Set),a(this,"timeOfLastFetch",+new Date),a(this,"setAnimating",((e,t)=>{const{$animating:s}=this,n=s.get(e);void 0===n&&clearTimeout(n),s.set(e,setTimeout((()=>{s.delete(e),this.$animating=new Map(s)}),t+70)),this.$animating=new Map(s)})),a(this,"updateDimensions",(()=>{const{innerWidth:e,innerHeight:t}=window;0===e&&requestAnimationFrame(this.updateDimensions),i.zj.disableAnimations(),i.zj.restoreAnimationsDebounced(),this.store.dialogs.clearAllContextMenus(),this.$windowSize={width:e,height:t}})),(0,o.init$)(this)}get $animatingCommits(){return this.$animating.has(1)}get $animatingWorkspace(){return this.$animating.has(0)}get $commitViewSize(){const{$windowSize:{width:e,height:t},store:{$workspaceShift:s}}=this;return{width:e,height:t-n.xl-s,windowHeight:t}}centreLastClick(){this.lastClickPosition={x:window.innerWidth/2,y:window.innerHeight/3}}setFetchInProgress(e){this.$fetchInProgress.add(e),this.$fetchInProgress=new Set(this.$fetchInProgress),this.markTimeOfLastFetch()}setFetchDone(e){this.$fetchInProgress.delete(e),this.$fetchInProgress=new Set(this.$fetchInProgress),this.markTimeOfLastFetch()}markTimeOfLastFetch(){this.timeOfLastFetch=+new Date}getTimeOfLastFetch(){return this.timeOfLastFetch}}},8901:(e,t,s)=>{"use strict";s.d(t,{f3:()=>u,VZ:()=>m,pC:()=>h});var n=s(1998);async function i(e,t){const{refs:{$repoStatus:s},global:{stagedFiles:i},repoPath:r}=e;if(null!==s){const e=await n.RT.load_wip_hunk_lines({repoPath:r,patch:t,headCommit:s.localCommitId}),l="Ok"in e?e.Ok:[],c=a(function(e,t,s,n){const i=n.filter((e=>" "!==e.status)).length;return n.filter((({status:n,text:o,index:r})=>{if(" "===n)return!0;const a=e.lineStageState(t,s,r,o,i);return"+"===n?"staged"===a:"unStaged"===a}))}(i,r,t.newFile,l[0]));return{selectedText:c,allText:a(o(l[0]))}}return null}function o(e){return e.filter((({status:e})=>" "===e||"+"===e))}function r(e,t){const s=e.findIndex((e=>e.index===t)),n=e[s];if(void 0!==n){const{status:t}=n;"-"===t?n.status=" ":"+"===t&&e.splice(s,1)}return e}function a(e){return e.map((e=>e.text+e.lineEnding)).join("")}var l=s(1197),c=s(1640);async function h(e,t){const{repoPath:s}=e;if(!await async function(e){const{repoPath:t,wip:s}=e,i=!(await n.En.command({repoPath:t,args:["reset"]})).error;return await s.loadPatches(),i}(e))return!1;const{mixed:o,staged:r}=function(e,t){const{wip:s,repoPath:n}=e,i=[],o=[];for(const e of t.$visiblePatches){const{newFile:t}=e;if(s.pinnedFiles.has(n,t))continue;const r=s.stagingSt.fileStagedState(t);"mixed"===r?i.push(e):"staged"===r&&o.push(e)}return{mixed:i,staged:o}}(e,t);await function(e,t){const s=[];for(const t of e)s.push(t.newFile),"R"===t.patchType&&s.push(t.oldFile);return n.En.git_add_files({repoPath:t,files:s})}(r,s);for(const t of o){const{newFile:o}=t;try{const r=(0,l.uJ)(s,o),a=await i(e,t);if(!a)break;const{allText:h,selectedText:u}=a;await n.iJ.write_file({filePath:r,content:u}),await(0,c.HW)(s,o),await n.iJ.write_file({filePath:r,content:h})}catch(e){return console.log(e),!1}}return!0}async function u(e,t){const{refs:{$repoStatus:s},repoPath:i,wip:c,wip:{$selectedPatch:h}}=e;if(null!==s&&null!==h){const e=await n.RT.load_wip_hunk_lines({repoPath:i,patch:h,headCommit:s.localCommitId});if("Ok"in e){const s=a(o(function(e,t){let s=e;for(const{status:e,index:n}of t.lines)"+"!==e&&"-"!==e||(s=r(s,n));return s}(e.Ok[0],t)));await n.iJ.write_file({filePath:(0,l.uJ)(i,h.newFile),content:s}),await c.loadWip()}}}async function m(e,t){const{refs:{$repoStatus:s},repoPath:i,wip:c,wip:{$selectedPatch:h}}=e;if(null!==s&&null!==h){const e=await n.RT.load_wip_hunk_lines({repoPath:i,patch:h,headCommit:s.localCommitId});if("Ok"in e){const s=a(o(r(e.Ok[0],t)));await n.iJ.write_file({filePath:(0,l.uJ)(i,h.newFile),content:s}),await c.loadWip()}}}},6110:(e,t,s)=>{"use strict";s.d(t,{P:()=>p,r:()=>g});var n=s(2042);class i{constructor(e,t,s){this.major=e,this.minor=t,this.patch=s}compare(e){return this.major>e.major?"greater":this.major<e.major?"less":this.minor>e.minor?"greater":this.minor<e.minor?"less":this.patch>e.patch?"greater":this.patch<e.patch?"less":"equal"}toString(){return`${this.major}.${this.minor}.${this.patch}`}}function o(e){const t=e.split(".");return 3!==t.length?null:new i(parseInt(t[0]),parseInt(t[1]),parseInt(t[2]))}function r(e){null!==e?n.o.set("lastUpdatePromptVersion",e.toString()):n.o.reset("lastUpdatePromptVersion")}var a=s(8848),l=s(6588),c=s(5524),h=s(2888);const u=l.$w+"/download",m=l.$w+"/releases";var d=s(9817);async function p(e){await(0,d.yy)(1800);const t=await async function(){const e=await fetch(`${l.$w}/app-info`);return o((await e.json()).version)}(),s=o("0.44.3");if(t&&s){const i=t.compare(s);if("greater"===i){const s=function(){const e=n.o.get("lastUpdatePromptVersion");return null!==e?o(e):null}();null!==s&&"greater"!==t.compare(s)||(await async function(e){e.windowSt.centreLastClick();const t=(0,h.createElement)("div",{className:"NewVersionDialog"},(0,h.createElement)("div",{key:"1"},"You can download it at:"),(0,h.createElement)("a",{key:"2",href:u,onClick:async e=>{e.preventDefault(),await c.g.openExternalUrl(u)}},u),(0,h.createElement)("div",{key:"3"},"See what's new here:"),(0,h.createElement)("a",{key:"4",href:m,onClick:async e=>{e.preventDefault(),await c.g.openExternalUrl(m)}},m));return(0,a.P6)({message:"There is a new version of GitFiend",subMessage:t,button1Text:"OK",autoFocus:1})}(e),r(t))}return i}return null}async function g(e){r(null),e.windowSt.centreLastClick();try{const t=await p(e);null!==t&&"equal"===t&&await(0,a.K$)("You have the latest version of GitFiend.")}catch(e){await(0,a.K$)(`Failed to contact "${l.$w}".`)}}},4071:(e,t,s)=>{"use strict";function n(e){return`hsl(${l(e,360)}, 100%, 85%)`}function i(e,t){return`hsla(${l(e,360)}, 100%, 45%, ${t})`}function o(e){return`hsl(${l(e,360)}, 80%, 75%)`}function r(e){return`hsl(${l(e,360)}, 65%, 60%)`}function a(e){return l(e,360)}s.d(t,{Jh:()=>n,LC:()=>c,M0:()=>o,Ny:()=>a,OR:()=>r,p5:()=>i});const l=(e,t)=>{let s=0;for(let t=0;t<e.length;t++)s=e.charCodeAt(t)+((s<<5)-s);return(Math.abs(s)+240)%t};function c(e){let t=parseInt("0x"+e[0]+e[1]),s=+("0x"+e[2]+e[3]),n=+("0x"+e[4]+e[5]);t/=255,s/=255,n/=255;const i=Math.min(t,s,n),o=Math.max(t,s,n),r=o-i;let a;return a=0==r?0:o==t?(s-n)/r%6:o==s?(n-t)/r+2:(t-s)/r+4,a=Math.round(60*a),a<0&&(a+=360),a}},6343:(e,t,s)=>{"use strict";s.d(t,{Lc:()=>a,V:()=>r,XH:()=>l,fZ:()=>n,gx:()=>o,qs:()=>c,rM:()=>i});const n=2e3,i=500,o="13px -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji",r="600 14px -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji",a="13px 'Menlo', 'Ubuntu Mono', 'Consolas', monospace",l={short:150,medium:300,long:400},c={short:0,medium:0,long:0};function h(e){e?(l.short=50,l.medium=100,l.long=150):(l.short=150,l.medium=300,l.long=400)}!function(){const e=window.matchMedia("(prefers-reduced-motion: reduce)");h(e.matches),e.addEventListener("change",(e=>{h(e.matches)}))}()},7521:(e,t,s)=>{"use strict";s.d(t,{O0:()=>c,ce:()=>u,hz:()=>h});var n=s(9412),i=s(5524);let o=Promise.resolve(),r="",a=!1,l=!1;async function c(e,t,s={}){return t.preventDefault(),async function(e,t,s={}){if(t.stopPropagation(),null!==t.currentTarget){const o=t.currentTarget,c=o.getBoundingClientRect();let h,u;if(!0===s.usePoint?(h=t.clientX,u=t.clientY):(h=c.left,u=c.bottom),(l||a)&&r===m(h,u))return;void 0!==s.classNames&&o.classList.add(...s.classNames);const d=(0,n.Nr)(await e,"context");a=!0,r=m(h,u),await i.g.showContextMenu(d,h,u),(0,n.RB)(),void 0!==s.classNames&&o.classList.remove(...s.classNames),a=!1}}(e,t,s)}function h(){return a}function u(){return o}function m(e,t){return`${e}${t}`}document.addEventListener("mousedown",(()=>{l=a}))},4330:(e,t,s)=>{"use strict";function n(e,t){let s;return(...n)=>{clearTimeout(s),s=setTimeout((()=>{e(...n)}),t)}}function i(e,t){const s=new Map;return function(...n){if(s.size>t){const e=s.keys().next().value;s.delete(e)}const i=n.map((e=>"string"==typeof e?e:JSON.stringify(e))).join();if(s.has(i))return s.get(i);const o=e(...n);return s.set(i,o),o}}function o(e,t,s){return e.splice(s,0,e.splice(t,1)[0])}s.d(t,{Iz:()=>o,M2:()=>i,pk:()=>n})},4222:(e,t,s)=>{"use strict";s.d(t,{M3:()=>n,NS:()=>i,_N:()=>o});const n="left",i="right",o="bottom"},1197:(e,t,s)=>{"use strict";s.d(t,{w3:()=>l,tS:()=>m,QC:()=>u,lF:()=>a,MJ:()=>o,uJ:()=>c,yn:()=>h});const n=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"}),i=[{amount:60,name:"seconds"},{amount:60,name:"minutes"},{amount:24,name:"hours"},{amount:7,name:"days"},{amount:4.34524,name:"weeks"},{amount:12,name:"months"},{amount:Number.POSITIVE_INFINITY,name:"years"}];function o(e){return function(e,t){let s=(e-Date.now())/1e3,o="";for(const e of i){if(Math.abs(s)<e.amount){o=n.format(Math.round(s),e.name);break}s/=e.amount}return o}(e)}s(9039);const r=new Intl.DateTimeFormat(navigator.language,{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"});function a(e){return r.format(new Date(e))}var l=(e=>(e[e.left=0]="left",e[e.middle=1]="middle",e[e.right=2]="right",e[e.back=3]="back",e[e.forward=4]="forward",e))(l||{});function c(...e){return e.join("/")}function h(e){return`${c(".",...e)}`}function u(e){const t=e.split(".");return t.length<2?"":`.${t[t.length-1]}`}function m(e,t=0){let s=3735928559^t,n=1103547991^t;for(let t,i=0;i<e.length;i++)t=e.charCodeAt(i),s=Math.imul(s^t,2654435761),n=Math.imul(n^t,1597334677);return s=Math.imul(s^s>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(s^s>>>13,3266489909),4294967296*(2097151&n)+(s>>>0)}},6607:(e,t,s)=>{"use strict";s.d(t,{b:()=>i});const n=[];for(let e=0;e<256;e++)n[e]=(e<16?"0":"")+e.toString(16);function i(){const e=s(6982).randomBytes(16);return e[6]=15&e[6]|64,e[8]=63&e[8]|128,`${n[e[0]]+n[e[1]]+n[e[2]]+n[e[3]]}-${n[e[4]]}${n[e[5]]}-${n[e[6]]}${n[e[7]]}-${n[e[8]]}${n[e[9]]}-${n[e[10]]}${n[e[11]]}${n[e[12]]}${n[e[13]]}${n[e[14]]}${n[e[15]]}`}},5499:(e,t,s)=>{"use strict";s.d(t,{ZR:()=>h,sY:()=>c});var n=s(4071),i=s(4907),o=s(1197),r=s(2888),a=s(9039);function l(e,t){return"light"===t?(0,n.OR)(e.email):(0,n.M0)(e.email)}function c(e,t,s){if(null!==e.stashId)return function(e,t,s){const n={background:l(e,s),width:t,height:.95*t};let i={paddingTop:1};return"light"===s&&(i.filter="invert(1)"),(0,r.createElement)("div",{className:"Avatar-icon",style:n},(0,r.createElement)("img",{style:i,width:.7*t,alt:"",src:(0,o.yn)(["other","StashIcon.svg"])}))}(e,t,s);const n=l(e,s),i="light"===s?"#fff":"#000",c=function(e){const t=e.split(" ");return 2===t.length?(t[0][0]+t[1][0]).toUpperCase():e[0]}(e.author);let h;h=2===c.length?.47*t:.55*t;const u={background:n,width:t,height:t,fontSize:Math.round(h),color:i};return a.Zm&&(u.paddingTop=1),(0,r.createElement)("div",{className:"Avatar",style:u},c)}function h(e,t){const s={width:e,height:e,borderRadius:e,border:`dotted 2px ${(0,i.Vg)("primaryTextColour")}`,...t};return(0,r.createElement)("div",{className:"Avatar",style:s})}},7273:(e,t,s)=>{"use strict";s.d(t,{R:()=>i});var n=s(2888);class i extends n.Custom{render(){const{children:e=[],sizeType:t="normal",colour:s="light",className:i,type:o="button",fitContent:r=!1,disabled:a,...l}=this.props,c=["FButton",`FButton-${s}`];return"subtle"!==s&&"text"!==s&&c.push(`FButton-size-${t}`),"green"!==s&&"red"!==s&&"orange"!==s||(a?c.push("FButton-light"):c.push("FButton-coloured")),r&&c.push("FButton-fitContent"),void 0!==i&&c.push(i),(0,n.createElement)("button",{className:c.join(" "),type:o,disabled:a,...l},e)}}},6403:(e,t,s)=>{"use strict";s.d(t,{Sc:()=>i,_P:()=>r,mT:()=>o});var n=s(2888);class i extends n.Custom{render(){const{checked:e,onClick:t,classes:s=""}=this.props;return(0,n.createElement)("div",{className:`Checkbox ${s}`,onClick:()=>{t&&t(!e)}},e?(0,n.createElement)("div",{className:"Checkbox-tick"}):null)}}class o extends n.Custom{render(){const{checked:e,onClick:t,disabled:s=!1,labelId:i,id:o,style:r={},tabIndex:a=0,title:l}=this.props,c=s?"false":e;return(0,n.createElement)("span",{id:o,tabIndex:a,className:`Checkbox ${e} ${s}`,style:r,role:"checkbox","aria-labelledby":i,"aria-checked":c,onClick:t,onBeforeInput:t,title:l},this.drawCheck(c))}drawCheck(e){switch(e){case"true":return(0,n.createElement)("div",{className:"Checkbox-tick"});case"mixed":return(0,n.createElement)("div",{className:"Checkbox-mixed"});default:return null}}}class r extends n.Custom{render(){const{checked:e,onClick:t,labelText:s,disabled:i=!1}=this.props,o=e&&!i;return(0,n.createElement)("div",{className:`CheckboxWithLabel ${o} CheckboxWithLabel-disabled ${i}`},(0,n.createElement)("span",{tabIndex:0,className:"Checkbox",style:{marginRight:6},role:"checkbox","aria-labelledby":s,"aria-checked":`${o}`,onClick:t,onBeforeInput:t},o?(0,n.createElement)("div",{className:"Checkbox-tick"}):null),(0,n.createElement)("label",{id:s,onClick:t},s))}}},4444:(e,t,s)=>{"use strict";s.d(t,{S:()=>r});var n=s(2888),i=Object.defineProperty,o=(e,t,s)=>((e,t,s)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class r extends n.Custom{constructor(){super(...arguments),o(this,"onMouseEnter",(()=>{const{vm:e,index:t,side:s}=this.props;this.$lineIsModified&&e.setHoveredLine(t,s??null)})),o(this,"onMouseLeave",(()=>{this.props.vm.setHoveredLine(null,null)}))}render(){const{hunkLine:e,width:t,top:s,first:i,vm:o}=this.props;return(0,n.createElement)("div",{className:`CodeViewer-line ${this.backgroundClass}`,style:{width:t,top:s,borderTop:i?"unset":void 0},onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onContextMenu:o.showContextMenu},e.text,e.lineEnding)}get $lineIsModified(){const{hunkLine:{status:e}}=this.props;return"+"===e||"-"===e}get backgroundClass(){const{status:e}=this.props.hunkLine;if("HeaderStart"===e)return"CodeViewer-line-header-start";if("HeaderEnd"===e)return"CodeViewer-line-header-end";if(this.$hovering){if("+"===e)return"CodeViewer-background-plus-hover";if("-"===e)return"CodeViewer-background-minus-hover"}return"+"===e?"CodeViewer-background-plus":"-"===e?"CodeViewer-background-minus":"Skip"===e?"CodeViewer-background-skip":"CodeViewer-background-unchanged"}get $hovering(){const{vm:{$hoveredLineSide:e,$hoveredLineIndex:t},index:s,side:n}=this.props;return e===n&&t===s}}},6046:(e,t,s)=>{"use strict";s.d(t,{b:()=>l});var n=s(6403),i=s(3212),o=s(4222),r=s(2888),a=Object.defineProperty;class l extends r.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="onClickCheckbox")?e+"":e,(async()=>{const{hunk:e,vm:{store:t},hunkStage:s}=this.props;"unStaged"===s||"mixed"===s?t.wip.stagingSt.stageHunk(e):"staged"===s&&t.wip.stagingSt.unStageHunk(e)}))}render(){const{width:e,top:t}=this.props;return(0,r.createElement)("div",{className:"CodeViewer-margin-row CodeViewer-line-header-end",style:{width:e,transform:`translateY(${t}px)`}},this.drawCheckbox())}drawCheckbox(){const{hunkStage:e,side:t}=this.props;if(t===o.NS)return null;if(null!==e){let t="false";switch(e){case"staged":t="true";break;case"unStaged":t="false";break;case"mixed":t="mixed"}return(0,r.createElement)("div",{className:"CodeViewer-margin-row-checkbox",style:{width:i.Sq,marginBottom:2},title:"Click to toggle all lines in this region"},(0,r.createElement)(n.mT,{checked:t,onClick:this.onClickCheckbox}))}return null}}},6755:(e,t,s)=>{"use strict";function n(e,t){const{store:{wip:{$selectedPatch:s,stagingSt:n}}}=t;if(null!==s){const t=n.lineStageState(e.index,e.text);return[{label:"Select line",click:()=>{n.stageLine(e.index,e.text)},visible:"unStaged"===t},{label:"Unselect line",click:()=>{n.unStageLine(e.index,e.text)},visible:"staged"===t},{label:"Discard Line",async click(){await n.discardLine(e.index)}}]}return[]}s.d(t,{C:()=>n})},7999:(e,t,s)=>{"use strict";s.d(t,{b:()=>c});var n=s(6403),i=s(3212),o=s(4222),r=s(2888),a=Object.defineProperty,l=(e,t,s)=>((e,t,s)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class c extends r.Custom{constructor(){super(...arguments),l(this,"onClickCheckbox",(async()=>{const{$lineStage:e,props:{hunkLine:t,vm:{store:s}}}=this;"unStaged"===e?s.wip.stagingSt.stageLine(t.index,t.text):"staged"===e&&s.wip.stagingSt.unStageLine(t.index,t.text)})),l(this,"onMouseEnter",(()=>{const{vm:e,index:t,hunkLine:{status:s},side:n}=this.props;"+"!==s&&"-"!==s||e.setHoveredLine(t,n??null)})),l(this,"onMouseLeave",(()=>{this.props.vm.setHoveredLine(null,null)}))}render(){const{hunkLine:e,width:t,top:s,first:n,side:i}=this.props;return(0,r.createElement)("div",{className:`CodeViewer-margin-row ${this.backgroundClass}`,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,style:{width:t,transform:`translateY(${s}px)`}},this.drawCheckbox(),i!==o.NS?(0,r.createElement)(h,{hunkLine:e,side:"left",first:n}):null,i!==o.M3?(0,r.createElement)(h,{hunkLine:e,side:"right",first:n}):null)}get $lineStage(){const{vm:{mode:e,store:{wip:{stagingSt:t}}},hunkLine:{index:s,text:n}}=this.props;return"wip"!==e?null:t.lineStageState(s,n)}drawCheckbox(){const{hunkLine:{status:e}}=this.props,{$lineStage:t}=this;return null===t?null:(0,r.createElement)("div",{className:r.c`CodeViewer-margin-row-checkbox ${!0} CodeViewer-background-skip ${"Skip"===e}`,style:{width:i.Sq}},"+"===e||"-"===e?(0,r.createElement)(n.mT,{checked:"staged"===t?"true":"false",onClick:this.onClickCheckbox,title:"Toggle whether to include this line in your commit"}):null)}get backgroundClass(){const{hunkLine:e,first:t}=this.props,{status:s}=e;if(t)return"";if("HeaderStart"===s)return"CodeViewer-line-header-start";if("HeaderEnd"===s)return"CodeViewer-line-header-end";if(this.$hovering){if("+"===s)return"CodeViewer-background-plus-hover";if("-"===s)return"CodeViewer-background-minus-hover"}return"+"===s?"CodeViewer-background-plus":"-"===s?"CodeViewer-background-minus":"CodeViewer-background-unchanged"}get $hovering(){const{vm:e,index:t,side:s}=this.props,{$hoveredLineSide:n,$hoveredLineIndex:i}=e;return s===n&&i===t}}class h extends r.Custom{render(){const{hunkLine:e,side:t,first:s}=this.props,n=s?"CodeViewer-margin-row-first":"";if("left"===t){const{oldNum:t}=e;return(0,r.createElement)("div",{className:`CodeViewer-margin-left ${u(e)} ${n}`},null!==t?(0,r.createElement)(r.Fragment,null,e.status,t.toString()):null)}const{newNum:i}=e;return(0,r.createElement)("div",{className:`CodeViewer-margin-right ${u(e)} ${n}`},null!==i?(0,r.createElement)(r.Fragment,null,e.status,i.toString()):null)}}function u(e){switch(e.status){case"HeaderStart":return"CodeViewer-margin-row-header-start";case"HeaderEnd":return"CodeViewer-margin-row-header-end";case"Skip":return"CodeViewer-margin-row-skip";default:return""}}},3212:(e,t,s)=>{"use strict";s.d(t,{Cv:()=>$,Sq:()=>y,j4:()=>b,K_:()=>w});var n=s(6386),i=s(6755),o=s(7521),r=s(6947),a=s(2888),l=Object.defineProperty,c=(e,t,s)=>((e,t,s)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class h{constructor(e,t,s){this.store=e,this.hunkLineStore=t,this.cardVm=s,c(this,"$scrollTop",0),c(this,"$scrollLeft",0),c(this,"$hoveredLineIndex",null),c(this,"$hoveredLineSide",null),c(this,"setScroll",(e=>{const t=e.current;null!==t&&(this.$scrollTop=t.scrollTop,this.$scrollLeft=t.scrollLeft)})),c(this,"showContextMenu",(async e=>{if("wip"!==this.mode||null===this.$hoveredLineIndex)return;const t=this.hunkLines[this.$hoveredLineIndex],s=(0,i.C)(t,this);await(0,o.O0)(s,e,{usePoint:!0})})),(0,a.init$)(this)}resetScroll(){this.$scrollLeft=0,this.$scrollTop=0}get hunkLines(){return this.hunkLineStore.$hunkLines}get mode(){return this.hunkLineStore.$mode}get $width(){return this.cardVm.$codeViewerWidth}get $height(){return Math.round(this.cardVm.$bodyHeight)}setHoveredLine(e,t){"wip"===this.mode&&(this.$hoveredLineIndex=e)}get $firstLine(){return Math.floor(this.$scrollTop/w)}get $numLines(){return 1+Math.ceil(this.$height/w)}get $marginWidth(){const{hunkLines:e,mode:t}=this,s=e[e.length-2];if(void 0!==s){const e=Math.max(s.newNum??0,s.oldNum??0).toString().length;return 2*(r._3*e+2*b)+("wip"===t?y:0)}return 0}get $runwayWidth(){return this.$marginWidth+this.$textWidth}get $textWidth(){return Math.max(15+this.$longestLine*r._3,this.$width-this.$marginWidth)}get $runwayHeight(){return Math.max(this.hunkLines.length*w,this.$height)}get $longestLine(){let e=0;for(const t of this.hunkLines){const s=t.text.length;s>e&&(e=s)}return e}}var u=s(4444),m=s(7999),d=s(2910),p=s(6046),g=Object.defineProperty,f=(e,t,s)=>((e,t,s)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);const w=18,b=10,y=24;class $ extends a.Custom{constructor(){super(...arguments),f(this,"vm",new h(this.props.store,this.props.hunkLineStore,this.props.cardVm)),f(this,"runwayRef",(0,a.createRef)()),f(this,"contentRef",(0,a.createRef)()),f(this,"textRef",(0,a.createRef)()),f(this,"onScroll",(()=>{this.vm.setScroll(this.runwayRef)}))}render(){const{$runwayWidth:e,$runwayHeight:t,$marginWidth:s,$textWidth:i,$width:o,$height:r}=this.vm,l=this.drawContent();return(0,a.createElement)(n.B,{className:"CodeViewer-pane",width:o,height:r,contentWidth:e,contentHeight:t,onNativeScroll:this.onScroll,outerRef:this.runwayRef,contentRef:this.contentRef},(0,a.createElement)("div",{className:"CodeViewer-margin",style:{width:s,height:t}},l.nums),(0,a.createElement)("div",{className:"CodeViewer-text",ref:this.textRef,style:{left:s,width:i,height:t}},l.lines),(0,a.createElement)("div",{className:"CodeViewer-overlay"},l.headers))}drawContent(){const{store:e,hunkLineStore:{$mode:t,$hunks:s},filePath:n}=this.props,{hunkLines:i,$firstLine:o,$numLines:r,$textWidth:l,$marginWidth:c,$width:h}=this.vm,{wip:{stagingSt:g}}=e,f=Math.min(o+r,i.length),b=[],y=[],$=[];for(let r=o;r<f;r++){const o=i[r];if(void 0===o)continue;const f=r.toString();if("HeaderEnd"===o.status){const{hunkIndex:i}=o,l=s[i];if(void 0!==l){const s="wip"===t?g.hunkStagedState(l):null;$.push((0,a.createElement)(d.f,{store:e,hunkLine:o,hunk:l,mode:t,key:f+"headerEnd",top:r*w-w/2+1,width:h,marginWidth:c})),y.push((0,a.createElement)(p.b,{vm:this.vm,index:r,hunk:l,key:f,top:r*w,width:c,filePath:n,hunkStage:s}))}}else y.push((0,a.createElement)(m.b,{vm:this.vm,index:r,hunkLine:o,key:f,top:r*w,width:c,first:0===r,filePath:n}));b.push((0,a.createElement)(u.S,{vm:this.vm,mode:t,index:r,hunkLine:o,key:f,top:r*w,width:l,first:0===r}))}return{nums:y,lines:b,headers:$}}componentDidMount(){a.Reaction.value((()=>this.vm.store.nav.$selectedPatchId),(()=>{this.vm.resetScroll()}),this),a.Reaction.value((()=>this.vm.$scrollLeft),(e=>{this.textEL.style.transform=`translateX(${-e}px)`}),this)}get textEL(){return this.textRef.current}}},2910:(e,t,s)=>{"use strict";s.d(t,{f:()=>c});var n=s(7273),i=s(8848),o=s(8901),r=s(4222),a=s(2888),l=Object.defineProperty;class c extends a.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="discardHunk")?e+"":e,(async()=>{const{hunk:e,store:t}=this.props;await(0,i.M5)(`Discard the line range ${h(e).replace(/@@/g,"")}?`)&&await(0,o.f3)(t,e)}))}render(){const{width:e,top:t,marginWidth:s}=this.props;return(0,a.createElement)("div",{className:"CodeLineHeader",style:{width:e-s,left:s,transform:`translateY(${t}px)`}},this.drawHeaderRanges(),this.drawButtons())}drawHeaderRanges(){const{hunk:e,side:t}=this.props;return t===r.NS?null:(0,a.createElement)("div",{className:"CodeLineHeader-ranges"},h(e))}drawButtons(){const{mode:e,side:t}=this.props;return"wip"!==e||t===r.M3?null:this.drawDiscardButton()}drawDiscardButton(){const{store:{wip:e}}=this.props;return null===e.$selectedPatch?null:(0,a.createElement)(n.R,{sizeType:"small",onClick:this.discardHunk,title:"Discard Hunk"},"Discard")}}function h({oldLineRange:e,newLineRange:t}){return`@@ -${e.start},${e.length} +${t.start},${t.length} @@`}},6386:(e,t,s)=>{"use strict";s.d(t,{B:()=>r});var n=s(2888),i=Object.defineProperty,o=(e,t,s)=>((e,t,s)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class r extends n.Custom{constructor(){super(...arguments),o(this,"runwayRef",(0,n.createRef)()),o(this,"contentPaneRef",(0,n.createRef)()),o(this,"_scrollY",0),o(this,"_transformY",0),o(this,"onScroll",(e=>{e?.stopPropagation();const t=this.runwayRef.current;if(t){this.props.onNativeScroll(t);const e=this.contentPaneRef.current;if(null!==e){const{scrollTop:s}=t;this._scrollY=s,e.style.transform=`translateY(${-Math.max(s,0)}px)`}}}))}render(){const{width:e,height:t,contentWidth:s,contentHeight:i,children:o,className:r="",outerRef:a,onNativeScroll:l,contentRef:c,stickyElements:h,style:u={},...m}=this.props,d={width:s,height:i},p={...u,width:e,height:t};return s>e&&(p.overflowX="auto"),i>t&&(p.overflowY="auto"),(0,n.createElement)("div",{className:`Runway ${r}`,ref:this.runwayRef,style:p,onScroll:this.onScroll,...m},(0,n.createElement)(n.Fragment,null,h),(0,n.createElement)("div",{className:"Runway-scrollPane",style:d},(0,n.createElement)("div",{className:"Runway-stickyPane"},(0,n.createElement)("div",{className:"Runway-contentPane",style:d,ref:this.contentPaneRef},o))))}componentDidUpdate(){this.onScroll()}componentDidMount(){const e=this.runwayRef.current,t=this.contentPaneRef.current;e&&t&&(this.props.outerRef.current=e,this.props.contentRef.current=t)}componentWillUnmount(){this.props.outerRef.current=null,this.props.outerRef={current:null},this.props.contentRef.current=null,this.props.contentRef={current:null}}}},8338:(e,t,s)=>{"use strict";s.d(t,{j:()=>k});var n=s(5185),i=s(4747),o=s(8774),r=s(7273),a=s(5675),l=s(2042),c=s(5524),h=s(9634),u=s(1998),m=s(2888),d=Object.defineProperty,p=(e,t,s)=>((e,t,s)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class g extends m.Custom{constructor(){super(...arguments),p(this,"pathInputRef",(0,m.createRef)()),p(this,"urlInputRef",(0,m.createRef)()),p(this,"onClickClone",(async()=>{const{cloneSt:e}=this.props;""!==e.$repoPath&&""!==e.$repoUrl&&(l.o.set("lastCloneUrl",e.$repoUrl),await this.props.cloneSt.startClone(e.$repoPath,e.$repoUrl))})),p(this,"onClickBrowse",(async e=>{e.preventDefault();const t=await c.g.show_open_folder_window();null!==t&&(this.props.cloneSt.$repoPath=t),await this.validateRepoPath()}))}componentDidMount(){m.Reaction.value((()=>this.props.cloneSt.$repoPath),(async()=>{await this.validateRepoPath()}),this)}render(){const{resolve:e,cloneSt:t,descriptionId:s}=this.props;return(0,m.createElement)("form",{className:"CloneForm",onSubmit:async e=>{e.preventDefault(),await this.onClickClone()}},(0,m.createElement)(h.A,{messageId:s},"Clone a Repo"),(0,m.createElement)("div",{className:"CloneForm-inputs"},(0,m.createElement)("label",{htmlFor:o.aK},"URL or path"),(0,m.createElement)(a.L,{id:o.aK,value:t.$repoUrl,autoFocus:!0,inRef:this.urlInputRef,onText:e=>{t.$repoUrl=e},required:!0}),(0,m.createElement)("div",null),(0,m.createElement)("label",{htmlFor:o.ws},"Where to clone to"),(0,m.createElement)(a.L,{id:o.ws,inRef:this.pathInputRef,value:t.$repoPath,onText:e=>{t.$repoPath=e},required:!0}),(0,m.createElement)(r.R,{onClick:this.onClickBrowse},"Browse")),(0,m.createElement)(i.D,{rightButtons:[(0,m.createElement)(r.R,{type:"submit",id:"cloneFormCloneButtonId"},"Clone"),(0,m.createElement)(r.R,{onClick:()=>{e(void 0)}},"Cancel")]}))}async validateRepoPath(){const e=this.pathInputRef.current;if(!e)return;const{cloneSt:t}=this.props;await u.RT.path_exists(t.$repoPath)?(e.setCustomValidity(""),l.o.set("lastClonePath",t.$repoPath)):e.setCustomValidity("path doesn't exist")}}var f=s(1197),w=Object.defineProperty,b=(e,t,s)=>((e,t,s)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class y{constructor(e,t){this.resolve=e,this.store=t,b(this,"$inProgress",!1),b(this,"$repoPath",l.o.get("lastClonePath")),b(this,"$repoUrl",l.o.get("lastCloneUrl")),(0,m.init$)(this)}async startClone(e,t){const{consoleSt:s}=this.store;await s.showLoading(`Cloning ${e}`,(async()=>{try{this.$inProgress=!0,(await u.En.clone_repo({repoPath:e,url:t})).error||(await this.loadRepo(e,t),this.resolve(!0))}finally{this.$inProgress=!1}}))}async loadRepo(e,t){const s=function(e){let t;t=e.includes("\\")?"\\":"/";const s=e.split(t);return s[s.length-1].replace(".git","")}(t),n=(0,f.uJ)(e,s);await this.store.setRepoPath(n)}}var $=Object.defineProperty;class v extends m.Custom{constructor(){var e,t,s;super(...arguments),e=this,t="cloneSt",s=new y(this.props.resolve,this.props.store),((e,t,s)=>{t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(e,"symbol"!=typeof t?t+"":t,s)}render(){const{resolve:e,descriptionId:t}=this.props;return(0,m.createElement)("div",{className:m.c`CloneDialog ${!0} CloneDialog-inProgress ${this.cloneSt.$inProgress}`},(0,m.createElement)(g,{cloneSt:this.cloneSt,descriptionId:t,resolve:e}))}}async function k(e){return(0,n.$)({dialogId:k.name,dismissible:!1,contentCallback:(t,s,n)=>(0,m.createElement)(v,{resolve:t,store:e,descriptionId:n})})}},4747:(e,t,s)=>{"use strict";s.d(t,{D:()=>i});var n=s(2888);class i extends n.Custom{render(){const{leftButtons:e=[(0,n.createElement)("div",null)],rightButtons:t=[(0,n.createElement)("div",null)],style:s}=this.props;return(0,n.createElement)("div",{className:"DialogButtonRow",style:s},(0,n.createElement)("div",{className:"DialogButtonRow-left"},e),(0,n.createElement)("div",{className:"DialogButtonRow-right"},t))}}},9634:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var n=s(2888);class i extends n.Custom{render(){return(0,n.createElement)("div",{className:"DialogMessage",id:this.props.messageId},this.props.children)}}},1257:(e,t,s)=>{"use strict";s.d(t,{f:()=>i});let n=0;function i(){return n++,n}},5185:(e,t,s)=>{"use strict";s.d(t,{K:()=>m,$:()=>d});var n=s(9378),i=s(4907),o=s(2888),r=Object.defineProperty,a=(e,t,s)=>((e,t,s)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class l extends o.Custom{constructor(){super(...arguments),a(this,"focusableEls",[]),a(this,"ref",(0,o.createRef)()),a(this,"onClick",(e=>{e.currentTarget===e.target&&this.props.dismissible&&this.props.resolveDialog(m)})),a(this,"onKeyDown",(e=>{"Tab"===e.key&&(this.storeFocusableElements(),e.preventDefault(),this.focusableEls.length>1&&(e.shiftKey?this.goToPreviousElement():this.goToNextElement()))}))}render(){const{mode:e,titleId:t,descriptionId:s}=this.props;return(0,o.createElement)("div",{className:"CustomDialog",role:"dialog","aria-modal":"modal"===e||"sheet"===e,"aria-labelledby":t,"aria-describedby":s,onMouseDown:this.onClick,onKeyDown:this.onKeyDown},(0,o.createElement)("div",{className:o.c`CustomDialog-pane ${!0} CustomDialog-sheet ${"sheet"===e}`,tabIndex:-1,ref:this.ref},this.props.children))}componentDidMount(){this.storeFocusableElements();const e=this.ref.current;if(null!==e){const{focusElementId:t}=this.props;void 0!==t&&this.focusableEls.find((e=>e.id===t))?.focus();const{windowSt:{lastClickPosition:s}}=n.M,o=.33*window.innerHeight,r=s.x-window.innerWidth/2,a=s.y-o;e.animate([{transform:`translate(${r}px, ${a}px) scale(0.1, 0.3)`,opacity:0},{opacity:.2},{transform:"translate(0, 0) scale(1, 1)",opacity:1}],{duration:i.zj.animationTime.medium,easing:"ease"})}}componentWillUnmount(){}componentDidUpdate(){this.storeFocusableElements()}goToNextElement(){const e=(this.focusedElementIndex()+1)%this.focusableEls.length;this.focusableEls[e].focus()}goToPreviousElement(){let e=this.focusedElementIndex()-1;e<0&&(e=this.focusableEls.length-1),this.focusableEls[e].focus()}focusedElementIndex(){return this.focusableEls.indexOf(document.activeElement)}storeFocusableElements(){const e=this.ref.current;null!==e&&(this.focusableEls=function(e){const t=e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]');return Array.from(t)}(e))}}var c=s(1257),h=s(6815),u=s(6607);const m=void 0;async function d(e){const t=(0,u.b)(),s=(0,u.b)(),{dialogs:i}=n.M,{dialogId:r,dismissible:a,contentCallback:m}=e,d=(0,c.f)(),p=i.reuseExistingDialog(r,d);if(p)return p;const{resolver:g,promise:f}=(0,h.T)(),w=document.activeElement,b=e=>{i.removeDialog(r),null!==w&&document.body.contains(w)&&w.focus?.(),g(e)},y=m(b,t,s),$=function(e,t,s){const n=e.mode??"modal",{titleId:i,descriptionId:r,focusElementId:a,dismissible:c}=e;return(0,o.createElement)(l,{mode:n,titleId:i,descriptionId:r,resolveDialog:s,focusElementId:a,dismissible:c},t)}({...e,titleId:t,descriptionId:s},y,b);return n.M.dialogs.showDialog({dialogOrder:d,dialogComponent:$,resolveDialog:b,dismissible:a,dialogId:r,promise:f}),f}},8848:(e,t,s)=>{"use strict";s.d(t,{K$:()=>m,M5:()=>u,P6:()=>h});var n=s(5185),i=s(9634),o=s(4747),r=s(7273),a=s(6607),l=s(2888);class c extends l.Custom{render(){const{message:e,subMessage:t=null,button1Text:s,button2Text:n,button3Text:a,resolve:c,descriptionId:h}=this.props,u=[(0,l.createElement)(r.R,{id:"1",key:"1",onClick:()=>{c(1)}},s)];void 0!==n&&u.push((0,l.createElement)(r.R,{id:"2",key:"2",onClick:()=>c(2)},n));const m=[];return void 0!==a&&m.push((0,l.createElement)(r.R,{id:"3",key:"3",onClick:()=>c(3)},a)),(0,l.createElement)("div",{className:"MessageDialog"},(0,l.createElement)(i.A,{messageId:h},e),null!==t?(0,l.createElement)("div",{className:"DialogSubMessage",id:h},t):null,(0,l.createElement)("span",{style:{height:14}}),(0,l.createElement)(o.D,{leftButtons:m,rightButtons:u}))}}function h(e){return(0,n.$)({dialogId:(0,a.b)(),dismissible:!1,focusElementId:e.autoFocus?.toString(),contentCallback:(t,s,n)=>(0,l.createElement)(c,{...e,resolve:t,descriptionId:n})})}async function u(e){return 1===await h({message:e,button1Text:"OK",button2Text:"Cancel",autoFocus:1})}async function m(e){await h({message:e,button1Text:"OK",autoFocus:1})}},6882:(e,t,s)=>{"use strict";s.d(t,{M7:()=>f,a6:()=>g});var n=s(5185),i=s(4747),o=s(7273),r=s(5524),a=s(1998),l=s(9634),c=s(2888),h=s(9039),u=Object.defineProperty,m=(e,t,s)=>((e,t,s)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);const d="missingGitDialogRetryId";class p extends c.Custom{constructor(){super(...arguments),m(this,"onClickRetry",(async()=>{await r.g.restartServer(),location.reload()})),m(this,"onClickQuit",(async()=>{await r.g.closeApp()}))}render(){const{titleId:e,descriptionId:t,store:s}=this.props,{gitVersion:n}=s;let r="Couldn't find Git";return null!==n&&n.major<2&&(r=`GitFiend requires version 2 or later of Git (found ${function(e){return`${e.major}.${e.minor}.${e.patch}`}(n)})`),(0,c.createElement)("div",{className:"MissingGitDialog"},(0,c.createElement)(l.A,{messageId:e},r),(0,c.createElement)("div",{className:"DialogSubMessage",id:t},"If you are installing Git, wait for the install to finish, then try again.",h.cX?(0,c.createElement)("p",null,"You may also need to open Xcode and accept the license agreement."):null),(0,c.createElement)("span",{style:{height:12}}),(0,c.createElement)(i.D,{rightButtons:[(0,c.createElement)(o.R,{type:"submit",onClick:this.onClickQuit},"Quit GitFiend")]}))}}async function g(e){return e.windowSt.centreLastClick(),(0,n.$)({dialogId:g.name,dismissible:!1,focusElementId:d,contentCallback:(t,s,n)=>(0,c.createElement)(p,{titleId:s,descriptionId:n,store:e})})}async function f(e){e.gitVersion=await a.RT.git_version({repoPath:"."}),(null===e.gitVersion||e.gitVersion.major<2)&&await g(e).catch(console.log)}},7728:(e,t,s)=>{"use strict";s.d(t,{G:()=>b});var n=s(5185),i=s(4747),o=s(9634),r=s(7273),a=s(8774),l=s(5675),c=s(2042),h=s(5524),u=s(1197),m=s(1998),d=s(7477),p=s(2888),g=Object.defineProperty,f=(e,t,s)=>((e,t,s)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class w extends p.Custom{constructor(){super(...arguments),f(this,"dirInputRef",(0,p.createRef)()),f(this,"$dir",c.o.get("lastClonePath")),f(this,"$name",""),f(this,"onClickCreate",(async()=>{const{store:e}=this.props,{consoleSt:t}=e;await t.showLoading(`Creating ${this.$name}`,(async()=>{const t=(0,u.uJ)(this.$dir,this.$name);(await m.En.create_repo({repoPath:t})).error||(await e.setRepoPath(t),this.props.resolve(!0))}))})),f(this,"onClickBrowse",(async e=>{e.preventDefault();const t=await h.g.show_open_folder_window();null!==t&&(this.$dir=t)})),f(this,"setDir",(e=>{this.$dir=e})),f(this,"setName",(e=>{this.$name=e}))}componentDidMount(){d.q.value((()=>this.$dir),(async()=>{await this.validateRepoPath()}),this)}render(){const{resolve:e,descriptionId:t}=this.props;return(0,p.createElement)("form",{className:"NewRepoDialog",onSubmit:async e=>{e.preventDefault(),await this.onClickCreate()}},(0,p.createElement)(o.A,{messageId:t},"Create a New Git Repo"),(0,p.createElement)("div",{className:"NewRepoDialog-inputs"},(0,p.createElement)("label",null,"Name"),(0,p.createElement)(l.L,{id:a.Bg,value:this.$name,onText:this.setName,required:!0}),(0,p.createElement)("div",null),(0,p.createElement)("label",null,"Location"),(0,p.createElement)(l.L,{id:a.bs,inRef:this.dirInputRef,value:this.$dir,onText:this.setDir,required:!0}),(0,p.createElement)(r.R,{onClick:this.onClickBrowse},"Browse")),(0,p.createElement)(i.D,{rightButtons:[(0,p.createElement)(r.R,{type:"submit"},"Create Repo"),(0,p.createElement)(r.R,{onClick:()=>{e(void 0)}},"Cancel")]}))}async validateRepoPath(){const e=this.dirInputRef.current;e&&(await m.RT.path_exists(this.$dir)?(e.setCustomValidity(""),c.o.set("lastClonePath",this.$dir)):e.setCustomValidity("path doesn't exist"))}}function b(e){return e.windowSt.centreLastClick(),(0,n.$)({dialogId:b.name,dismissible:!1,focusElementId:a.Bg,contentCallback:(t,s,n)=>(0,p.createElement)(w,{resolve:t,descriptionId:n,store:e})})}},9171:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(2888);function i(e,t){if(0===t.length)return[e];const s=e.toLocaleLowerCase(),i=t.toLocaleLowerCase(),o=i.length,r=[];let a=s.indexOf(i),l=0;for(;a>=0;)r.push(e.substring(l,a),(0,n.createElement)("span",{className:"highlight"},e.substring(a,a+o))),l=a+o,a=s.indexOf(i,l);return r.push(e.substring(l,e.length)),r}},7406:(e,t,s)=>{"use strict";s.d(t,{D:()=>n});const n=(0,s(2888).createElement)("span",{className:"icon-down",style:{fontSize:10}})},5675:(e,t,s)=>{"use strict";s.d(t,{L:()=>r});var n=s(2888),i=Object.defineProperty,o=(e,t,s)=>((e,t,s)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class r extends n.Custom{constructor(){super(...arguments),o(this,"ref",(0,n.createRef)()),o(this,"onClickClear",(()=>{this.props.onText(""),this.ref.current?.focus()})),o(this,"onText",(e=>{const{onText:t}=this.props;void 0!==t&&t(e.target.value,e)}))}render(){const{children:e,className:t="",errorMessage:s,onText:i,clearButton:o=!1,inRef:r,value:a="",...l}=this.props;void 0!==r&&(this.ref=r);const c=(0,n.createElement)("input",{ref:this.ref,className:n.c`FInput `+t,onChange:this.onText,onInput:this.onText,value:a,...l});return o?(0,n.createElement)(n.Fragment,null,c,this.drawClearButton()):c}drawClearButton(){const{value:e=""}=this.props;return(0,n.createElement)("button",{className:"FInput-clearButton",style:{display:0===e.toString().length?"none":"flex"},onClick:this.onClickClear},"✕")}componentDidMount(){if(!0===this.props.autoFocus){const e=this.ref.current;null!==e&&setTimeout((()=>{e.focus()}),1)}}componentDidUpdate(){const{errorMessage:e}=this.props;this.ref.current?.setCustomValidity(e??""),this.ref.current?.reportValidity()}componentWillUnmount(){this.ref={current:null}}}},7627:(e,t,s)=>{"use strict";s.d(t,{q:()=>i});var n=s(2888);class i extends n.Custom{render(){const{patchType:e,style:t,...s}=this.props;let i;switch(e){case"T":case"M":i="var(--modifiedColour)";break;case"?":case"A":i="var(--addedColour)";break;case"R":case"C":i="var(--renamedColour)";break;default:i="var(--deletedColour)"}let o=e;return"?"===e&&(o="A"),(0,n.createElement)("div",{className:"PatchTypeIcon",style:{color:i,...t},...s},o)}}},7005:(e,t,s)=>{"use strict";s.d(t,{l:()=>l});var n=s(7273),i=s(7521),o=s(7406),r=s(2888),a=Object.defineProperty;class l extends r.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="onClick")?e+"":e,(async e=>{await(0,i.O0)(this.props.options,e)}))}render(){const{options:e,theme:t,...s}=this.props;if(0===e.length)return null;const i=e.find((e=>e.checked))?.label??e[0].label;return(0,r.createElement)(n.R,{className:"Select",...s,onClick:this.onClick},i,o.D)}}},3331:(e,t,s)=>{"use strict";s.d(t,{H:()=>r,y:()=>o});var n=s(2888);const i="data:image/svg+xml;base64, PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCAzMzIgMzMyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zOnNlcmlmPSJodHRwOi8vd3d3LnNlcmlmLmNvbS8iIHN0eWxlPSJmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MjsiPjxwYXRoIGQ9Ik0zMzAuOTExLDE1Ny4zNWMwLjczOCwxNC45MTYgLTAuNTQ3LDMwLjE3OCAtNC4wNzEsNDUuNDQxYy0xNy40MjEsNzUuNDYyIC04NC4wMDEsMTI2Ljg5OCAtMTU4LjEwNCwxMjguMjkybC0wLjg0NywtNDQuNjI2YzU0LjEyMSwtMS4wMjMgMTAyLjc0NSwtMzguNTkxIDExNS40NjksLTkzLjcwNGMyLjU3LC0xMS4xMyAzLjUxLC0yMi4yNTggMi45NzYsLTMzLjEzNWw0NC41NzcsLTIuMjY4Wm0tMzEwLjQ0OSwtNzEuNTI4bDM5LjA3MiwyMS41OGMtNS4yMTQsOS41MDcgLTkuMjIyLDE5Ljg3OCAtMTEuNzgsMzAuOTU3Yy0xMi43MjQsNTUuMTE0IDE0LjUxMSwxMTAuMTk1IDYyLjcwNSwxMzQuODM5bC0yMC4zMjQsMzkuNzM4Yy02NS45OTEsLTMzLjczNyAtMTAzLjI4NSwtMTA5LjE1NCAtODUuODYzLC0xODQuNjE1YzMuNTEyLC0xNS4yMTQgOS4wMjMsLTI5LjQ1MSAxNi4xOSwtNDIuNDk5Wm01NC44NzIsLTU5LjAwNGMzNi4zNjMsLTIzLjY0IDgxLjkwMiwtMzMuMDYzIDEyNy40NTcsLTIyLjU0NmM0NS40NTMsMTAuNDkzIDgyLjE5LDM4LjgyMiAxMDQuNTI0LDc1Ljg4NmwtMzguMjEsMjMuMDM4Yy0xNi4zMTIsLTI3LjA3OSAtNDMuMTQ4LC00Ny43NzYgLTc2LjM1MiwtNTUuNDQyYy0zMy4zMDcsLTcuNjkgLTY2LjYwMywtMC43ODUgLTkzLjE3NiwxNi41MmwtMjQuMjQzLC0zNy40NTZaIiBzdHlsZT0iZmlsbDojZmZmOyIvPjwvc3ZnPg==";class o extends n.Custom{render(){const{size:e,invertColour:t,delay:s=!1,style:o="",container:r=!1}=this.props;return r?(0,n.createElement)("div",{className:"Spinner-container"},(0,n.createElement)("img",{className:n.c`Spinner ${!0} Spinner-delay ${s}`,style:{...o,filter:t?"invert(1)":void 0},width:e,height:e,src:i,alt:""})):(0,n.createElement)("img",{className:n.c`Spinner ${!0} Spinner-delay ${s}`,style:{...o,filter:t?"invert(1)":void 0},width:e,height:e,src:i,alt:""})}}class r extends n.Custom{render(){const{fontSize:e,invertColour:t,style:s}=this.props;return(0,n.createElement)("div",{className:"Dotter",style:{fontSize:e,filter:t?"invert(1)":void 0,...s}},(0,n.createElement)("span",{className:"Dotter-dot1"}),(0,n.createElement)("span",{className:"Dotter-dot2"}),(0,n.createElement)("span",{className:"Dotter-dot3"}))}}},3992:(e,t,s)=>{"use strict";s.d(t,{u:()=>i});var n=s(2888);class i extends n.Custom{render(){let{style:e}=this.props;return(0,n.createElement)("span",{className:"icon-trash",style:{display:"flex",...e}})}}},4907:(e,t,s)=>{"use strict";s.d(t,{zj:()=>b,Vg:()=>f,cR:()=>y});var n=s(4330),i=s(4071),o=s(6343),r=s(5524),a=s(2042);const l="#f8f8f8",c="#1f1f1f";var h=s(2888),u=s(9039),m=Object.defineProperty,d=(e,t,s)=>((e,t,s)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);const p="(prefers-color-scheme: dark)",g="hsl(36, 100%, 44%)";function f(e){return`var(--${e})`}function w(e,t){document.documentElement.style.setProperty(e,t)}const b=new class{constructor(){d(this,"$theme"),d(this,"animationTime",o.XH),d(this,"restoreAnimationsDebounced",(0,n.pk)((()=>{this.enableAnimations()}),400));const e=a.o.get("themeSetting"),t="system"===e?$():e;this.$theme={name:t,setting:e,accentColour:g,backgroundColour:"light"===t?l:c},(0,h.init$)(this),r.g.setTheme(e).catch(),window.matchMedia(p).addEventListener("change",(e=>{const t=e.matches?"dark":"light";this.updateThemeObservable({...this.$theme,name:t,backgroundColour:"light"===t?l:c}),this.applyTheme()})),this.applyTheme(),this.askMainForAccentColour().catch()}async askMainForAccentColour(){await r.g.sendThemeVarsToRenderer()}applyTheme(){const{$theme:{accentColour:e,name:t,setting:s}}=this;if(document.documentElement.className="",u.cX&&document.documentElement.classList.add("mac"),document.documentElement.classList.add(t),u.MZ)w("--accentHue","36"),w("--accentColour",g);else{const t=(0,i.LC)(e);isNaN(t)||w("--accentHue",t.toString()),u.Zm?w("--accentColour",`hsl(${t}, 100%, 44%)`):8===e.length&&w("--accentColour","#"+e)}a.o.set("themeSetting",s),r.g.setTheme(s).catch(console.log)}async changeTheme(e){const t="system"===e?$():e;this.updateThemeObservable({...this.$theme,name:t,setting:e,backgroundColour:"light"===t?l:c}),this.applyTheme()}setAccentColour(e){this.updateThemeObservable({...this.$theme,accentColour:e??g}),this.applyTheme()}disableAnimations(){this.animationTime!==o.qs&&(this.animationTime=o.qs,document.body.style.setProperty("--animationDuration","0s"))}enableAnimations(){this.animationTime=o.XH,document.body.style.setProperty("--animationDuration",`${this.animationTime.medium}ms`)}updateThemeObservable(e){const{$theme:t}=this;var s,n;s=t,n=e,Object.keys(s).some((e=>s[e]!==n[e]))&&(this.$theme=e)}};function y(e,t,s){b.setAccentColour(s)}function $(){return window.matchMedia(p).matches?"dark":"light"}},6950:(e,t,s)=>{"use strict";s.d(t,{is:()=>D,cX:()=>N,Vk:()=>O,J5:()=>F});var n=s(5185),i=s(9634),o=s(7273),r=s(4747),a=s(5675),l=s(3992),c=s(3331),h=s(8848),u=s(4907),m=s(2042),d=s(1998),p=s(2888),g=Object.defineProperty,f=(e,t,s)=>((e,t,s)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class w extends p.Custom{constructor(){super(...arguments),f(this,"onClickEdit",(()=>{const{vm:e,name:t,url:s}=this.props;e.$editing=t,e.$newUrl=s,e.$newName=t})),f(this,"onClickApply",(async()=>{const{vm:e,name:t,url:s}=this.props,{repo:n,repoPath:i}=e.store;await e.checkNewUrl((async()=>{if(e.$newName!==t){if((await d.En.command({repoPath:i,args:["remote","rename",t,e.$newName]})).error)return;const s=m.o.get("fetchOptions");s.remoteName===t&&(m.o.set("fetchOptions",{...s,remoteName:e.$newName}),await n.loadOrReloadRepoData())}e.$newUrl!==s&&(await d.En.command({repoPath:i,args:["remote","set-url",e.$newName,e.$newUrl]})).error||(await n.fetch(!0),e.done())}))})),f(this,"onClickCancel",(()=>{this.props.vm.done()})),f(this,"onClickRemove",(async()=>{const{vm:e,name:t}=this.props,{repo:s,repoPath:n}=e.store;await(0,h.M5)(`Are you sure you want to remove ${t}?`)&&((await d.En.command({repoPath:n,args:["remote","remove",t]})).error||(await s.loadOrReloadRepoData(),e.done()))}))}render(){const{name:e,url:t,vm:s}=this.props,n=s.$editing;if(n===e)return(0,p.createElement)(p.Fragment,null,D,(0,p.createElement)(a.L,{id:N.nameInput,autoFocus:!0,value:s.$newName,onText:s.onRemoteNameTextChange}),(0,p.createElement)(a.L,{id:N.urlInput,value:s.$newUrl,onText:s.onUrlInputTextChange}),(0,p.createElement)(o.R,{onClick:this.onClickApply,disabled:e===s.$newName&&t===s.$newUrl},s.$checkingUrl?(0,p.createElement)(c.y,{size:13,invertColour:"light"===u.zj.$theme.name}):"Apply"),(0,p.createElement)(o.R,{onClick:this.onClickCancel},"Cancel"));const i=null!==n&&n!==e;return(0,p.createElement)(p.Fragment,null,D,(0,p.createElement)("div",null,e),(0,p.createElement)("div",null,t),(0,p.createElement)(o.R,{style:{marginLeft:"auto"},disabled:s.$creating||i,title:`Remove ${e}`,onClick:this.onClickRemove,fitContent:!0},(0,p.createElement)(l.u,{style:{fontSize:13}})),(0,p.createElement)(o.R,{onClick:this.onClickEdit,disabled:s.$creating||i},"Edit"))}}var b=Object.defineProperty,y=(e,t,s)=>((e,t,s)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class ${constructor(e){this.store=e,y(this,"$editing",null),y(this,"$creating",!1),y(this,"$newName"),y(this,"$newUrl",""),y(this,"$checkingUrl",!1),y(this,"$newUrlErrorMessage",""),y(this,"onRemoteNameTextChange",(e=>{this.$newName=e})),y(this,"onUrlInputTextChange",(e=>{this.$newUrl=e,this.$newUrlErrorMessage=""})),y(this,"checkNewUrl",(async e=>{if(this.$newUrlErrorMessage="",this.validateUrlOrPath())try{this.$checkingUrl=!0,await e()}finally{this.$checkingUrl=!1}})),this.$newName=0===e.config.$remotes.size?"origin":"",(0,p.init$)(this)}get $disableOtherControls(){return null!==this.$editing||this.$creating}validateUrlOrPath(){return this.$newUrlErrorMessage="",!0}done(){this.$editing=null,this.$newName="",this.$newUrl="",this.$creating=!1}}var v=Object.defineProperty,k=(e,t,s)=>((e,t,s)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class C extends p.Custom{constructor(){super(...arguments),k(this,"onClickAdd",(()=>{this.props.vm.$creating=!0})),k(this,"onClickApply",(async()=>{const{vm:e}=this.props,{repo:t,repoPath:s}=e.store;await e.checkNewUrl((async()=>{(await d.En.command({repoPath:s,args:["remote","add",e.$newName,e.$newUrl]})).error||(await t.fetch(!0),e.done())}))})),k(this,"onClickCancel",(()=>{this.props.vm.done()}))}render(){const{vm:e}=this.props;return e.$creating?(0,p.createElement)(p.Fragment,null,D,(0,p.createElement)(a.L,{id:N.nameInput,autoFocus:!0,value:e.$newName,required:!0,onText:e.onRemoteNameTextChange}),(0,p.createElement)(a.L,{id:N.urlInput,value:e.$newUrl,onText:e.onUrlInputTextChange,errorMessage:e.$newUrlErrorMessage}),(0,p.createElement)(o.R,{id:N.applyButton,onClick:this.onClickApply,disabled:0===e.$newName.length||0===e.$newUrl.length},e.$checkingUrl?(0,p.createElement)(c.y,{size:13,invertColour:"light"===u.zj.$theme.name}):"Add"),(0,p.createElement)(o.R,{id:N.applyButton,onClick:this.onClickCancel},"Cancel")):(0,p.createElement)(p.Fragment,null,D,(0,p.createElement)(o.R,{id:N.addRemote,onClick:this.onClickAdd,style:{gridColumn:"span 4",marginRight:"auto",marginLeft:0},disabled:null!==e.$editing},"Add Remote"))}}var _=s(7005),S=s(2994),x=s(5661),P=Object.defineProperty;class E{constructor(e){this.store=e,(0,p.init$)(this)}get $selectedPushRemote(){const{config:e,refs:t}=this.store;return null!==e.$pushDefault&&e.$remotes.has(e.$pushDefault)?e.$pushDefault:t.$repoStatus?e.getPushRemoteForBranch(t.$repoStatus.branchName):e.$remotes.has("origin")?"origin":null}get $pushOptions(){const{config:e,repo:t,repoPath:s}=this.store,n=this.$selectedPushRemote;return Array.from(e.$remotes,(([e])=>({label:e,click:async()=>{await d.En.command({repoPath:s,args:["config","remote.pushdefault",e]}),await t.loadOrReloadRepoData()},type:"radio",checked:n===e})))}get $selectedFetchOption(){return this.getSelectedFetchOptionId(m.o.get("fetchOptions"))}getSelectedFetchOptionId(e){const{config:t}=this.store;return 1===t.$remotes.size?Array.from(t.$remotes)[0][0]:e.type===S.N.all?"All":e.remoteName}fetchOptions(){const{config:e}=this.store,t=Array.from(e.$remotes,(([t])=>({label:t,click:()=>{e.setFetchOptions({v:1,type:S.N.single,remoteName:t})},type:"radio",checked:this.$selectedFetchOption===t})));return t.length>1&&t.unshift({label:"All",click:()=>{e.setFetchOptions(x.N.fetchOptions)},type:"radio",checked:"All"===this.$selectedFetchOption}),t}}class R extends p.Custom{constructor(){var e,t,s;super(...arguments),e=this,t="vm",s=new E(this.props.store),((e,t,s)=>{t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(e,"symbol"!=typeof t?t+"":t,s)}render(){const{store:e,disabled:t}=this.props,{config:s}=e;return s.$remotes.size<=1?null:(0,p.createElement)("div",{className:"SelectRemote"},(0,p.createElement)("div",{className:"SelectRemote-label"},"Fetch From:"),(0,p.createElement)(_.l,{options:this.vm.fetchOptions(),theme:u.zj.$theme.name,disabled:t}),(0,p.createElement)("div",{className:"SelectRemote-label SelectRemote-label-push"},"Push To:"),(0,p.createElement)(_.l,{options:this.vm.$pushOptions,theme:u.zj.$theme.name,disabled:t}))}}var I=s(9378),T=Object.defineProperty;const N={okButton:"ConfigureRemotesOkButton",addRemote:"ConfigureRemotesAddButton",nameInput:"ConfigureRemotesNameInput",urlInput:"ConfigureRemotesUrlInput",applyButton:"ConfigureRemotesApplyButton"},{okButton:M}=N;class L extends p.Custom{constructor(){var e,t,s;super(...arguments),e=this,t="vm",s=new $(this.props.store),((e,t,s)=>{t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(e,"symbol"!=typeof t?t+"":t,s)}render(){const{descriptionId:e,resolve:t,store:s}=this.props;return(0,p.createElement)("div",{className:"ConfigureRemotes"},(0,p.createElement)(i.A,{messageId:e},"Configure Remotes"),(0,p.createElement)(R,{store:s,disabled:this.vm.$disableOtherControls}),(0,p.createElement)("div",{className:"ConfigureRemotes-grid"},(0,p.createElement)("div",{className:"ConfigureRemotes-remotes-header"},"Name"),(0,p.createElement)("div",{className:"ConfigureRemotes-remotes-header"},"Url or Path"),(0,p.createElement)("div",null),(0,p.createElement)("div",null),(0,p.createElement)(p.Fragment,null,this.drawRemotes()),(0,p.createElement)(C,{vm:this.vm})),(0,p.createElement)(r.D,{style:{marginTop:12},rightButtons:[(0,p.createElement)(o.R,{id:M,onClick:()=>{t(!0)},disabled:this.vm.$creating||null!==this.vm.$editing},"OK")]}))}drawRemotes(){const{config:e}=this.props.store,t=Array.from(e.$remotes);return t.sort((([e],[t])=>e.toLocaleLowerCase().localeCompare(t.toLocaleLowerCase()))),t.map((([e,t],s)=>(0,p.createElement)(w,{key:e+s,name:e,url:t,vm:this.vm})))}}async function F(){const{$repo:e}=I.M;if(null!==e)return I.M.windowSt.centreLastClick(),(0,n.$)({dialogId:F.name,dismissible:!1,focusElementId:M,contentCallback:(t,s,n)=>(0,p.createElement)(L,{store:e,descriptionId:n,resolve:t})})}function O(e){return{label:"Configure Remotes",async click(){await F()},enabled:null!==e.$repo}}const D=(0,p.createElement)("div",{className:"ConfigureRemotes-gridRow"})},7495:(e,t,s)=>{"use strict";s.d(t,{i:()=>R});var n=s(5185),i=s(5675),o=s(4203),r=s(5499),a=s(1197),l=s(829),c=s(9171),h=s(7627),u=s(2888),m=Object.defineProperty;class d extends u.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="onClick")?e+"":e,(()=>{const{patchId:e,onClickPatch:t}=this.props;t(e)}))}render(){const{lines:e,searchText:t}=this.props;return(0,u.createElement)("div",{className:u.c`CommitResultDiff ${!0} CommitResultDiff-truncated ${e.length>6}`,onClick:this.onClick},e.slice(0,6).map((({oldNum:e,newNum:s,status:n,text:i})=>{const o=u.c`CommitResultDiff-colour-minus ${"-"===n} CommitResultDiff-colour-plus ${"+"===n}`;return(0,u.createElement)(u.Fragment,null,(0,u.createElement)("div",{className:`CommitResultDiff-row-margin ${o}`,key:`${s}${e}m`},n,"-"===n?e:s),(0,u.createElement)("div",{className:`CommitResultDiff-row-line ${o}`,key:`${s}${e}l`},(0,c.Z)(i,t)))})).flat())}}var p=s(7273);function g(e,t,s,n,i,o,r){return(0,u.createElement)(u.Fragment,null,(0,u.createElement)(p.R,{className:"PatchResult-file",colour:"text",key:s+2,id:s,onClick:o},(0,u.createElement)("span",null,(0,c.Z)(e,t)),(0,u.createElement)(h.q,{patchType:n})),i.length>0?(0,u.createElement)(d,{lines:i,searchText:t,patchId:s,onClickPatch:r}):null)}var f=s(4071),w=Object.defineProperty;class b extends u.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="onClick")?e+"":e,(()=>{const{store:e,refInfo:{id:t,shortName:s},resolve:n}=this.props;e.repo.repo.commitFilters.setBranchFilter({id:t,short_name:s}),n(!0)}))}render(){const{refInfo:e,searchText:t}=this.props;return(0,u.createElement)("button",{className:"RefResult InlineButton",style:{backgroundColor:(0,f.Jh)(e.shortName)},onClick:this.onClick},(0,c.Z)(e.fullName,t))}}var y=Object.defineProperty,$=(e,t,s)=>((e,t,s)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class v extends u.Custom{constructor(){super(...arguments),$(this,"onClickFile",(async({currentTarget:e})=>{e instanceof HTMLElement&&await this.goToFileInCommit(e.id)})),$(this,"onClickCode",(async e=>{await this.goToFileInCommit(e)})),$(this,"onClickUsername",(()=>{const{store:{repo:{repo:e,repo:{$commits:t},nav:s,layout:n}},result:{commitId:i},resolve:o}=this.props;o(!0);const r=t.get(i);if(void 0===r)return void console.log(`Commit id ${i} not found in $allCommits`);const{author:a,email:l}=r;s.goHome(),e.commitFilters.setUsernameFilter({author:a,email:l}),n.setScrollTop(0)})),$(this,"onClickId",(async()=>{const{store:e,result:{commitId:t},resolve:s}=this.props,{repo:{nav:n}}=e;s(!0),n.goHome(),n.setSelectedCommit(t),await n.scrollCommitIntoView(t)}))}render(){const{refMap:e,result:{matches:t,patches:s,diffs:n,refIds:i},commit:o,searchText:h,themeName:m}=this.props;return(0,u.createElement)("div",{className:"CommitResult SearchResult"},this.drawBranches(e,i,o,t,h),(0,u.createElement)("div",{className:"CommitResult-header"},(0,r.sY)(o,20,m),(0,a.lF)(o.date.ms)," by"," ",(0,u.createElement)("button",{className:"InlineButton",onClick:this.onClickUsername},t.includes("Author")?(0,c.Z)(o.author,h):o.author),(0,u.createElement)("button",{className:"InlineButton CommitResult-header-hash",onClick:this.onClickId},t.includes("CommitId")?(0,c.Z)(o.id,h):(0,l.vX)(o))),this.drawCommitMessage(o,t,h),this.drawFoundFiles(o,h,s,n))}drawBranches(e,t,s,n,i){const o=[];return t.forEach((t=>{const n=s.refs.find((e=>e===t)),r=n?e.get(n):void 0;r&&o.push((0,u.createElement)(b,{refInfo:r,searchText:i,key:t,store:this.props.store,resolve:this.props.resolve}))})),(0,u.createElement)("div",{className:"CommitResult-branches"},o)}drawFoundFiles(e,t,s,n){const i=[];if(s.length>0)for(const e of s)i.push(this.drawPatch(e,n,t));return i.length>0?(0,u.createElement)("div",{className:"CommitResult-files"},i):null}drawPatch(e,t,s){const{patchType:n,id:i,newFile:r,oldFile:a}=e,l=t.find((t=>t.patch.id===e.id))?.lines??[];switch(n){case"A":case"C":case"M":if((0,o._)(r,s))return g(r,s,i,n,l,this.onClickFile,this.onClickCode);break;case"D":if((0,o._)(a,s))return g(a,s,i,n,l,this.onClickFile,this.onClickCode);break;case"R":const e=[];return(0,o._)(a,s)&&e.push(g(a,s,i+1,n,l,this.onClickFile,this.onClickCode)),(0,o._)(r,s)&&e.push(g(r,s,i+2,n,l,this.onClickFile,this.onClickCode)),(0,u.createElement)(u.Fragment,null,e)}return l.length>0?g(r,s,i,n,l,this.onClickFile,this.onClickCode):null}async goToFileInCommit(e){const{store:{repo:{nav:t}},resolve:s,result:{commitId:n}}=this.props;s(!0),t.goHome(),await t.scrollCommitIntoView(n),t.setSelectedCommit(n),t.setSelectedPatchId(e)}drawCommitMessage(e,t,s){const n=t.includes("CommitMessage");return(0,u.createElement)("div",{className:u.c`CommitResult-header-message ${!0} CommitResult-header-message-oneLine ${!n}`},n?(0,c.Z)(e.message,s):e.message)}}var k=s(4907),C=Object.defineProperty;class _ extends u.Custom{constructor(){var e,t,s;super(...arguments),e=this,t="ref",s=(0,u.createRef)(),((e,t,s)=>{t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(e,"symbol"!=typeof t?t+"":t,s)}render(){const{search:e,resolve:t}=this.props,{$coreSearchResults:s,repo:{global:{windowSt:n},repo:{$commits:i},refs:{$allRefs:{map:o}}},$searchText:r}=e,{$theme:{name:a}}=k.zj;return(0,u.createElement)("div",{ref:this.ref,className:"SearchResultList",style:{maxHeight:.65*n.$commitViewSize.windowHeight}},s.map((s=>{const n=i.get(s.commitId);return void 0!==n?(0,u.createElement)(v,{refMap:o,result:s,commit:n,key:s.commitId,searchText:r,store:e,resolve:t,themeName:a}):null})))}componentDidMount(){const e=this.ref.current;null!==e&&(e.scrollTop=this.props.search.lastScrollY)}componentWillUnmount(){const e=this.ref.current;null!==e&&(this.props.search.lastScrollY=e.scrollTop)}}var S=s(9817),x=s(3331),P=Object.defineProperty,E=(e,t,s)=>((e,t,s)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);async function R(e){e.global.windowSt.centreLastClick(),e.search.searchDialogOpen=!0,await(0,n.$)({dialogId:"SearchDialog",focusElementId:"SearchDialogInput",dismissible:!0,mode:"sheet",contentCallback:t=>(0,u.createElement)(I,{resolve:t,repo:e})}),e.search.searchDialogOpen=!1}class I extends u.Custom{constructor(){super(...arguments),E(this,"inputRef",(0,u.createRef)()),E(this,"onText",(async e=>{await this.props.repo.search.onText(e)})),E(this,"onKeyUp",(e=>{"Escape"===e.key&&this.props.resolve(!0)}))}render(){const{global:{windowSt:{$commitViewSize:{width:e}}},search:t}=this.props.repo;return(0,u.createElement)("div",{className:"SearchDialog",style:{width:(0,S.S4)(600,800,.8*e)}},(0,u.createElement)("div",{className:"SearchDialog-input-container"},(0,u.createElement)(i.L,{inRef:this.inputRef,className:"SearchDialog-input",value:t.$searchText,id:"SearchDialogInput",placeholder:"Search commits, branches or users",onText:this.onText,clearButton:!0}),this.drawSpinner()),(0,u.createElement)(_,{search:t,resolve:this.props.resolve}))}drawSpinner(){return this.props.repo.search.$runningSearch?(0,u.createElement)(x.y,{size:14,style:{position:"absolute",right:44,marginBottom:1},invertColour:"light"===k.zj.$theme.name}):null}componentDidMount(){addEventListener("keyup",this.onKeyUp),this.inputRef.current?.select()}componentWillUnmount(){removeEventListener("keyup",this.onKeyUp)}}},4203:(e,t,s)=>{"use strict";s.d(t,{U:()=>m,_:()=>d});var n=s(9817),i=s(1998),o=s(2888),r=Object.defineProperty,a=(e,t,s)=>((e,t,s)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class l{constructor(e){this.searchStore=e,a(this,"latestSearchText",""),a(this,"$results",{searchText:"",matches:{}}),a(this,"$running",!1),(0,o.init$)(this)}async run(e,t){if(""===t)return this.$running=!1,void(this.$results={searchText:"",matches:{}});this.$running=!0,this.$results={searchText:"",matches:{}},this.latestSearchText=t;const{repoPath:s}=e,{$commitIds:n}=this;let i=0;for(;;){const e=await this.diffSearchRequest(s,1,t,i)??[];if(this.cancelled(t))return;const o=e.map((e=>e[0]));if(o.some((e=>void 0!==this.$results.matches[e]))&&console.error("Results already contain an id in",o),this.$results={searchText:t,matches:{...this.$results.matches,...Object.fromEntries(e)}},Object.keys(this.$results.matches).length>20)break;if(0===e.length)break;const r=e[0][0],a=n.indexOf(r);if(-1===a)break;i=a+1}this.$running=!1}async diffSearchRequest(e,t,s,o){const r=await i.RT.start_diff_search({repoPath:e,numResults:t,searchText:s,startCommitIndex:o});let a=await i.RT.poll_diff_search({searchId:r});for(;!a.complete&&this.searchStore.searchDialogOpen;)await(0,n.yy)(30),a=await i.RT.poll_diff_search({searchId:r});return a.results}get $commitIds(){const{repo:{$commits:e}}=this.searchStore.repo,t=[];for(const s of e.values())null===s.stashId&&t.push(s.id);return t}cancelled(e){return e!==this.latestSearchText}}var c=Object.defineProperty,h=(e,t,s)=>((e,t,s)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);const u={repoPath:"",searchText:""};class m{constructor(e){this.repo=e,h(this,"$searchText"),h(this,"$quickSearchResults",[]),h(this,"$runningQuickSearch",!1),h(this,"diffSearch",new l(this)),h(this,"lastScrollY",0),h(this,"searchDialogOpen",!1),h(this,"onText",(async e=>{e!==this.$searchText&&(u.searchText=e,this.$searchText=e,this.runQuickSearch(e).catch(console.error),this.diffSearch.run(this.repo,e).catch(console.error))}));const{repoPath:t,searchText:s}=u;this.$searchText=t===e.repoPath?s:"",u.repoPath=e.repoPath,(0,o.init$)(this)}get $runningSearch(){return this.$searchText.length>0&&(this.$runningQuickSearch||this.diffSearch.$running)}async runQuickSearch(e){try{this.$runningQuickSearch=!0;const t=await i.RT.search_commits({repoPath:this.repo.repoPath,searchText:e,numResults:40});e===this.$searchText&&(this.$quickSearchResults="Ok"in t?t.Ok:[],this.$runningQuickSearch=!1)}catch{this.$runningQuickSearch=!1}}get $coreSearchResults(){const{repo:{repo:{$commits:e}},$searchText:t,$quickSearchResults:s}=this;if(t.length<2)return[];const{$results:n}=this.diffSearch;if(n.searchText===t){const{matches:e}=n;for(const t of Object.keys(e)){const n=s.find((e=>e.commitId===t)),i=e[t];if(void 0===n)s.push({commitId:t,matches:[],patches:i.map((e=>e.patch)),diffs:e[t],refIds:[]});else{for(const e of i)n.patches.some((t=>t.id===e.patch.id))||n.patches.push(e.patch);n.diffs=e[t]}}}return s.sort(((t,s)=>(e.get(s.commitId)?.date.ms??0)-(e.get(t.commitId)?.date.ms??0))),s.map((e=>({...e})))}}function d(e,t){return e.toLocaleLowerCase().includes(t.toLocaleLowerCase())}},886:(e,t,s)=>{"use strict";s.d(t,{I:()=>o,K:()=>r});var n=s(3331),i=s(2888);class o extends i.Custom{render(){const{type:e,text:t,loading:s,classes:o=[],selected:a,themeName:l,children:c=[],...h}=this.props;!0===a&&o.push("ToolbarButton-selected");const u=function(e,t,s){return t?(0,i.createElement)("div",{className:"Toolbar-icon-container"},(0,i.createElement)(n.y,{size:18,invertColour:"light"===s})):e}(c,!0===s,l);return(0,i.createElement)("button",{className:`ToolbarButton ToolbarButton-style ${o.join(" ")}`,"aria-selected":`${!!a}`,...h},(0,i.createElement)(i.Fragment,null,u),r(t))}}function r(e){return(0,i.createElement)("div",{className:"ToolbarButtonLabel"},e)}},1521:(e,t,s)=>{"use strict";s.d(t,{v:()=>o});var n=s(886),i=s(2888);function o({title:e,subtitle:t,disabled:s=!1,onClick:o,width:r}){return(0,i.createElement)("button",{className:"ToolbarDropdown ToolbarButton-style",style:{minWidth:r},onClick:o,disabled:s},(0,i.createElement)("div",{className:"ToolbarDropdown-value"},e),(0,n.K)(t))}},2210:(e,t,s)=>{"use strict";s.d(t,{Eg:()=>m,Tv:()=>d});var n=s(7521),i=s(5737),o=s(3005),r=s(1521),a=s(6947),l=s(6343),c=s(2650),h=s(2888),u=Object.defineProperty;class m extends h.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="onClick")?e+"":e,(async e=>{const{gs:t}=this.props;await(0,n.O0)(function(e){return[...(0,o.n2)(e),i.me,o.gC.open(e),p(e),i.me,o.gC.clone(e),o.gC.create(e)]}(t),e,{classNames:[h.c`ToolbarDropdown-open`,h.c`darkenBackground`]})}))}render(){const{$repo:e,$workspaceRepos:t}=this.props.gs;if(t.size>0){const{$repoName:t}=this;return(0,r.v)({onClick:this.onClick,title:t,subtitle:"Repo",disabled:null!==e,width:(0,a.V0)(t,l.V)})}return(0,h.createElement)("div",{className:"ToolbarDropdown ToolbarButton-style",onClick:this.onClick},(0,h.createElement)("div",{className:"ToolbarDropdown-value"},"Recent..."))}get $repoName(){const{$workspaceDir:e}=this.props.gs;return null!==e?d(e):""}}function d(e){const t=e.split("/").filter((e=>e));return t[t.length-1]}function p(e){const{$workspaceDir:t}=e;return null===t?i.eh:{label:`Close ${t}`,click:()=>(0,c.AT)(e)}}},1795:(e,t,s)=>{"use strict";s.d(t,{Mh:()=>_,s1:()=>S});var n=s(6343),i=s(4071),o=s(9817),r=Object.defineProperty,a=(e,t,s)=>((e,t,s)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s),l=(e=>(e[e.merge=0]="merge",e[e.pull=1]="pull",e[e.push=2]="push",e[e.dot=3]="dot",e[e.stash=4]="stash",e))(l||{});class c{constructor(e,t,s,i,o){this.repoPath=e,this.commitsToPush=t,this.commitsToPull=s,this.commits=i,this.commitIds=o,a(this,"points",[]),a(this,"lines",[]),a(this,"drawnCommits",new Map),a(this,"filled",Array(n.fZ).fill(0)),this.generate()}generate(){(0,o.WP)(this.repoPath);for(const e of this.commits.values())this.traverseCommit(e,this.commits,this.commitIds);this.points.sort(((e,t)=>e.y-t.y)),this.lines.sort(((e,t)=>e.points[0].y-t.points[0].y)),(0,o.WP)(this.repoPath)}traverseCommit(e,t,s){const{id:n,index:o}=e;if(this.drawnCommits.has(n))return;const r={x:this.filled[o],y:o,commitId:n},a=(0,i.Ny)(e.email);this.points.push({commitId:n,x:r.x,y:r.y,hue:a,type:this.getPointType(e)}),this.filled[r.y]++,this.drawnCommits.set(n,r);for(const n of e.parentIds){const e=t.get(n);void 0!==e&&(this.traverseCommit(e,t,s),this.generateLine(r,e,s,a))}}getPointType(e){return this.commitsToPull.has(e.id)?1:this.commitsToPush.has(e.id)?2:e.isMerge?0:e.stashId?4:3}generateLine(e,t,s,n){const i=[e],{index:o}=t;for(let t=e.y+1;t<o;t++){const e=this.filled[t];this.filled[t]++,i.push({x:e,y:t,commitId:s[t]})}const r=this.drawnCommits.get(t.id)?.x??this.filled[o];i.push({x:r,y:o,commitId:s[o]}),this.lines.push({id:i[0].commitId+i[i.length-1].commitId,points:i,hue:n})}}var h=s(3789),u=s(4907);const m=h.iw,d=m/2;function p(e,t,s,n,i){const{points:o,lines:r}=e,a=[],l=[];let c=!1;for(const e of o){const{commitId:o}=e;if(!0===t.get(o)?.visible||!0===s.get(o)?.visible){c=!0;const r=g(e,t,i),l=g(e,s,i);a.push(f(o,e,l,r,n))}else if(c)break}c=!1;for(const e of r){const{points:o,id:r}=e;for(let a=0;a<o.length;a++){const h=o[a];if(!0===t.get(h.commitId)?.visible||!0===s.get(h.commitId)?.visible){0===a&&(c=!0),l.push(w(r,e,s,t,i,n));break}if(0===a&&c)break}}return{points:a,lines:l}}function g({x:e,y:t,commitId:s},n,i){return{x:(o=e,m+o*(.5*m)),y:(n.get(s)?.top??0)+d-i,commitId:s};var o}function f(e,t,s,n,i){const o=b(s,n,i);return{commitId:e,x:o.x,y:o.y,hue:t.hue,type:t.type}}function w(e,t,s,n,i,o){const{hue:r,points:a}=t;return{id:e,points:a.map((e=>b(g(e,s,i),g(e,n,i),o))),hue:r}}function b(e,t,s){return{x:e.x+s*(t.x-e.x),y:e.y+s*(t.y-e.y),commitId:t.commitId}}var y=s(9853),$=s.n(y),v=s(2888),k=Object.defineProperty,C=(e,t,s)=>((e,t,s)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class _ extends v.Custom{constructor(){super(...arguments),C(this,"ref",(0,v.createRef)()),C(this,"$canvas",null),C(this,"$instructions",null),C(this,"backgroundColour",u.zj.$theme.backgroundColour),C(this,"setCanvas",(({width:e,height:t})=>{const s=this.ref.current;if(s){const n=function(e,t,s){const n=window.devicePixelRatio;e.width=t*n,e.height=s*n;const i=e.getContext("2d");return null!==i&&i.scale(n,n),i}(s,e,t);this.$canvas=n?{canvas:s,context:n}:null}})),C(this,"runningAnimation",!1)}render(){const{global:{windowSt:e},nav:t}=this.props.store,{$size:{width:s,height:n}}=this;let i={width:s,height:n};return t.$showingRefView&&(i.transform=`translateX(${e.$commitViewSize.width/2}px)`),(0,v.createElement)("canvas",{className:"CommitGraph",style:i,ref:this.ref})}get $size(){const{layout:e,global:{windowSt:{$commitViewSize:{height:t}}}}=this.props.store;return{width:e.$commitLeft,height:t}}componentDidMount(){v.Reaction.auto((()=>{const{repo:e,refs:t}=this.props.store;this.$instructions=new c(this.props.store.repoPath,t.$commitsToPush.thisBranch,t.$commitsToPull,e.$commits,e.$commitIds)}),this),this.setCanvas(this.$size),v.Reaction.object((()=>this.$size),this.setCanvas,this),v.Reaction.value((()=>({positions:this.props.store.layout.commitPositions.$current,instructions:this.$instructions,canvas:this.$canvas,theme:u.zj.$theme})),(({positions:e,instructions:t,canvas:s,theme:n})=>{const{prev:i}=this.props.store.layout.commitPositions,{props:o}=this;if(this.backgroundColour=n.backgroundColour,!s||!t)return;const{global:{windowSt:{$animatingCommits:r}},layout:{$scrollTop:a}}=o.store;if(r&&!this.runningAnimation){const n=u.zj.animationTime.medium;this.runningAnimation=!0,this.animatedDraw(t,e,i,a,s,n,Date.now()+n)}else{this.runningAnimation=!1;const n=p(t,e,i,1,a);this.drawGraph(s,n)}}),this)}animatedDraw(e,t,s,n,i,o,r){requestAnimationFrame((()=>{if(!this.runningAnimation)return;const a=Date.now();if(a<r-15){const l=p(e,t,s,S(1-(r-a)/o),n);this.drawGraph(i,l),this.animatedDraw(e,t,s,n,i,o,r)}else{this.runningAnimation=!1;const o=p(e,t,s,1,n);this.drawGraph(i,o)}}))}drawGraph({context:e,canvas:t},s){const{backgroundColour:n}=this;e.strokeStyle=n,e.fillStyle=n,e.lineWidth=1,e.clearRect(0,0,t.width,t.height),e.beginPath();let i=n;const{points:o,lines:r}=s;for(const t of r){const{points:s,hue:n}=t,o=`hsl(${n}, 65%, 60%)`;i!==o&&(e.stroke(),e.strokeStyle=o,e.fillStyle=o,i=o,e.beginPath());let r=!0;for(const t of s){const{x:s,y:n}=t;r?(e.moveTo(s,n),r=!1):e.lineTo(s,n)}}e.stroke();for(const t of o){const{hue:s,x:o,y:r}=t,a=`hsl(${s}, 65%, 60%)`;switch(i!==a&&(e.strokeStyle=a,e.fillStyle=a,i=a),e.beginPath(),t.type){case l.merge:e.arc(o,r,h.iw/7,0,2*Math.PI),e.fill(),e.beginPath(),e.fillStyle=n,e.arc(o,r,h.iw/10,0,2*Math.PI),e.fill(),e.fillStyle=`hsl(${s}, 65%, 60%)`;break;case l.dot:e.arc(o,r,h.iw/8,0,2*Math.PI),e.fill();break;case l.pull:e.clearRect(o-4,r-7,10,14),e.fillRect(o-3,r-5,6,4),e.moveTo(o,r+5),e.lineTo(o-6,r-1),e.lineTo(o+6,r-1),e.fill();break;case l.push:e.clearRect(o-4,r-7,10,14),e.fillRect(o-3,r+1,6,4),e.moveTo(o,r-5),e.lineTo(o-6,r+1),e.lineTo(o+6,r+1),e.fill();break;case l.stash:e.fillRect(o-3,r-3,6,6)}}}}const S=$()(.25,.1,.25,1)},4188:(e,t,s)=>{"use strict";s.d(t,{m:()=>r,z:()=>a});var n=s(1197),i=s(9171),o=s(2888);function r(e,t){return(0,o.createElement)(o.Fragment,null,function(e){return"Tag"===e.refType?(0,o.createElement)("img",{height:14,style:{marginLeft:8,marginRight:-3,marginTop:1},src:(0,n.yn)(["other","TagIcon.svg"]),alt:""}):null}(e),(0,o.createElement)("div",{className:"RefCardTitle"},(0,i.Z)(a(e),t)))}function a(e){return"Tag"===e.refType?e.shortName:"Local"===e.location?"origin"!==e.remoteName&&e.head?`${e.shortName} ➞ ${e.remoteName}`:e.shortName:null!==e.remoteName?`${e.remoteName}/${e.shortName}`:e.shortName}},1578:(e,t,s)=>{"use strict";s.d(t,{U:()=>a,f:()=>l});var n=s(5675),i=s(4907),o=s(2888),r=Object.defineProperty;const a=38;class l extends o.Custom{constructor(){var e;super(...arguments),((e,t,s)=>{t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(this,"symbol"!=typeof(e="onSearchText")?e+"":e,(e=>{i.zj.disableAnimations(),i.zj.restoreAnimationsDebounced(),this.props.store.refs.$refSearch=e}))}render(){const{layout:e,refs:t}=this.props.store,{$commitLeft:s,$commitWidth:i}=e;return(0,o.createElement)("div",{className:"RefScaleHeader",style:{height:a,paddingLeft:s,paddingRight:s,width:s+i+s}},(0,o.createElement)("span",null,"Local"),(0,o.createElement)("div",{className:"RefScaleHeader-input-container"},(0,o.createElement)(n.L,{className:"RefScaleHeader-input",autoFocus:!0,placeholder:"Find a branch",style:{left:s},onText:this.onSearchText,value:t.$refSearch,clearButton:!0})),(0,o.createElement)("span",null,"Remote"))}}},5524:(e,t,s)=>{"use strict";s.d(t,{g:()=>a});var n=s(6815),i=Object.defineProperty,o=(e,t,s)=>((e,t,s)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);class r{constructor(e,t,s){this.channel=e,this.send=t,this.onObject=s,o(this,"callsInProgress",new Map),o(this,"callCount",0),o(this,"call",((e,...t)=>{const s=this.getNextId(),{resolver:i,promise:o}=(0,n.T)(),r={functionName:e,args:t,callNum:s};return this.send(this.channel,r),this.callsInProgress.set(s,i),o})),s.on(e,((e,t)=>{const{callNum:s,result:n}=t;this.callsInProgress.get(s)?.(n),this.callsInProgress.delete(s)}))}getNextId(){return this.callCount++,this.callCount}}const a=new Proxy({},{get:(e,t)=>async(...e)=>l(t,...e)}),l=function(){const{ipcRenderer:e}=s(4157);return"call-in-main",t=e.send,new r("call-in-main",t,e).call;var t}()},9412:(e,t,s)=>{"use strict";function n(e,t){return e.map((({submenu:e,click:s,...i})=>({...i,submenu:e?n(e,t):void 0,click:o(s,t)})))}s.d(t,{Nr:()=>n,RB:()=>l,nY:()=>h,vi:()=>a,xC:()=>u});let i=0;function o(e,t){if(void 0!==e)switch(i++,t){case"main":return c.set(i,e),{name:"callMainMenuFunction",args:[i]};case"context":return r.set(i,e),{name:"callContextMenuFunction",args:[i]}}}const r=new Map;function a(e){r.get(e)?.()}function l(){r.clear()}const c=new Map;function h(e){c.get(e)?.()}function u(){c.clear()}},8774:(e,t,s)=>{"use strict";s.d(t,{BA:()=>g,Bg:()=>r,Gr:()=>h,MO:()=>d,Y5:()=>a,YZ:()=>f,ZR:()=>c,aK:()=>i,aT:()=>m,bs:()=>o,kf:()=>l,qC:()=>u,w1:()=>p,ws:()=>n});const n="CloneForm-dir",i="CloneForm-url",o="NewRepoDialog-dir",r="NewRepoDialog-name",a="ToolbarChangesButton",l="UsernameDialog",c="UsernameDialog-user",h="UsernameDialog-email",u="UsernameDialog-submit",m="WipFileLists-stageAll",d="CommitPane-commit",p="CommitPane-message",g="CommitCardClosed",f="ExpandButton"},6588:(e,t,s)=>{"use strict";s.d(t,{$w:()=>i,bV:()=>n});const n="https://github.com/GitFiend/Support/issues",i="https://gitfiend.com"},5580:(e,t,s)=>{var n=s(3729)(s(9325),"DataView");e.exports=n},8223:(e,t,s)=>{var n=s(3729)(s(9325),"Map");e.exports=n},2804:(e,t,s)=>{var n=s(3729)(s(9325),"Promise");e.exports=n},6545:(e,t,s)=>{var n=s(3729)(s(9325),"Set");e.exports=n},1873:(e,t,s)=>{var n=s(9325).Symbol;e.exports=n},8303:(e,t,s)=>{var n=s(3729)(s(9325),"WeakMap");e.exports=n},695:(e,t,s)=>{var n=s(8096),i=s(2428),o=s(6449),r=s(3656),a=s(361),l=s(7167),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var s=o(e),h=!s&&i(e),u=!s&&!h&&r(e),m=!s&&!h&&!u&&l(e),d=s||h||u||m,p=d?n(e.length,String):[],g=p.length;for(var f in e)!t&&!c.call(e,f)||d&&("length"==f||u&&("offset"==f||"parent"==f)||m&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||a(f,g))||p.push(f);return p}},4932:e=>{e.exports=function(e,t){for(var s=-1,n=null==e?0:e.length,i=Array(n);++s<n;)i[s]=t(e[s],s,e);return i}},1074:e=>{e.exports=function(e){return e.split("")}},2552:(e,t,s)=>{var n=s(1873),i=s(659),o=s(9350),r=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?i(e):o(e)}},7534:(e,t,s)=>{var n=s(2552),i=s(346);e.exports=function(e){return i(e)&&"[object Arguments]"==n(e)}},5083:(e,t,s)=>{var n=s(1882),i=s(7296),o=s(3805),r=s(7473),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,h=l.toString,u=c.hasOwnProperty,m=RegExp("^"+h.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(n(e)?m:a).test(r(e))}},4901:(e,t,s)=>{var n=s(2552),i=s(294),o=s(346),r={};r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0,r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object DataView]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!r[n(e)]}},8984:(e,t,s)=>{var n=s(5527),i=s(3650),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=[];for(var s in Object(e))o.call(e,s)&&"constructor"!=s&&t.push(s);return t}},8096:e=>{e.exports=function(e,t){for(var s=-1,n=Array(e);++s<e;)n[s]=t(s);return n}},7301:e=>{e.exports=function(e){return function(t){return e(t)}}},514:(e,t,s)=>{var n=s(4932);e.exports=function(e,t){return n(t,(function(t){return e[t]}))}},3007:e=>{e.exports=function(e,t){var s=-1,n=e.length;for(t||(t=Array(n));++s<n;)t[s]=e[s];return t}},5481:(e,t,s)=>{var n=s(9325)["__core-js_shared__"];e.exports=n},4840:e=>{var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},3729:(e,t,s)=>{var n=s(5083),i=s(392);e.exports=function(e,t){var s=i(e,t);return n(s)?s:void 0}},659:(e,t,s)=>{var n=s(1873),i=Object.prototype,o=i.hasOwnProperty,r=i.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),s=e[a];try{e[a]=void 0;var n=!0}catch(e){}var i=r.call(e);return n&&(t?e[a]=s:delete e[a]),i}},5861:(e,t,s)=>{var n=s(5580),i=s(8223),o=s(2804),r=s(6545),a=s(8303),l=s(2552),c=s(7473),h="[object Map]",u="[object Promise]",m="[object Set]",d="[object WeakMap]",p="[object DataView]",g=c(n),f=c(i),w=c(o),b=c(r),y=c(a),$=l;(n&&$(new n(new ArrayBuffer(1)))!=p||i&&$(new i)!=h||o&&$(o.resolve())!=u||r&&$(new r)!=m||a&&$(new a)!=d)&&($=function(e){var t=l(e),s="[object Object]"==t?e.constructor:void 0,n=s?c(s):"";if(n)switch(n){case g:return p;case f:return h;case w:return u;case b:return m;case y:return d}return t}),e.exports=$},392:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},9698:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},361:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,s){var n=typeof e;return!!(s=null==s?9007199254740991:s)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<s}},7296:(e,t,s)=>{var n,i=s(5481),o=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!o&&o in e}},5527:e=>{var t=Object.prototype;e.exports=function(e){var s=e&&e.constructor;return e===("function"==typeof s&&s.prototype||t)}},4361:e=>{e.exports=function(e){for(var t,s=[];!(t=e.next()).done;)s.push(t.value);return s}},317:e=>{e.exports=function(e){var t=-1,s=Array(e.size);return e.forEach((function(e,n){s[++t]=[n,e]})),s}},3650:(e,t,s)=>{var n=s(4335)(Object.keys,Object);e.exports=n},6009:(e,t,s)=>{e=s.nmd(e);var n=s(4840),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,r=o&&o.exports===i&&n.process,a=function(){try{return o&&o.require&&o.require("util").types||r&&r.binding&&r.binding("util")}catch(e){}}();e.exports=a},9350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},4335:e=>{e.exports=function(e,t){return function(s){return e(t(s))}}},9325:(e,t,s)=>{var n=s(4840),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();e.exports=o},4247:e=>{e.exports=function(e){var t=-1,s=Array(e.size);return e.forEach((function(e){s[++t]=e})),s}},3912:(e,t,s)=>{var n=s(1074),i=s(9698),o=s(2054);e.exports=function(e){return i(e)?o(e):n(e)}},7473:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},2054:e=>{var t="\\ud800-\\udfff",s="["+t+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^"+t+"]",r="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+n+"|"+i+")?",c="[\\ufe0e\\ufe0f]?",h=c+l+"(?:\\u200d(?:"+[o,r,a].join("|")+")"+c+l+")*",u="(?:"+[o+n+"?",n,r,a,s].join("|")+")",m=RegExp(i+"(?="+i+")|"+u+h,"g");e.exports=function(e){return e.match(m)||[]}},2428:(e,t,s)=>{var n=s(7534),i=s(346),o=Object.prototype,r=o.hasOwnProperty,a=o.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return i(e)&&r.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},6449:e=>{var t=Array.isArray;e.exports=t},4894:(e,t,s)=>{var n=s(1882),i=s(294);e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},3656:(e,t,s)=>{e=s.nmd(e);var n=s(9325),i=s(9935),o=t&&!t.nodeType&&t,r=o&&e&&!e.nodeType&&e,a=r&&r.exports===o?n.Buffer:void 0,l=(a?a.isBuffer:void 0)||i;e.exports=l},1882:(e,t,s)=>{var n=s(2552),i=s(3805);e.exports=function(e){if(!i(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},294:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3805:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},5015:(e,t,s)=>{var n=s(2552),i=s(6449),o=s(346);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==n(e)}},7167:(e,t,s)=>{var n=s(4901),i=s(7301),o=s(6009),r=o&&o.isTypedArray,a=r?i(r):n;e.exports=a},5950:(e,t,s)=>{var n=s(695),i=s(8984),o=s(4894);e.exports=function(e){return o(e)?n(e):i(e)}},9935:e=>{e.exports=function(){return!1}},2306:(e,t,s)=>{var n=s(1873),i=s(3007),o=s(5861),r=s(4894),a=s(5015),l=s(4361),c=s(317),h=s(4247),u=s(3912),m=s(5880),d=n?n.iterator:void 0;e.exports=function(e){if(!e)return[];if(r(e))return a(e)?u(e):i(e);if(d&&e[d])return l(e[d]());var t=o(e);return("[object Map]"==t?c:"[object Set]"==t?h:m)(e)}},5880:(e,t,s)=>{var n=s(514),i=s(5950);e.exports=function(e){return null==e?[]:n(e,i(e))}},9066:(e,t,s)=>{e.exports=s(8544)},8544:(e,t,s)=>{var n=s(2306),i=s(9587),o=/:([a-zA-Z0-9_\-\+]+):/g,r=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function a(e){var t=e.indexOf(":");return t>-1?t===e.length-1?a(e=e.substring(0,t)):a(e=e.substr(t+1)):e}function l(e){return"string"==typeof e&&e.length>0?":"+e+":":e}var c=String.fromCharCode(65039),h=new RegExp(c,"g");function u(e){return e.replace(h,"")}var m=Object.keys(i).reduce((function(e,t){return e[u(i[t])]=t,e}),{}),d={emoji:i,_get:function(e){return m[u(e)]?e:i.hasOwnProperty(e)?i[e]:"string"==typeof(t=e)&&":"!==t[0]?l(t):t;var t},get:function(e){return e=a(e),d._get(e)},find:function(e){return d.findByName(e)||d.findByCode(e)},findByName:function(e){var t=a(e),s=i[t];return s?{emoji:s,key:t}:void 0},findByCode:function(e){var t=u(e),s=m[t];return s?{emoji:i[s],key:s}:void 0},hasEmoji:function(e){return d.hasEmojiByName(e)||d.hasEmojiByCode(e)},hasEmojiByName:function(e){var t=d.findByName(e);return!!t&&t.key===a(e)},hasEmojiByCode:function(e){var t=d.findByCode(e);return!!t&&u(t.emoji)===u(e)},which:function(e,t){var s=u(e),n=m[s];return t?l(n):n},emojify:function(e,t,s){return e?e.split(o).map((function(e,n){if(n%2==0)return e;var i=d._get(e),o=i.indexOf(":")>-1;return o&&"function"==typeof t?t(e):o||"function"!=typeof s?i:s(i,e)})).join(""):""},random:function(){var e=Object.keys(i),t=e[Math.floor(Math.random()*e.length)];return{key:t,emoji:d._get(t)}},search:function(e){var t=Object.keys(i),s=a(e);return t.filter((function(e){return 0===e.toString().indexOf(s)})).map((function(e){return{key:e,emoji:d._get(e)}}))},unemojify:function(e){return e?n(e).map((function(e){return d.which(e,!0)||e})).join(""):""},replace:function(e,t,s){if(!e)return"";var i="function"==typeof t?t:function(){return t},o=n(e),a=o.map((function(e,t){var n=d.findByCode(e);return n&&s&&" "===o[t+1]&&(o[t+1]=""),n?i(n):e})).join("");return s?a.replace(r,""):a},strip:function(e){return d.replace(e,"",!0)}};e.exports=d},6982:e=>{"use strict";e.exports=require("crypto")},4157:e=>{"use strict";e.exports=require("electron")},9587:e=>{"use strict";e.exports=JSON.parse('{"100":"💯","1234":"🔢","umbrella_with_rain_drops":"☔","coffee":"☕","aries":"♈","taurus":"♉","sagittarius":"♐","capricorn":"♑","aquarius":"♒","pisces":"♓","anchor":"⚓","white_check_mark":"✅","sparkles":"✨","question":"❓","grey_question":"❔","grey_exclamation":"❕","exclamation":"❗","heavy_exclamation_mark":"❗","heavy_plus_sign":"➕","heavy_minus_sign":"➖","heavy_division_sign":"➗","hash":"#️⃣","keycap_star":"*️⃣","zero":"0️⃣","one":"1️⃣","two":"2️⃣","three":"3️⃣","four":"4️⃣","five":"5️⃣","six":"6️⃣","seven":"7️⃣","eight":"8️⃣","nine":"9️⃣","copyright":"©️","registered":"®️","mahjong":"🀄","black_joker":"🃏","a":"🅰️","b":"🅱️","o2":"🅾️","parking":"🅿️","ab":"🆎","cl":"🆑","cool":"🆒","free":"🆓","id":"🆔","new":"🆕","ng":"🆖","ok":"🆗","sos":"🆘","up":"🆙","vs":"🆚","flag-ac":"🇦🇨","flag-ad":"🇦🇩","flag-ae":"🇦🇪","flag-af":"🇦🇫","flag-ag":"🇦🇬","flag-ai":"🇦🇮","flag-al":"🇦🇱","flag-am":"🇦🇲","flag-ao":"🇦🇴","flag-aq":"🇦🇶","flag-ar":"🇦🇷","flag-as":"🇦🇸","flag-at":"🇦🇹","flag-au":"🇦🇺","flag-aw":"🇦🇼","flag-ax":"🇦🇽","flag-az":"🇦🇿","flag-ba":"🇧🇦","flag-bb":"🇧🇧","flag-bd":"🇧🇩","flag-be":"🇧🇪","flag-bf":"🇧🇫","flag-bg":"🇧🇬","flag-bh":"🇧🇭","flag-bi":"🇧🇮","flag-bj":"🇧🇯","flag-bl":"🇧🇱","flag-bm":"🇧🇲","flag-bn":"🇧🇳","flag-bo":"🇧🇴","flag-bq":"🇧🇶","flag-br":"🇧🇷","flag-bs":"🇧🇸","flag-bt":"🇧🇹","flag-bv":"🇧🇻","flag-bw":"🇧🇼","flag-by":"🇧🇾","flag-bz":"🇧🇿","flag-ca":"🇨🇦","flag-cc":"🇨🇨","flag-cd":"🇨🇩","flag-cf":"🇨🇫","flag-cg":"🇨🇬","flag-ch":"🇨🇭","flag-ci":"🇨🇮","flag-ck":"🇨🇰","flag-cl":"🇨🇱","flag-cm":"🇨🇲","cn":"🇨🇳","flag-cn":"🇨🇳","flag-co":"🇨🇴","flag-cp":"🇨🇵","flag-cr":"🇨🇷","flag-cu":"🇨🇺","flag-cv":"🇨🇻","flag-cw":"🇨🇼","flag-cx":"🇨🇽","flag-cy":"🇨🇾","flag-cz":"🇨🇿","de":"🇩🇪","flag-de":"🇩🇪","flag-dg":"🇩🇬","flag-dj":"🇩🇯","flag-dk":"🇩🇰","flag-dm":"🇩🇲","flag-do":"🇩🇴","flag-dz":"🇩🇿","flag-ea":"🇪🇦","flag-ec":"🇪🇨","flag-ee":"🇪🇪","flag-eg":"🇪🇬","flag-eh":"🇪🇭","flag-er":"🇪🇷","es":"🇪🇸","flag-es":"🇪🇸","flag-et":"🇪🇹","flag-eu":"🇪🇺","flag-fi":"🇫🇮","flag-fj":"🇫🇯","flag-fk":"🇫🇰","flag-fm":"🇫🇲","flag-fo":"🇫🇴","fr":"🇫🇷","flag-fr":"🇫🇷","flag-ga":"🇬🇦","gb":"🇬🇧","uk":"🇬🇧","flag-gb":"🇬🇧","flag-gd":"🇬🇩","flag-ge":"🇬🇪","flag-gf":"🇬🇫","flag-gg":"🇬🇬","flag-gh":"🇬🇭","flag-gi":"🇬🇮","flag-gl":"🇬🇱","flag-gm":"🇬🇲","flag-gn":"🇬🇳","flag-gp":"🇬🇵","flag-gq":"🇬🇶","flag-gr":"🇬🇷","flag-gs":"🇬🇸","flag-gt":"🇬🇹","flag-gu":"🇬🇺","flag-gw":"🇬🇼","flag-gy":"🇬🇾","flag-hk":"🇭🇰","flag-hm":"🇭🇲","flag-hn":"🇭🇳","flag-hr":"🇭🇷","flag-ht":"🇭🇹","flag-hu":"🇭🇺","flag-ic":"🇮🇨","flag-id":"🇮🇩","flag-ie":"🇮🇪","flag-il":"🇮🇱","flag-im":"🇮🇲","flag-in":"🇮🇳","flag-io":"🇮🇴","flag-iq":"🇮🇶","flag-ir":"🇮🇷","flag-is":"🇮🇸","it":"🇮🇹","flag-it":"🇮🇹","flag-je":"🇯🇪","flag-jm":"🇯🇲","flag-jo":"🇯🇴","jp":"🇯🇵","flag-jp":"🇯🇵","flag-ke":"🇰🇪","flag-kg":"🇰🇬","flag-kh":"🇰🇭","flag-ki":"🇰🇮","flag-km":"🇰🇲","flag-kn":"🇰🇳","flag-kp":"🇰🇵","kr":"🇰🇷","flag-kr":"🇰🇷","flag-kw":"🇰🇼","flag-ky":"🇰🇾","flag-kz":"🇰🇿","flag-la":"🇱🇦","flag-lb":"🇱🇧","flag-lc":"🇱🇨","flag-li":"🇱🇮","flag-lk":"🇱🇰","flag-lr":"🇱🇷","flag-ls":"🇱🇸","flag-lt":"🇱🇹","flag-lu":"🇱🇺","flag-lv":"🇱🇻","flag-ly":"🇱🇾","flag-ma":"🇲🇦","flag-mc":"🇲🇨","flag-md":"🇲🇩","flag-me":"🇲🇪","flag-mf":"🇲🇫","flag-mg":"🇲🇬","flag-mh":"🇲🇭","flag-mk":"🇲🇰","flag-ml":"🇲🇱","flag-mm":"🇲🇲","flag-mn":"🇲🇳","flag-mo":"🇲🇴","flag-mp":"🇲🇵","flag-mq":"🇲🇶","flag-mr":"🇲🇷","flag-ms":"🇲🇸","flag-mt":"🇲🇹","flag-mu":"🇲🇺","flag-mv":"🇲🇻","flag-mw":"🇲🇼","flag-mx":"🇲🇽","flag-my":"🇲🇾","flag-mz":"🇲🇿","flag-na":"🇳🇦","flag-nc":"🇳🇨","flag-ne":"🇳🇪","flag-nf":"🇳🇫","flag-ng":"🇳🇬","flag-ni":"🇳🇮","flag-nl":"🇳🇱","flag-no":"🇳🇴","flag-np":"🇳🇵","flag-nr":"🇳🇷","flag-nu":"🇳🇺","flag-nz":"🇳🇿","flag-om":"🇴🇲","flag-pa":"🇵🇦","flag-pe":"🇵🇪","flag-pf":"🇵🇫","flag-pg":"🇵🇬","flag-ph":"🇵🇭","flag-pk":"🇵🇰","flag-pl":"🇵🇱","flag-pm":"🇵🇲","flag-pn":"🇵🇳","flag-pr":"🇵🇷","flag-ps":"🇵🇸","flag-pt":"🇵🇹","flag-pw":"🇵🇼","flag-py":"🇵🇾","flag-qa":"🇶🇦","flag-re":"🇷🇪","flag-ro":"🇷🇴","flag-rs":"🇷🇸","ru":"🇷🇺","flag-ru":"🇷🇺","flag-rw":"🇷🇼","flag-sa":"🇸🇦","flag-sb":"🇸🇧","flag-sc":"🇸🇨","flag-sd":"🇸🇩","flag-se":"🇸🇪","flag-sg":"🇸🇬","flag-sh":"🇸🇭","flag-si":"🇸🇮","flag-sj":"🇸🇯","flag-sk":"🇸🇰","flag-sl":"🇸🇱","flag-sm":"🇸🇲","flag-sn":"🇸🇳","flag-so":"🇸🇴","flag-sr":"🇸🇷","flag-ss":"🇸🇸","flag-st":"🇸🇹","flag-sv":"🇸🇻","flag-sx":"🇸🇽","flag-sy":"🇸🇾","flag-sz":"🇸🇿","flag-ta":"🇹🇦","flag-tc":"🇹🇨","flag-td":"🇹🇩","flag-tf":"🇹🇫","flag-tg":"🇹🇬","flag-th":"🇹🇭","flag-tj":"🇹🇯","flag-tk":"🇹🇰","flag-tl":"🇹🇱","flag-tm":"🇹🇲","flag-tn":"🇹🇳","flag-to":"🇹🇴","flag-tr":"🇹🇷","flag-tt":"🇹🇹","flag-tv":"🇹🇻","flag-tw":"🇹🇼","flag-tz":"🇹🇿","flag-ua":"🇺🇦","flag-ug":"🇺🇬","flag-um":"🇺🇲","flag-un":"🇺🇳","us":"🇺🇸","flag-us":"🇺🇸","flag-uy":"🇺🇾","flag-uz":"🇺🇿","flag-va":"🇻🇦","flag-vc":"🇻🇨","flag-ve":"🇻🇪","flag-vg":"🇻🇬","flag-vi":"🇻🇮","flag-vn":"🇻🇳","flag-vu":"🇻🇺","flag-wf":"🇼🇫","flag-ws":"🇼🇸","flag-xk":"🇽🇰","flag-ye":"🇾🇪","flag-yt":"🇾🇹","flag-za":"🇿🇦","flag-zm":"🇿🇲","flag-zw":"🇿🇼","koko":"🈁","sa":"🈂️","u7121":"🈚","u6307":"🈯","u7981":"🈲","u7a7a":"🈳","u5408":"🈴","u6e80":"🈵","u6709":"🈶","u6708":"🈷️","u7533":"🈸","u5272":"🈹","u55b6":"🈺","ideograph_advantage":"🉐","accept":"🉑","cyclone":"🌀","foggy":"🌁","closed_umbrella":"🌂","night_with_stars":"🌃","sunrise_over_mountains":"🌄","sunrise":"🌅","city_sunset":"🌆","city_sunrise":"🌇","rainbow":"🌈","bridge_at_night":"🌉","ocean":"🌊","volcano":"🌋","milky_way":"🌌","earth_africa":"🌍","earth_americas":"🌎","earth_asia":"🌏","globe_with_meridians":"🌐","new_moon":"🌑","waxing_crescent_moon":"🌒","first_quarter_moon":"🌓","moon":"🌔","waxing_gibbous_moon":"🌔","full_moon":"🌕","waning_gibbous_moon":"🌖","last_quarter_moon":"🌗","waning_crescent_moon":"🌘","crescent_moon":"🌙","new_moon_with_face":"🌚","first_quarter_moon_with_face":"🌛","last_quarter_moon_with_face":"🌜","full_moon_with_face":"🌝","sun_with_face":"🌞","star2":"🌟","stars":"🌠","thermometer":"🌡️","mostly_sunny":"🌤️","sun_small_cloud":"🌤️","barely_sunny":"🌥️","sun_behind_cloud":"🌥️","partly_sunny_rain":"🌦️","sun_behind_rain_cloud":"🌦️","rain_cloud":"🌧️","snow_cloud":"🌨️","lightning":"🌩️","lightning_cloud":"🌩️","tornado":"🌪️","tornado_cloud":"🌪️","fog":"🌫️","wind_blowing_face":"🌬️","hotdog":"🌭","taco":"🌮","burrito":"🌯","chestnut":"🌰","seedling":"🌱","evergreen_tree":"🌲","deciduous_tree":"🌳","palm_tree":"🌴","cactus":"🌵","hot_pepper":"🌶️","tulip":"🌷","cherry_blossom":"🌸","rose":"🌹","hibiscus":"🌺","sunflower":"🌻","blossom":"🌼","corn":"🌽","ear_of_rice":"🌾","herb":"🌿","four_leaf_clover":"🍀","maple_leaf":"🍁","fallen_leaf":"🍂","leaves":"🍃","mushroom":"🍄","tomato":"🍅","eggplant":"🍆","grapes":"🍇","melon":"🍈","watermelon":"🍉","tangerine":"🍊","lemon":"🍋","banana":"🍌","pineapple":"🍍","apple":"🍎","green_apple":"🍏","pear":"🍐","peach":"🍑","cherries":"🍒","strawberry":"🍓","hamburger":"🍔","pizza":"🍕","meat_on_bone":"🍖","poultry_leg":"🍗","rice_cracker":"🍘","rice_ball":"🍙","rice":"🍚","curry":"🍛","ramen":"🍜","spaghetti":"🍝","bread":"🍞","fries":"🍟","sweet_potato":"🍠","dango":"🍡","oden":"🍢","sushi":"🍣","fried_shrimp":"🍤","fish_cake":"🍥","icecream":"🍦","shaved_ice":"🍧","ice_cream":"🍨","doughnut":"🍩","cookie":"🍪","chocolate_bar":"🍫","candy":"🍬","lollipop":"🍭","custard":"🍮","honey_pot":"🍯","cake":"🍰","bento":"🍱","stew":"🍲","fried_egg":"🍳","cooking":"🍳","fork_and_knife":"🍴","tea":"🍵","sake":"🍶","wine_glass":"🍷","cocktail":"🍸","tropical_drink":"🍹","beer":"🍺","beers":"🍻","baby_bottle":"🍼","knife_fork_plate":"🍽️","champagne":"🍾","popcorn":"🍿","ribbon":"🎀","gift":"🎁","birthday":"🎂","jack_o_lantern":"🎃","christmas_tree":"🎄","santa":"🎅","fireworks":"🎆","sparkler":"🎇","balloon":"🎈","tada":"🎉","confetti_ball":"🎊","tanabata_tree":"🎋","crossed_flags":"🎌","bamboo":"🎍","dolls":"🎎","flags":"🎏","wind_chime":"🎐","rice_scene":"🎑","school_satchel":"🎒","mortar_board":"🎓","medal":"🎖️","reminder_ribbon":"🎗️","studio_microphone":"🎙️","level_slider":"🎚️","control_knobs":"🎛️","film_frames":"🎞️","admission_tickets":"🎟️","carousel_horse":"🎠","ferris_wheel":"🎡","roller_coaster":"🎢","fishing_pole_and_fish":"🎣","microphone":"🎤","movie_camera":"🎥","cinema":"🎦","headphones":"🎧","art":"🎨","tophat":"🎩","circus_tent":"🎪","ticket":"🎫","clapper":"🎬","performing_arts":"🎭","video_game":"🎮","dart":"🎯","slot_machine":"🎰","8ball":"🎱","game_die":"🎲","bowling":"🎳","flower_playing_cards":"🎴","musical_note":"🎵","notes":"🎶","saxophone":"🎷","guitar":"🎸","musical_keyboard":"🎹","trumpet":"🎺","violin":"🎻","musical_score":"🎼","running_shirt_with_sash":"🎽","tennis":"🎾","ski":"🎿","basketball":"🏀","checkered_flag":"🏁","snowboarder":"🏂","woman-running":"🏃‍♀️","man-running":"🏃‍♂️","runner":"🏃‍♂️","running":"🏃‍♂️","woman-surfing":"🏄‍♀️","man-surfing":"🏄‍♂️","surfer":"🏄‍♂️","sports_medal":"🏅","trophy":"🏆","horse_racing":"🏇","football":"🏈","rugby_football":"🏉","woman-swimming":"🏊‍♀️","man-swimming":"🏊‍♂️","swimmer":"🏊‍♂️","woman-lifting-weights":"🏋️‍♀️","man-lifting-weights":"🏋️‍♂️","weight_lifter":"🏋️‍♂️","woman-golfing":"🏌️‍♀️","man-golfing":"🏌️‍♂️","golfer":"🏌️‍♂️","racing_motorcycle":"🏍️","racing_car":"🏎️","cricket_bat_and_ball":"🏏","volleyball":"🏐","field_hockey_stick_and_ball":"🏑","ice_hockey_stick_and_puck":"🏒","table_tennis_paddle_and_ball":"🏓","snow_capped_mountain":"🏔️","camping":"🏕️","beach_with_umbrella":"🏖️","building_construction":"🏗️","house_buildings":"🏘️","cityscape":"🏙️","derelict_house_building":"🏚️","classical_building":"🏛️","desert":"🏜️","desert_island":"🏝️","national_park":"🏞️","stadium":"🏟️","house":"🏠","house_with_garden":"🏡","office":"🏢","post_office":"🏣","european_post_office":"🏤","hospital":"🏥","bank":"🏦","atm":"🏧","hotel":"🏨","love_hotel":"🏩","convenience_store":"🏪","school":"🏫","department_store":"🏬","factory":"🏭","izakaya_lantern":"🏮","lantern":"🏮","japanese_castle":"🏯","european_castle":"🏰","rainbow-flag":"🏳️‍🌈","transgender_flag":"🏳️‍⚧️","waving_white_flag":"🏳️","pirate_flag":"🏴‍☠️","flag-england":"🏴󠁧󠁢󠁥󠁮󠁧󠁿","flag-scotland":"🏴󠁧󠁢󠁳󠁣󠁴󠁿","flag-wales":"🏴󠁧󠁢󠁷󠁬󠁳󠁿","waving_black_flag":"🏴","rosette":"🏵️","label":"🏷️","badminton_racquet_and_shuttlecock":"🏸","bow_and_arrow":"🏹","amphora":"🏺","skin-tone-2":"🏻","skin-tone-3":"🏼","skin-tone-4":"🏽","skin-tone-5":"🏾","skin-tone-6":"🏿","rat":"🐀","mouse2":"🐁","ox":"🐂","water_buffalo":"🐃","cow2":"🐄","tiger2":"🐅","leopard":"🐆","rabbit2":"🐇","black_cat":"🐈‍⬛","cat2":"🐈","dragon":"🐉","crocodile":"🐊","whale2":"🐋","snail":"🐌","snake":"🐍","racehorse":"🐎","ram":"🐏","goat":"🐐","sheep":"🐑","monkey":"🐒","rooster":"🐓","chicken":"🐔","service_dog":"🐕‍🦺","dog2":"🐕","pig2":"🐖","boar":"🐗","elephant":"🐘","octopus":"🐙","shell":"🐚","bug":"🐛","ant":"🐜","bee":"🐝","honeybee":"🐝","ladybug":"🐞","lady_beetle":"🐞","fish":"🐟","tropical_fish":"🐠","blowfish":"🐡","turtle":"🐢","hatching_chick":"🐣","baby_chick":"🐤","hatched_chick":"🐥","bird":"🐦","penguin":"🐧","koala":"🐨","poodle":"🐩","dromedary_camel":"🐪","camel":"🐫","dolphin":"🐬","flipper":"🐬","mouse":"🐭","cow":"🐮","tiger":"🐯","rabbit":"🐰","cat":"🐱","dragon_face":"🐲","whale":"🐳","horse":"🐴","monkey_face":"🐵","dog":"🐶","pig":"🐷","frog":"🐸","hamster":"🐹","wolf":"🐺","polar_bear":"🐻‍❄️","bear":"🐻","panda_face":"🐼","pig_nose":"🐽","feet":"🐾","paw_prints":"🐾","chipmunk":"🐿️","eyes":"👀","eye-in-speech-bubble":"👁️‍🗨️","eye":"👁️","ear":"👂","nose":"👃","lips":"👄","tongue":"👅","point_up_2":"👆","point_down":"👇","point_left":"👈","point_right":"👉","facepunch":"👊","punch":"👊","wave":"👋","ok_hand":"👌","+1":"👍","thumbsup":"👍","-1":"👎","thumbsdown":"👎","clap":"👏","open_hands":"👐","crown":"👑","womans_hat":"👒","eyeglasses":"👓","necktie":"👔","shirt":"👕","tshirt":"👕","jeans":"👖","dress":"👗","kimono":"👘","bikini":"👙","womans_clothes":"👚","purse":"👛","handbag":"👜","pouch":"👝","mans_shoe":"👞","shoe":"👞","athletic_shoe":"👟","high_heel":"👠","sandal":"👡","boot":"👢","footprints":"👣","bust_in_silhouette":"👤","busts_in_silhouette":"👥","boy":"👦","girl":"👧","male-farmer":"👨‍🌾","male-cook":"👨‍🍳","man_feeding_baby":"👨‍🍼","male-student":"👨‍🎓","male-singer":"👨‍🎤","male-artist":"👨‍🎨","male-teacher":"👨‍🏫","male-factory-worker":"👨‍🏭","man-boy-boy":"👨‍👦‍👦","man-boy":"👨‍👦","man-girl-boy":"👨‍👧‍👦","man-girl-girl":"👨‍👧‍👧","man-girl":"👨‍👧","man-man-boy":"👨‍👨‍👦","man-man-boy-boy":"👨‍👨‍👦‍👦","man-man-girl":"👨‍👨‍👧","man-man-girl-boy":"👨‍👨‍👧‍👦","man-man-girl-girl":"👨‍👨‍👧‍👧","man-woman-boy":"👨‍👩‍👦","family":"👨‍👩‍👦","man-woman-boy-boy":"👨‍👩‍👦‍👦","man-woman-girl":"👨‍👩‍👧","man-woman-girl-boy":"👨‍👩‍👧‍👦","man-woman-girl-girl":"👨‍👩‍👧‍👧","male-technologist":"👨‍💻","male-office-worker":"👨‍💼","male-mechanic":"👨‍🔧","male-scientist":"👨‍🔬","male-astronaut":"👨‍🚀","male-firefighter":"👨‍🚒","man_with_probing_cane":"👨‍🦯","red_haired_man":"👨‍🦰","curly_haired_man":"👨‍🦱","bald_man":"👨‍🦲","white_haired_man":"👨‍🦳","man_in_motorized_wheelchair":"👨‍🦼","man_in_manual_wheelchair":"👨‍🦽","male-doctor":"👨‍⚕️","male-judge":"👨‍⚖️","male-pilot":"👨‍✈️","man-heart-man":"👨‍❤️‍👨","man-kiss-man":"👨‍❤️‍💋‍👨","man":"👨","female-farmer":"👩‍🌾","female-cook":"👩‍🍳","woman_feeding_baby":"👩‍🍼","female-student":"👩‍🎓","female-singer":"👩‍🎤","female-artist":"👩‍🎨","female-teacher":"👩‍🏫","female-factory-worker":"👩‍🏭","woman-boy-boy":"👩‍👦‍👦","woman-boy":"👩‍👦","woman-girl-boy":"👩‍👧‍👦","woman-girl-girl":"👩‍👧‍👧","woman-girl":"👩‍👧","woman-woman-boy":"👩‍👩‍👦","woman-woman-boy-boy":"👩‍👩‍👦‍👦","woman-woman-girl":"👩‍👩‍👧","woman-woman-girl-boy":"👩‍👩‍👧‍👦","woman-woman-girl-girl":"👩‍👩‍👧‍👧","female-technologist":"👩‍💻","female-office-worker":"👩‍💼","female-mechanic":"👩‍🔧","female-scientist":"👩‍🔬","female-astronaut":"👩‍🚀","female-firefighter":"👩‍🚒","woman_with_probing_cane":"👩‍🦯","red_haired_woman":"👩‍🦰","curly_haired_woman":"👩‍🦱","bald_woman":"👩‍🦲","white_haired_woman":"👩‍🦳","woman_in_motorized_wheelchair":"👩‍🦼","woman_in_manual_wheelchair":"👩‍🦽","female-doctor":"👩‍⚕️","female-judge":"👩‍⚖️","female-pilot":"👩‍✈️","woman-heart-man":"👩‍❤️‍👨","woman-heart-woman":"👩‍❤️‍👩","woman-kiss-man":"👩‍❤️‍💋‍👨","woman-kiss-woman":"👩‍❤️‍💋‍👩","woman":"👩","man_and_woman_holding_hands":"👫","woman_and_man_holding_hands":"👫","couple":"👫","two_men_holding_hands":"👬","men_holding_hands":"👬","two_women_holding_hands":"👭","women_holding_hands":"👭","female-police-officer":"👮‍♀️","male-police-officer":"👮‍♂️","cop":"👮‍♂️","women-with-bunny-ears-partying":"👯‍♀️","woman-with-bunny-ears-partying":"👯‍♀️","dancers":"👯‍♀️","men-with-bunny-ears-partying":"👯‍♂️","man-with-bunny-ears-partying":"👯‍♂️","woman_with_veil":"👰‍♀️","man_with_veil":"👰‍♂️","bride_with_veil":"👰","blond-haired-woman":"👱‍♀️","blond-haired-man":"👱‍♂️","person_with_blond_hair":"👱‍♂️","man_with_gua_pi_mao":"👲","woman-wearing-turban":"👳‍♀️","man-wearing-turban":"👳‍♂️","man_with_turban":"👳‍♂️","older_man":"👴","older_woman":"👵","baby":"👶","female-construction-worker":"👷‍♀️","male-construction-worker":"👷‍♂️","construction_worker":"👷‍♂️","princess":"👸","japanese_ogre":"👹","japanese_goblin":"👺","ghost":"👻","angel":"👼","alien":"👽","space_invader":"👾","imp":"👿","skull":"💀","woman-tipping-hand":"💁‍♀️","information_desk_person":"💁‍♀️","man-tipping-hand":"💁‍♂️","female-guard":"💂‍♀️","male-guard":"💂‍♂️","guardsman":"💂‍♂️","dancer":"💃","lipstick":"💄","nail_care":"💅","woman-getting-massage":"💆‍♀️","massage":"💆‍♀️","man-getting-massage":"💆‍♂️","woman-getting-haircut":"💇‍♀️","haircut":"💇‍♀️","man-getting-haircut":"💇‍♂️","barber":"💈","syringe":"💉","pill":"💊","kiss":"💋","love_letter":"💌","ring":"💍","gem":"💎","couplekiss":"💏","bouquet":"💐","couple_with_heart":"💑","wedding":"💒","heartbeat":"💓","broken_heart":"💔","two_hearts":"💕","sparkling_heart":"💖","heartpulse":"💗","cupid":"💘","blue_heart":"💙","green_heart":"💚","yellow_heart":"💛","purple_heart":"💜","gift_heart":"💝","revolving_hearts":"💞","heart_decoration":"💟","diamond_shape_with_a_dot_inside":"💠","bulb":"💡","anger":"💢","bomb":"💣","zzz":"💤","boom":"💥","collision":"💥","sweat_drops":"💦","droplet":"💧","dash":"💨","hankey":"💩","poop":"💩","shit":"💩","muscle":"💪","dizzy":"💫","speech_balloon":"💬","thought_balloon":"💭","white_flower":"💮","moneybag":"💰","currency_exchange":"💱","heavy_dollar_sign":"💲","credit_card":"💳","yen":"💴","dollar":"💵","euro":"💶","pound":"💷","money_with_wings":"💸","chart":"💹","seat":"💺","computer":"💻","briefcase":"💼","minidisc":"💽","floppy_disk":"💾","cd":"💿","dvd":"📀","file_folder":"📁","open_file_folder":"📂","page_with_curl":"📃","page_facing_up":"📄","date":"📅","calendar":"📆","card_index":"📇","chart_with_upwards_trend":"📈","chart_with_downwards_trend":"📉","bar_chart":"📊","clipboard":"📋","pushpin":"📌","round_pushpin":"📍","paperclip":"📎","straight_ruler":"📏","triangular_ruler":"📐","bookmark_tabs":"📑","ledger":"📒","notebook":"📓","notebook_with_decorative_cover":"📔","closed_book":"📕","book":"📖","open_book":"📖","green_book":"📗","blue_book":"📘","orange_book":"📙","books":"📚","name_badge":"📛","scroll":"📜","memo":"📝","pencil":"📝","telephone_receiver":"📞","pager":"📟","fax":"📠","satellite_antenna":"📡","loudspeaker":"📢","mega":"📣","outbox_tray":"📤","inbox_tray":"📥","package":"📦","e-mail":"📧","incoming_envelope":"📨","envelope_with_arrow":"📩","mailbox_closed":"📪","mailbox":"📫","mailbox_with_mail":"📬","mailbox_with_no_mail":"📭","postbox":"📮","postal_horn":"📯","newspaper":"📰","iphone":"📱","calling":"📲","vibration_mode":"📳","mobile_phone_off":"📴","no_mobile_phones":"📵","signal_strength":"📶","camera":"📷","camera_with_flash":"📸","video_camera":"📹","tv":"📺","radio":"📻","vhs":"📼","film_projector":"📽️","prayer_beads":"📿","twisted_rightwards_arrows":"🔀","repeat":"🔁","repeat_one":"🔂","arrows_clockwise":"🔃","arrows_counterclockwise":"🔄","low_brightness":"🔅","high_brightness":"🔆","mute":"🔇","speaker":"🔈","sound":"🔉","loud_sound":"🔊","battery":"🔋","electric_plug":"🔌","mag":"🔍","mag_right":"🔎","lock_with_ink_pen":"🔏","closed_lock_with_key":"🔐","key":"🔑","lock":"🔒","unlock":"🔓","bell":"🔔","no_bell":"🔕","bookmark":"🔖","link":"🔗","radio_button":"🔘","back":"🔙","end":"🔚","on":"🔛","soon":"🔜","top":"🔝","underage":"🔞","keycap_ten":"🔟","capital_abcd":"🔠","abcd":"🔡","symbols":"🔣","abc":"🔤","fire":"🔥","flashlight":"🔦","wrench":"🔧","hammer":"🔨","nut_and_bolt":"🔩","hocho":"🔪","knife":"🔪","gun":"🔫","microscope":"🔬","telescope":"🔭","crystal_ball":"🔮","six_pointed_star":"🔯","beginner":"🔰","trident":"🔱","black_square_button":"🔲","white_square_button":"🔳","red_circle":"🔴","large_blue_circle":"🔵","large_orange_diamond":"🔶","large_blue_diamond":"🔷","small_orange_diamond":"🔸","small_blue_diamond":"🔹","small_red_triangle":"🔺","small_red_triangle_down":"🔻","arrow_up_small":"🔼","arrow_down_small":"🔽","om_symbol":"🕉️","dove_of_peace":"🕊️","kaaba":"🕋","mosque":"🕌","synagogue":"🕍","menorah_with_nine_branches":"🕎","clock1":"🕐","clock2":"🕑","clock3":"🕒","clock4":"🕓","clock5":"🕔","clock6":"🕕","clock7":"🕖","clock8":"🕗","clock9":"🕘","clock10":"🕙","clock11":"🕚","clock12":"🕛","clock130":"🕜","clock230":"🕝","clock330":"🕞","clock430":"🕟","clock530":"🕠","clock630":"🕡","clock730":"🕢","clock830":"🕣","clock930":"🕤","clock1030":"🕥","clock1130":"🕦","clock1230":"🕧","candle":"🕯️","mantelpiece_clock":"🕰️","hole":"🕳️","man_in_business_suit_levitating":"🕴️","female-detective":"🕵️‍♀️","male-detective":"🕵️‍♂️","sleuth_or_spy":"🕵️‍♂️","dark_sunglasses":"🕶️","spider":"🕷️","spider_web":"🕸️","joystick":"🕹️","man_dancing":"🕺","linked_paperclips":"🖇️","lower_left_ballpoint_pen":"🖊️","lower_left_fountain_pen":"🖋️","lower_left_paintbrush":"🖌️","lower_left_crayon":"🖍️","raised_hand_with_fingers_splayed":"🖐️","middle_finger":"🖕","reversed_hand_with_middle_finger_extended":"🖕","spock-hand":"🖖","black_heart":"🖤","desktop_computer":"🖥️","printer":"🖨️","three_button_mouse":"🖱️","trackball":"🖲️","frame_with_picture":"🖼️","card_index_dividers":"🗂️","card_file_box":"🗃️","file_cabinet":"🗄️","wastebasket":"🗑️","spiral_note_pad":"🗒️","spiral_calendar_pad":"🗓️","compression":"🗜️","old_key":"🗝️","rolled_up_newspaper":"🗞️","dagger_knife":"🗡️","speaking_head_in_silhouette":"🗣️","left_speech_bubble":"🗨️","right_anger_bubble":"🗯️","ballot_box_with_ballot":"🗳️","world_map":"🗺️","mount_fuji":"🗻","tokyo_tower":"🗼","statue_of_liberty":"🗽","japan":"🗾","moyai":"🗿","grinning":"😀","grin":"😁","joy":"😂","smiley":"😃","smile":"😄","sweat_smile":"😅","laughing":"😆","satisfied":"😆","innocent":"😇","smiling_imp":"😈","wink":"😉","blush":"😊","yum":"😋","relieved":"😌","heart_eyes":"😍","sunglasses":"😎","smirk":"😏","neutral_face":"😐","expressionless":"😑","unamused":"😒","sweat":"😓","pensive":"😔","confused":"😕","confounded":"😖","kissing":"😗","kissing_heart":"😘","kissing_smiling_eyes":"😙","kissing_closed_eyes":"😚","stuck_out_tongue":"😛","stuck_out_tongue_winking_eye":"😜","stuck_out_tongue_closed_eyes":"😝","disappointed":"😞","worried":"😟","angry":"😠","rage":"😡","cry":"😢","persevere":"😣","triumph":"😤","disappointed_relieved":"😥","frowning":"😦","anguished":"😧","fearful":"😨","weary":"😩","sleepy":"😪","tired_face":"😫","grimacing":"😬","sob":"😭","face_exhaling":"😮‍💨","open_mouth":"😮","hushed":"😯","cold_sweat":"😰","scream":"😱","astonished":"😲","flushed":"😳","sleeping":"😴","face_with_spiral_eyes":"😵‍💫","dizzy_face":"😵","face_in_clouds":"😶‍🌫️","no_mouth":"😶","mask":"😷","smile_cat":"😸","joy_cat":"😹","smiley_cat":"😺","heart_eyes_cat":"😻","smirk_cat":"😼","kissing_cat":"😽","pouting_cat":"😾","crying_cat_face":"😿","scream_cat":"🙀","slightly_frowning_face":"🙁","slightly_smiling_face":"🙂","upside_down_face":"🙃","face_with_rolling_eyes":"🙄","woman-gesturing-no":"🙅‍♀️","no_good":"🙅‍♀️","man-gesturing-no":"🙅‍♂️","woman-gesturing-ok":"🙆‍♀️","ok_woman":"🙆‍♀️","man-gesturing-ok":"🙆‍♂️","woman-bowing":"🙇‍♀️","man-bowing":"🙇‍♂️","bow":"🙇‍♂️","see_no_evil":"🙈","hear_no_evil":"🙉","speak_no_evil":"🙊","woman-raising-hand":"🙋‍♀️","raising_hand":"🙋‍♀️","man-raising-hand":"🙋‍♂️","raised_hands":"🙌","woman-frowning":"🙍‍♀️","person_frowning":"🙍‍♀️","man-frowning":"🙍‍♂️","woman-pouting":"🙎‍♀️","person_with_pouting_face":"🙎‍♀️","man-pouting":"🙎‍♂️","pray":"🙏","rocket":"🚀","helicopter":"🚁","steam_locomotive":"🚂","railway_car":"🚃","bullettrain_side":"🚄","bullettrain_front":"🚅","train2":"🚆","metro":"🚇","light_rail":"🚈","station":"🚉","tram":"🚊","train":"🚋","bus":"🚌","oncoming_bus":"🚍","trolleybus":"🚎","busstop":"🚏","minibus":"🚐","ambulance":"🚑","fire_engine":"🚒","police_car":"🚓","oncoming_police_car":"🚔","taxi":"🚕","oncoming_taxi":"🚖","car":"🚗","red_car":"🚗","oncoming_automobile":"🚘","blue_car":"🚙","truck":"🚚","articulated_lorry":"🚛","tractor":"🚜","monorail":"🚝","mountain_railway":"🚞","suspension_railway":"🚟","mountain_cableway":"🚠","aerial_tramway":"🚡","ship":"🚢","woman-rowing-boat":"🚣‍♀️","man-rowing-boat":"🚣‍♂️","rowboat":"🚣‍♂️","speedboat":"🚤","traffic_light":"🚥","vertical_traffic_light":"🚦","construction":"🚧","rotating_light":"🚨","triangular_flag_on_post":"🚩","door":"🚪","no_entry_sign":"🚫","smoking":"🚬","no_smoking":"🚭","put_litter_in_its_place":"🚮","do_not_litter":"🚯","potable_water":"🚰","non-potable_water":"🚱","bike":"🚲","no_bicycles":"🚳","woman-biking":"🚴‍♀️","man-biking":"🚴‍♂️","bicyclist":"🚴‍♂️","woman-mountain-biking":"🚵‍♀️","man-mountain-biking":"🚵‍♂️","mountain_bicyclist":"🚵‍♂️","woman-walking":"🚶‍♀️","man-walking":"🚶‍♂️","walking":"🚶‍♂️","no_pedestrians":"🚷","children_crossing":"🚸","mens":"🚹","womens":"🚺","restroom":"🚻","baby_symbol":"🚼","toilet":"🚽","wc":"🚾","shower":"🚿","bath":"🛀","bathtub":"🛁","passport_control":"🛂","customs":"🛃","baggage_claim":"🛄","left_luggage":"🛅","couch_and_lamp":"🛋️","sleeping_accommodation":"🛌","shopping_bags":"🛍️","bellhop_bell":"🛎️","bed":"🛏️","place_of_worship":"🛐","octagonal_sign":"🛑","shopping_trolley":"🛒","hindu_temple":"🛕","hut":"🛖","elevator":"🛗","hammer_and_wrench":"🛠️","shield":"🛡️","oil_drum":"🛢️","motorway":"🛣️","railway_track":"🛤️","motor_boat":"🛥️","small_airplane":"🛩️","airplane_departure":"🛫","airplane_arriving":"🛬","satellite":"🛰️","passenger_ship":"🛳️","scooter":"🛴","motor_scooter":"🛵","canoe":"🛶","sled":"🛷","flying_saucer":"🛸","skateboard":"🛹","auto_rickshaw":"🛺","pickup_truck":"🛻","roller_skate":"🛼","large_orange_circle":"🟠","large_yellow_circle":"🟡","large_green_circle":"🟢","large_purple_circle":"🟣","large_brown_circle":"🟤","large_red_square":"🟥","large_blue_square":"🟦","large_orange_square":"🟧","large_yellow_square":"🟨","large_green_square":"🟩","large_purple_square":"🟪","large_brown_square":"🟫","pinched_fingers":"🤌","white_heart":"🤍","brown_heart":"🤎","pinching_hand":"🤏","zipper_mouth_face":"🤐","money_mouth_face":"🤑","face_with_thermometer":"🤒","nerd_face":"🤓","thinking_face":"🤔","face_with_head_bandage":"🤕","robot_face":"🤖","hugging_face":"🤗","the_horns":"🤘","sign_of_the_horns":"🤘","call_me_hand":"🤙","raised_back_of_hand":"🤚","left-facing_fist":"🤛","right-facing_fist":"🤜","handshake":"🤝","crossed_fingers":"🤞","hand_with_index_and_middle_fingers_crossed":"🤞","i_love_you_hand_sign":"🤟","face_with_cowboy_hat":"🤠","clown_face":"🤡","nauseated_face":"🤢","rolling_on_the_floor_laughing":"🤣","drooling_face":"🤤","lying_face":"🤥","woman-facepalming":"🤦‍♀️","man-facepalming":"🤦‍♂️","face_palm":"🤦","sneezing_face":"🤧","face_with_raised_eyebrow":"🤨","face_with_one_eyebrow_raised":"🤨","star-struck":"🤩","grinning_face_with_star_eyes":"🤩","zany_face":"🤪","grinning_face_with_one_large_and_one_small_eye":"🤪","shushing_face":"🤫","face_with_finger_covering_closed_lips":"🤫","face_with_symbols_on_mouth":"🤬","serious_face_with_symbols_covering_mouth":"🤬","face_with_hand_over_mouth":"🤭","smiling_face_with_smiling_eyes_and_hand_covering_mouth":"🤭","face_vomiting":"🤮","face_with_open_mouth_vomiting":"🤮","exploding_head":"🤯","shocked_face_with_exploding_head":"🤯","pregnant_woman":"🤰","breast-feeding":"🤱","palms_up_together":"🤲","selfie":"🤳","prince":"🤴","woman_in_tuxedo":"🤵‍♀️","man_in_tuxedo":"🤵‍♂️","person_in_tuxedo":"🤵","mrs_claus":"🤶","mother_christmas":"🤶","woman-shrugging":"🤷‍♀️","man-shrugging":"🤷‍♂️","shrug":"🤷","woman-cartwheeling":"🤸‍♀️","man-cartwheeling":"🤸‍♂️","person_doing_cartwheel":"🤸","woman-juggling":"🤹‍♀️","man-juggling":"🤹‍♂️","juggling":"🤹","fencer":"🤺","woman-wrestling":"🤼‍♀️","man-wrestling":"🤼‍♂️","wrestlers":"🤼","woman-playing-water-polo":"🤽‍♀️","man-playing-water-polo":"🤽‍♂️","water_polo":"🤽","woman-playing-handball":"🤾‍♀️","man-playing-handball":"🤾‍♂️","handball":"🤾","diving_mask":"🤿","wilted_flower":"🥀","drum_with_drumsticks":"🥁","clinking_glasses":"🥂","tumbler_glass":"🥃","spoon":"🥄","goal_net":"🥅","first_place_medal":"🥇","second_place_medal":"🥈","third_place_medal":"🥉","boxing_glove":"🥊","martial_arts_uniform":"🥋","curling_stone":"🥌","lacrosse":"🥍","softball":"🥎","flying_disc":"🥏","croissant":"🥐","avocado":"🥑","cucumber":"🥒","bacon":"🥓","potato":"🥔","carrot":"🥕","baguette_bread":"🥖","green_salad":"🥗","shallow_pan_of_food":"🥘","stuffed_flatbread":"🥙","egg":"🥚","glass_of_milk":"🥛","peanuts":"🥜","kiwifruit":"🥝","pancakes":"🥞","dumpling":"🥟","fortune_cookie":"🥠","takeout_box":"🥡","chopsticks":"🥢","bowl_with_spoon":"🥣","cup_with_straw":"🥤","coconut":"🥥","broccoli":"🥦","pie":"🥧","pretzel":"🥨","cut_of_meat":"🥩","sandwich":"🥪","canned_food":"🥫","leafy_green":"🥬","mango":"🥭","moon_cake":"🥮","bagel":"🥯","smiling_face_with_3_hearts":"🥰","yawning_face":"🥱","smiling_face_with_tear":"🥲","partying_face":"🥳","woozy_face":"🥴","hot_face":"🥵","cold_face":"🥶","ninja":"🥷","disguised_face":"🥸","pleading_face":"🥺","sari":"🥻","lab_coat":"🥼","goggles":"🥽","hiking_boot":"🥾","womans_flat_shoe":"🥿","crab":"🦀","lion_face":"🦁","scorpion":"🦂","turkey":"🦃","unicorn_face":"🦄","eagle":"🦅","duck":"🦆","bat":"🦇","shark":"🦈","owl":"🦉","fox_face":"🦊","butterfly":"🦋","deer":"🦌","gorilla":"🦍","lizard":"🦎","rhinoceros":"🦏","shrimp":"🦐","squid":"🦑","giraffe_face":"🦒","zebra_face":"🦓","hedgehog":"🦔","sauropod":"🦕","t-rex":"🦖","cricket":"🦗","kangaroo":"🦘","llama":"🦙","peacock":"🦚","hippopotamus":"🦛","parrot":"🦜","raccoon":"🦝","lobster":"🦞","mosquito":"🦟","microbe":"🦠","badger":"🦡","swan":"🦢","mammoth":"🦣","dodo":"🦤","sloth":"🦥","otter":"🦦","orangutan":"🦧","skunk":"🦨","flamingo":"🦩","oyster":"🦪","beaver":"🦫","bison":"🦬","seal":"🦭","guide_dog":"🦮","probing_cane":"🦯","bone":"🦴","leg":"🦵","foot":"🦶","tooth":"🦷","female_superhero":"🦸‍♀️","male_superhero":"🦸‍♂️","superhero":"🦸","female_supervillain":"🦹‍♀️","male_supervillain":"🦹‍♂️","supervillain":"🦹","safety_vest":"🦺","ear_with_hearing_aid":"🦻","motorized_wheelchair":"🦼","manual_wheelchair":"🦽","mechanical_arm":"🦾","mechanical_leg":"🦿","cheese_wedge":"🧀","cupcake":"🧁","salt":"🧂","beverage_box":"🧃","garlic":"🧄","onion":"🧅","falafel":"🧆","waffle":"🧇","butter":"🧈","mate_drink":"🧉","ice_cube":"🧊","bubble_tea":"🧋","woman_standing":"🧍‍♀️","man_standing":"🧍‍♂️","standing_person":"🧍","woman_kneeling":"🧎‍♀️","man_kneeling":"🧎‍♂️","kneeling_person":"🧎","deaf_woman":"🧏‍♀️","deaf_man":"🧏‍♂️","deaf_person":"🧏","face_with_monocle":"🧐","farmer":"🧑‍🌾","cook":"🧑‍🍳","person_feeding_baby":"🧑‍🍼","mx_claus":"🧑‍🎄","student":"🧑‍🎓","singer":"🧑‍🎤","artist":"🧑‍🎨","teacher":"🧑‍🏫","factory_worker":"🧑‍🏭","technologist":"🧑‍💻","office_worker":"🧑‍💼","mechanic":"🧑‍🔧","scientist":"🧑‍🔬","astronaut":"🧑‍🚀","firefighter":"🧑‍🚒","people_holding_hands":"🧑‍🤝‍🧑","person_with_probing_cane":"🧑‍🦯","red_haired_person":"🧑‍🦰","curly_haired_person":"🧑‍🦱","bald_person":"🧑‍🦲","white_haired_person":"🧑‍🦳","person_in_motorized_wheelchair":"🧑‍🦼","person_in_manual_wheelchair":"🧑‍🦽","health_worker":"🧑‍⚕️","judge":"🧑‍⚖️","pilot":"🧑‍✈️","adult":"🧑","child":"🧒","older_adult":"🧓","woman_with_beard":"🧔‍♀️","man_with_beard":"🧔‍♂️","bearded_person":"🧔","person_with_headscarf":"🧕","woman_in_steamy_room":"🧖‍♀️","man_in_steamy_room":"🧖‍♂️","person_in_steamy_room":"🧖‍♂️","woman_climbing":"🧗‍♀️","person_climbing":"🧗‍♀️","man_climbing":"🧗‍♂️","woman_in_lotus_position":"🧘‍♀️","person_in_lotus_position":"🧘‍♀️","man_in_lotus_position":"🧘‍♂️","female_mage":"🧙‍♀️","mage":"🧙‍♀️","male_mage":"🧙‍♂️","female_fairy":"🧚‍♀️","fairy":"🧚‍♀️","male_fairy":"🧚‍♂️","female_vampire":"🧛‍♀️","vampire":"🧛‍♀️","male_vampire":"🧛‍♂️","mermaid":"🧜‍♀️","merman":"🧜‍♂️","merperson":"🧜‍♂️","female_elf":"🧝‍♀️","male_elf":"🧝‍♂️","elf":"🧝‍♂️","female_genie":"🧞‍♀️","male_genie":"🧞‍♂️","genie":"🧞‍♂️","female_zombie":"🧟‍♀️","male_zombie":"🧟‍♂️","zombie":"🧟‍♂️","brain":"🧠","orange_heart":"🧡","billed_cap":"🧢","scarf":"🧣","gloves":"🧤","coat":"🧥","socks":"🧦","red_envelope":"🧧","firecracker":"🧨","jigsaw":"🧩","test_tube":"🧪","petri_dish":"🧫","dna":"🧬","compass":"🧭","abacus":"🧮","fire_extinguisher":"🧯","toolbox":"🧰","bricks":"🧱","magnet":"🧲","luggage":"🧳","lotion_bottle":"🧴","thread":"🧵","yarn":"🧶","safety_pin":"🧷","teddy_bear":"🧸","broom":"🧹","basket":"🧺","roll_of_paper":"🧻","soap":"🧼","sponge":"🧽","receipt":"🧾","nazar_amulet":"🧿","ballet_shoes":"🩰","one-piece_swimsuit":"🩱","briefs":"🩲","shorts":"🩳","thong_sandal":"🩴","drop_of_blood":"🩸","adhesive_bandage":"🩹","stethoscope":"🩺","yo-yo":"🪀","kite":"🪁","parachute":"🪂","boomerang":"🪃","magic_wand":"🪄","pinata":"🪅","nesting_dolls":"🪆","ringed_planet":"🪐","chair":"🪑","razor":"🪒","axe":"🪓","diya_lamp":"🪔","banjo":"🪕","military_helmet":"🪖","accordion":"🪗","long_drum":"🪘","coin":"🪙","carpentry_saw":"🪚","screwdriver":"🪛","ladder":"🪜","hook":"🪝","mirror":"🪞","window":"🪟","plunger":"🪠","sewing_needle":"🪡","knot":"🪢","bucket":"🪣","mouse_trap":"🪤","toothbrush":"🪥","headstone":"🪦","placard":"🪧","rock":"🪨","fly":"🪰","worm":"🪱","beetle":"🪲","cockroach":"🪳","potted_plant":"🪴","wood":"🪵","feather":"🪶","anatomical_heart":"🫀","lungs":"🫁","people_hugging":"🫂","blueberries":"🫐","bell_pepper":"🫑","olive":"🫒","flatbread":"🫓","tamale":"🫔","fondue":"🫕","teapot":"🫖","bangbang":"‼️","interrobang":"⁉️","tm":"™️","information_source":"ℹ️","left_right_arrow":"↔️","arrow_up_down":"↕️","arrow_upper_left":"↖️","arrow_upper_right":"↗️","arrow_lower_right":"↘️","arrow_lower_left":"↙️","leftwards_arrow_with_hook":"↩️","arrow_right_hook":"↪️","watch":"⌚","hourglass":"⌛","keyboard":"⌨️","eject":"⏏️","fast_forward":"⏩","rewind":"⏪","arrow_double_up":"⏫","arrow_double_down":"⏬","black_right_pointing_double_triangle_with_vertical_bar":"⏭️","black_left_pointing_double_triangle_with_vertical_bar":"⏮️","black_right_pointing_triangle_with_double_vertical_bar":"⏯️","alarm_clock":"⏰","stopwatch":"⏱️","timer_clock":"⏲️","hourglass_flowing_sand":"⏳","double_vertical_bar":"⏸️","black_square_for_stop":"⏹️","black_circle_for_record":"⏺️","m":"Ⓜ️","black_small_square":"▪️","white_small_square":"▫️","arrow_forward":"▶️","arrow_backward":"◀️","white_medium_square":"◻️","black_medium_square":"◼️","white_medium_small_square":"◽","black_medium_small_square":"◾","sunny":"☀️","cloud":"☁️","umbrella":"☂️","snowman":"☃️","comet":"☄️","phone":"☎️","telephone":"☎️","ballot_box_with_check":"☑️","shamrock":"☘️","point_up":"☝️","skull_and_crossbones":"☠️","radioactive_sign":"☢️","biohazard_sign":"☣️","orthodox_cross":"☦️","star_and_crescent":"☪️","peace_symbol":"☮️","yin_yang":"☯️","wheel_of_dharma":"☸️","white_frowning_face":"☹️","relaxed":"☺️","female_sign":"♀️","male_sign":"♂️","gemini":"♊","cancer":"♋","leo":"♌","virgo":"♍","libra":"♎","scorpius":"♏","chess_pawn":"♟️","spades":"♠️","clubs":"♣️","hearts":"♥️","diamonds":"♦️","hotsprings":"♨️","recycle":"♻️","infinity":"♾️","wheelchair":"♿","hammer_and_pick":"⚒️","crossed_swords":"⚔️","medical_symbol":"⚕️","staff_of_aesculapius":"⚕️","scales":"⚖️","alembic":"⚗️","gear":"⚙️","atom_symbol":"⚛️","fleur_de_lis":"⚜️","warning":"⚠️","zap":"⚡","transgender_symbol":"⚧️","white_circle":"⚪","black_circle":"⚫","coffin":"⚰️","funeral_urn":"⚱️","soccer":"⚽","baseball":"⚾","snowman_without_snow":"⛄","partly_sunny":"⛅","thunder_cloud_and_rain":"⛈️","ophiuchus":"⛎","pick":"⛏️","helmet_with_white_cross":"⛑️","chains":"⛓️","no_entry":"⛔","shinto_shrine":"⛩️","church":"⛪","mountain":"⛰️","umbrella_on_ground":"⛱️","fountain":"⛲","golf":"⛳","ferry":"⛴️","boat":"⛵","sailboat":"⛵","skier":"⛷️","ice_skate":"⛸️","woman-bouncing-ball":"⛹️‍♀️","man-bouncing-ball":"⛹️‍♂️","person_with_ball":"⛹️‍♂️","tent":"⛺","fuelpump":"⛽","scissors":"✂️","airplane":"✈️","email":"✉️","envelope":"✉️","fist":"✊","hand":"✋","raised_hand":"✋","v":"✌️","writing_hand":"✍️","pencil2":"✏️","black_nib":"✒️","heavy_check_mark":"✔️","heavy_multiplication_x":"✖️","latin_cross":"✝️","star_of_david":"✡️","eight_spoked_asterisk":"✳️","eight_pointed_black_star":"✴️","snowflake":"❄️","sparkle":"❇️","x":"❌","negative_squared_cross_mark":"❎","heavy_heart_exclamation_mark_ornament":"❣️","heart_on_fire":"❤️‍🔥","mending_heart":"❤️‍🩹","heart":"❤️","arrow_right":"➡️","curly_loop":"➰","loop":"➿","arrow_heading_up":"⤴️","arrow_heading_down":"⤵️","arrow_left":"⬅️","arrow_up":"⬆️","arrow_down":"⬇️","black_large_square":"⬛","white_large_square":"⬜","star":"⭐","o":"⭕","wavy_dash":"〰️","part_alternation_mark":"〽️","congratulations":"㊗️","secret":"㊙️"}')}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n](o,o.exports,s),o.loaded=!0,o.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e=s(4157),t=s(9412),n=s(4907),i=s(8153),o=s(9378),r=s(7728),a=s(8338),l=s(2650),c=s(6882);const h=()=>o.M,u={callContextMenuFunction:t.vi,callMainMenuFunction:t.nY,setThemeInRenderer:n.cR,push:async()=>{const e=h();e.$repo&&await(0,i.VC)(e.$repo)},fetch:function(){h().$repo?.repo.fetch()},pull:function(){h().$repo?.repo.pull()},goToChanges:()=>{h().$repo?.nav.goToWipView()},goToCommits:()=>{h().$repo?.nav.goToCommitsView()},goToBranches:()=>{h().$repo?.nav.setShowingRefView(!0)},createRepo:()=>(0,r.G)(h()),cloneRepo:()=>(0,a.j)(h()),openRepo:()=>(0,l.NV)(h()),openRecentRepo:async e=>{await h().setRepoPath(e)},closeRepo:()=>(0,l.AT)(h()),showMissingGitDialog:()=>(0,c.a6)(h())};var m=s(8152);e.ipcRenderer.on("call-in-renderer",((t,s)=>{const n={result:u[s.functionName](...s.args),callNum:s.callNum};e.ipcRenderer.send("call-in-renderer",n)})),(0,m.e)(o.M).catch()})()})();